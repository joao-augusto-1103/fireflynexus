import{j as e,S as t,c as r,a as n,u as o,B as i,P as a,V as s,b as c,d as l,e as u,f as d,R as h,g as p,h as f,i as m,k as g,A as v,D as y,C as b,l as x,m as w,n as j,O as S,o as N,p as k,T as E,q as C,r as O,s as T,t as A,v as _,I as P,w as D,x as I,y as M,z as R,E as L,L as F,F as z,G as U,H as q,J as B,K as V,M as $,N as W,Q as H,U as G,W as K,_ as Y,X,Y as J,Z as Q,$ as Z,a0 as ee,a1 as te,a2 as re}from"./ui-cedec4c9.js";import{a as ne,g as oe,r as ie,R as ae,d as se,e as ce}from"./vendor-62511767.js";import{X as le,C as ue,a as de,b as he,m as pe,U as fe,c as me,d as ge,S as ve,e as ye,f as be,F as xe,B as we,A as je,g as Se,h as Ne,E as ke,P as Ee,T as Ce,i as Oe,j as Te,M as Ae,k as _e,l as Pe,n as De,o as Ie,p as Me,D as Re,L as Le,q as Fe,r as ze,s as Ue,t as qe,u as Be,v as Ve,w as $e,Z as We,x as He,y as Ge,z as Ke,G as Ye,I as Xe,H as Je,J as Qe,K as Ze,N as et,O as tt,Q as rt,R as nt,V as ot,W as it,Y as at,_ as st,$ as ct,a0 as lt,a1 as ut,a2 as dt,a3 as ht,a4 as pt,a5 as ft,a6 as mt,a7 as gt,a8 as vt}from"./utils-adcdfd04.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var yt={},bt=ne;yt.createRoot=bt.createRoot,yt.hydrateRoot=bt.hydrateRoot;var xt={exports:{}};function wt(){}function jt(){}jt.resetWarningCache=wt;xt.exports=function(){function e(e,t,r,n,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:jt,resetWarningCache:wt};return r.PropTypes=r,r}();var St=xt.exports;const Nt=oe(St);var kt,Et=ie,Ct=(kt=Et)&&"object"==typeof kt&&"default"in kt?kt.default:kt;function Ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=!("undefined"==typeof window||!window.document||!window.document.createElement);const At=oe(function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var o,i=[];function a(){o=e(i.map(function(e){return e.props})),s.canUseDOM?t(o):r&&(o=r(o))}var s=function(e){var t,r;function s(){return e.apply(this,arguments)||this}r=e,(t=s).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,s.peek=function(){return o},s.rewind=function(){if(s.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=o;return o=void 0,i=[],e};var c=s.prototype;return c.UNSAFE_componentWillMount=function(){i.push(this),a()},c.componentDidUpdate=function(){a()},c.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),a()},c.render=function(){return Ct.createElement(n,this.props)},s}(Et.PureComponent);return Ot(s,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),Ot(s,"canUseDOM",Tt),s}});var _t="undefined"!=typeof Element,Pt="function"==typeof Map,Dt="function"==typeof Set,It="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Mt(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,n,o,i;if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!Mt(e[n],t[n]))return!1;return!0}if(Pt&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!Mt(n.value[1],t.get(n.value[0])))return!1;return!0}if(Dt&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(It&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(_t&&e instanceof Element)return!1;for(n=r;0!==n--;)if(("_owner"!==o[n]&&"__v"!==o[n]&&"__o"!==o[n]||!e.$$typeof)&&!Mt(e[o[n]],t[o[n]]))return!1;return!0}return e!=e&&t!=t}const Rt=oe(function(e,t){try{return Mt(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}});
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Lt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable;const Ut=oe(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var r,n,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))Ft.call(r,a)&&(o[a]=r[a]);if(Lt){n=Lt(r);for(var s=0;s<n.length;s++)zt.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o});var qt="bodyAttributes",Bt="htmlAttributes",Vt="titleAttributes",$t={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys($t).map(function(e){return $t[e]});var Wt,Ht,Gt,Kt,Yt="charset",Xt="cssText",Jt="href",Qt="http-equiv",Zt="innerHTML",er="itemprop",tr="name",rr="property",nr="rel",or="src",ir="target",ar={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},sr="defaultTitle",cr="defer",lr="encodeSpecialCharacters",ur="onChangeClientState",dr="titleTemplate",hr=Object.keys(ar).reduce(function(e,t){return e[ar[t]]=t,e},{}),pr=[$t.NOSCRIPT,$t.SCRIPT,$t.STYLE],fr="data-react-helmet",mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yr=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},br=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},xr=function(e){var t=kr(e,$t.TITLE),r=kr(e,dr);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var n=kr(e,sr);return t||n||void 0},wr=function(e){return kr(e,ur)||function(){}},jr=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return vr({},e,t)},{})},Sr=function(e,t){return t.filter(function(e){return void 0!==e[$t.BASE]}).map(function(e){return e[$t.BASE]}).reverse().reduce(function(t,r){if(!t.length)for(var n=Object.keys(r),o=0;o<n.length;o++){var i=n[o].toLowerCase();if(-1!==e.indexOf(i)&&r[i])return t.concat(r)}return t},[])},Nr=function(e,t,r){var n={};return r.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&Ar("Helmet: "+e+' should be of type "Array". Instead found type "'+mr(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,r){var o={};r.filter(function(e){for(var r=void 0,i=Object.keys(e),a=0;a<i.length;a++){var s=i[a],c=s.toLowerCase();-1===t.indexOf(c)||r===nr&&"canonical"===e[r].toLowerCase()||c===nr&&"stylesheet"===e[c].toLowerCase()||(r=c),-1===t.indexOf(s)||s!==Zt&&s!==Xt&&s!==er||(r=s)}if(!r||!e[r])return!1;var l=e[r].toLowerCase();return n[r]||(n[r]={}),o[r]||(o[r]={}),!n[r][l]&&(o[r][l]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var i=Object.keys(o),a=0;a<i.length;a++){var s=i[a],c=Ut({},n[s],o[s]);n[s]=c}return e},[]).reverse()},kr=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},Er=(Wt=Date.now(),function(e){var t=Date.now();t-Wt>16?(Wt=t,e(t)):setTimeout(function(){Er(e)},0)}),Cr=function(e){return clearTimeout(e)},Or="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Er:global.requestAnimationFrame||Er,Tr="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Cr:global.cancelAnimationFrame||Cr,Ar=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},_r=null,Pr=function(e,t){var r=e.baseTag,n=e.bodyAttributes,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.onChangeClientState,l=e.scriptTags,u=e.styleTags,d=e.title,h=e.titleAttributes;Mr($t.BODY,n),Mr($t.HTML,o),Ir(d,h);var p={baseTag:Rr($t.BASE,r),linkTags:Rr($t.LINK,i),metaTags:Rr($t.META,a),noscriptTags:Rr($t.NOSCRIPT,s),scriptTags:Rr($t.SCRIPT,l),styleTags:Rr($t.STYLE,u)},f={},m={};Object.keys(p).forEach(function(e){var t=p[e],r=t.newTags,n=t.oldTags;r.length&&(f[e]=r),n.length&&(m[e]=p[e].oldTags)}),t&&t(),c(e,f,m)},Dr=function(e){return Array.isArray(e)?e.join(""):e},Ir=function(e,t){void 0!==e&&document.title!==e&&(document.title=Dr(e)),Mr($t.TITLE,t)},Mr=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(fr),o=n?n.split(","):[],i=[].concat(o),a=Object.keys(t),s=0;s<a.length;s++){var c=a[s],l=t[c]||"";r.getAttribute(c)!==l&&r.setAttribute(c,l),-1===o.indexOf(c)&&o.push(c);var u=i.indexOf(c);-1!==u&&i.splice(u,1)}for(var d=i.length-1;d>=0;d--)r.removeAttribute(i[d]);o.length===i.length?r.removeAttribute(fr):r.getAttribute(fr)!==a.join(",")&&r.setAttribute(fr,a.join(","))}},Rr=function(e,t){var r=document.head||document.querySelector($t.HEAD),n=r.querySelectorAll(e+"["+fr+"]"),o=Array.prototype.slice.call(n),i=[],a=void 0;return t&&t.length&&t.forEach(function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===Zt)r.innerHTML=t.innerHTML;else if(n===Xt)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var s=void 0===t[n]?"":t[n];r.setAttribute(n,s)}r.setAttribute(fr,"true"),o.some(function(e,t){return a=t,r.isEqualNode(e)})?o.splice(a,1):i.push(r)}),o.forEach(function(e){return e.parentNode.removeChild(e)}),i.forEach(function(e){return r.appendChild(e)}),{oldTags:o,newTags:i}},Lr=function(e){return Object.keys(e).reduce(function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n},"")},Fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[ar[r]||r]=e[r],t},t)},zr=function(e,t,r){switch(e){case $t.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(n={key:e})[fr]=!0,o=Fr(r,n),[ae.createElement($t.TITLE,o,e)];var e,r,n,o},toString:function(){return function(e,t,r,n){var o=Lr(r),i=Dr(t);return o?"<"+e+" "+fr+'="true" '+o+">"+br(i,n)+"</"+e+">":"<"+e+" "+fr+'="true">'+br(i,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case qt:case Bt:return{toComponent:function(){return Fr(t)},toString:function(){return Lr(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,r){var n,o=((n={key:r})[fr]=!0,n);return Object.keys(t).forEach(function(e){var r=ar[e]||e;if(r===Zt||r===Xt){var n=t.innerHTML||t.cssText;o.dangerouslySetInnerHTML={__html:n}}else o[r]=t[e]}),ae.createElement(e,o)})}(e,t)},toString:function(){return function(e,t,r){return t.reduce(function(t,n){var o=Object.keys(n).filter(function(e){return!(e===Zt||e===Xt)}).reduce(function(e,t){var o=void 0===n[t]?t:t+'="'+br(n[t],r)+'"';return e?e+" "+o:o},""),i=n.innerHTML||n.cssText||"",a=-1===pr.indexOf(e);return t+"<"+e+" "+fr+'="true" '+o+(a?"/>":">"+i+"</"+e+">")},"")}(e,t,r)}}}},Ur=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,o=e.htmlAttributes,i=e.linkTags,a=e.metaTags,s=e.noscriptTags,c=e.scriptTags,l=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:zr($t.BASE,t,n),bodyAttributes:zr(qt,r,n),htmlAttributes:zr(Bt,o,n),link:zr($t.LINK,i,n),meta:zr($t.META,a,n),noscript:zr($t.NOSCRIPT,s,n),script:zr($t.SCRIPT,c,n),style:zr($t.STYLE,l,n),title:zr($t.TITLE,{title:d,titleAttributes:h},n)}},qr=At(function(e){return{baseTag:Sr([Jt,ir],e),bodyAttributes:jr(qt,e),defer:kr(e,cr),encode:kr(e,lr),htmlAttributes:jr(Bt,e),linkTags:Nr($t.LINK,[nr,Jt],e),metaTags:Nr($t.META,[tr,Yt,Qt,rr,er],e),noscriptTags:Nr($t.NOSCRIPT,[Zt],e),onChangeClientState:wr(e),scriptTags:Nr($t.SCRIPT,[or,Zt],e),styleTags:Nr($t.STYLE,[Xt],e),title:xr(e),titleAttributes:jr(Vt,e)}},function(e){_r&&Tr(_r),e.defer?_r=Or(function(){Pr(e,function(){_r=null})}):(Pr(e),_r=null)},Ur)(function(){return null}),Br=(Ht=qr,Kt=Gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!Rt(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case $t.SCRIPT:case $t.NOSCRIPT:return{innerHTML:t};case $t.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren,o=e.newChildProps,i=e.nestedChildren;return vr({},n,((t={})[r.type]=[].concat(n[r.type]||[],[vr({},o,this.mapNestedChildrenToProps(r,i))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,n=e.child,o=e.newProps,i=e.newChildProps,a=e.nestedChildren;switch(n.type){case $t.TITLE:return vr({},o,((t={})[n.type]=a,t.titleAttributes=vr({},i),t));case $t.BODY:return vr({},o,{bodyAttributes:vr({},i)});case $t.HTML:return vr({},o,{htmlAttributes:vr({},i)})}return vr({},o,((r={})[n.type]=vr({},i),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=vr({},t);return Object.keys(e).forEach(function(t){var n;r=vr({},r,((n={})[t]=e[t],n))}),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var r=this,n={};return ae.Children.forEach(e,function(e){if(e&&e.props){var o=e.props,i=o.children,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[hr[r]||r]=e[r],t},t)}(yr(o,["children"]));switch(r.warnOnInvalidChildren(e,i),e.type){case $t.LINK:case $t.META:case $t.NOSCRIPT:case $t.SCRIPT:case $t.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:a,nestedChildren:i});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:i})}}}),t=this.mapArrayTypeChildrenToProps(n,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=yr(e,["children"]),n=vr({},r);return t&&(n=this.mapChildrenToProps(t,n)),ae.createElement(Ht,n)},gr(t,null,[{key:"canUseDOM",set:function(e){Ht.canUseDOM=e}}]),t}(ae.Component),Gt.propTypes={base:Nt.object,bodyAttributes:Nt.object,children:Nt.oneOfType([Nt.arrayOf(Nt.node),Nt.node]),defaultTitle:Nt.string,defer:Nt.bool,encodeSpecialCharacters:Nt.bool,htmlAttributes:Nt.object,link:Nt.arrayOf(Nt.object),meta:Nt.arrayOf(Nt.object),noscript:Nt.arrayOf(Nt.object),onChangeClientState:Nt.func,script:Nt.arrayOf(Nt.object),style:Nt.arrayOf(Nt.object),title:Nt.string,titleAttributes:Nt.object,titleTemplate:Nt.string},Gt.defaultProps={defer:!0,encodeSpecialCharacters:!0},Gt.peek=Ht.peek,Gt.rewind=function(){var e=Ht.rewind();return e||(e=Ur({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},Kt);function Vr(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Vr(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $r(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Vr(e))&&(n&&(n+=" "),n+=t);return n}function Wr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Hr(e))&&(n&&(n+=" "),n+=t);return n}function Hr(e){if("string"==typeof e)return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=Hr(e[n]))&&(r&&(r+=" "),r+=t);return r}Br.renderStatic=Br.rewind;function Gr(e){var t=function(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},o=function(e,t){if(!t)return e;return e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){var r=e[0],n=e[1];return[t+r,n]})):e})]})}(Object.entries(e.classGroups),r);return o.forEach(function(e){var r=e[0];Xr(e[1],n,r,t)}),n}(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,o=void 0===n?{}:n;return{getClassGroupId:function(e){var r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Kr(r,t)||function(e){if(Yr.test(e)){var t=Yr.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}(e)},getConflictingClassGroupIds:function(e,t){var n=r[e]||[];return t&&o[e]?[].concat(n,o[e]):n}}}function Kr(e,t){var r;if(0===e.length)return t.classGroupId;var n=e[0],o=t.nextPart.get(n),i=o?Kr(e.slice(1),o):void 0;if(i)return i;if(0!==t.validators.length){var a=e.join("-");return null==(r=t.validators.find(function(e){return(0,e.validator)(a)}))?void 0:r.classGroupId}}var Yr=/^\[(.+)\]$/;function Xr(e,t,r,n){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void Xr(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(function(e){var o=e[0];Xr(e[1],Jr(t,o),r,n)})}else{(""===e?t:Jr(t,e)).classGroupId=r}})}function Jr(e,t){var r=e;return t.split("-").forEach(function(e){r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r}function Qr(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function o(o,i){r.set(o,i),++t>e&&(t=0,n=r,r=new Map)}return{get:function(e){var t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(o(e,t),t):void 0},set:function(e,t){r.has(e)?r.set(e,t):o(e,t)}}}function Zr(e){var t=e.separator||":",r=1===t.length,n=t[0],o=t.length;return function(e){for(var i,a=[],s=0,c=0,l=0;l<e.length;l++){var u=e[l];if(0===s){if(u===n&&(r||e.slice(l,l+o)===t)){a.push(e.slice(c,l)),c=l+o;continue}if("/"===u){i=l;continue}}"["===u?s++:"]"===u&&s--}var d=0===a.length?e:e.substring(c),h=d.startsWith("!");return{modifiers:a,hasImportantModifier:h,baseClassName:h?d.substring(1):d,maybePostfixModifierPosition:i&&i>c?i-c:void 0}}}var en=/\s+/;function tn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,a=function(e){var r=t[0],c=t.slice(1).reduce(function(e,t){return t(e)},r());return n=function(e){return{cache:Qr(e.cacheSize),splitModifiers:Zr(e),...Gr(e)}}(c),o=n.cache.get,i=n.cache.set,a=s,s(e)};function s(e){var t=o(e);if(t)return t;var r=function(e,t){var r=t.splitModifiers,n=t.getClassGroupId,o=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(en).map(function(e){var t=r(e),o=t.modifiers,i=t.hasImportantModifier,a=t.baseClassName,s=t.maybePostfixModifierPosition,c=n(s?a.substring(0,s):a),l=Boolean(s);if(!c){if(!s)return{isTailwindClass:!1,originalClassName:e};if(!(c=n(a)))return{isTailwindClass:!1,originalClassName:e};l=!1}var u=function(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,r.sort().concat([e])),r=[]):r.push(e)}),t.push.apply(t,r.sort()),t}(o).join(":");return{isTailwindClass:!0,modifierId:i?u+"!":u,classGroupId:c,originalClassName:e,hasPostfixModifier:l}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,r=e.classGroupId,n=e.hasPostfixModifier,a=t+r;return!i.has(a)&&(i.add(a),o(r,n).forEach(function(e){return i.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}(e,n);return i(e,r),r}return function(){return a(Wr.apply(null,arguments))}}function rn(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var nn=/^\[(?:([a-z-]+):)?(.+)\]$/i,on=/^\d+\/\d+$/,an=new Set(["px","full","screen"]),sn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ln=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function un(e){return gn(e)||an.has(e)||on.test(e)||dn(e)}function dn(e){return Sn(e,"length",Nn)}function hn(e){return Sn(e,"size",kn)}function pn(e){return Sn(e,"position",kn)}function fn(e){return Sn(e,"url",En)}function mn(e){return Sn(e,"number",gn)}function gn(e){return!Number.isNaN(Number(e))}function vn(e){return e.endsWith("%")&&gn(e.slice(0,-1))}function yn(e){return Cn(e)||Sn(e,"number",Cn)}function bn(e){return nn.test(e)}function xn(){return!0}function wn(e){return sn.test(e)}function jn(e){return Sn(e,"",On)}function Sn(e,t,r){var n=nn.exec(e);return!!n&&(n[1]?n[1]===t:r(n[2]))}function Nn(e){return cn.test(e)}function kn(){return!1}function En(e){return e.startsWith("url(")}function Cn(e){return Number.isInteger(Number(e))}function On(e){return ln.test(e)}function Tn(){var e=rn("colors"),t=rn("spacing"),r=rn("blur"),n=rn("brightness"),o=rn("borderColor"),i=rn("borderRadius"),a=rn("borderSpacing"),s=rn("borderWidth"),c=rn("contrast"),l=rn("grayscale"),u=rn("hueRotate"),d=rn("invert"),h=rn("gap"),p=rn("gradientColorStops"),f=rn("gradientColorStopPositions"),m=rn("inset"),g=rn("margin"),v=rn("opacity"),y=rn("padding"),b=rn("saturate"),x=rn("scale"),w=rn("sepia"),j=rn("skew"),S=rn("space"),N=rn("translate"),k=function(){return["auto",bn,t]},E=function(){return[bn,t]},C=function(){return["",un]},O=function(){return["auto",gn,bn]},T=function(){return["","0",bn]},A=function(){return[gn,mn]},_=function(){return[gn,bn]};return{cacheSize:500,theme:{colors:[xn],spacing:[un],blur:["none","",wn,bn],brightness:A(),borderColor:[e],borderRadius:["none","","full",wn,bn],borderSpacing:E(),borderWidth:C(),contrast:A(),grayscale:T(),hueRotate:_(),invert:T(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[vn,dn],inset:k(),margin:k(),opacity:A(),padding:E(),saturate:A(),scale:A(),sepia:T(),skew:_(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",bn]}],container:["container"],columns:[{columns:[wn]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[bn])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yn]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bn]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",yn]}],"grid-cols":[{"grid-cols":[xn]}],"col-start-end":[{col:["auto",{span:["full",yn]},bn]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[xn]}],"row-start-end":[{row:["auto",{span:[yn]},bn]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",bn,t]}],"min-w":[{"min-w":["min","max","fit",bn,un]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[wn]},wn,bn]}],h:[{h:[bn,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",bn,un]}],"max-h":[{"max-h":[bn,t,"min","max","fit"]}],"font-size":[{text:["base",wn,dn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mn]}],"font-family":[{font:[xn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bn]}],"line-clamp":[{"line-clamp":["none",gn,mn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bn,un]}],"list-image":[{"list-image":["none",bn]}],"list-style-type":[{list:["none","disc","decimal",bn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",un]}],"underline-offset":[{"underline-offset":["auto",bn,un]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[pn])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hn]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fn]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[bn,un]}],"outline-w":[{outline:[un]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[un]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",wn,jn]}],"shadow-color":[{shadow:[xn]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wn,bn]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bn]}],duration:[{duration:_()}],ease:[{ease:["linear","in","out","in-out",bn]}],delay:[{delay:_()}],animate:[{animate:["none","spin","ping","pulse","bounce",bn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[yn,bn]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bn]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[un,mn]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var An=tn(Tn);function _n(...e){return An($r(e))}const Pn=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Dn=$r,In=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Dn(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:o,defaultVariants:i}=t,a=Object.keys(o).map(e=>{const t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;const a=Pn(t)||Pn(n);return o[e][a]}),s=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),c=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...s}[t]):{...i,...s}[t]===r})?[...e,r,n]:e},[]);return Dn(e,a,c,null==r?void 0:r.class,null==r?void 0:r.className)},Mn=In("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Rn=ae.forwardRef(({className:r,variant:n,size:o,asChild:i=!1,...a},s)=>{const c=i?t:"button";return e.jsx(c,{className:_n(Mn({variant:n,size:o,className:r})),ref:s,...a})});Rn.displayName="Button";var Ln="ToastProvider",[Fn,zn,Un]=r("Toast"),[qn,Bn]=n("Toast",[Un]),[Vn,$n]=qn(Ln),Wn=t=>{const{__scopeToast:r,label:n="Notification",duration:o=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:s}=t,[c,l]=ie.useState(null),[u,d]=ie.useState(0),h=ie.useRef(!1),p=ie.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ln}\`. Expected non-empty \`string\`.`),e.jsx(Fn.Provider,{scope:r,children:e.jsx(Vn,{scope:r,label:n,duration:o,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:ie.useCallback(()=>d(e=>e+1),[]),onToastRemove:ie.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:s})})};Wn.displayName=Ln;var Hn="ToastViewport",Gn=["F8"],Kn="toast.viewportPause",Yn="toast.viewportResume",Xn=ie.forwardRef((t,r)=>{const{__scopeToast:n,hotkey:s=Gn,label:c="Notifications ({hotkey})",...l}=t,u=$n(Hn,n),d=zn(n),h=ie.useRef(null),p=ie.useRef(null),f=ie.useRef(null),m=ie.useRef(null),g=o(r,m,u.onViewportChange),v=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=u.toastCount>0;ie.useEffect(()=>{const e=e=>{var t;0!==s.length&&s.every(t=>e[t]||e.code===t)&&(null==(t=m.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),ie.useEffect(()=>{const e=h.current,t=m.current;if(y&&e&&t){const r=()=>{if(!u.isClosePausedRef.current){const e=new CustomEvent(Kn);t.dispatchEvent(e),u.isClosePausedRef.current=!0}},n=()=>{if(u.isClosePausedRef.current){const e=new CustomEvent(Yn);t.dispatchEvent(e),u.isClosePausedRef.current=!1}},o=t=>{!e.contains(t.relatedTarget)&&n()},i=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",o),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",i),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",o),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[y,u.isClosePausedRef]);const b=ie.useCallback(({tabbingDirection:e})=>{const t=d().map(t=>{const r=t.ref.current,n=[r,...go(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return ie.useEffect(()=>{const e=m.current;if(e){const t=t=>{var r,n,o;const i=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!i){const i=document.activeElement,a=t.shiftKey;if(t.target===e&&a)return void(null==(r=p.current)||r.focus());const s=b({tabbingDirection:a?"backwards":"forwards"}),c=s.findIndex(e=>e===i);vo(s.slice(c+1))?t.preventDefault():a?null==(n=p.current)||n.focus():null==(o=f.current)||o.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,b]),e.jsxs(i,{ref:h,role:"region","aria-label":c.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&e.jsx(Qn,{ref:p,onFocusFromOutsideViewport:()=>{vo(b({tabbingDirection:"forwards"}))}}),e.jsx(Fn.Slot,{scope:n,children:e.jsx(a.ol,{tabIndex:-1,...l,ref:g})}),y&&e.jsx(Qn,{ref:f,onFocusFromOutsideViewport:()=>{vo(b({tabbingDirection:"backwards"}))}})]})});Xn.displayName=Hn;var Jn="ToastFocusProxy",Qn=ie.forwardRef((t,r)=>{const{__scopeToast:n,onFocusFromOutsideViewport:o,...i}=t,a=$n(Jn,n);return e.jsx(s,{tabIndex:0,...i,ref:r,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=a.viewport)?void 0:t.contains(r))&&o()}})});Qn.displayName=Jn;var Zn="Toast",eo=ie.forwardRef((t,r)=>{const{forceMount:n,open:o,defaultOpen:i,onOpenChange:a,...s}=t,[h,p]=c({prop:o,defaultProp:i??!0,onChange:a,caller:Zn});return e.jsx(l,{present:n||h,children:e.jsx(no,{open:h,...s,ref:r,onClose:()=>p(!1),onPause:u(t.onPause),onResume:u(t.onResume),onSwipeStart:d(t.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:d(t.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:d(t.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:d(t.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),p(!1)})})})});eo.displayName=Zn;var[to,ro]=qn(Zn,{onClose(){}}),no=ie.forwardRef((t,r)=>{const{__scopeToast:n,type:i="foreground",duration:s,open:c,onClose:l,onEscapeKeyDown:p,onPause:f,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:b,...x}=t,w=$n(Zn,n),[j,S]=ie.useState(null),N=o(r,e=>S(e)),k=ie.useRef(null),E=ie.useRef(null),C=s||w.duration,O=ie.useRef(0),T=ie.useRef(C),A=ie.useRef(0),{onToastAdd:_,onToastRemove:P}=w,D=u(()=>{var e;(null==j?void 0:j.contains(document.activeElement))&&(null==(e=w.viewport)||e.focus()),l()}),I=ie.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(A.current),O.current=(new Date).getTime(),A.current=window.setTimeout(D,e))},[D]);ie.useEffect(()=>{const e=w.viewport;if(e){const t=()=>{I(T.current),null==m||m()},r=()=>{const e=(new Date).getTime()-O.current;T.current=T.current-e,window.clearTimeout(A.current),null==f||f()};return e.addEventListener(Kn,r),e.addEventListener(Yn,t),()=>{e.removeEventListener(Kn,r),e.removeEventListener(Yn,t)}}},[w.viewport,C,f,m,I]),ie.useEffect(()=>{c&&!w.isClosePausedRef.current&&I(C)},[c,C,w.isClosePausedRef,I]),ie.useEffect(()=>(_(),()=>P()),[_,P]);const M=ie.useMemo(()=>j?po(j):null,[j]);return w.viewport?e.jsxs(e.Fragment,{children:[M&&e.jsx(oo,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite",children:M}),e.jsx(to,{scope:n,onClose:D,children:ne.createPortal(e.jsx(Fn.ItemSlot,{scope:n,children:e.jsx(h,{asChild:!0,onEscapeKeyDown:d(p,()=>{w.isFocusedToastEscapeKeyDownRef.current||D(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(a.li,{tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":w.swipeDirection,...x,ref:N,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:d(t.onKeyDown,e=>{"Escape"===e.key&&(null==p||p(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:d(t.onPointerDown,e=>{0===e.button&&(k.current={x:e.clientX,y:e.clientY})}),onPointerMove:d(t.onPointerMove,e=>{if(!k.current)return;const t=e.clientX-k.current.x,r=e.clientY-k.current.y,n=Boolean(E.current),o=["left","right"].includes(w.swipeDirection),i=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,a=o?i(0,t):0,s=o?0:i(0,r),c="touch"===e.pointerType?10:2,l={x:a,y:s},u={originalEvent:e,delta:l};n?(E.current=l,fo("toast.swipeMove",v,u,{discrete:!1})):mo(l,w.swipeDirection,c)?(E.current=l,fo("toast.swipeStart",g,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>c||Math.abs(r)>c)&&(k.current=null)}),onPointerUp:d(t.onPointerUp,e=>{const t=E.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),E.current=null,k.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};mo(t,w.swipeDirection,w.swipeThreshold)?fo("toast.swipeEnd",b,n,{discrete:!0}):fo("toast.swipeCancel",y,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),oo=t=>{const{__scopeToast:r,children:n,...o}=t,i=$n(Zn,r),[a,c]=ie.useState(!1),[l,d]=ie.useState(!1);return function(e=()=>{}){const t=u(e);f(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>c(!0)),ie.useEffect(()=>{const e=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:e.jsx(p,{asChild:!0,children:e.jsx(s,{...o,children:a&&e.jsxs(e.Fragment,{children:[i.label," ",n]})})})},io=ie.forwardRef((t,r)=>{const{__scopeToast:n,...o}=t;return e.jsx(a.div,{...o,ref:r})});io.displayName="ToastTitle";var ao=ie.forwardRef((t,r)=>{const{__scopeToast:n,...o}=t;return e.jsx(a.div,{...o,ref:r})});ao.displayName="ToastDescription";var so="ToastAction",co=ie.forwardRef((t,r)=>{const{altText:n,...o}=t;return n.trim()?e.jsx(ho,{altText:n,asChild:!0,children:e.jsx(uo,{...o,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${so}\`. Expected non-empty \`string\`.`),null)});co.displayName=so;var lo="ToastClose",uo=ie.forwardRef((t,r)=>{const{__scopeToast:n,...o}=t,i=ro(lo,n);return e.jsx(ho,{asChild:!0,children:e.jsx(a.button,{type:"button",...o,ref:r,onClick:d(t.onClick,i.onClose)})})});uo.displayName=lo;var ho=ie.forwardRef((t,r)=>{const{__scopeToast:n,altText:o,...i}=t;return e.jsx(a.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...i,ref:r})});function po(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...po(e))}}),t}function fo(e,t,r,{discrete:n}){const o=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?m(o,i):o.dispatchEvent(i)}var mo=(e,t,r=0)=>{const n=Math.abs(e.x),o=Math.abs(e.y),i=n>o;return"left"===t||"right"===t?i&&n>r:!i&&o>r};function go(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function vo(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var yo=Xn,bo=eo,xo=io,wo=ao,jo=co,So=uo;const No=Wn,ko=ae.forwardRef(({className:t,...r},n)=>e.jsx(yo,{ref:n,className:_n("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));ko.displayName=yo.displayName;const Eo=In("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Co=ae.forwardRef(({className:t,variant:r,...n},o)=>e.jsx(bo,{ref:o,className:_n(Eo({variant:r}),t),...n}));Co.displayName=bo.displayName;ae.forwardRef(({className:t,...r},n)=>e.jsx(jo,{ref:n,className:_n("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r})).displayName=jo.displayName;const Oo=ae.forwardRef(({className:t,...r},n)=>e.jsx(So,{ref:n,className:_n("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e.jsx(le,{className:"h-4 w-4"})}));Oo.displayName=So.displayName;const To=ae.forwardRef(({className:t,...r},n)=>e.jsx(xo,{ref:n,className:_n("text-sm font-semibold",t),...r}));To.displayName=xo.displayName;const Ao=ae.forwardRef(({className:t,...r},n)=>e.jsx(wo,{ref:n,className:_n("text-sm opacity-90",t),...r}));Ao.displayName=wo.displayName;let _o=0;const Po={state:{toasts:[]},listeners:[],getState:()=>Po.state,setState:e=>{Po.state="function"==typeof e?e(Po.state):{...Po.state,...e},Po.listeners.forEach(e=>e(Po.state))},subscribe:e=>(Po.listeners.push(e),()=>{Po.listeners=Po.listeners.filter(t=>t!==e)})},Do=({...e})=>{const t=(_o=(_o+1)%Number.MAX_VALUE,_o.toString()),r=()=>Po.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==t)}));return Po.setState(n=>({...n,toasts:[{...e,id:t,dismiss:r},...n.toasts].slice(0,5)})),{id:t,dismiss:r,update:e=>Po.setState(r=>({...r,toasts:r.toasts.map(r=>r.id===t?{...r,...e}:r)}))}};function Io(){const[e,t]=ie.useState(Po.getState());return ie.useEffect(()=>Po.subscribe(e=>{t(e)}),[]),ie.useEffect(()=>{const t=[];return e.toasts.forEach(e=>{if(e.duration===1/0)return;const r=setTimeout(()=>{e.dismiss()},e.duration||5e3);t.push(r)}),()=>{t.forEach(e=>clearTimeout(e))}},[e.toasts]),{toast:Do,toasts:e.toasts}}function Mo(){const{toasts:t}=Io();return e.jsxs(No,{children:[t.map(({id:t,title:r,description:n,action:o,...i})=>e.jsxs(Co,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(To,{children:r}),n&&e.jsx(Ao,{children:n})]}),o,e.jsx(Oo,{})]},t)),e.jsx(ko,{})]})}var[Ro,Lo]=n("Tooltip",[g]),Fo=g(),zo="tooltip.open",[Uo,qo]=Ro("TooltipProvider"),Bo="Tooltip",[Vo,$o]=Ro(Bo),Wo="TooltipTrigger";ie.forwardRef((t,r)=>{const{__scopeTooltip:n,...i}=t,s=$o(Wo,n),c=qo(Wo,n),l=Fo(n),u=ie.useRef(null),h=o(r,u,s.onTriggerChange),p=ie.useRef(!1),f=ie.useRef(!1),m=ie.useCallback(()=>p.current=!1,[]);return ie.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(v,{asChild:!0,...l,children:e.jsx(a.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:h,onPointerMove:d(t.onPointerMove,e=>{"touch"!==e.pointerType&&(f.current||c.isPointerInTransitRef.current||(s.onTriggerEnter(),f.current=!0))}),onPointerLeave:d(t.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:d(t.onPointerDown,()=>{s.open&&s.onClose(),p.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:d(t.onFocus,()=>{p.current||s.onOpen()}),onBlur:d(t.onBlur,s.onClose),onClick:d(t.onClick,s.onClose)})})}).displayName=Wo;var[Ho,Go]=Ro("TooltipPortal",{forceMount:void 0}),Ko="TooltipContent",Yo=ie.forwardRef((t,r)=>{const n=Go(Ko,t.__scopeTooltip),{forceMount:o=n.forceMount,side:i="top",...a}=t,s=$o(Ko,t.__scopeTooltip);return e.jsx(l,{present:o||s.open,children:s.disableHoverableContent?e.jsx(ei,{side:i,...a,ref:r}):e.jsx(Xo,{side:i,...a,ref:r})})}),Xo=ie.forwardRef((t,r)=>{const n=$o(Ko,t.__scopeTooltip),i=qo(Ko,t.__scopeTooltip),a=ie.useRef(null),s=o(r,a),[c,l]=ie.useState(null),{trigger:u,onClose:d}=n,h=a.current,{onPointerInTransitChange:p}=i,f=ie.useCallback(()=>{l(null),p(!1)},[p]),m=ie.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},o=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,o,i)){case i:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...o,...function(e){const{top:t,right:r,bottom:n,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:n},{x:o,y:n}]}(t.getBoundingClientRect())]);l(i),p(!0)},[p]);return ie.useEffect(()=>()=>f(),[f]),ie.useEffect(()=>{if(u&&h){const e=e=>m(e,h),t=e=>m(e,u);return u.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}},[u,h,m,f]),ie.useEffect(()=>{if(c){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=(null==u?void 0:u.contains(t))||(null==h?void 0:h.contains(t)),o=!function(e,t){const{x:r,y:n}=e;let o=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const e=t[i],s=t[a],c=e.x,l=e.y,u=s.x,d=s.y;l>n!=d>n&&r<(u-c)*(n-l)/(d-l)+c&&(o=!o)}return o}(r,c);n?f():o&&(f(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,h,c,d,f]),e.jsx(ei,{...t,ref:s})}),[Jo,Qo]=Ro(Bo,{isInside:!1}),Zo=j("TooltipContent"),ei=ie.forwardRef((t,r)=>{const{__scopeTooltip:n,children:o,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...c}=t,l=$o(Ko,n),u=Fo(n),{onClose:d}=l;return ie.useEffect(()=>(document.addEventListener(zo,d),()=>document.removeEventListener(zo,d)),[d]),ie.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),e.jsx(y,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:e.jsxs(b,{"data-state":l.stateAttribute,...u,...c,ref:r,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Zo,{children:o}),e.jsx(Jo,{scope:n,isInside:!0,children:e.jsx(x,{id:l.contentId,role:"tooltip",children:i||o})})]})})});Yo.displayName=Ko;var ti="TooltipArrow";ie.forwardRef((t,r)=>{const{__scopeTooltip:n,...o}=t,i=Fo(n);return Qo(ti,n).isInside?null:e.jsx(w,{...i,...o,ref:r})}).displayName=ti;var ri=Yo;ae.forwardRef(({className:t,sideOffset:r=4,...n},o)=>e.jsx(ri,{ref:o,sideOffset:r,className:_n("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})).displayName=ri.displayName;const ni=T,oi=A,ii=O,ai=ae.forwardRef(({className:t,...r},n)=>e.jsx(S,{ref:n,className:_n("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));ai.displayName=S.displayName;const si=ae.forwardRef(({className:t,children:r,...n},o)=>e.jsxs(ii,{children:[e.jsx(ai,{}),e.jsxs(N,{ref:o,className:_n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,e.jsxs(k,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));si.displayName=N.displayName;const ci=({className:t,...r})=>e.jsx("div",{className:_n("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});ci.displayName="DialogHeader";const li=({className:t,...r})=>e.jsx("div",{className:_n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});li.displayName="DialogFooter";const ui=ae.forwardRef(({className:t,...r},n)=>e.jsx(E,{ref:n,className:_n("text-lg font-semibold leading-none tracking-tight",t),...r}));ui.displayName=E.displayName;const di=ae.forwardRef(({className:t,...r},n)=>e.jsx(C,{ref:n,className:_n("text-sm text-muted-foreground",t),...r}));di.displayName=C.displayName;const hi=ae.forwardRef(({className:t,type:r,...n},o)=>e.jsx("input",{type:r,className:_n("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...n}));hi.displayName="Input";var pi=ie.forwardRef((t,r)=>e.jsx(a.label,{...t,ref:r,onMouseDown:e=>{var r;e.target.closest("button, input, select, textarea")||(null==(r=t.onMouseDown)||r.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));pi.displayName="Label";var fi=pi;const mi=In("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gi=ae.forwardRef(({className:t,...r},n)=>e.jsx(fi,{ref:n,className:_n(mi(),t),...r}));gi.displayName=fi.displayName;const vi=ae.forwardRef(({className:t,...r},n)=>e.jsx("textarea",{className:_n("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));vi.displayName="Textarea";const yi=V,bi=$,xi=ae.forwardRef(({className:t,children:r,...n},o)=>e.jsxs(_,{ref:o,className:_n("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,e.jsx(P,{asChild:!0,children:e.jsx(ue,{className:"h-4 w-4 opacity-50"})})]}));xi.displayName=_.displayName;const wi=ae.forwardRef(({className:t,...r},n)=>e.jsx(D,{ref:n,className:_n("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(de,{className:"h-4 w-4"})}));wi.displayName=D.displayName;const ji=ae.forwardRef(({className:t,...r},n)=>e.jsx(I,{ref:n,className:_n("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(ue,{className:"h-4 w-4"})}));ji.displayName=I.displayName;const Si=ae.forwardRef(({className:t,children:r,position:n="popper",...o},i)=>e.jsx(M,{children:e.jsxs(R,{ref:i,className:_n("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...o,children:[e.jsx(wi,{}),e.jsx(L,{className:_n("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(ji,{})]})}));Si.displayName=R.displayName;ae.forwardRef(({className:t,...r},n)=>e.jsx(F,{ref:n,className:_n("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})).displayName=F.displayName;const Ni=ae.forwardRef(({className:t,children:r,...n},o)=>e.jsxs(z,{ref:o,className:_n("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(U,{children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsx(q,{children:r})]}));Ni.displayName=z.displayName;ae.forwardRef(({className:t,...r},n)=>e.jsx(B,{ref:n,className:_n("-mx-1 my-1 h-px bg-muted",t),...r})).displayName=B.displayName;const ki=In("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ei({className:t,variant:r,...n}){return e.jsx("div",{className:_n(ki({variant:r}),t),...n})}const Ci=ae.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:_n("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));Ci.displayName="Card";const Oi=ae.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:_n("flex flex-col space-y-1.5 p-6",t),...r}));Oi.displayName="CardHeader";const Ti=ae.forwardRef(({className:t,...r},n)=>e.jsx("h3",{ref:n,className:_n("text-2xl font-semibold leading-none tracking-tight",t),...r}));Ti.displayName="CardTitle";const Ai=ae.forwardRef(({className:t,...r},n)=>e.jsx("p",{ref:n,className:_n("text-sm text-muted-foreground",t),...r}));Ai.displayName="CardDescription";const _i=ae.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:_n("p-6 pt-0",t),...r}));_i.displayName="CardContent";ae.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:_n("flex items-center p-6 pt-0",t),...r})).displayName="CardFooter";const Pi=K,Di=ae.forwardRef(({className:t,...r},n)=>e.jsx(W,{ref:n,className:_n("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Di.displayName=W.displayName;const Ii=ae.forwardRef(({className:t,...r},n)=>e.jsx(H,{ref:n,className:_n("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));Ii.displayName=H.displayName;const Mi=ae.forwardRef(({className:t,...r},n)=>e.jsx(G,{ref:n,className:_n("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Mi.displayName=G.displayName;const Ri=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Li(e,t,r){const n=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const r=t.split(".").pop().toLowerCase(),n=Ri.get(r);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:o}=e,i="string"==typeof t?t:"string"==typeof o&&o.length>0?o:`./${e.name}`;return"string"!=typeof n.path&&Fi(n,"path",i),void 0!==r&&Object.defineProperty(n,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),Fi(n,"relativePath",i),n}function Fi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const zi=[".DS_Store","Thumbs.db"];function Ui(e){return"object"==typeof e&&null!==e}function qi(e){return e.filter(e=>-1===zi.indexOf(e.name))}function Bi(e){if(null===e)return[];const t=[];for(let r=0;r<e.length;r++){const n=e[r];t.push(n)}return t}function Vi(e){if("function"!=typeof e.webkitGetAsEntry)return Wi(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?Gi(t):Wi(e,t)}function $i(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?$i(t):[t]],[])}function Wi(e,t){return Y(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,Li(e)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return Li(n,null!==(r=null==t?void 0:t.fullPath)&&void 0!==r?r:void 0)})}function Hi(e){return Y(this,void 0,void 0,function*(){return e.isDirectory?Gi(e):function(e){return Y(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(r=>{const n=Li(r,e.fullPath);t(n)},e=>{r(e)})})})}(e)})}function Gi(e){const t=e.createReader();return new Promise((e,r)=>{const n=[];!function o(){t.readEntries(t=>Y(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(Hi));n.push(e),o()}else try{const t=yield Promise.all(n);e(t)}catch(i){r(i)}}),e=>{r(e)})}()})}var Ki=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(0===r.length)return!0;var n=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return r.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):o===t})}return!0};function Yi(e){return function(e){if(Array.isArray(e))return ta(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(r),!0).forEach(function(t){Qi(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Qi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){if(e){if("string"==typeof e)return ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(e,t):void 0}}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ra=Ki,na=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},oa=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},ia=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},aa={code:"too-many-files",message:"Too many files"};function sa(e,t){var r="application/x-moz-file"===e.type||ra(e,t);return[r,r?null:na(t)]}function ca(e,t,r){if(la(e.size))if(la(t)&&la(r)){if(e.size>r)return[!1,oa(r)];if(e.size<t)return[!1,ia(t)]}else{if(la(t)&&e.size<t)return[!1,ia(t)];if(la(r)&&e.size>r)return[!1,oa(r)]}return[!0,null]}function la(e){return null!=e}function ua(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function da(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function ha(e){e.preventDefault()}function pa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.some(function(t){return!ua(e)&&t&&t.apply(void 0,[e].concat(n)),ua(e)})}}function fa(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function ma(e){return/^.*\.[\w]+$/.test(e)}var ga=["children"],va=["open"],ya=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ba=["refKey","onChange","onClick"];function xa(e){return function(e){if(Array.isArray(e))return Sa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ja(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||ja(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e,t){if(e){if("string"==typeof e)return Sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sa(e,t):void 0}}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach(function(t){Ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ea(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ca(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Oa=ie.forwardRef(function(e,t){var r=e.children,n=_a(Ca(e,ga)),o=n.open,i=Ca(n,va);return ie.useImperativeHandle(t,function(){return{open:o}},[o]),ae.createElement(ie.Fragment,null,r(ka(ka({},i),{},{open:o})))});Oa.displayName="Dropzone";var Ta={disabled:!1,getFilesFromEvent:function(e){return Y(this,void 0,void 0,function*(){return Ui(e)&&Ui(e.dataTransfer)?function(e,t){return Y(this,void 0,void 0,function*(){if(e.items){const r=Bi(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return r;return qi($i(yield Promise.all(r.map(Vi))))}return qi(Bi(e.files).map(e=>Li(e)))})}(e.dataTransfer,e.type):function(e){return Ui(e)&&Ui(e.target)}(e)?function(e){return Bi(e.target.files).map(e=>Li(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return Y(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>Li(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Oa.defaultProps=Ta,Oa.propTypes={children:Nt.func,accept:Nt.objectOf(Nt.arrayOf(Nt.string)),multiple:Nt.bool,preventDropOnDocument:Nt.bool,noClick:Nt.bool,noKeyboard:Nt.bool,noDrag:Nt.bool,noDragEventsBubbling:Nt.bool,minSize:Nt.number,maxSize:Nt.number,maxFiles:Nt.number,disabled:Nt.bool,getFilesFromEvent:Nt.func,onFileDialogCancel:Nt.func,onFileDialogOpen:Nt.func,useFsAccessApi:Nt.bool,autoFocus:Nt.bool,onDragEnter:Nt.func,onDragLeave:Nt.func,onDragOver:Nt.func,onDrop:Nt.func,onDropAccepted:Nt.func,onDropRejected:Nt.func,onError:Nt.func,validator:Nt.func};var Aa={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ka(ka({},Ta),e),r=t.accept,n=t.disabled,o=t.getFilesFromEvent,i=t.maxSize,a=t.minSize,s=t.multiple,c=t.maxFiles,l=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,h=t.onDrop,p=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,g=t.onFileDialogOpen,v=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,x=t.noClick,w=t.noKeyboard,j=t.noDrag,S=t.noDragEventsBubbling,N=t.onError,k=t.validator,E=ie.useMemo(function(){return function(e){if(la(e))return Object.entries(e).reduce(function(e,t){var r=Zi(t,2),n=r[0],o=r[1];return[].concat(Yi(e),[n],Yi(o))},[]).filter(function(e){return fa(e)||ma(e)}).join(",")}(r)},[r]),C=ie.useMemo(function(){return function(e){return la(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=Zi(e,2),r=t[0],n=t[1],o=!0;return fa(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),Array.isArray(n)&&n.every(ma)||(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(e,t){var r=Zi(t,2),n=r[0],o=r[1];return Ji(Ji({},e),{},Qi({},n,o))},{})}]:e}(r)},[r]),O=ie.useMemo(function(){return"function"==typeof g?g:Da},[g]),T=ie.useMemo(function(){return"function"==typeof m?m:Da},[m]),A=ie.useRef(null),_=ie.useRef(null),P=wa(ie.useReducer(Pa,Aa),2),D=P[0],I=P[1],M=D.isFocused,R=D.isFileDialogActive,L=ie.useRef("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),F=function(){!L.current&&R&&setTimeout(function(){_.current&&(_.current.files.length||(I({type:"closeDialog"}),T()))},300)};ie.useEffect(function(){return window.addEventListener("focus",F,!1),function(){window.removeEventListener("focus",F,!1)}},[_,R,T,L]);var z=ie.useRef([]),U=function(e){A.current&&A.current.contains(e.target)||(e.preventDefault(),z.current=[])};ie.useEffect(function(){return b&&(document.addEventListener("dragover",ha,!1),document.addEventListener("drop",U,!1)),function(){b&&(document.removeEventListener("dragover",ha),document.removeEventListener("drop",U))}},[A,b]),ie.useEffect(function(){return!n&&y&&A.current&&A.current.focus(),function(){}},[A,y,n]);var q=ie.useCallback(function(e){N?N(e):console.error(e)},[N]),B=ie.useCallback(function(e){e.preventDefault(),e.persist(),te(e),z.current=[].concat(xa(z.current),[e.target]),da(e)&&Promise.resolve(o(e)).then(function(t){if(!ua(e)||S){var r=t.length,n=r>0&&function(e){var t=e.files,r=e.accept,n=e.minSize,o=e.maxSize,i=e.multiple,a=e.maxFiles,s=e.validator;return!(!i&&t.length>1||i&&a>=1&&t.length>a)&&t.every(function(e){var t=Zi(sa(e,r),1)[0],i=Zi(ca(e,n,o),1)[0],a=s?s(e):null;return t&&i&&!a})}({files:t,accept:E,minSize:a,maxSize:i,multiple:s,maxFiles:c,validator:k});I({isDragAccept:n,isDragReject:r>0&&!n,isDragActive:!0,type:"setDraggedFiles"}),l&&l(e)}}).catch(function(e){return q(e)})},[o,l,q,S,E,a,i,s,c,k]),V=ie.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=da(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(r){}return t&&d&&d(e),!1},[d,S]),$=ie.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=z.current.filter(function(e){return A.current&&A.current.contains(e)}),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),z.current=t,t.length>0||(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),da(e)&&u&&u(e))},[A,u,S]),W=ie.useCallback(function(e,t){var r=[],n=[];e.forEach(function(e){var t=wa(sa(e,E),2),o=t[0],s=t[1],c=wa(ca(e,a,i),2),l=c[0],u=c[1],d=k?k(e):null;if(o&&l&&!d)r.push(e);else{var h=[s,u];d&&(h=h.concat(d)),n.push({file:e,errors:h.filter(function(e){return e})})}}),(!s&&r.length>1||s&&c>=1&&r.length>c)&&(r.forEach(function(e){n.push({file:e,errors:[aa]})}),r.splice(0)),I({acceptedFiles:r,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),h&&h(r,n,t),n.length>0&&f&&f(n,t),r.length>0&&p&&p(r,t)},[I,s,E,a,i,c,h,p,f,k]),H=ie.useCallback(function(e){e.preventDefault(),e.persist(),te(e),z.current=[],da(e)&&Promise.resolve(o(e)).then(function(t){ua(e)&&!S||W(t,e)}).catch(function(e){return q(e)}),I({type:"reset"})},[o,W,q,S]),G=ie.useCallback(function(){if(L.current){I({type:"openDialog"}),O();var e={multiple:s,types:C};window.showOpenFilePicker(e).then(function(e){return o(e)}).then(function(e){W(e,null),I({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(T(e),I({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?q(e):(L.current=!1,_.current?(_.current.value=null,_.current.click()):q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else _.current&&(I({type:"openDialog"}),O(),_.current.value=null,_.current.click())},[I,O,T,v,W,q,C,s]),K=ie.useCallback(function(e){A.current&&A.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),G()))},[A,G]),Y=ie.useCallback(function(){I({type:"focus"})},[]),X=ie.useCallback(function(){I({type:"blur"})},[]),J=ie.useCallback(function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?G():setTimeout(G,0))},[x,G]),Q=function(e){return n?null:e},Z=function(e){return w?null:Q(e)},ee=function(e){return j?null:Q(e)},te=function(e){S&&e.stopPropagation()},re=ie.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,o=e.role,i=e.onKeyDown,a=e.onFocus,s=e.onBlur,c=e.onClick,l=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,h=e.onDrop,p=Ca(e,ya);return ka(ka(Ea({onKeyDown:Z(pa(i,K)),onFocus:Z(pa(a,Y)),onBlur:Z(pa(s,X)),onClick:Q(pa(c,J)),onDragEnter:ee(pa(l,B)),onDragOver:ee(pa(u,V)),onDragLeave:ee(pa(d,$)),onDrop:ee(pa(h,H)),role:"string"==typeof o&&""!==o?o:"presentation"},r,A),n||w?{}:{tabIndex:0}),p)}},[A,K,Y,X,J,B,V,$,H,w,j,n]),ne=ie.useCallback(function(e){e.stopPropagation()},[]),oe=ie.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,n=e.onChange,o=e.onClick,i=Ca(e,ba);return ka(ka({},Ea({accept:E,multiple:s,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(pa(n,H)),onClick:Q(pa(o,ne)),tabIndex:-1},r,_)),i)}},[_,r,s,H,n]);return ka(ka({},D),{},{isFocused:M&&!n,getRootProps:re,getInputProps:oe,rootRef:A,inputRef:_,open:Q(G)})}function Pa(e,t){switch(t.type){case"focus":return ka(ka({},e),{},{isFocused:!0});case"blur":return ka(ka({},e),{},{isFocused:!1});case"openDialog":return ka(ka({},Aa),{},{isFileDialogActive:!0});case"closeDialog":return ka(ka({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ka(ka({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ka(ka({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return ka({},Aa);default:return e}}function Da(){}const Ia=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t},Ma={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,c=s?e[o+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;s||(h=64,i||(d=64)),n.push(r[l],r[u],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ia(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const o=e[r++];if(o<128)t[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(i>>10)),t[n++]=String.fromCharCode(56320+(1023&i))}else{const i=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<e.length;){const t=r[e.charAt(o++)],i=o<e.length?r[e.charAt(o)]:0;++o;const a=o<e.length?r[e.charAt(o)]:64;++o;const s=o<e.length?r[e.charAt(o)]:64;if(++o,null==t||null==i||null==a||null==s)throw new Ra;const c=t<<2|i>>4;if(n.push(c),64!==a){const e=i<<4&240|a>>2;if(n.push(e),64!==s){const e=a<<6&192|s;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const La=function(e){return function(e){const t=Ia(e);return Ma.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Fa=function(e){try{return Ma.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const za=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ua=()=>{try{return za()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e={}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(r){return}const t=e&&Fa(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},qa=e=>{var t,r;return null==(r=null==(t=Ua())?void 0:t.emulatorHosts)?void 0:r[e]},Ba=()=>{var e;return null==(e=Ua())?void 0:e.config},Va=e=>{var t;return null==(t=Ua())?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ha(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga={};let Ka=!1;function Ya(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Wa(window.location.host)||Ga[e]===t||Ga[e]||Ka)return;function r(e){return`__firebase__banner__${e}`}Ga[e]=t;const n="__firebase__banner",o=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ga))Ga[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ka=!0,function(){const e=document.getElementById(n);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}(n),t=r("text"),a=document.getElementById(t)||document.createElement("span"),s=r("learnmore"),c=document.getElementById(s)||document.createElement("a"),l=r("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,s);const r=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,a,c,r),document.body.appendChild(t)}o?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ja(){return!function(){var e;const t=null==(e=Ua())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Qa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},n=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(es,(e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`})}(o,r):"Error",a=`${this.serviceName}: ${i} (${n}).`;return new Qa(n,a,r)}}const es=/\{\$([^}]+)}/g;function ts(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const o of r){if(!n.includes(o))return!1;const r=e[o],i=t[o];if(rs(r)&&rs(i)){if(!ts(r,i))return!1}else if(r!==i)return!1}for(const o of n)if(!r.includes(o))return!1;return!0}function rs(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}class os{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!=typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=is),void 0===n.error&&(n.error=is),void 0===n.complete&&(n.complete=is);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function is(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(e){return e&&e._delegate?e._delegate:e}class ss{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new $a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(r){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=(null==e?void 0:e.optional)??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(n){if(r)return null;throw n}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch(t){}for(const[e,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});r.resolve(e)}catch(t){}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,i]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(o)&&i.resolve(n)}return n}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),n=this.onInitCallbacks.get(r)??new Set;n.add(e),this.onInitCallbacks.set(r,n);const o=this.instances.get(r);return o&&e(o,r),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===cs?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class us{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ls(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,hs;(hs=ds||(ds={}))[hs.DEBUG=0]="DEBUG",hs[hs.VERBOSE=1]="VERBOSE",hs[hs.INFO=2]="INFO",hs[hs.WARN=3]="WARN",hs[hs.ERROR=4]="ERROR",hs[hs.SILENT=5]="SILENT";const ps={debug:ds.DEBUG,verbose:ds.VERBOSE,info:ds.INFO,warn:ds.WARN,error:ds.ERROR,silent:ds.SILENT},fs=ds.INFO,ms={[ds.DEBUG]:"log",[ds.VERBOSE]:"log",[ds.INFO]:"info",[ds.WARN]:"warn",[ds.ERROR]:"error"},gs=(e,t,...r)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),o=ms[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${n}]  ${e.name}:`,...r)};class vs{constructor(e){this.name=e,this._logLevel=fs,this._logHandler=gs,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ds))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ps[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ds.DEBUG,...e),this._logHandler(this,ds.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ds.VERBOSE,...e),this._logHandler(this,ds.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ds.INFO,...e),this._logHandler(this,ds.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ds.WARN,...e),this._logHandler(this,ds.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ds.ERROR,...e),this._logHandler(this,ds.ERROR,...e)}}let ys,bs;const xs=new WeakMap,ws=new WeakMap,js=new WeakMap,Ss=new WeakMap,Ns=new WeakMap;let ks={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ws.get(e);if("objectStoreNames"===t)return e.objectStoreNames||js.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Os(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Es(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bs||(bs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ts(this),t),Os(xs.get(this))}:function(...t){return Os(e.apply(Ts(this),t))}:function(t,...r){const n=e.call(Ts(this),t,...r);return js.set(n,t.sort?t.sort():[t]),Os(n)}}function Cs(e){return"function"==typeof e?Es(e):(e instanceof IDBTransaction&&function(e){if(ws.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});ws.set(e,t)}(e),t=e,(ys||(ys=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ks):e);var t}function Os(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(Os(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&xs.set(t,e)}).catch(()=>{}),Ns.set(t,e),t}(e);if(Ss.has(e))return Ss.get(e);const t=Cs(e);return t!==e&&(Ss.set(e,t),Ns.set(t,e)),t}const Ts=e=>Ns.get(e);const As=["get","getKey","getAll","getAllKeys","count"],_s=["put","add","delete","clear"],Ps=new Map;function Ds(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ps.get(t))return Ps.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=_s.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!As.includes(r))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),o&&i.done]))[0]};return Ps.set(t,i),i}ks=(e=>({...e,get:(t,r,n)=>Ds(t,r)||e.get(t,r,n),has:(t,r)=>!!Ds(t,r)||e.has(t,r)}))(ks);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Is{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Ms="@firebase/app",Rs="0.14.3",Ls=new vs("@firebase/app"),Fs="@firebase/app-compat",zs="@firebase/analytics-compat",Us="@firebase/analytics",qs="@firebase/app-check-compat",Bs="@firebase/app-check",Vs="@firebase/auth",$s="@firebase/auth-compat",Ws="@firebase/database",Hs="@firebase/data-connect",Gs="@firebase/database-compat",Ks="@firebase/functions",Ys="@firebase/functions-compat",Xs="@firebase/installations",Js="@firebase/installations-compat",Qs="@firebase/messaging",Zs="@firebase/messaging-compat",ec="@firebase/performance",tc="@firebase/performance-compat",rc="@firebase/remote-config",nc="@firebase/remote-config-compat",oc="@firebase/storage",ic="@firebase/storage-compat",ac="@firebase/firestore",sc="@firebase/ai",cc="@firebase/firestore-compat",lc="firebase",uc="[DEFAULT]",dc={[Ms]:"fire-core",[Fs]:"fire-core-compat",[Us]:"fire-analytics",[zs]:"fire-analytics-compat",[Bs]:"fire-app-check",[qs]:"fire-app-check-compat",[Vs]:"fire-auth",[$s]:"fire-auth-compat",[Ws]:"fire-rtdb",[Hs]:"fire-data-connect",[Gs]:"fire-rtdb-compat",[Ks]:"fire-fn",[Ys]:"fire-fn-compat",[Xs]:"fire-iid",[Js]:"fire-iid-compat",[Qs]:"fire-fcm",[Zs]:"fire-fcm-compat",[ec]:"fire-perf",[tc]:"fire-perf-compat",[rc]:"fire-rc",[nc]:"fire-rc-compat",[oc]:"fire-gcs",[ic]:"fire-gcs-compat",[ac]:"fire-fst",[cc]:"fire-fst-compat",[sc]:"fire-vertex","fire-js":"fire-js",[lc]:"fire-js-all"},hc=new Map,pc=new Map,fc=new Map;function mc(e,t){try{e.container.addComponent(t)}catch(r){Ls.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function gc(e){const t=e.name;if(fc.has(t))return Ls.debug(`There were multiple attempts to register component ${t}.`),!1;fc.set(t,e);for(const r of hc.values())mc(r,e);for(const r of pc.values())mc(r,e);return!0}function vc(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function yc(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Za("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xc{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bc.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="12.3.0";function jc(e,t={}){let r=e;if("object"!=typeof t){t={name:t}}const n={name:uc,automaticDataCollectionEnabled:!0,...t},o=n.name;if("string"!=typeof o||!o)throw bc.create("bad-app-name",{appName:String(o)});if(r||(r=Ba()),!r)throw bc.create("no-options");const i=hc.get(o);if(i){if(ts(r,i.options)&&ts(n,i.config))return i;throw bc.create("duplicate-app",{appName:o})}const a=new us(o);for(const c of fc.values())a.addComponent(c);const s=new xc(r,n,a);return hc.set(o,s),s}function Sc(e=uc){const t=hc.get(e);if(!t&&e===uc&&Ba())return jc();if(!t)throw bc.create("no-app",{appName:e});return t}function Nc(e,t,r){let n=dc[e]??e;r&&(n+=`-${r}`);const o=n.match(/\s|\//),i=t.match(/\s|\//);if(o||i){const e=[`Unable to register library "${n}" with version "${t}":`];return o&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ls.warn(e.join(" "))}gc(new ss(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="firebase-heartbeat-store";let Ec=null;function Cc(){return Ec||(Ec=function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),s=Os(a);return n&&a.addEventListener("upgradeneeded",e=>{n(Os(a.result),e.oldVersion,e.newVersion,Os(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(kc)}catch(r){console.warn(r)}}}).catch(e=>{throw bc.create("idb-open",{originalErrorMessage:e.message})})),Ec}async function Oc(e,t){try{const r=(await Cc()).transaction(kc,"readwrite"),n=r.objectStore(kc);await n.put(t,Tc(e)),await r.done}catch(r){if(r instanceof Qa)Ls.warn(r.message);else{const e=bc.create("idb-set",{originalErrorMessage:null==r?void 0:r.message});Ls.warn(e.message)}}}function Tc(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pc(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=_c();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_c(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){const r=[];let n=e.slice();for(const o of e){const e=r.find(e=>e.agent===o.agent);if(e){if(e.dates.push(o.date),Dc(r)>t){e.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),Dc(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),o=La(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ls.warn(t),""}}}function _c(){return(new Date).toISOString().substring(0,10)}class Pc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var e;t((null==(e=o.error)?void 0:e.message)||"")}}catch(r){t(r)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Cc()).transaction(kc),r=await t.objectStore(kc).get(Tc(e));return await t.done,r}catch(t){if(t instanceof Qa)Ls.warn(t.message);else{const e=bc.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Ls.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Oc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Oc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Dc(e){return La(JSON.stringify({version:2,heartbeats:e})).length}var Ic;Ic="",gc(new ss("platform-logger",e=>new Is(e),"PRIVATE")),gc(new ss("heartbeat",e=>new Ac(e),"PRIVATE")),Nc(Ms,Rs,Ic),Nc(Ms,Rs,"esm2020"),Nc("fire-js","");var Mc,Rc,Lc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function r(e,t,r){r||(r=0);const n=Array(16);if("string"==typeof t)for(var o=0;o<16;++o)n[o]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(o=0;o<16;++o)n[o]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],o=e.g[2];let i,a=e.g[3];i=t+(a^r&(o^a))+n[0]+3614090360&4294967295,i=a+(o^(t=r+(i<<7&4294967295|i>>>25))&(r^o))+n[1]+3905402710&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(r^a&(t^r))+n[2]+606105819&4294967295,i=r+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+n[3]+3250441966&4294967295,i=t+(a^(r=o+(i<<22&4294967295|i>>>10))&(o^a))+n[4]+4118548399&4294967295,i=a+(o^(t=r+(i<<7&4294967295|i>>>25))&(r^o))+n[5]+1200080426&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(r^a&(t^r))+n[6]+2821735955&4294967295,i=r+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+n[7]+4249261313&4294967295,i=t+(a^(r=o+(i<<22&4294967295|i>>>10))&(o^a))+n[8]+1770035416&4294967295,i=a+(o^(t=r+(i<<7&4294967295|i>>>25))&(r^o))+n[9]+2336552879&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(r^a&(t^r))+n[10]+4294925233&4294967295,i=r+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+n[11]+2304563134&4294967295,i=t+(a^(r=o+(i<<22&4294967295|i>>>10))&(o^a))+n[12]+1804603682&4294967295,i=a+(o^(t=r+(i<<7&4294967295|i>>>25))&(r^o))+n[13]+4254626195&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(r^a&(t^r))+n[14]+2792965006&4294967295,i=r+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+n[15]+1236535329&4294967295,i=t+(o^a&((r=o+(i<<22&4294967295|i>>>10))^o))+n[1]+4129170786&4294967295,i=a+(r^o&((t=r+(i<<5&4294967295|i>>>27))^r))+n[6]+3225465664&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^r&(a^t))+n[11]+643717713&4294967295,i=r+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+n[0]+3921069994&4294967295,i=t+(o^a&((r=o+(i<<20&4294967295|i>>>12))^o))+n[5]+3593408605&4294967295,i=a+(r^o&((t=r+(i<<5&4294967295|i>>>27))^r))+n[10]+38016083&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^r&(a^t))+n[15]+3634488961&4294967295,i=r+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+n[4]+3889429448&4294967295,i=t+(o^a&((r=o+(i<<20&4294967295|i>>>12))^o))+n[9]+568446438&4294967295,i=a+(r^o&((t=r+(i<<5&4294967295|i>>>27))^r))+n[14]+3275163606&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^r&(a^t))+n[3]+4107603335&4294967295,i=r+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+n[8]+1163531501&4294967295,i=t+(o^a&((r=o+(i<<20&4294967295|i>>>12))^o))+n[13]+2850285829&4294967295,i=a+(r^o&((t=r+(i<<5&4294967295|i>>>27))^r))+n[2]+4243563512&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^r&(a^t))+n[7]+1735328473&4294967295,i=r+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+n[12]+2368359562&4294967295,i=t+((r=o+(i<<20&4294967295|i>>>12))^o^a)+n[5]+4294588738&4294967295,i=a+((t=r+(i<<4&4294967295|i>>>28))^r^o)+n[8]+2272392833&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^r)+n[11]+1839030562&4294967295,i=r+((o=a+(i<<16&4294967295|i>>>16))^a^t)+n[14]+4259657740&4294967295,i=t+((r=o+(i<<23&4294967295|i>>>9))^o^a)+n[1]+2763975236&4294967295,i=a+((t=r+(i<<4&4294967295|i>>>28))^r^o)+n[4]+1272893353&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^r)+n[7]+4139469664&4294967295,i=r+((o=a+(i<<16&4294967295|i>>>16))^a^t)+n[10]+3200236656&4294967295,i=t+((r=o+(i<<23&4294967295|i>>>9))^o^a)+n[13]+681279174&4294967295,i=a+((t=r+(i<<4&4294967295|i>>>28))^r^o)+n[0]+3936430074&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^r)+n[3]+3572445317&4294967295,i=r+((o=a+(i<<16&4294967295|i>>>16))^a^t)+n[6]+76029189&4294967295,i=t+((r=o+(i<<23&4294967295|i>>>9))^o^a)+n[9]+3654602809&4294967295,i=a+((t=r+(i<<4&4294967295|i>>>28))^r^o)+n[12]+3873151461&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^r)+n[15]+530742520&4294967295,i=r+((o=a+(i<<16&4294967295|i>>>16))^a^t)+n[2]+3299628645&4294967295,i=t+(o^((r=o+(i<<23&4294967295|i>>>9))|~a))+n[0]+4096336452&4294967295,i=a+(r^((t=r+(i<<6&4294967295|i>>>26))|~o))+n[7]+1126891415&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~r))+n[14]+2878612391&4294967295,i=r+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+n[5]+4237533241&4294967295,i=t+(o^((r=o+(i<<21&4294967295|i>>>11))|~a))+n[12]+1700485571&4294967295,i=a+(r^((t=r+(i<<6&4294967295|i>>>26))|~o))+n[3]+2399980690&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~r))+n[10]+4293915773&4294967295,i=r+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+n[1]+2240044497&4294967295,i=t+(o^((r=o+(i<<21&4294967295|i>>>11))|~a))+n[8]+1873313359&4294967295,i=a+(r^((t=r+(i<<6&4294967295|i>>>26))|~o))+n[15]+4264355552&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~r))+n[6]+2734768916&4294967295,i=r+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+n[13]+1309151649&4294967295,i=t+(o^((r=o+(i<<21&4294967295|i>>>11))|~a))+n[4]+4149444226&4294967295,i=a+(r^((t=r+(i<<6&4294967295|i>>>26))|~o))+n[11]+3174756917&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~r))+n[2]+718787259&4294967295,i=r+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+a&4294967295}function n(e,t){this.h=t;const r=[];let n=!0;for(let o=e.length-1;o>=0;o--){const i=0|e[o];n&&i==t||(r[o]=i,n=!1)}this.g=r}!function(e,t){function r(){}r.prototype=t.prototype,e.F=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.D=function(e,r,n){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[r].apply(e,o)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const n=t-this.blockSize,o=this.C;let i=this.h,a=0;for(;a<t;){if(0==i)for(;a<=n;)r(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(o[i++]=e.charCodeAt(a++),i==this.blockSize){r(this,o),i=0;break}}else for(;a<t;)if(o[i++]=e[a++],i==this.blockSize){r(this,o),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var r=e.length-8;r<e.length;++r)e[r]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,r=0;r<4;++r)for(let n=0;n<32;n+=8)e[t++]=this.g[r]>>>n&255;return e};var o={};function i(e){return-128<=e&&e<128?function(e,t){var r=o;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}(e,function(e){return new n([0|e],e<0?-1:0)}):new n([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(a(-e));const t=[];let r=1;for(let n=0;e>=r;n++)t[n]=e/r|0,r*=4294967296;return new n(t,0)}var s=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,r=[];for(let n=0;n<t;n++)r[n]=~e.g[n];return new n(r,~e.h).add(c)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var r=c,n=t;n.l(e)<=0;)r=v(r),n=v(n);var o=y(r,1),i=y(n,1);for(n=y(n,2),r=y(r,2);!u(n);){var l=i.add(n);l.l(e)<=0&&(o=o.add(r),i=l),n=y(n,1),r=y(r,1)}return t=p(e,o.j(t)),new m(o,t)}for(o=s;e.l(t)>=0;){for(r=Math.max(1,Math.floor(e.m()/t.m())),n=(n=Math.ceil(Math.log(r)/Math.LN2))<=48?1:Math.pow(2,n-48),l=(i=a(r)).j(t);d(l)||l.l(e)>0;)l=(i=a(r-=n)).j(t);u(i)&&(i=c),o=o.add(i),e=p(e,l)}return new m(o,e)}function v(e){const t=e.g.length+1,r=[];for(let n=0;n<t;n++)r[n]=e.i(n)<<1|e.i(n-1)>>>31;return new n(r,e.h)}function y(e,t){const r=t>>5;t%=32;const o=e.g.length-r,i=[];for(let n=0;n<o;n++)i[n]=t>0?e.i(n+r)>>>t|e.i(n+r+1)<<32-t:e.i(n+r);return new n(i,e.h)}(e=n.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let r=0;r<this.g.length;r++){const n=this.i(r);e+=(n>=0?n:4294967296+n)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var r=this;let n="";for(;;){const o=g(r,t).g;let i=(((r=p(r,o.j(t))).g.length>0?r.g[0]:r.h)>>>0).toString(e);if(u(r=o))return i+n;for(;i.length<6;)i="0"+i;n=i+n}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),r=[];let o=0;for(let n=0;n<=t;n++){let t=o+(65535&this.i(n))+(65535&e.i(n)),i=(t>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);o=i>>>16,t&=65535,i&=65535,r[n]=i<<16|t}return new n(r,-2147483648&r[r.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(l)<0&&e.l(l)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,r=[];for(var o=0;o<2*t;o++)r[o]=0;for(o=0;o<this.g.length;o++)for(let t=0;t<e.g.length;t++){const n=this.i(o)>>>16,i=65535&this.i(o),a=e.i(t)>>>16,s=65535&e.i(t);r[2*o+2*t]+=i*s,f(r,2*o+2*t),r[2*o+2*t+1]+=n*s,f(r,2*o+2*t+1),r[2*o+2*t+1]+=i*a,f(r,2*o+2*t+1),r[2*o+2*t+2]+=n*a,f(r,2*o+2*t+2)}for(e=0;e<t;e++)r[e]=r[2*e+1]<<16|r[2*e];for(e=t;e<2*t;e++)r[e]=0;return new n(r,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)&e.i(n);return new n(r,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)|e.i(n);return new n(r,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)^e.i(n);return new n(r,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Rc=t,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.B,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=a,n.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if((r=r||10)<2||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return h(e(t.substring(1),r));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const n=a(Math.pow(r,8));let o=s;for(let s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s);const e=parseInt(t.substring(s,s+i),r);i<8?(i=a(Math.pow(r,i)),o=o.j(i).add(a(e))):(o=o.j(n),o=o.add(a(e)))}return o},Mc=n}).apply(void 0!==Lc?Lc:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Fc,zc,Uc,qc,Bc,Vc,$c,Wc,Hc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t=Object.defineProperty;var r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Hc&&Hc];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function n(e,n){if(n)e:{var o=r;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in o))break e;o=o[a]}(n=n(i=o[e=e[e.length-1]]))!=i&&null!=n&&t(o,e,{configurable:!0,writable:!0,value:n})}}n("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),n("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),n("Object.entries",function(e){return e||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push([t,e[t]]);return r}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var o=o||{},i=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,r){return e.call.apply(e.bind,arguments)}function c(e,t,r){return(c=s).apply(null,arguments)}function l(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function r(){}r.prototype=t.prototype,e.Z=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Ob=function(e,r,n){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[r].apply(e,o)}}var d="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];var r=typeof t;if("array"==(r="object"!=r?r:t?Array.isArray(t)?"array":r:"null")||"object"==r&&"number"==typeof t.length){r=e.length||0;const n=t.length||0;e.length=r+n;for(let o=0;o<n;o++)e[r+o]=t[o]}else e.push(t)}}function f(e){i.setTimeout(()=>{throw e},0)}function m(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const r=g.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},w=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(j)}};function j(){for(var e;e=m();){try{e.h.call(e.g)}catch(r){f(r)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(r){}return e}();function E(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,N),C.prototype.init=function(e,t){const r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement)),this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),T=0;function A(e,t,r,n,o){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=o,this.key=++T,this.da=this.fa=!1}function _(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,r){for(const n in e)t.call(r,e[n],n,e)}function D(e){const t={};for(const r in e)t[r]=e[r];return t}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let r,n;for(let o=1;o<arguments.length;o++){for(r in n=arguments[o],n)e[r]=n[r];for(let t=0;t<I.length;t++)r=I[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function R(e){this.src=e,this.g={},this.h=0}function L(e,t){const r=t.type;if(r in e.g){var n,o=e.g[r],i=Array.prototype.indexOf.call(o,t,void 0);(n=i>=0)&&Array.prototype.splice.call(o,i,1),n&&(_(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function F(e,t,r,n){for(let o=0;o<e.length;++o){const i=e[o];if(!i.da&&i.listener==t&&i.capture==!!r&&i.ha==n)return o}return-1}R.prototype.add=function(e,t,r,n,o){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const a=F(e,t,n,o);return a>-1?(t=e[a],r||(t.fa=!1)):((t=new A(t,this.src,i,!!n,o)).fa=r,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),U={};function q(e,t,r,n,o){if(n&&n.once)return V(e,t,r,n,o);if(Array.isArray(t)){for(let i=0;i<t.length;i++)q(e,t[i],r,n,o);return null}return r=X(r),e&&e[O]?e.J(t,r,a(n)?!!n.capture:!!n,o):B(e,t,r,!1,n,o)}function B(e,t,r,n,o,i){if(!t)throw Error("Invalid event type");const s=a(o)?!!o.capture:!!o;let c=K(e);if(c||(e[z]=c=new R(e)),(r=c.add(t,r,n,s,i)).proxy)return r;if(n=function(){function e(r){return t.call(e.src,e.listener,r)}const t=G;return e}(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)k||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),n,o);else if(e.attachEvent)e.attachEvent(H(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return r}function V(e,t,r,n,o){if(Array.isArray(t)){for(let i=0;i<t.length;i++)V(e,t[i],r,n,o);return null}return r=X(r),e&&e[O]?e.K(t,r,a(n)?!!n.capture:!!n,o):B(e,t,r,!0,n,o)}function $(e,t,r,n,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)$(e,t[i],r,n,o);else n=a(n)?!!n.capture:!!n,r=X(r),e&&e[O]?(e=e.i,(i=String(t).toString())in e.g&&((r=F(t=e.g[i],r,n,o))>-1&&(_(t[r]),Array.prototype.splice.call(t,r,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=K(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,r,n,o)),(r=e>-1?t[e]:null)&&W(r))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])L(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(H(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=K(t))?(L(r,e),0==r.h&&(r.src=null,t[z]=null)):_(e)}}}function H(e){return e in U?U[e]:U[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const r=e.listener,n=e.ha||e.src;e.fa&&W(e),e=r.call(n,t)}return e}function K(e){return(e=e[z])instanceof R?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){S.call(this),this.i=new R(this),this.M=this,this.G=null}function Q(e,t){var r,n=e.G;if(n)for(r=[];n;n=n.G)r.push(n);if(e=e.M,n=t.type||t,"string"==typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var o=t;M(t=new N(n,e),o)}let i,a;if(o=!0,r)for(a=r.length-1;a>=0;a--)i=t.g=r[a],o=Z(i,n,!0,t)&&o;if(i=t.g=e,o=Z(i,n,!0,t)&&o,o=Z(i,n,!1,t)&&o,r)for(a=0;a<r.length;a++)i=t.g=r[a],o=Z(i,n,!1,t)&&o}function Z(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let o=!0;for(let i=0;i<t.length;++i){const a=t[i];if(a&&!a.da&&a.capture==r){const t=a.listener,r=a.ha||a.src;a.fa&&L(e.i,a),o=!1!==t.call(r,n)&&o}}return o&&!n.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!=typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,S),J.prototype[O]=!0,J.prototype.removeEventListener=function(e,t,r,n){$(this,e,t,r,n)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const r=e.g[t];for(let e=0;e<r.length;e++)_(r[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},J.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(e){S.call(this),this.h=e,this.g={}}u(re,S);var ne=[];function oe(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}re.prototype.N=function(){re.Z.N.call(this),oe(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,ae=i.JSON.parse,se=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ce(){}function le(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){N.call(this,"d")}function he(){N.call(this,"c")}u(de,N),u(he,N);var pe={},fe=null;function me(){return fe=fe||new J}function ge(e){N.call(this,pe.Ia,e)}function ve(e){const t=me();Q(t,new ge(t))}function ye(e,t){N.call(this,pe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();Q(t,new ye(t,e))}function xe(e,t){N.call(this,pe.Ja,e),this.size=t}function we(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function je(){this.g=!0}function Se(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var r=i[e];if(!(r.length<2)){var n=r[1];if(Array.isArray(n)&&!(n.length<1)){var o=n[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(let e=1;e<n.length;e++)n[e]=""}}}return ie(i)}catch(i){return t}}(e,r)+(n?" "+n:"")})}pe.Ia="serverreachability",u(ge,N),pe.STAT_EVENT="statevent",u(ye,N),pe.Ja="timingevent",u(xe,N),je.prototype.ua=function(){this.g=!1},je.prototype.info=function(){};var Ne,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ee={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Oe(e){return encodeURIComponent(String(e))}function Te(e){var t=1;e=e.split(":");const r=[];for(;t>0&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function Ae(e,t,r,n){this.j=e,this.i=t,this.l=r,this.S=n||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}u(Ce,ce),Ce.prototype.g=function(){return new XMLHttpRequest},Ne=new Ce;var Pe={},De={};function Ie(e,t,r){e.M=1,e.A=it(et(t)),e.u=r,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var r=e.B,n=e.S;Array.isArray(n)||(n=[String(n)]),bt(r.i,"t",n),e.C=0,r=e.j.L,e.h=new _e,e.g=ir(e.j,r?t:null,!e.u),e.P>0&&(e.O=new te(c(e.Y,e,e.g),e.P)),t=e.V,r=e.g,n=e.ba;var o="readystatechange";Array.isArray(o)||(o&&(ne[0]=o.toString()),o=ne);for(let i=0;i<o.length;i++){const e=q(r,o[i],n||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,r,n,o,i){e.info(function(){if(e.g)if(i){var a="",s=i.split("&");for(let e=0;e<s.length;e++){var c=s[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+c+"&":a+(e+"=redacted&")}}}else a=null;else a=i;return"XMLHTTP REQ ("+n+") [attempt "+o+"]: "+t+"\n"+r+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Re(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Le(e,t){var r=e.C,n=t.indexOf("\n",r);return-1==n?De:(r=Number(t.substring(r,n)),isNaN(r)?Pe:(n+=1)+r>t.length?De:(t=t.slice(n,n+r),e.C=n+r,t))}function Fe(e){e.T=Date.now()+e.H,ze(e,e.H)}function ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(c(e.aa,e),t)}function Ue(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function qe(e){0==e.j.I||e.K||er(e.j,e)}function Be(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Ve(e,t){try{var r=e.j;if(0!=r.I&&(r.g==e||Ke(r.h,e)))if(!e.L&&Ke(r.h,e)&&3==r.I){try{var n=r.Ba.g.parse(t)}catch(u){n=null}if(Array.isArray(n)&&3==n.length){var o=n;if(0==o[0]){e:if(!r.v){if(r.g){if(!(r.g.F+3e3<e.F))break e;Zt(r),Vt(r)}Xt(r),be(18)}}else r.xa=o[1],0<r.xa-r.K&&o[2]<37500&&r.F&&0==r.A&&!r.C&&(r.C=we(c(r.Va,r),6e3));Ge(r.h)<=1&&r.ta&&(r.ta=void 0)}else rr(r,11)}else if((e.L||r.g==e)&&Zt(r),!E(t))for(o=r.Ba.g.parse(t),t=0;t<o.length;t++){let c=o[t];const u=c[0];if(!(u<=r.K))if(r.K=u,c=c[1],2==r.I)if("c"==c[0]){r.M=c[1],r.ba=c[2];const t=c[3];null!=t&&(r.ka=t,r.j.info("VER="+r.ka));const o=c[4];null!=o&&(r.za=o,r.j.info("SVER="+r.za));const u=c[5];null!=u&&"number"==typeof u&&u>0&&(n=1.5*u,r.O=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=n.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(n.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.wa=e,ot(n.J,n.G,e))}}r.I=3,r.l&&r.l.ra(),r.aa&&(r.T=Date.now()-e.F,r.j.info("Handshake RTT: "+r.T+"ms"));var a=e;if((n=r).na=or(n,n.L?n.ba:null,n.W),a.L){Xe(n.h,a);var s=a,l=n.O;l&&(s.H=l),s.D&&(Ue(s),Fe(s)),n.g=a}else Yt(n);r.i.length>0&&Wt(r)}else"stop"!=c[0]&&"close"!=c[0]||rr(r,7);else 3==r.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?rr(r,7):Bt(r):"noop"!=c[0]&&r.l&&r.l.qa(c),r.A=0)}ve()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const c=Ft(this.g),l=this.g.ya();this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||4!=c||7==l||ve(),Ue(this);var t=this.g.ca();this.X=t;var r=function(e){if(!Re(e))return e.g.la();const t=zt(e.g);if(""===t)return"";let r="";const n=t.length,o=4==Ft(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return Be(e),qe(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<n;i++)e.h.h=!0,r+=e.h.i.decode(t[i],{stream:!(o&&i==n-1)});return t.length=0,e.h.g+=r,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,r,n,o,i,a){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+o+"]: "+t+"\n"+r+"\n"+i+" "+a})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var n,o=this.g;if((n=o.g?o.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(n)){var a=n;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Be(this),qe(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ve(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<r.length;){if(t=Le(this,r),t==De){4==c&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),Se(this.i,this.l,r,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),Ve(this,t)}if(Re(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=r.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(r.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Jt(s),s.P=!0,be(11))}}else Se(this.i,this.l,r,"[Invalid Chunked Response]"),Be(this),qe(this)}else Se(this.i,this.l,r,null),Ve(this,r);4==c&&Be(this),this.o&&!this.K&&(4==c?er(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(E(e[n]))continue;var r=Te(e[n]);const o=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();const i=t[o]||[];t[o]=i,i.push(r)}!function(e,t){for(const r in e)t.call(void 0,e[r],r,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&r.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),qe(this)}}}catch(c){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),Be(this),this.m=2,qe(this)):ze(this,this.T-e)};var $e=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function He(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Ke(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const r of e.g.values())t=t.concat(r.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,rt(this,e.u),this.h=e.h,nt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match(Qe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),rt(this,t[4]),this.h=at(t[5]||"",!0),nt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new ft(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,r){e.j=r?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function rt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function nt(e,t,r){t instanceof ft?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const r=t.toLowerCase();t!=r&&(gt(this,t),bt(this,r,e))},e)),e.j=t}(e.i,e.l)):(r||(t=st(t,ht)),e.i=new ft(t,e.l))}function ot(e,t,r){e.i.set(t,r)}function it(e){return ot(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,ct),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,lt,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,lt,!0),"@"),e.push(Oe(r).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.u)&&e.push(":",String(r))),(r=this.h)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(st(r,"/"==r.charAt(0)?dt:ut,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",st(r,pt)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let r=!!e.j;r?tt(t,e.j):r=!!e.o,r?t.o=e.o:r=!!e.g,r?t.g=e.g:r=null!=e.u;var n=e.h;if(r)rt(t,e.u);else if(r=!!e.h){if("/"!=n.charAt(0))if(this.g&&!this.h)n="/"+n;else{var o=t.h.lastIndexOf("/");-1!=o&&(n=t.h.slice(0,o+1)+n)}if(".."==(o=n)||"."==o)n="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){n=0==o.lastIndexOf("/",0),o=o.split("/");const e=[];for(let t=0;t<o.length;){const r=o[t++];"."==r?n&&t==o.length&&e.push(""):".."==r?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),n&&t==o.length&&e.push("")):(e.push(r),n=!0)}n=e.join("/")}else n=o}return r?t.h=n:r=""!==e.i.toString(),r?nt(t,xt(e.i)):r=!!e.m,r&&(t.m=e.m),t};var lt=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,pt=/#/g;function ft(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let r=0;r<e.length;r++){const n=e[r].indexOf("=");let o,i=null;n>=0?(o=e[r].substring(0,n),i=e[r].substring(n+1)):o=e[r],t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function yt(e,t){mt(e);let r=[];if("string"==typeof t)vt(e,t)&&(r=r.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)r=r.concat(e[t]);return r}function bt(e,t,r){gt(e,t),r.length>0&&(e.i=null,e.g.set(wt(e,t),h(r)),e.h+=r.length)}function xt(e){const t=new ft;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jt(e,t,r,n,o){try{o&&(o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null),n(r)}catch(i){}}function St(){this.g=new se}function Nt(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Et(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Tt(e){let t="";return P(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=Tt(r),"string"==typeof e?null!=r&&Oe(r):ot(e,t,r))}function _t(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=ft.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let n=0;n<t.length;n++){var r=t[n];const o=Oe(r);r=yt(this,r);for(let t=0;t<r.length;t++){let n=o;""!==r[t]&&(n+="="+Oe(r[t])),e.push(n)}}return this.i=e.join("&")},u(Nt,ce),Nt.prototype.g=function(){return new kt(this.i,this.h)},u(kt,J),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Et(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):Ot(this),3==this.readyState&&Et(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(_t,J);var Pt=/^https?$/i,Dt=["POST","PUT"];function It(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),Lt(e)}function Mt(e){e.A||(e.A=!0,Q(e,"complete"),Q(e,"error"))}function Rt(e){if(e.h&&void 0!==o)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(Q(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const o=e.ca();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var n;if(n=0===o){let t=String(e.D).match(Qe)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),n=!Pt.test(t?t.toLowerCase():"")}r=n}if(r)Q(e,"complete"),Q(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Mt(e)}}finally{Lt(e)}}}function Lt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||Q(e,"ready");try{n.onreadystatechange=null}catch(r){}}}function Ft(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function qt(e){this.za=0,this.i=[],this.j=new je,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if($t(e),3==e.I){var t=e.V++,r=et(e.J);if(ot(r,"SID",e.M),ot(r,"RID",t),ot(r,"TYPE","terminate"),Gt(e,r),(t=new Ae(e,e.j,t)).M=2,t.A=it(et(r)),r=!1,i.navigator&&i.navigator.sendBeacon)try{r=i.navigator.sendBeacon(t.A.toString(),"")}catch(n){}!r&&i.Image&&((new Image).src=t.A,r=!0),r||(t.g=ir(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}nr(e)}function Vt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function $t(e){Vt(e),e.v&&(i.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"==typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Wt(e){if(!He(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||w(),b||(y(),b=!0),x.add(t,e),e.D=0}}function Ht(e,t){var r;r=t?t.l:e.V++;const n=et(e.J);ot(n,"SID",e.M),ot(n,"RID",r),ot(n,"AID",e.K),Gt(e,n),e.u&&e.o&&At(n,e.u,e.o),r=new Ae(e,e.j,r,e.D+1),null===e.u&&(r.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Kt(e,r,1e3),r.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,r),Ie(r,n,t)}function Gt(e,t){e.H&&P(e.H,function(e,r){ot(t,r,e)}),e.l&&P({},function(e,r){ot(t,r,e)})}function Kt(e,t,r){r=Math.min(e.i.length,r);const n=e.l?c(e.l.Ka,e.l,e):null;e:{var o=e.i;let t=-1;for(;;){const e=["count="+r];-1==t?r>0?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let c=!0;for(let u=0;u<r;u++){var i=o[u].g;const r=o[u].map;if((i-=t)<0)t=Math.max(0,o[u].g-100),c=!1;else try{i="req"+i+"_"||"";try{var s=r instanceof Map?r:Object.entries(r);for(const[t,r]of s){let n=r;a(r)&&(n=ie(r)),e.push(i+t+"="+encodeURIComponent(n))}}catch(l){throw e.push(i+"type="+encodeURIComponent("_badmap")),l}}catch(l){n&&n(r)}}if(c){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,r),t.G=e,s}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||w(),b||(y(),b=!0),x.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(c(e.Da,e),tr(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function Qt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);ot(t,"RID","rpc"),ot(t,"SID",e.M),ot(t,"AID",e.K),ot(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ot(t,"TO",e.ia),ot(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var r=e.g;e=e.ba,r.M=1,r.A=it(et(t)),r.u=null,r.R=!0,Me(r,e)}function Zt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function er(e,t){var r=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var n=2}else{if(!Ke(e.h,t))return;r=t.G,Xe(e.h,t),n=1}if(0!=e.I)if(t.o)if(1==n){r=t.u?t.u.length:0,t=Date.now()-t.F;var o=e.D;Q(n=me(),new xe(n,r)),Wt(e)}else Yt(e);else if(3==(o=t.m)||0==o&&t.X>0||!(1==n&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.G.concat(e.i),0):1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta)||(e.m=we(c(e.Ea,e,t),tr(e,e.D)),e.D++,0)))}(e,t)||2==n&&Xt(e)))switch(r&&r.length>0&&(t=e.h,t.i=t.i.concat(r)),o){case 1:rr(e,5);break;case 4:rr(e,10);break;case 3:rr(e,6);break;default:rr(e,2)}}function tr(e,t){let r=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(r*=2),r*t}function rr(e,t){if(e.j.info("Error code "+t),2==t){var r=c(e.bb,e),n=e.Ua;const t=!n;n=new Ze(n||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(n,"https"),it(n),t?function(e,t){const r=new je;if(i.Image){const n=new Image;n.onload=l(jt,r,"TestLoadImage: loaded",!0,t,n),n.onerror=l(jt,r,"TestLoadImage: error",!1,t,n),n.onabort=l(jt,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=l(jt,r,"TestLoadImage: timeout",!1,t,n),i.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(n.toString(),r):function(e,t){new je;const r=new AbortController,n=setTimeout(()=>{r.abort(),jt(0,0,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(n),e.ok?jt(0,0,!0,t):jt(0,0,!1,t)}).catch(()=>{clearTimeout(n),jt(0,0,!1,t)})}(n.toString(),r)}else be(2);e.I=0,e.l&&e.l.pa(t),nr(e),$t(e)}function nr(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function or(e,t,r){var n=r instanceof Ze?et(r):new Ze(r);if(""!=n.g)t&&(n.g=t+"."+n.g),rt(n,n.u);else{var o=i.location;n=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;const e=new Ze(null);n&&tt(e,n),t&&(e.g=t),o&&rt(e,o),r&&(e.h=r),n=e}return r=e.G,t=e.wa,r&&t&&ot(n,r,t),ot(n,"VER",e.ka),Gt(e,n),n}function ir(e,t,r){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new _t(new Nt({ab:r})):new _t(e.ma)).Fa(e.L),t}function ar(){}function sr(){}function cr(e,t){J.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!E(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dr(this)}function lr(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ur(){he.call(this),this.status=1}function dr(e){this.g=e}(e=_t.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ne.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void It(this,a)}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var o in n)r.set(o,n[o]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const e of n.keys())r.set(e,n.get(e))}n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||n||o||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of r)this.g.setRequestHeader(i,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){It(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Q(this,"complete"),Q(this,"abort"),Lt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),_t.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Rt(this):this.Xa())},e.Xa=function(){Rt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=qt.prototype).ka=8,e.I=1,e.connect=function(e,t,r,n){be(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.J=or(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const o=new Ae(this,this.j,e);let i=this.o;if(this.U&&(i?(i=D(i),M(i,this.U)):i=this.U),null!==this.u||this.R||(o.J=i,i=null),this.S)e:{for(var t=0,r=0;r<this.i.length;r++){var n=this.i[r];if(void 0===(n="__data__"in n.map&&"string"==typeof(n=n.map.__data__)?n.length:void 0))break;if((t+=n)>4096){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=Kt(this,o,t),ot(r=et(this.J),"RID",e),ot(r,"CVER",22),this.G&&ot(r,"X-HTTP-Session-Id",this.G),Gt(this,r),i&&(this.R?t="headers="+Oe(Tt(i))+"&"+t:this.u&&At(r,this.u,i)),Ye(this.h,o),this.Ra&&ot(r,"TYPE","init"),this.S?(ot(r,"$req",t),ot(r,"SID","null"),o.U=!0,Ie(o,r,null)):Ie(o,r,t),this.I=2}}else 3==this.I&&(e?Ht(this,e):0==this.i.length||He(this.h)||Ht(this))},e.Da=function(){if(this.v=null,Qt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(c(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Vt(this),Qt(this))},e.Va=function(){null!=this.C&&(this.C=null,Vt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=ar.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},sr.prototype.g=function(e,t){return new cr(e,t)},u(cr,J),cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){Bt(this.g)},cr.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=ie(e),e=r);t.i.push(new $e(t.Ya++,e)),3==t.I&&Wt(t)},cr.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cr.Z.N.call(this)},u(lr,de),u(ur,he),u(dr,ar),dr.prototype.ra=function(){Q(this.g,"a")},dr.prototype.qa=function(e){Q(this.g,new lr(e))},dr.prototype.pa=function(e){Q(this.g,new ur)},dr.prototype.oa=function(){Q(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,Wc=function(){return new sr},$c=function(){return me()},Vc=pe,Bc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,qc=ke,Ee.COMPLETE="complete",Uc=Ee,le.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,zc=le,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,Fc=_t}).apply(void 0!==Hc?Hc:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Gc="@firebase/firestore",Kc="4.9.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yc.UNAUTHENTICATED=new Yc(null),Yc.GOOGLE_CREDENTIALS=new Yc("google-credentials-uid"),Yc.FIRST_PARTY=new Yc("first-party-uid"),Yc.MOCK_USER=new Yc("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Xc="12.3.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new vs("@firebase/firestore");function Qc(){return Jc.logLevel}function Zc(e,...t){if(Jc.logLevel<=ds.DEBUG){const r=t.map(rl);Jc.debug(`Firestore (${Xc}): ${e}`,...r)}}function el(e,...t){if(Jc.logLevel<=ds.ERROR){const r=t.map(rl);Jc.error(`Firestore (${Xc}): ${e}`,...r)}}function tl(e,...t){if(Jc.logLevel<=ds.WARN){const r=t.map(rl);Jc.warn(`Firestore (${Xc}): ${e}`,...r)}}function rl(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(r){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(e,t,r){let n="Unexpected state";"string"==typeof t?n=t:r=t,ol(e,n,r)}function ol(e,t,r){let n=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{n+=" CONTEXT: "+JSON.stringify(r)}catch(o){n+=" CONTEXT: "+r}throw el(n),new Error(n)}function il(e,t,r,n){let o="Unexpected state";"string"==typeof r?o=r:n=r,e||ol(t,o,n)}function al(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cl extends Qa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yc.UNAUTHENTICATED))}shutdown(){}}class hl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pl{constructor(e){this.t=e,this.currentUser=Yc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){il(void 0===this.o,42304);let r=this.i;const n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let o=new ll;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ll,e.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const t=o;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{Zc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Zc("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ll)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Zc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(il("string"==typeof t.accessToken,31837,{l:t}),new ul(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return il(null===e||"string"==typeof e,2055,{h:e}),new Yc(e)}}class fl{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ml{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new fl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){il(void 0===this.o,3512);const r=e=>{null!=e.error&&Zc("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const r=e.token!==this.m;return this.m=e.token,Zc("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};const n=e=>{Zc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?n(e):Zc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(il("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new gl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const r=yl(40);for(let n=0;n<r.length;++n)t.length<20&&r[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[n]%62))}return t}}function xl(e,t){return e<t?-1:e>t?1:0}function wl(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const r=e.charAt(n),o=t.charAt(n);if(r!==o)return Nl(r)===Nl(o)?xl(r,o):Nl(r)?1:-1}return xl(e.length,t.length)}const jl=55296,Sl=57343;function Nl(e){const t=e.charCodeAt(0);return t>=jl&&t<=Sl}function kl(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El="__name__";class Cl{constructor(e,t,r){void 0===t?t=0:t>e.length&&nl(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&nl(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const r=Cl.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return xl(e.length,t.length)}static compareSegments(e,t){const r=Cl.isNumericId(e),n=Cl.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?Cl.extractNumericId(e).compare(Cl.extractNumericId(t)):wl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mc.fromString(e.substring(4,e.length-2))}}class Ol extends Cl{construct(e,t,r){return new Ol(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new cl(sl.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new Ol(t)}static emptyPath(){return new Ol([])}}const Tl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Al extends Cl{construct(e,t,r){return new Al(e,t,r)}static isValidIdentifier(e){return Tl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Al.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===El}static keyField(){return new Al([El])}static fromServerFormat(e){const t=[];let r="",n=0;const o=()=>{if(0===r.length)throw new cl(sl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let i=!1;for(;n<e.length;){const t=e[n];if("\\"===t){if(n+1===e.length)throw new cl(sl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new cl(sl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?(i=!i,n++):"."!==t||i?(r+=t,n++):(o(),n++)}if(o(),i)throw new cl(sl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Al(t)}static emptyPath(){return new Al([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.path=e}static fromPath(e){return new _l(Ol.fromString(e))}static fromName(e){return new _l(Ol.fromString(e).popFirst(5))}static empty(){return new _l(Ol.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ol.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ol.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _l(new Ol(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(e,t,r){if(!r)throw new cl(sl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Dl(e){if(!_l.isDocumentKey(e))throw new cl(sl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Il(e){if(_l.isDocumentKey(e))throw new cl(sl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ml(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Rl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}var t;return"function"==typeof e?"a function":nl(12329,{type:typeof e})}function Ll(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cl(sl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Rl(e);throw new cl(sl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(e,t){const r={typeString:e};return t&&(r.value=t),r}function zl(e,t){if(!Ml(e))throw new cl(sl.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const o=t[n].typeString,i="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const a=e[n];if(o&&typeof a!==o){r=`JSON field '${n}' must be a ${o}.`;break}if(void 0!==i&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new cl(sl.INVALID_ARGUMENT,r);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-62135596800,ql=1e6;class Bl{static now(){return Bl.fromMillis(Date.now())}static fromDate(e){return Bl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ql);return new Bl(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new cl(sl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new cl(sl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ul)throw new cl(sl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new cl(sl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ql}_compareTo(e){return this.seconds===e.seconds?xl(this.nanoseconds,e.nanoseconds):xl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zl(e,Bl._jsonSchema))return new Bl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ul;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bl._jsonSchemaVersion="firestore/timestamp/1.0",Bl._jsonSchema={type:Fl("string",Bl._jsonSchemaVersion),seconds:Fl("number"),nanoseconds:Fl("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vl{static fromTimestamp(e){return new Vl(e)}static min(){return new Vl(new Bl(0,0))}static max(){return new Vl(new Bl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(e){return new Wl(e.readTime,e.key,-1)}class Wl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wl(Vl.min(),_l.empty(),-1)}static max(){return new Wl(Vl.max(),_l.empty(),-1)}}function Hl(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:(r=_l.comparator(e.documentKey,t.documentKey),0!==r?r:xl(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Gl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(e){if(e.code!==sl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Zc("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nl(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Yl((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Yl?t:Yl.resolve(t)}catch(t){return Yl.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Yl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Yl.reject(t)}static resolve(e){return new Yl((t,r)=>{t(e)})}static reject(e){return new Yl((t,r)=>{r(e)})}static waitFor(e){return new Yl((t,r)=>{let n=0,o=0,i=!1;e.forEach(e=>{++n,e.next(()=>{++o,i&&o===n&&t()},e=>r(e))}),i=!0,o===n&&t()})}static or(e){let t=Yl.resolve(!1);for(const r of e)t=t.next(e=>e?Yl.resolve(e):r());return t}static forEach(e,t){const r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new Yl((r,n)=>{const o=e.length,i=new Array(o);let a=0;for(let s=0;s<o;s++){const c=s;t(e[c]).next(e=>{i[c]=e,++a,a===o&&r(i)},e=>n(e))}})}static doWhile(e,t){return new Yl((r,n)=>{const o=()=>{!0===e()?t().next(()=>{o()},n):r()};o()})}}function Xl(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jl.ce=-1;function Ql(e){return null==e}function Zl(e){return 0===e&&1/e==-1/0}function eu(e,t){let r=t;const n=e.length;for(let o=0;o<n;o++){const t=e.charAt(o);switch(t){case"\0":r+="";break;case"":r+="";break;default:r+=t}}return r}function tu(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nu(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function ou(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.comparator=e,this.root=t||su.EMPTY}insert(e,t){return new iu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,su.BLACK,null,null))}remove(e){return new iu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,su.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}}class au{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&n&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class su{constructor(e,t,r,n,o){this.key=e,this.value=t,this.color=null!=r?r:su.RED,this.left=null!=n?n:su.EMPTY,this.right=null!=o?o:su.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,o){return new su(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const o=r(e,n.key);return n=o<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===o?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return su.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return su.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,su.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,su.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nl(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nl(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nl(27949);return e+(this.isRed()?0:1)}}su.EMPTY=null,su.RED=!0,su.BLACK=!1,su.EMPTY=new class{constructor(){this.size=0}get key(){throw nl(57766)}get value(){throw nl(16141)}get color(){throw nl(16727)}get left(){throw nl(29726)}get right(){throw nl(36894)}copy(e,t,r,n,o){return this}insert(e,t,r){return new su(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cu{constructor(e){this.comparator=e,this.data=new iu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lu(this.data.getIterator())}getIteratorFrom(e){return new lu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof cu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cu(this.comparator);return t.data=e,t}}class lu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.fields=e,e.sort(Al.comparator)}static empty(){return new uu([])}unionWith(e){let t=new cu(Al.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new du("Invalid base64 string: "+t):t}}(e);return new hu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new hu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hu.EMPTY_BYTE_STRING=new hu("");const pu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(e){if(il(!!e,39018),"string"==typeof e){let t=0;const r=pu.exec(e);if(il(!!r,46558,{timestamp:e}),r[1]){let e=r[1];e=(e+"000000000").substr(0,9),t=Number(e)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:mu(e.seconds),nanos:mu(e.nanos)}}function mu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gu(e){return"string"==typeof e?hu.fromBase64String(e):hu.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="server_timestamp",yu="__type__",bu="__previous_value__",xu="__local_write_time__";function wu(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[yu])?void 0:r.stringValue)===vu}function ju(e){const t=e.mapValue.fields[bu];return wu(t)?ju(t):t}function Su(e){const t=fu(e.mapValue.fields[xu].timestampValue);return new Bl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,r,n,o,i,a,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}}const ku="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||ku}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===ku}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="__type__",Ou="__max__",Tu={fields:{__type__:{stringValue:Ou}}},Au="__vector__",_u="value";function Pu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wu(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ou}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,r;const n=null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[Cu])?void 0:r.stringValue;return n===Au}(e)?10:11:nl(28295,{value:e})}function Du(e,t){if(e===t)return!0;const r=Pu(e);if(r!==Pu(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Su(e).isEqual(Su(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const r=fu(e.timestampValue),n=fu(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,gu(e.bytesValue).isEqual(gu(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mu(e.geoPointValue.latitude)===mu(t.geoPointValue.latitude)&&mu(e.geoPointValue.longitude)===mu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mu(e.integerValue)===mu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const r=mu(e.doubleValue),n=mu(t.doubleValue);return r===n?Zl(r)===Zl(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return kl(e.arrayValue.values||[],t.arrayValue.values||[],Du);case 10:case 11:return function(e,t){const r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(ru(r)!==ru(n))return!1;for(const o in r)if(r.hasOwnProperty(o)&&(void 0===n[o]||!Du(r[o],n[o])))return!1;return!0}(e,t);default:return nl(52216,{left:e})}var n}function Iu(e,t){return void 0!==(e.values||[]).find(e=>Du(e,t))}function Mu(e,t){if(e===t)return 0;const r=Pu(e),n=Pu(t);if(r!==n)return xl(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return xl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const r=mu(e.integerValue||e.doubleValue),n=mu(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return Ru(e.timestampValue,t.timestampValue);case 4:return Ru(Su(e),Su(t));case 5:return wl(e.stringValue,t.stringValue);case 6:return function(e,t){const r=gu(e),n=gu(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const r=e.split("/"),n=t.split("/");for(let o=0;o<r.length&&o<n.length;o++){const e=xl(r[o],n[o]);if(0!==e)return e}return xl(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const r=xl(mu(e.latitude),mu(t.latitude));return 0!==r?r:xl(mu(e.longitude),mu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Lu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var r,n,o,i;const a=e.fields||{},s=t.fields||{},c=null==(r=a[_u])?void 0:r.arrayValue,l=null==(n=s[_u])?void 0:n.arrayValue,u=xl((null==(o=null==c?void 0:c.values)?void 0:o.length)||0,(null==(i=null==l?void 0:l.values)?void 0:i.length)||0);return 0!==u?u:Lu(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Tu&&t===Tu)return 0;if(e===Tu)return 1;if(t===Tu)return-1;const r=e.fields||{},n=Object.keys(r),o=t.fields||{},i=Object.keys(o);n.sort(),i.sort();for(let a=0;a<n.length&&a<i.length;++a){const e=wl(n[a],i[a]);if(0!==e)return e;const t=Mu(r[n[a]],o[i[a]]);if(0!==t)return t}return xl(n.length,i.length)}(e.mapValue,t.mapValue);default:throw nl(23264,{he:r})}}function Ru(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xl(e,t);const r=fu(e),n=fu(t),o=xl(r.seconds,n.seconds);return 0!==o?o:xl(r.nanos,n.nanos)}function Lu(e,t){const r=e.values||[],n=t.values||[];for(let o=0;o<r.length&&o<n.length;++o){const e=Mu(r[o],n[o]);if(e)return e}return xl(r.length,n.length)}function Fu(e){return zu(e)}function zu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=fu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gu(e.bytesValue).toBase64():"referenceValue"in e?function(e){return _l.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",r=!0;for(const n of e.values||[])r?r=!1:t+=",",t+=zu(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let r="{",n=!0;for(const o of t)n?n=!1:r+=",",r+=`${o}:${zu(e.fields[o])}`;return r+"}"}(e.mapValue):nl(61005,{value:e})}function Uu(e){switch(Pu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ju(e);return t?16+Uu(t):16;case 5:return 2*e.stringValue.length;case 6:return gu(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Uu(t),0);case 10:case 11:return function(e){let t=0;return nu(e.fields,(e,r)=>{t+=e.length+Uu(r)}),t}(e.mapValue);default:throw nl(13486,{value:e})}}function qu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bu(e){return!!e&&"integerValue"in e}function Vu(e){return!!e&&"arrayValue"in e}function $u(e){return!!e&&"nullValue"in e}function Wu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hu(e){return!!e&&"mapValue"in e}function Gu(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return nu(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Gu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Gu(e.arrayValue.values[r]);return t}return{...e}}class Ku{constructor(e){this.value=e}static empty(){return new Ku({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=Al.emptyPath(),r={},n=[];e.forEach((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=o.popLast()}e?r[o.lastSegment()]=Gu(e):n.push(o.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,n)}delete(e){const t=this.field(e.popLast());Hu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];Hu(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){nu(t,(t,r)=>e[t]=r);for(const n of r)delete e[n]}clone(){return new Ku(Gu(this.value))}}function Yu(e){const t=[];return nu(e.fields,(e,r)=>{const n=new Al([e]);if(Hu(r)){const e=Yu(r.mapValue).fields;if(0===e.length)t.push(n);else for(const r of e)t.push(n.child(r))}else t.push(n)}),new uu(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Xu{constructor(e,t,r,n,o,i,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Xu(e,0,Vl.min(),Vl.min(),Vl.min(),Ku.empty(),0)}static newFoundDocument(e,t,r,n){return new Xu(e,1,t,Vl.min(),r,n,0)}static newNoDocument(e,t){return new Xu(e,2,t,Vl.min(),Vl.min(),Ku.empty(),0)}static newUnknownDocument(e,t){return new Xu(e,3,t,Vl.min(),Vl.min(),Ku.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ku.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ku.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.position=e,this.inclusive=t}}function Qu(e,t,r){let n=0;for(let o=0;o<e.position.length;o++){const i=t[o],a=e.position[o];if(n=i.field.isKeyField()?_l.comparator(_l.fromName(a.referenceValue),r.key):Mu(a,r.data.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return n}function Zu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Du(e.position[r],t.position[r]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t="asc"){this.field=e,this.dir=t}}function td(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{}class nd extends rd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ud(e,t,r):"array-contains"===t?new fd(e,r):"in"===t?new md(e,r):"not-in"===t?new gd(e,r):"array-contains-any"===t?new vd(e,r):new nd(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new dd(e,r):new hd(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Mu(t,this.value)):null!==t&&Pu(this.value)===Pu(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nl(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class od extends rd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new od(e,t)}matches(e){return id(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function id(e){return"and"===e.op}function ad(e){return function(e){for(const t of e.filters)if(t instanceof od)return!1;return!0}(e)&&id(e)}function sd(e){if(e instanceof nd)return e.field.canonicalString()+e.op.toString()+Fu(e.value);if(ad(e))return e.filters.map(e=>sd(e)).join(",");{const t=e.filters.map(e=>sd(e)).join(",");return`${e.op}(${t})`}}function cd(e,t){return e instanceof nd?(r=e,(n=t)instanceof nd&&r.op===n.op&&r.field.isEqual(n.field)&&Du(r.value,n.value)):e instanceof od?function(e,t){return t instanceof od&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&cd(r,t.filters[n]),!0)}(e,t):void nl(19439);var r,n}function ld(e){return e instanceof nd?`${(t=e).field.canonicalString()} ${t.op} ${Fu(t.value)}`:e instanceof od?function(e){return e.op.toString()+" {"+e.getFilters().map(ld).join(" ,")+"}"}(e):"Filter";var t}class ud extends nd{constructor(e,t,r){super(e,t,r),this.key=_l.fromName(r.referenceValue)}matches(e){const t=_l.comparator(e.key,this.key);return this.matchesComparison(t)}}class dd extends nd{constructor(e,t){super(e,"in",t),this.keys=pd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hd extends nd{constructor(e,t){super(e,"not-in",t),this.keys=pd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pd(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>_l.fromName(e.referenceValue))}class fd extends nd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vu(t)&&Iu(t.arrayValue,this.value)}}class md extends nd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Iu(this.value.arrayValue,t)}}class gd extends nd{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Iu(this.value.arrayValue,t)}}class vd extends nd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Iu(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t=null,r=[],n=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=o,this.startAt=i,this.endAt=a,this.Te=null}}function bd(e,t=null,r=[],n=[],o=null,i=null,a=null){return new yd(e,t,r,n,o,i,a)}function xd(e){const t=al(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>sd(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Ql(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Fu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Fu(e)).join(",")),t.Te=e}return t.Te}function wd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!td(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!cd(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zu(e.startAt,t.startAt)&&Zu(e.endAt,t.endAt)}function jd(e){return _l.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t=null,r=[],n=[],o=null,i="F",a=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Nd(e){return new Sd(e)}function kd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ed(e){return null!==e.collectionGroup}function Cd(e){const t=al(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new cu(Al.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.Ie.push(new ed(n,r))}),e.has(Al.keyField().canonicalString())||t.Ie.push(new ed(Al.keyField(),r))}return t.Ie}function Od(e){const t=al(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return bd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ed(e.field,t)});const r=e.endAt?new Ju(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Ju(e.startAt.position,e.startAt.inclusive):null;return bd(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}(t,Cd(e))),t.Ee}function Td(e,t){const r=e.filters.concat([t]);return new Sd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function Ad(e,t,r){return new Sd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function _d(e,t){return wd(Od(e),Od(t))&&e.limitType===t.limitType}function Pd(e){return`${xd(Od(e))}|lt:${e.limitType}`}function Dd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>ld(e)).join(", ")}]`),Ql(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Fu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Fu(e)).join(",")),`Target(${t})`}(Od(e))}; limitType=${e.limitType})`}function Id(e,t){return t.isFoundDocument()&&function(e,t){const r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):_l.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(const r of Cd(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(const r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(n=t,!((r=e).startAt&&!function(e,t,r){const n=Qu(e,t,r);return e.inclusive?n<=0:n<0}(r.startAt,Cd(r),n)||r.endAt&&!function(e,t,r){const n=Qu(e,t,r);return e.inclusive?n>=0:n>0}(r.endAt,Cd(r),n)));var r,n}function Md(e){return(t,r)=>{let n=!1;for(const o of Cd(e)){const e=Rd(o,t,r);if(0!==e)return e;n=n||o.field.isKeyField()}return 0}}function Rd(e,t,r){const n=e.field.isKeyField()?_l.comparator(t.key,r.key):function(e,t,r){const n=t.data.field(e),o=r.data.field(e);return null!==n&&null!==o?Mu(n,o):nl(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return nl(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[n,o]of r)if(this.equalsFn(n,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return void(n[o]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,(t,r)=>{for(const[n,o]of r)e(n,o)})}isEmpty(){return ou(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new iu(_l.comparator);function zd(){return Fd}const Ud=new iu(_l.comparator);function qd(...e){let t=Ud;for(const r of e)t=t.insert(r.key,r);return t}function Bd(e){let t=Ud;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Vd(){return Wd()}function $d(){return Wd()}function Wd(){return new Ld(e=>e.toString(),(e,t)=>e.isEqual(t))}const Hd=new iu(_l.comparator),Gd=new cu(_l.comparator);function Kd(...e){let t=Gd;for(const r of e)t=t.add(r);return t}const Yd=new cu(xl);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(t)?"-0":t}}function Jd(e){return{integerValue:""+e}}function Qd(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?Jd(t):Xd(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this._=void 0}}function eh(e,t,r){return e instanceof nh?function(e,t){const r={fields:{[yu]:{stringValue:vu},[xu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wu(t)&&(t=ju(t)),t&&(r.fields[bu]=t),{mapValue:r}}(r,t):e instanceof oh?ih(e,t):e instanceof ah?sh(e,t):function(e,t){const r=rh(e,t),n=lh(r)+lh(e.Ae);return Bu(r)&&Bu(e.Ae)?Jd(n):Xd(e.serializer,n)}(e,t)}function th(e,t,r){return e instanceof oh?ih(e,t):e instanceof ah?sh(e,t):r}function rh(e,t){return e instanceof ch?Bu(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var r,n}class nh extends Zd{}class oh extends Zd{constructor(e){super(),this.elements=e}}function ih(e,t){const r=uh(t);for(const n of e.elements)r.some(e=>Du(e,n))||r.push(n);return{arrayValue:{values:r}}}class ah extends Zd{constructor(e){super(),this.elements=e}}function sh(e,t){let r=uh(t);for(const n of e.elements)r=r.filter(e=>!Du(e,n));return{arrayValue:{values:r}}}class ch extends Zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lh(e){return mu(e.integerValue||e.doubleValue)}function uh(e){return Vu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.field=e,this.transform=t}}class hh{constructor(e,t){this.version=e,this.transformResults=t}}class ph{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ph}static exists(e){return new ph(void 0,e)}static updateTime(e){return new ph(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class mh{}function gh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Eh(e.key,ph.none()):new wh(e.key,e.data,ph.none());{const r=e.data,n=Ku.empty();let o=new cu(Al.comparator);for(let e of t.fields)if(!o.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),o=o.add(e)}return new jh(e.key,n,new uu(o.toArray()),ph.none())}}function vh(e,t,r){var n;e instanceof wh?function(e,t,r){const n=e.value.clone(),o=Nh(e.fieldTransforms,t,r.transformResults);n.setAll(o),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):e instanceof jh?function(e,t,r){if(!fh(e.precondition,t))return void t.convertToUnknownDocument(r.version);const n=Nh(e.fieldTransforms,t,r.transformResults),o=t.data;o.setAll(Sh(e)),o.setAll(n),t.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(e,t,r):(n=r,t.convertToNoDocument(n.version).setHasCommittedMutations())}function yh(e,t,r,n){return e instanceof wh?function(e,t,r,n){if(!fh(e.precondition,t))return r;const o=e.value.clone(),i=kh(e.fieldTransforms,n,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,r,n):e instanceof jh?function(e,t,r,n){if(!fh(e.precondition,t))return r;const o=kh(e.fieldTransforms,n,t),i=t.data;return i.setAll(Sh(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===r?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):(o=t,i=r,fh(e.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):i);var o,i}function bh(e,t){let r=null;for(const n of e.fieldTransforms){const e=t.data.field(n.field),o=rh(n.transform,e||null);null!=o&&(null===r&&(r=Ku.empty()),r.set(n.field,o))}return r||null}function xh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||r&&n&&kl(r,n,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof oh&&n instanceof oh||r instanceof ah&&n instanceof ah?kl(r.elements,n.elements,Du):r instanceof ch&&n instanceof ch?Du(r.Ae,n.Ae):r instanceof nh&&n instanceof nh);var r,n}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var r,n}class wh extends mh{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class jh extends mh{constructor(e,t,r,n,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Sh(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function Nh(e,t,r){const n=new Map;il(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let o=0;o<r.length;o++){const i=e[o],a=i.transform,s=t.data.field(i.field);n.set(i.field,th(a,s,r[o]))}return n}function kh(e,t,r){const n=new Map;for(const o of e){const e=o.transform,i=r.data.field(o.field);n.set(o.field,eh(e,i,t))}return n}class Eh extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ch extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const t=this.mutations[n];t.key.isEqual(e.key)&&vh(t,e,r[n])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$d();return this.mutations.forEach(n=>{const o=e.get(n.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(n.key)?null:a;const s=gh(i,a);null!==s&&r.set(n.key,s),i.isValidDocument()||i.convertToNoDocument(Vl.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kd())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(e,t)=>xh(e,t))&&kl(this.baseMutations,e.baseMutations,(e,t)=>xh(e,t))}}class Th{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){il(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let n=Hd;const o=e.mutations;for(let i=0;i<o.length;i++)n=n.insert(o[i].key,r[i].version);return new Th(e,t,r,n)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ph,Dh;function Ih(e){if(void 0===e)return el("GRPC error has no .code"),sl.UNKNOWN;switch(e){case Ph.OK:return sl.OK;case Ph.CANCELLED:return sl.CANCELLED;case Ph.UNKNOWN:return sl.UNKNOWN;case Ph.DEADLINE_EXCEEDED:return sl.DEADLINE_EXCEEDED;case Ph.RESOURCE_EXHAUSTED:return sl.RESOURCE_EXHAUSTED;case Ph.INTERNAL:return sl.INTERNAL;case Ph.UNAVAILABLE:return sl.UNAVAILABLE;case Ph.UNAUTHENTICATED:return sl.UNAUTHENTICATED;case Ph.INVALID_ARGUMENT:return sl.INVALID_ARGUMENT;case Ph.NOT_FOUND:return sl.NOT_FOUND;case Ph.ALREADY_EXISTS:return sl.ALREADY_EXISTS;case Ph.PERMISSION_DENIED:return sl.PERMISSION_DENIED;case Ph.FAILED_PRECONDITION:return sl.FAILED_PRECONDITION;case Ph.ABORTED:return sl.ABORTED;case Ph.OUT_OF_RANGE:return sl.OUT_OF_RANGE;case Ph.UNIMPLEMENTED:return sl.UNIMPLEMENTED;case Ph.DATA_LOSS:return sl.DATA_LOSS;default:return nl(39323,{code:e})}}(Dh=Ph||(Ph={}))[Dh.OK=0]="OK",Dh[Dh.CANCELLED=1]="CANCELLED",Dh[Dh.UNKNOWN=2]="UNKNOWN",Dh[Dh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dh[Dh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dh[Dh.NOT_FOUND=5]="NOT_FOUND",Dh[Dh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dh[Dh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dh[Dh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dh[Dh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dh[Dh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dh[Dh.ABORTED=10]="ABORTED",Dh[Dh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dh[Dh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dh[Dh.INTERNAL=13]="INTERNAL",Dh[Dh.UNAVAILABLE=14]="UNAVAILABLE",Dh[Dh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Mh=new Mc([4294967295,4294967295],0);function Rh(e){const t=(new TextEncoder).encode(e),r=new Rc;return r.update(t),new Uint8Array(r.digest())}function Lh(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),o=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Mc([r,n],0),new Mc([o,i],0)]}class Fh{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zh(`Invalid padding: ${t}`);if(r<0)throw new zh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new zh(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new zh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Mc.fromNumber(this.ge)}ye(e,t,r){let n=e.add(t.multiply(Mc.fromNumber(r)));return 1===n.compare(Mh)&&(n=new Mc([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Rh(e),[r,n]=Lh(t);for(let o=0;o<this.hashCount;o++){const e=this.ye(r,n,o);if(!this.we(e))return!1}return!0}static create(e,t,r){const n=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new Fh(o,n,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Rh(e),[r,n]=Lh(t);for(let o=0;o<this.hashCount;o++){const e=this.ye(r,n,o);this.Se(e)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t,r,n,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const n=new Map;return n.set(e,qh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Uh(Vl.min(),n,new iu(xl),zd(),Kd())}}class qh{constructor(e,t,r,n,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qh(r,t,Kd(),Kd(),Kd())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,r,n){this.be=e,this.removedTargetIds=t,this.key=r,this.De=n}}class Vh{constructor(e,t){this.targetId=e,this.Ce=t}}class $h{constructor(e,t,r=hu.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class Wh{constructor(){this.ve=0,this.Fe=Kh(),this.Me=hu.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Kd(),t=Kd(),r=Kd();return this.Fe.forEach((n,o)=>{switch(o){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:nl(38017,{changeType:o})}}),new qh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Kh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,il(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Hh{constructor(e){this.Ge=e,this.ze=new Map,this.je=zd(),this.Je=Gh(),this.He=Gh(),this.Ye=new iu(xl)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:nl(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,r)=>{this.rt(r)&&t(r)})}st(e){const t=e.targetId,r=e.Ce.count,n=this.ot(t);if(n){const o=n.target;if(jd(o))if(0===r){const e=new _l(o.path);this.et(t,e,Xu.newNoDocument(e,Vl.min()))}else il(1===r,20013,{expectedCount:r});else{const n=this._t(t);if(n!==r){const r=this.ut(e),o=r?this.ct(r,e,n):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:o=0}=t;let i,a;try{i=gu(r).toUint8Array()}catch(s){if(s instanceof du)return tl("Decoding the base64 bloom filter in existence filter failed ("+s.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw s}try{a=new Fh(i,n,o)}catch(s){return tl(s instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",s),null}return 0===a.ge?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let n=0;return r.forEach(r=>{const o=this.Ge.ht(),i=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(i)||(this.et(t,r,null),n++)}),n}Tt(e){const t=new Map;this.ze.forEach((r,n)=>{const o=this.ot(n);if(o){if(r.current&&jd(o.target)){const t=new _l(o.target.path);this.It(t).has(n)||this.Et(n,t)||this.et(n,t,Xu.newNoDocument(t,e))}r.Be&&(t.set(n,r.ke()),r.qe())}});let r=Kd();this.He.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.je.forEach((t,r)=>r.setReadTime(e));const n=new Uh(e,t,this.Ye,this.je,r);return this.je=zd(),this.Je=Gh(),this.He=Gh(),this.Ye=new iu(xl),n}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const n=this.nt(e);this.Et(e,t)?n.Qe(t,1):n.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Wh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new cu(xl),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new cu(xl),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Zc("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wh),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new iu(_l.comparator)}function Kh(){return new iu(_l.comparator)}const Yh={asc:"ASCENDING",desc:"DESCENDING"},Xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jh={and:"AND",or:"OR"};class Qh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zh(e,t){return e.useProto3Json||Ql(t)?t:{value:t}}function ep(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rp(e,t){return ep(e,t.toTimestamp())}function np(e){return il(!!e,49232),Vl.fromTimestamp(function(e){const t=fu(e);return new Bl(t.seconds,t.nanos)}(e))}function op(e,t){return ip(e,t).canonicalString()}function ip(e,t){const r=(n=e,new Ol(["projects",n.projectId,"databases",n.database])).child("documents");var n;return void 0===t?r:r.child(t)}function ap(e){const t=Ol.fromString(e);return il(Np(t),10190,{key:t.toString()}),t}function sp(e,t){return op(e.databaseId,t.path)}function cp(e,t){const r=ap(t);if(r.get(1)!==e.databaseId.projectId)throw new cl(sl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new cl(sl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new _l(dp(r))}function lp(e,t){return op(e.databaseId,t)}function up(e){return new Ol(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dp(e){return il(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function hp(e,t,r){return{name:sp(e,t),fields:r.value.mapValue.fields}}function pp(e,t){return{documents:[lp(e,t.path)]}}function fp(e,t){const r={structuredQuery:{}},n=t.path;let o;null!==t.collectionGroup?(o=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=lp(e,o);const i=function(e){if(0!==e.length)return jp(od.create(e,"and"))}(t.filters);i&&(r.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:xp((t=e).field),direction:vp(t.dir)};var t})}(t.orderBy);a&&(r.structuredQuery.orderBy=a);const s=Zh(e,t.limit);return null!==s&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:r,parent:o};var c}function mp(e){let t=function(e){const t=ap(e);return 4===t.length?Ol.emptyPath():dp(t)}(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let o=null;if(n>0){il(1===n,65062);const e=r.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];r.where&&(i=function(e){const t=gp(e);return t instanceof od&&ad(t)?t.getFilters():[t]}(r.where));let a=[];r.orderBy&&(a=r.orderBy.map(e=>{return new ed(wp((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let s=null;r.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Ql(t)?null:t}(r.limit));let c=null;r.startAt&&(c=function(e){const t=!!e.before,r=e.values||[];return new Ju(r,t)}(r.startAt));let l=null;return r.endAt&&(l=function(e){const t=!e.before,r=e.values||[];return new Ju(r,t)}(r.endAt)),function(e,t,r,n,o,i,a,s){return new Sd(e,t,r,n,o,i,a,s)}(t,o,a,i,s,"F",c,l)}function gp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wp(e.unaryFilter.field);return nd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=wp(e.unaryFilter.field);return nd.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=wp(e.unaryFilter.field);return nd.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wp(e.unaryFilter.field);return nd.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nl(61313);default:return nl(60726)}}(e):void 0!==e.fieldFilter?(t=e,nd.create(wp(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nl(58110);default:return nl(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return od.create(e.compositeFilter.filters.map(e=>gp(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nl(1026)}}(e.compositeFilter.op))}(e):nl(30097,{filter:e});var t}function vp(e){return Yh[e]}function yp(e){return Xh[e]}function bp(e){return Jh[e]}function xp(e){return{fieldPath:e.canonicalString()}}function wp(e){return Al.fromServerFormat(e.fieldPath)}function jp(e){return e instanceof nd?function(e){if("=="===e.op){if(Wu(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NAN"}};if($u(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wu(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NOT_NAN"}};if($u(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xp(e.field),op:yp(e.op),value:e.value}}}(e):e instanceof od?function(e){const t=e.getFilters().map(e=>jp(e));return 1===t.length?t[0]:{compositeFilter:{op:bp(e.op),filters:t}}}(e):nl(54877,{filter:e})}function Sp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Np(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,r,n,o=Vl.min(),i=Vl.min(),a=hu.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new kp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.yt=e}}function Cp(e){const t=mp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ad(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.Cn=new Tp}addToCollectionParentIndex(e,t){return this.Cn.add(t),Yl.resolve()}getCollectionParents(e,t){return Yl.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Yl.resolve()}deleteFieldIndex(e,t){return Yl.resolve()}deleteAllFieldIndexes(e){return Yl.resolve()}createTargetIndexes(e,t){return Yl.resolve()}getDocumentsMatchingTarget(e,t){return Yl.resolve(null)}getIndexType(e,t){return Yl.resolve(0)}getFieldIndexes(e,t){return Yl.resolve([])}getNextCollectionGroupToUpdate(e){return Yl.resolve(null)}getMinOffset(e,t){return Yl.resolve(Wl.min())}getMinOffsetFromCollectionGroup(e,t){return Yl.resolve(Wl.min())}updateCollectionGroup(e,t,r){return Yl.resolve()}updateIndexEntries(e,t){return Yl.resolve()}}class Tp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new cu(Ol.comparator),o=!n.has(r);return this.index[t]=n.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new cu(Ol.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_p=41943040;class Pp{static withCacheSize(e){return new Pp(e,Pp.DEFAULT_COLLECTION_PERCENTILE,Pp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pp.DEFAULT_COLLECTION_PERCENTILE=10,Pp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pp.DEFAULT=new Pp(_p,Pp.DEFAULT_COLLECTION_PERCENTILE,Pp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pp.DISABLED=new Pp(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dp(0)}static cr(){return new Dp(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LruGarbageCollector";function Mp([e,t],[r,n]){const o=xl(e,r);return 0===o?xl(t,n):o}class Rp{constructor(e){this.Ir=e,this.buffer=new cu(Mp),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Mp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lp{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Zc(Ip,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xl(e)?Zc(Ip,"Ignoring IndexedDB error during garbage collection: ",e):await Kl(e)}await this.Vr(3e5)})}}class Fp{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Yl.resolve(Jl.ce);const r=new Rp(t);return this.mr.forEachTarget(e,e=>r.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>r.Ar(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Zc("LruGarbageCollector","Garbage collection skipped; disabled"),Yl.resolve(Ap)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Zc("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ap):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,n,o,i,a,s,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Zc("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,i=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,a=Date.now(),this.removeTargets(e,r,t))).next(t=>(o=t,s=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(c=Date.now(),Qc()<=ds.DEBUG&&Zc("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${n} in `+(a-i)+`ms\n\tRemoved ${o} targets in `+(s-a)+`ms\n\tRemoved ${e} documents in `+(c-s)+`ms\nTotal Duration: ${c-l}ms`),Yl.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:o,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zp{constructor(){this.changes=new Ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Yl.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&yh(r.mutation,e,uu.empty(),Bl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Kd()).next(()=>t))}getLocalViewOfDocuments(e,t,r=Kd()){const n=Vd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=qd();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const r=Vd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kd()))}populateOverlays(e,t,r){const n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let o=zd();const i=Wd(),a=Wd();return t.forEach((e,t)=>{const a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof jh)?o=o.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),yh(a.mutation,t,a.mutation.getFieldMask(),Bl.now())):i.set(t.key,uu.empty())}),this.recalculateAndSaveOverlays(e,o).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>a.set(e,new Up(t,i.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const r=Wd();let n=new iu((e,t)=>e-t),o=Kd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const o of e)o.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=r.get(e)||uu.empty();a=o.applyToLocalView(i,a),r.set(e,a);const s=(n.get(o.batchId)||Kd()).add(e);n=n.insert(o.batchId,s)})}).next(()=>{const i=[],a=n.getReverseIterator();for(;a.hasNext();){const n=a.getNext(),s=n.key,c=n.value,l=$d();c.forEach(e=>{if(!o.has(e)){const n=gh(t.get(e),r.get(e));null!==n&&l.set(e,n),o=o.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Yl.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return o=t,_l.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ed(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n);var o}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(o=>{const i=n-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-o.size):Yl.resolve(Vd());let a=-1,s=o;return i.next(t=>Yl.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),o.get(t)?Yl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,o)).next(()=>this.computeViews(e,s,t,Kd())).next(e=>({batchId:a,changes:Bd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _l(t)).next(e=>{let t=qd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){const o=t.collectionGroup;let i=qd();return this.indexManager.getCollectionParents(e,o).next(a=>Yl.forEach(a,a=>{const s=(c=t,l=a.child(o),new Sd(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,s,r,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r,n){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,n))).next(e=>{o.forEach((t,r)=>{const n=r.getKey();null===e.get(n)&&(e=e.insert(n,Xu.newInvalidDocument(n)))});let r=qd();return e.forEach((e,n)=>{const i=o.get(e);void 0!==i&&yh(i.mutation,n,uu.empty(),Bl.now()),Id(t,n)&&(r=r.insert(e,n))}),r})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Yl.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(r=t).id,version:r.version,createTime:np(r.createTime)}),Yl.resolve();var r}getNamedQuery(e,t){return Yl.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(r=t).name,query:Cp(r.bundledQuery),readTime:np(r.readTime)}),Yl.resolve();var r}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.overlays=new iu(_l.comparator),this.qr=new Map}getOverlay(e,t){return Yl.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vd();return Yl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.St(e,t,n)}),Yl.resolve()}removeOverlaysForBatchId(e,t,r){const n=this.qr.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(r)),Yl.resolve()}getOverlaysForCollection(e,t,r){const n=Vd(),o=t.length+1,i=new _l(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>r&&n.set(e.getKey(),e)}return Yl.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let o=new iu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=o.get(e.largestBatchId);null===t&&(t=Vd(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Vd(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return Yl.resolve(a)}St(e,t,r){const n=this.overlays.get(r.key);if(null!==n){const e=this.qr.get(n.largestBatchId).delete(r.key);this.qr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new Ah(t,r));let o=this.qr.get(t);void 0===o&&(o=Kd(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.sessionToken=hu.EMPTY_BYTE_STRING}getSessionToken(e){return Yl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Yl.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.Qr=new cu(Hp.$r),this.Ur=new cu(Hp.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Hp(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Hp(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new _l(new Ol([])),r=new Hp(t,e),n=new Hp(t,e+1),o=[];return this.Ur.forEachInRange([r,n],e=>{this.Gr(e),o.push(e.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _l(new Ol([])),r=new Hp(t,e),n=new Hp(t,e+1);let o=Kd();return this.Ur.forEachInRange([r,n],e=>{o=o.add(e.key)}),o}containsKey(e){const t=new Hp(e,0),r=this.Qr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hp{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _l.comparator(e.key,t.key)||xl(e.Yr,t.Yr)}static Kr(e,t){return xl(e.Yr,t.Yr)||_l.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new cu(Hp.$r)}checkEmpty(e){return Yl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Oh(o,t,r,n);this.mutationQueue.push(i);for(const a of n)this.Zr=this.Zr.add(new Hp(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Yl.resolve(i)}lookupMutationBatch(e,t){return Yl.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=this.ei(r),o=n<0?0:n;return Yl.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Yl.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return Yl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hp(t,0),n=new Hp(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,n],e=>{const t=this.Xr(e.Yr);o.push(t)}),Yl.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cu(xl);return t.forEach(e=>{const t=new Hp(e,0),n=new Hp(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,n],e=>{r=r.add(e.Yr)})}),Yl.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1;let o=r;_l.isDocumentKey(o)||(o=o.child(""));const i=new Hp(new _l(o),0);let a=new cu(xl);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.Yr)),!0)},i),Yl.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const r=this.Xr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){il(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Zr;return Yl.forEach(t.mutations,n=>{const o=new Hp(n.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Hp(t,0),n=this.Zr.firstAfterOrEqual(r);return Yl.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,Yl.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.ri=e,this.docs=new iu(_l.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,n=this.docs.get(r),o=n?n.size:0,i=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Yl.resolve(r?r.document.mutableCopy():Xu.newInvalidDocument(t))}getEntries(e,t){let r=zd();return t.forEach(e=>{const t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Xu.newInvalidDocument(e))}),Yl.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let o=zd();const i=t.path,a=new _l(i.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Hl($l(a),r)<=0||(n.has(a.key)||Id(t,a))&&(o=o.insert(a.key,a.mutableCopy()))}return Yl.resolve(o)}getAllFromCollectionGroup(e,t,r,n){nl(9500)}ii(e,t){return Yl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yp(this)}getSize(e){return Yl.resolve(this.size)}}class Yp extends zp{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.Nr.addEntry(e,n)):this.Nr.removeEntry(r)}),Yl.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.persistence=e,this.si=new Ld(e=>xd(e),wd),this.lastRemoteSnapshotVersion=Vl.min(),this.highestTargetId=0,this.oi=0,this._i=new Wp,this.targetCount=0,this.ai=Dp.ur()}forEachTarget(e,t){return this.si.forEach((e,r)=>t(r)),Yl.resolve()}getLastRemoteSnapshotVersion(e){return Yl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Yl.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Yl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Yl.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Yl.resolve()}updateTargetData(e,t){return this.Pr(t),Yl.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Yl.resolve()}removeTargets(e,t,r){let n=0;const o=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.si.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),Yl.waitFor(o).next(()=>n)}getTargetCount(e){return Yl.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Yl.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Yl.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const n=this.persistence.referenceDelegate,o=[];return n&&t.forEach(t=>{o.push(n.markPotentiallyOrphaned(e,t))}),Yl.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Yl.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Yl.resolve(r)}containsKey(e,t){return Yl.resolve(this._i.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jl(0),this.li=!1,this.li=!0,this.hi=new $p,this.referenceDelegate=e(this),this.Pi=new Xp(this),this.indexManager=new Op,this.remoteDocumentCache=new Kp(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ep(t),this.Ii=new Bp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Gp(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Zc("MemoryPersistence","Starting transaction:",e);const n=new Qp(this.ci.next());return this.referenceDelegate.Ei(),r(n).next(e=>this.referenceDelegate.di(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Ai(e,t){return Yl.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class Qp extends Gl{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Wp,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw nl(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Yl.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Yl.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Yl.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yl.forEach(this.fi,r=>{const n=_l.fromPath(r);return this.gi(e,n).next(e=>{e||t.removeEntry(n,Vl.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Yl.or([()=>Yl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ef{constructor(e,t){this.persistence=e,this.pi=new Ld(e=>function(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=tu(t)),t=eu(e.get(r),t);return tu(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Fp(e,t)}(this,t)}static mi(e,t){return new ef(e,t)}Ei(){}di(e){return Yl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Yl.forEach(this.pi,(r,n)=>this.br(e,r,n).next(e=>e?Yl.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const n=this.persistence.getRemoteDocumentCache(),o=n.newChangeBuffer();return n.ii(e,n=>this.br(e,n,t).next(e=>{e||(r++,o.removeEntry(n,Vl.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Yl.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Yl.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Yl.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Yl.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uu(e.data.value)),t}br(e,t,r){return Yl.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Yl.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=n}static As(e,t){let r=Kd(),n=Kd();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:n=n.add(o.doc.key)}return new tf(e,t.fromCache,r,n)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Ja()?8:function(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}(Xa())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,n){const o={result:null};return this.ys(e,t).next(e=>{o.result=e}).next(()=>{if(!o.result)return this.ws(e,t,n,r).next(e=>{o.result=e})}).next(()=>{if(o.result)return;const r=new rf;return this.Ss(e,t,r).next(n=>{if(o.result=n,this.Vs)return this.bs(e,t,r,n.size)})}).next(()=>o.result)}bs(e,t,r,n){return r.documentReadCount<this.fs?(Qc()<=ds.DEBUG&&Zc("QueryEngine","SDK will not create cache indexes for query:",Dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Yl.resolve()):(Qc()<=ds.DEBUG&&Zc("QueryEngine","Query:",Dd(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.gs*n?(Qc()<=ds.DEBUG&&Zc("QueryEngine","The SDK decides to create cache indexes for query:",Dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Od(t))):Yl.resolve())}ys(e,t){if(kd(t))return Yl.resolve(null);let r=Od(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(t=Ad(t,null,"F"),r=Od(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{const o=Kd(...n);return this.ps.getDocuments(e,o).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{const i=this.Ds(t,n);return this.Cs(t,i,o,r.readTime)?this.ys(e,Ad(t,null,"F")):this.vs(e,i,t,r)}))})))}ws(e,t,r,n){return kd(t)||n.isEqual(Vl.min())?Yl.resolve(null):this.ps.getDocuments(e,r).next(o=>{const i=this.Ds(t,o);return this.Cs(t,i,r,n)?Yl.resolve(null):(Qc()<=ds.DEBUG&&Zc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Dd(t)),this.vs(e,i,t,function(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,o=Vl.fromTimestamp(1e9===n?new Bl(r+1,0):new Bl(r,n));return new Wl(o,_l.empty(),t)}(n,-1)).next(e=>e))})}Ds(e,t){let r=new cu(Md(e));return t.forEach((t,n)=>{Id(e,n)&&(r=r.add(n))}),r}Cs(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(n)>0)}Ss(e,t,r){return Qc()<=ds.DEBUG&&Zc("QueryEngine","Using full collection scan to execute query:",Dd(t)),this.ps.getDocumentsMatchingQuery(e,t,Wl.min(),r)}vs(e,t,r,n){return this.ps.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="LocalStore";class af{constructor(e,t,r,n){this.persistence=e,this.Fs=t,this.serializer=n,this.Ms=new iu(xl),this.xs=new Ld(e=>xd(e),wd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qp(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function sf(e,t){const r=al(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(o=>(n=o,r.Bs(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{const o=[],i=[];let a=Kd();for(const e of n){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return r.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:o,addedBatchIds:i}))})})}function cf(e){const t=al(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function lf(e,t){const r=al(e),n=t.snapshotVersion;let o=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});o=r.Ms;const a=[];t.targetChanges.forEach((i,s)=>{const c=o.get(s);if(!c)return;a.push(r.Pi.removeMatchingKeys(e,i.removedDocuments,s).next(()=>r.Pi.addMatchingKeys(e,i.addedDocuments,s)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(hu.EMPTY_BYTE_STRING,Vl.min()).withLastLimboFreeSnapshotVersion(Vl.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,n)),o=o.insert(s,l),function(e,t,r){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}(c,l,i)&&a.push(r.Pi.updateTargetData(e,l))});let s=zd(),c=Kd();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(function(e,t,r){let n=Kd(),o=Kd();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=zd();return r.forEach((r,i)=>{const a=e.get(r);i.isFoundDocument()!==a.isFoundDocument()&&(o=o.add(r)),i.isNoDocument()&&i.version.isEqual(Vl.min())?(t.removeEntry(r,i.readTime),n=n.insert(r,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),n=n.insert(r,i)):Zc(of,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",i.version)}),{ks:n,qs:o}})}(e,i,t.documentUpdates).next(e=>{s=e.ks,c=e.qs})),!n.isEqual(Vl.min())){const t=r.Pi.getLastRemoteSnapshotVersion(e).next(t=>r.Pi.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return Yl.waitFor(a).next(()=>i.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,s,c)).next(()=>s)}).then(e=>(r.Ms=o,e))}function uf(e,t){const r=al(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function df(e,t,r){const n=al(e),o=n.Ms.get(t),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,e=>n.persistence.referenceDelegate.removeTarget(e,o))}catch(a){if(!Xl(a))throw a;Zc(of,`Failed to update sequence numbers for target ${t}: ${a}`)}n.Ms=n.Ms.remove(t),n.xs.delete(o.target)}function hf(e,t,r){const n=al(e);let o=Vl.min(),i=Kd();return n.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,r){const n=al(e),o=n.xs.get(r);return void 0!==o?Yl.resolve(n.Ms.get(o)):n.Pi.getTargetData(t,r)}(n,e,Od(t)).next(t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>n.Fs.getDocumentsMatchingQuery(e,t,r?o:Vl.min(),r?i:Kd())).next(e=>(function(e,t,r){let n=e.Os.get(t)||Vl.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.Os.set(t,n)}(n,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:i})))}class pf{constructor(){this.activeTargetIds=Yd}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ff{constructor(){this.Mo=new pf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{Oo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="ConnectivityMonitor";class vf{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Zc(gf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Zc(gf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf=null;function bf(){return null===yf?yf=268435456+Math.round(2147483648*Math.random()):yf++,"0x"+yf.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const xf="RestConnection",wf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jf{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${n}`,this.Wo=this.databaseId.database===ku?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Go(e,t,r,n,o){const i=bf(),a=this.zo(e,t.toUriEncodedString());Zc(xf,`Sending RPC '${e}' ${i}:`,a,r);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,n,o);const{host:c}=new URL(a),l=Wa(c);return this.Jo(e,a,s,r,l).then(t=>(Zc(xf,`Received RPC '${e}' ${i}: `,t),t),t=>{throw tl(xf,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",r),t})}Ho(e,t,r,n,o,i){return this.Go(e,t,r,n,o)}jo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}zo(e,t){const r=wf[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="WebChannelConnection";class kf extends jf{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,n,o){const i=bf();return new Promise((o,a)=>{const s=new Fc;s.setWithCredentials(!0),s.listenOnce(Uc.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case qc.NO_ERROR:const t=s.getResponseJson();Zc(Nf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case qc.TIMEOUT:Zc(Nf,`RPC '${e}' ${i} timed out`),a(new cl(sl.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:const r=s.getStatus();if(Zc(Nf,`RPC '${e}' ${i} failed with status:`,r,"response text:",s.getResponseText()),r>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(sl).indexOf(t)>=0?t:sl.UNKNOWN}(t.status);a(new cl(e,t.message))}else a(new cl(sl.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new cl(sl.UNAVAILABLE,"Connection failed."));break;default:nl(9055,{l_:e,streamId:i,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{Zc(Nf,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(n);Zc(Nf,`RPC '${e}' ${i} sending request:`,n),s.send(t,"POST",c,r,15)})}T_(e,t,r){const n=bf(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Wc(),a=$c(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,r),s.encodeInitMessageHeaders=!0;const l=o.join("");Zc(Nf,`Creating RPC '${e}' stream ${n}: ${l}`,s);const u=i.createWebChannel(l,s);this.I_(u);let d=!1,h=!1;const p=new Sf({Yo:t=>{h?Zc(Nf,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(d||(Zc(Nf,`Opening RPC '${e}' stream ${n} transport.`),u.open(),d=!0),Zc(Nf,`RPC '${e}' stream ${n} sending:`,t),u.send(t))},Zo:()=>u.close()}),f=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(t){setTimeout(()=>{throw t},0)}})};return f(u,zc.EventType.OPEN,()=>{h||(Zc(Nf,`RPC '${e}' stream ${n} transport opened.`),p.o_())}),f(u,zc.EventType.CLOSE,()=>{h||(h=!0,Zc(Nf,`RPC '${e}' stream ${n} transport closed`),p.a_(),this.E_(u))}),f(u,zc.EventType.ERROR,t=>{h||(h=!0,tl(Nf,`RPC '${e}' stream ${n} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new cl(sl.UNAVAILABLE,"The operation could not be completed")))}),f(u,zc.EventType.MESSAGE,t=>{var r;if(!h){const o=t.data[0];il(!!o,16349);const i=o,a=(null==i?void 0:i.error)||(null==(r=i[0])?void 0:r.error);if(a){Zc(Nf,`RPC '${e}' stream ${n} received error:`,a);const t=a.status;let r=function(e){const t=Ph[e];if(void 0!==t)return Ih(t)}(t),o=a.message;void 0===r&&(r=sl.INTERNAL,o="Unknown error status: "+t+" with message "+a.message),h=!0,p.a_(new cl(r,o)),u.close()}else Zc(Nf,`RPC '${e}' stream ${n} received:`,o),p.u_(o)}}),f(a,Vc.STAT_EVENT,t=>{t.stat===Bc.PROXY?Zc(Nf,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===Bc.NOPROXY&&Zc(Nf,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Ef(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(e){return new Qh(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,r=1e3,n=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=n,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),n=Math.max(0,t-r);n>0&&Zc("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="PersistentStream";class Af{constructor(e,t,r,n,o,i,a,s){this.Mi=e,this.S_=r,this.b_=n,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Of(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===sl.RESOURCE_EXHAUSTED?(el(t.toString()),el("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===sl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.D_===t&&this.G_(e,r)},t=>{e(()=>{const e=new cl(sl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{r(()=>this.z_(e))}),this.stream.onMessage(e=>{r(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Zc(Tf,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Zc(Tf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _f extends Af{constructor(e,t,r,n,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,i),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let r;if("targetChange"in t){t.targetChange;const o="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:nl(39313,{state:n}),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(il(void 0===t||"string"==typeof t,58123),hu.fromBase64String(t||"")):(il(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),hu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,c=s&&function(e){const t=void 0===e.code?sl.UNKNOWN:Ih(e.code);return new cl(t,e.message||"")}(s);r=new $h(o,i,a,c||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const o=cp(e,n.document.name),i=np(n.document.updateTime),a=n.document.createTime?np(n.document.createTime):Vl.min(),s=new Ku({mapValue:{fields:n.document.fields}}),c=Xu.newFoundDocument(o,i,a,s),l=n.targetIds||[],u=n.removedTargetIds||[];r=new Bh(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const o=cp(e,n.document),i=n.readTime?np(n.readTime):Vl.min(),a=Xu.newNoDocument(o,i),s=n.removedTargetIds||[];r=new Bh([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const o=cp(e,n.document),i=n.removedTargetIds||[];r=new Bh([],i,o,null)}else{if(!("filter"in t))return nl(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:n=0,unchangedNames:o}=e,i=new _h(n,o),a=e.targetId;r=new Vh(a,i)}}var n;return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return Vl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vl.min():t.readTime?np(t.readTime):Vl.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=up(this.serializer),t.addTarget=function(e,t){let r;const n=t.target;if(r=jd(n)?{documents:pp(e,n)}:{query:fp(e,n).ft},r.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=tp(e,t.resumeToken);const n=Zh(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(Vl.min())>0){r.readTime=ep(e,t.snapshotVersion.toTimestamp());const n=Zh(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);const r=function(e,t){const r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nl(28987,{purpose:e})}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=up(this.serializer),t.removeTarget=e,this.q_(t)}}class Pf extends Af{constructor(e,t,r,n,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,i),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return il(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,il(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){il(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(il(void 0!==t,14353),e.map(e=>function(e,t){let r=e.updateTime?np(e.updateTime):np(t);return r.isEqual(Vl.min())&&(r=np(t)),new hh(r,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),r=np(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=up(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let r;if(t instanceof wh)r={update:hp(e,t.key,t.value)};else if(t instanceof Eh)r={delete:sp(e,t.key)};else if(t instanceof jh)r={update:hp(e,t.key,t.data),updateMask:Sp(t.fieldMask)};else{if(!(t instanceof Ch))return nl(16599,{Vt:t.type});r={verify:sp(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const r=t.transform;if(r instanceof nh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof oh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof ah)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof ch)return{fieldPath:t.field.canonicalString(),increment:r.Ae};throw nl(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(r.currentDocument=(n=e,void 0!==(o=t.precondition).updateTime?{updateTime:rp(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nl(27497))),r;var n,o}(this.serializer,e))};this.q_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{}class If extends Df{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new cl(sl.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.Go(e,ip(t,r),n,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===sl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cl(sl.UNKNOWN,e.toString())})}Ho(e,t,r,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Ho(e,ip(t,r),n,i,a,o)).catch(e=>{throw"FirebaseError"===e.name?(e.code===sl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cl(sl.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(el(t),this.aa=!1):Zc("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="RemoteStore";class Lf{constructor(e,t,r,n,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(e=>{r.enqueueAndForget(async()=>{Hf(this)&&(Zc(Rf,"Restarting streams for network reachability change."),await async function(e){const t=al(e);t.Ea.add(4),await zf(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ff(t)}(this))})}),this.Ra=new Mf(r,n)}}async function Ff(e){if(Hf(e))for(const t of e.da)await t(!0)}async function zf(e){for(const t of e.da)await t(!1)}function Uf(e,t){const r=al(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),Wf(r)?$f(r):um(r).O_()&&Bf(r,t))}function qf(e,t){const r=al(e),n=um(r);r.Ia.delete(t),n.O_()&&Vf(r,t),0===r.Ia.size&&(n.O_()?n.L_():Hf(r)&&r.Ra.set("Unknown"))}function Bf(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vl.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}um(e).Y_(t)}function Vf(e,t){e.Va.Ue(t),um(e).Z_(t)}function $f(e){e.Va=new Hh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),um(e).start(),e.Ra.ua()}function Wf(e){return Hf(e)&&!um(e).x_()&&e.Ia.size>0}function Hf(e){return 0===al(e).Ea.size}function Gf(e){e.Va=void 0}async function Kf(e){e.Ra.set("Online")}async function Yf(e){e.Ia.forEach((t,r)=>{Bf(e,t)})}async function Xf(e,t){Gf(e),Wf(e)?(e.Ra.ha(t),$f(e)):e.Ra.set("Unknown")}async function Jf(e,t,r){if(e.Ra.set("Online"),t instanceof $h&&2===t.state&&t.cause)try{await async function(e,t){const r=t.cause;for(const n of t.targetIds)e.Ia.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.Ia.delete(n),e.Va.removeTarget(n))}(e,t)}catch(n){Zc(Rf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qf(e,n)}else if(t instanceof Bh?e.Va.Ze(t):t instanceof Vh?e.Va.st(t):e.Va.tt(t),!r.isEqual(Vl.min()))try{const t=await cf(e.localStore);r.compareTo(t)>=0&&await function(e,t){const r=e.Va.Tt(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){const o=e.Ia.get(n);o&&e.Ia.set(n,o.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{const n=e.Ia.get(t);if(!n)return;e.Ia.set(t,n.withResumeToken(hu.EMPTY_BYTE_STRING,n.snapshotVersion)),Vf(e,t);const o=new kp(n.target,t,r,n.sequenceNumber);Bf(e,o)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(o){Zc(Rf,"Failed to raise snapshot:",o),await Qf(e,o)}}async function Qf(e,t,r){if(!Xl(t))throw t;e.Ea.add(1),await zf(e),e.Ra.set("Offline"),r||(r=()=>cf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Zc(Rf,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Ff(e)})}function Zf(e,t){return t().catch(r=>Qf(e,r,t))}async function em(e){const t=al(e),r=dm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;tm(t);)try{const e=await uf(t.localStore,n);if(null===e){0===t.Ta.length&&r.L_();break}n=e.batchId,rm(t,e)}catch(o){await Qf(t,o)}nm(t)&&om(t)}function tm(e){return Hf(e)&&e.Ta.length<10}function rm(e,t){e.Ta.push(t);const r=dm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function nm(e){return Hf(e)&&!dm(e).x_()&&e.Ta.length>0}function om(e){dm(e).start()}async function im(e){dm(e).ra()}async function am(e){const t=dm(e);for(const r of e.Ta)t.ea(r.mutations)}async function sm(e,t,r){const n=e.Ta.shift(),o=Th.from(n,t,r);await Zf(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await em(e)}async function cm(e,t){t&&dm(e).X_&&await async function(e,t){if(function(e){switch(e){case sl.OK:return nl(64938);case sl.CANCELLED:case sl.UNKNOWN:case sl.DEADLINE_EXCEEDED:case sl.RESOURCE_EXHAUSTED:case sl.INTERNAL:case sl.UNAVAILABLE:case sl.UNAUTHENTICATED:return!1;case sl.INVALID_ARGUMENT:case sl.NOT_FOUND:case sl.ALREADY_EXISTS:case sl.PERMISSION_DENIED:case sl.FAILED_PRECONDITION:case sl.ABORTED:case sl.OUT_OF_RANGE:case sl.UNIMPLEMENTED:case sl.DATA_LOSS:return!0;default:return nl(15467,{code:e})}}(r=t.code)&&r!==sl.ABORTED){const r=e.Ta.shift();dm(e).B_(),await Zf(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await em(e)}var r}(e,t),nm(e)&&om(e)}async function lm(e,t){const r=al(e);r.asyncQueue.verifyOperationInProgress(),Zc(Rf,"RemoteStore received new credentials");const n=Hf(r);r.Ea.add(3),await zf(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Ff(r)}function um(e){return e.ma||(e.ma=function(e,t,r){const n=al(e);return n.sa(),new _f(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{Xo:Kf.bind(null,e),t_:Yf.bind(null,e),r_:Xf.bind(null,e),H_:Jf.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Wf(e)?$f(e):e.Ra.set("Unknown")):(await e.ma.stop(),Gf(e))})),e.ma}function dm(e){return e.fa||(e.fa=function(e,t,r){const n=al(e);return n.sa(),new Pf(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:im.bind(null,e),r_:cm.bind(null,e),ta:am.bind(null,e),na:sm.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await em(e)):(await e.fa.stop(),e.Ta.length>0&&(Zc(Rf,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class hm{constructor(e,t,r,n,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=o,this.deferred=new ll,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,o){const i=Date.now()+r,a=new hm(e,t,i,n,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cl(sl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(e,t){if(el("AsyncQueue",`${t}: ${e}`),Xl(e))return new cl(sl.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{static emptySet(e){return new fm(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_l.comparator(t.key,r.key):(e,t)=>_l.comparator(e.key,t.key),this.keyedMap=qd(),this.sortedSet=new iu(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.ga=new iu(_l.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?0!==e.type&&3===r.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==r.type?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.ga=this.ga.remove(t):1===e.type&&2===r.type?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):nl(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class gm{constructor(e,t,r,n,o,i,a,s,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,n,o){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new gm(e,t,fm.emptySet(t),i,r,n,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==r[n].type||!t[n].doc.isEqual(r[n].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ym{constructor(){this.queries=bm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const r=al(e),n=r.queries;r.queries=bm(),n.forEach((e,r)=>{for(const n of r.Sa)n.onError(t)})}(this,new cl(sl.ABORTED,"Firestore shutting down"))}}function bm(){return new Ld(e=>Pd(e),_d)}async function xm(e,t){const r=al(e);let n=3;const o=t.query;let i=r.queries.get(o);i?!i.ba()&&t.Da()&&(n=2):(i=new vm,n=t.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(o,!0);break;case 1:i.wa=await r.onListen(o,!1);break;case 2:await r.onFirstRemoteStoreListen(o)}}catch(a){const e=pm(a,`Initialization of query '${Dd(t.query)}' failed`);return void t.onError(e)}r.queries.set(o,i),i.Sa.push(t),t.va(r.onlineState),i.wa&&t.Fa(i.wa)&&Nm(r)}async function wm(e,t){const r=al(e),n=t.query;let o=3;const i=r.queries.get(n);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?o=t.Da()?0:1:!i.ba()&&t.Da()&&(o=2))}switch(o){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function jm(e,t){const r=al(e);let n=!1;for(const o of t){const e=o.query,t=r.queries.get(e);if(t){for(const e of t.Sa)e.Fa(o)&&(n=!0);t.wa=o}}n&&Nm(r)}function Sm(e,t,r){const n=al(e),o=n.queries.get(t);if(o)for(const i of o.Sa)i.onError(r);n.queries.delete(t)}function Nm(e){e.Ca.forEach(e=>{e.next()})}var km,Em;(Em=km||(km={})).Ma="default",Em.Cache="cache";class Cm{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const r of e.docChanges)3!==r.type&&t.push(r);e=new gm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const r="Offline"!==t;return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this.key=e}}class Tm{constructor(e){this.key=e}}class Am{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Kd(),this.mutatedKeys=Kd(),this.eu=Md(e),this.tu=new fm(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new mm,n=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,i=n,a=!1;const s="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,c="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{const l=n.get(e),u=Id(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;l&&u?l.data.isEqual(u.data)?d!==h&&(r.track({type:3,doc:u}),p=!0):this.su(l,u)||(r.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(a=!0)):!l&&u?(r.track({type:0,doc:u}),p=!0):l&&!u&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(a=!0)),p&&(u?(i=i.add(u),o=h?o.add(e):o.delete(e)):(i=i.delete(e),o=o.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),o=o.delete(e.key),r.track({type:1,doc:e})}return{tu:i,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nl(20277,{Rt:e})}};return r(e)-r(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(r),n=n??!1;const a=t&&!n?this._u():[],s=0===this.Xa.size&&this.current&&!n?1:0,c=s!==this.Za;return this.Za=s,0!==i.length||c?{snapshot:new gm(this.query,e.tu,o,i,e.mutatedKeys,0===s,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Kd(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Tm(e))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Om(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Kd();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const _m="SyncEngine";class Pm{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Dm{constructor(e){this.key=e,this.hu=!1}}class Im{constructor(e,t,r,n,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ld(e=>Pd(e),_d),this.Iu=new Map,this.Eu=new Set,this.du=new iu(_l.comparator),this.Au=new Map,this.Ru=new Wp,this.Vu={},this.mu=new Map,this.fu=Dp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Mm(e,t,r=!0){const n=rg(e);let o;const i=n.Tu.get(t);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.lu()):o=await Lm(n,t,r,!0),o}async function Rm(e,t){const r=rg(e);await Lm(r,t,!0,!1)}async function Lm(e,t,r,n){const o=await function(e,t){const r=al(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.Pi.getTargetData(e,t).next(o=>o?(n=o,Yl.resolve(n)):r.Pi.allocateTargetId(e).next(o=>(n=new kp(t,o,"TargetPurposeListen",e.currentSequenceNumber),r.Pi.addTargetData(e,n).next(()=>n))))}).then(e=>{const n=r.Ms.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(e.targetId,e),r.xs.set(t,e.targetId)),e})}(e.localStore,Od(t)),i=o.targetId,a=e.sharedClientState.addLocalQueryTarget(i,r);let s;return n&&(s=await async function(e,t,r,n,o){e.pu=(t,r,n)=>async function(e,t,r,n){let o=t.view.ru(r);o.Cs&&(o=await hf(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,o)));const i=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i,a);return Xm(e,t.targetId,s.au),s.snapshot}(e,t,r,n);const i=await hf(e.localStore,t,!0),a=new Am(t,i.Qs),s=a.ru(i.documents),c=qh.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,o),l=a.applyChanges(s,e.isPrimaryClient,c);Xm(e,r,l.au);const u=new Pm(t,r,a);return e.Tu.set(t,u),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),l.snapshot}(e,t,i,"current"===a,o.resumeToken)),e.isPrimaryClient&&r&&Uf(e.remoteStore,o),s}async function Fm(e,t,r){const n=al(e),o=n.Tu.get(t),i=n.Iu.get(o.targetId);if(i.length>1)return n.Iu.set(o.targetId,i.filter(e=>!_d(e,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await df(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),r&&qf(n.remoteStore,o.targetId),Km(n,o.targetId)}).catch(Kl)):(Km(n,o.targetId),await df(n.localStore,o.targetId,!0))}async function zm(e,t){const r=al(e),n=r.Tu.get(t),o=r.Iu.get(n.targetId);r.isPrimaryClient&&1===o.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),qf(r.remoteStore,n.targetId))}async function Um(e,t,r){const n=function(e){const t=al(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wm.bind(null,t),t}(e);try{const e=await function(e,t){const r=al(e),n=Bl.now(),o=t.reduce((e,t)=>e.add(t.key),Kd());let i,a;return r.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=zd(),c=Kd();return r.Ns.getEntries(e,o).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>r.localDocuments.getOverlayedDocuments(e,s)).next(o=>{i=o;const a=[];for(const e of t){const t=bh(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new jh(e.key,t,Yu(t.value.mapValue),ph.exists(!0)))}return r.mutationQueue.addMutationBatch(e,n,a,t)}).next(t=>{a=t;const n=t.applyToLocalDocumentSet(i,c);return r.documentOverlayCache.saveOverlays(e,t.batchId,n)})}).then(()=>({batchId:a.batchId,changes:Bd(i)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),function(e,t,r){let n=e.Vu[e.currentUser.toKey()];n||(n=new iu(xl)),n=n.insert(t,r),e.Vu[e.currentUser.toKey()]=n}(n,e.batchId,r),await Zm(n,e.changes),await em(n.remoteStore)}catch(o){const e=pm(o,"Failed to persist write");r.reject(e)}}async function qm(e,t){const r=al(e);try{const e=await lf(r.localStore,t);t.targetChanges.forEach((e,t)=>{const n=r.Au.get(t);n&&(il(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?n.hu=!0:e.modifiedDocuments.size>0?il(n.hu,14607):e.removedDocuments.size>0&&(il(n.hu,42227),n.hu=!1))}),await Zm(r,e,t)}catch(n){await Kl(n)}}function Bm(e,t,r){const n=al(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){const e=[];n.Tu.forEach((r,n)=>{const o=n.view.va(t);o.snapshot&&e.push(o.snapshot)}),function(e,t){const r=al(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(const o of r.Sa)o.va(t)&&(n=!0)}),n&&Nm(r)}(n.eventManager,t),e.length&&n.Pu.H_(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Vm(e,t,r){const n=al(e);n.sharedClientState.updateQueryState(t,"rejected",r);const o=n.Au.get(t),i=o&&o.key;if(i){let e=new iu(_l.comparator);e=e.insert(i,Xu.newNoDocument(i,Vl.min()));const r=Kd().add(i),o=new Uh(Vl.min(),new Map,new iu(xl),e,r);await qm(n,o),n.du=n.du.remove(i),n.Au.delete(t),Qm(n)}else await df(n.localStore,t,!1).then(()=>Km(n,t,r)).catch(Kl)}async function $m(e,t){const r=al(e),n=t.batch.batchId;try{const e=await function(e,t){const r=al(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const n=t.batch.keys(),o=r.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,r,n){const o=r.batch,i=o.keys();let a=Yl.resolve();return i.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{const i=r.docVersions.get(e);il(null!==i,48541),t.version.compareTo(i)<0&&(o.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,o))}(r,e,t,o).next(()=>o.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Kd();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,n))})}(r.localStore,t);Gm(r,n,null),Hm(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Zm(r,e)}catch(o){await Kl(o)}}async function Wm(e,t,r){const n=al(e);try{const e=await function(e,t){const r=al(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(il(null!==t,37113),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}(n.localStore,t);Gm(n,t,r),Hm(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Zm(n,e)}catch(o){await Kl(o)}}function Hm(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Gm(e,t,r){const n=al(e);let o=n.Vu[n.currentUser.toKey()];if(o){const e=o.get(t);e&&(r?e.reject(r):e.resolve(),o=o.remove(t)),n.Vu[n.currentUser.toKey()]=o}}function Km(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Ym(e,t)})}function Ym(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);null!==r&&(qf(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),Qm(e))}function Xm(e,t,r){for(const n of r)n instanceof Om?(e.Ru.addReference(n.key,t),Jm(e,n)):n instanceof Tm?(Zc(_m,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||Ym(e,n.key)):nl(19791,{wu:n})}function Jm(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(Zc(_m,"New document in limbo: "+r),e.Eu.add(n),Qm(e))}function Qm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new _l(Ol.fromString(t)),n=e.fu.next();e.Au.set(n,new Dm(r)),e.du=e.du.insert(r,n),Uf(e.remoteStore,new kp(Od(Nd(r.path)),n,"TargetPurposeLimboResolution",Jl.ce))}}async function Zm(e,t,r){const n=al(e),o=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((e,s)=>{a.push(n.pu(s,t,r).then(e=>{var t;if((e||r)&&n.isPrimaryClient){const o=e?!e.fromCache:null==(t=null==r?void 0:r.targetChanges.get(s.targetId))?void 0:t.current;n.sharedClientState.updateQueryState(s.targetId,o?"current":"not-current")}if(e){o.push(e);const t=tf.As(s.targetId,e);i.push(t)}}))}),await Promise.all(a),n.Pu.H_(o),await async function(e,t){const r=al(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Yl.forEach(t,t=>Yl.forEach(t.Es,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>Yl.forEach(t.ds,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(n){if(!Xl(n))throw n;Zc(of,"Failed to update sequence numbers: "+n)}for(const o of t){const e=o.targetId;if(!o.fromCache){const t=r.Ms.get(e),n=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(n);r.Ms=r.Ms.insert(e,o)}}}(n.localStore,i))}async function eg(e,t){const r=al(e);if(!r.currentUser.isEqual(t)){Zc(_m,"User change. New user:",t.toKey());const e=await sf(r.localStore,t);r.currentUser=t,o="'waitForPendingWrites' promise is rejected due to a user change.",(n=r).mu.forEach(e=>{e.forEach(e=>{e.reject(new cl(sl.CANCELLED,o))})}),n.mu.clear(),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zm(r,e.Ls)}var n,o}function tg(e,t){const r=al(e),n=r.Au.get(t);if(n&&n.hu)return Kd().add(n.key);{let e=Kd();const n=r.Iu.get(t);if(!n)return e;for(const t of n){const n=r.Tu.get(t);e=e.unionWith(n.view.nu)}return e}}function rg(e){const t=al(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vm.bind(null,t),t.Pu.H_=jm.bind(null,t.eventManager),t.Pu.yu=Sm.bind(null,t.eventManager),t}class ng{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,r,n){return new af(e,t,r,n)}(this.persistence,new nf,e.initialUser,this.serializer)}Cu(e){return new Jp(Zp.mi,this.serializer)}Du(e){return new ff}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ng.provider={build:()=>new ng};class og extends ng{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){il(this.persistence.referenceDelegate instanceof ef,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lp(r,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Pp.withCacheSize(this.cacheSizeBytes):Pp.DEFAULT;return new Jp(e=>ef.mi(e,t),this.serializer)}}class ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=eg.bind(null,this.syncEngine),await async function(e,t){const r=al(e);t?(r.Ea.delete(2),await Ff(r)):t||(r.Ea.add(2),await zf(r),r.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ym}createDatastore(e){const t=Cf(e.databaseInfo.databaseId),r=(n=e.databaseInfo,new kf(n));var n;return function(e,t,r,n){return new If(e,t,r,n)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,n=e.asyncQueue,o=e=>Bm(this.syncEngine,e,0),i=vf.v()?new vf:new mf,new Lf(t,r,n,o,i);var t,r,n,o,i}createSyncEngine(e,t){return function(e,t,r,n,o,i,a){const s=new Im(e,t,r,n,o,i);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=al(e);Zc(Rf,"RemoteStore shutting down."),t.Ea.add(5),await zf(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}ig.provider={build:()=>new ig};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):el("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="FirestoreClient";class cg{constructor(e,t,r,n,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=Yc.UNAUTHENTICATED,this.clientId=bl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async e=>{Zc(sg,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(Zc(sg,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ll;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=pm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lg(e,t){e.asyncQueue.verifyOperationInProgress(),Zc(sg,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await sf(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ug(e,t){e.asyncQueue.verifyOperationInProgress();const r=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Zc(sg,"Using user provided OfflineComponentProvider");try{await lg(e,e._uninitializedComponentsProvider._offline)}catch(t){const o=t;if(!("FirebaseError"===(r=o).name?r.code===sl.FAILED_PRECONDITION||r.code===sl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw o;tl("Error using user provided cache. Falling back to memory cache: "+o),await lg(e,new ng)}}else Zc(sg,"Using default OfflineComponentProvider"),await lg(e,new og(void 0));var r;return e._offlineComponents}(e);Zc(sg,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>lm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>lm(t.remoteStore,r)),e._onlineComponents=t}async function dg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Zc(sg,"Using user provided OnlineComponentProvider"),await ug(e,e._uninitializedComponentsProvider._online)):(Zc(sg,"Using default OnlineComponentProvider"),await ug(e,new ig))),e._onlineComponents}async function hg(e){const t=await dg(e),r=t.eventManager;return r.onListen=Mm.bind(null,t.syncEngine),r.onUnlisten=Fm.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Rm.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=zm.bind(null,t.syncEngine),r}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const fg=new Map,mg="firestore.googleapis.com",gg=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new cl(sl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mg,this.ssl=gg}else this.host=e.host,this.ssl=e.ssl??gg;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=_p;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cl(sl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new cl(sl.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pg(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new cl(sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new cl(sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new cl(sl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,r}}class yg{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new cl(sl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new cl(sl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new dl;switch(e.type){case"firstParty":return new ml(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cl(sl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fg.get(e);t&&(Zc("ComponentProvider","Removing Datastore"),fg.delete(e),t.terminate())}(this),Promise.resolve()}}function bg(e,t,r,n={}){var o;e=Ll(e,yg);const i=Wa(t),a=e._getSettings(),s={...a,emulatorOptions:e._getEmulatorOptions()},c=`${t}:${r}`;i&&(Ha(`https://${c}`),Ya("Firestore",!0)),a.host!==mg&&a.host!==c&&tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:c,ssl:i,emulatorOptions:n};if(!ts(l,s)&&(e._setSettings(l),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=Yc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[La(JSON.stringify({alg:"none",type:"JWT"})),La(JSON.stringify(i)),""].join(".")}(n.mockUserToken,null==(o=e._app)?void 0:o.options.projectId);const i=n.mockUserToken.sub||n.mockUserToken.user_id;if(!i)throw new cl(sl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new Yc(i)}e._authCredentials=new hl(new ul(t,r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xg(this.firestore,e,this._query)}}class wg{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wg(this.firestore,e,this._key)}toJSON(){return{type:wg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(zl(t,wg._jsonSchema))return new wg(e,r||null,new _l(Ol.fromString(t.referencePath)))}}wg._jsonSchemaVersion="firestore/documentReference/1.0",wg._jsonSchema={type:Fl("string",wg._jsonSchemaVersion),referencePath:Fl("string")};class jg extends xg{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wg(this.firestore,null,new _l(e))}withConverter(e){return new jg(this.firestore,e,this._path)}}function Sg(e,t,...r){if(e=as(e),Pl("collection","path",t),e instanceof yg){const n=Ol.fromString(t,...r);return Il(n),new jg(e,null,n)}{if(!(e instanceof wg||e instanceof jg))throw new cl(sl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ol.fromString(t,...r));return Il(n),new jg(e.firestore,null,n)}}function Ng(e,t,...r){if(e=as(e),1===arguments.length&&(t=bl.newId()),Pl("doc","path",t),e instanceof yg){const n=Ol.fromString(t,...r);return Dl(n),new wg(e,null,new _l(n))}{if(!(e instanceof wg||e instanceof jg))throw new cl(sl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ol.fromString(t,...r));return Dl(n),new wg(e.firestore,e instanceof jg?e.converter:null,new _l(n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="AsyncQueue";class Eg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Of(this,"async_queue_retry"),this._c=()=>{const e=Ef();e&&Zc(kg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Ef();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ef();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ll;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xl(e))throw e;Zc(kg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,el("INTERNAL UNHANDLED ERROR: ",Cg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const n=hm.createAndSchedule(this,e,t,r,e=>this.hc(e));return this.tc.push(n),n}uc(){this.nc&&nl(47125,{Pc:Cg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Cg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Og(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const n of t)if(n in r&&"function"==typeof r[n])return!0;return!1}(e,["next","error","complete"])}class Tg extends yg{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new Eg,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eg(e),this._firestoreClient=void 0,await e}}}function Ag(e){if(e._terminated)throw new cl(sl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,r,n;const o=e._freezeSettings(),i=(a=e._databaseId,s=(null==(t=e._app)?void 0:t.options.appId)||"",c=e._persistenceKey,l=o,new Nu(a,s,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,pg(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator));var a,s,c,l;e._componentsProvider||(null==(r=o.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=o.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new cg(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class _g{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _g(hu.fromBase64String(e))}catch(t){throw new cl(sl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _g(hu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_g._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zl(e,_g._jsonSchema))return _g.fromBase64String(e.bytes)}}_g._jsonSchemaVersion="firestore/bytes/1.0",_g._jsonSchema={type:Fl("string",_g._jsonSchemaVersion),bytes:Fl("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new cl(sl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Al(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new cl(sl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new cl(sl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xl(this._lat,e._lat)||xl(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ig._jsonSchemaVersion}}static fromJSON(e){if(zl(e,Ig._jsonSchema))return new Ig(e.latitude,e.longitude)}}Ig._jsonSchemaVersion="firestore/geoPoint/1.0",Ig._jsonSchema={type:Fl("string",Ig._jsonSchemaVersion),latitude:Fl("number"),longitude:Fl("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Mg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zl(e,Mg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Mg(e.vectorValues);throw new cl(sl.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mg._jsonSchemaVersion="firestore/vectorValue/1.0",Mg._jsonSchema={type:Fl("string",Mg._jsonSchemaVersion),vectorValues:Fl("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Rg=/^__.*__$/;class Lg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jh(e,this.data,this.fieldMask,t,this.fieldTransforms):new wh(e,this.data,t,this.fieldTransforms)}}class Fg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nl(40011,{Ac:e})}}class Ug{constructor(e,t,r,n,o,i){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===o&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const r=null==(t=this.path)?void 0:t.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var t;const r=null==(t=this.path)?void 0:t.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(zg(this.Ac)&&Rg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qg{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cf(e)}Cc(e,t,r,n=!1){return new Ug({Ac:e,methodName:t,Dc:r,path:Al.emptyPath(),fc:!1,bc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bg(e){const t=e._freezeSettings(),r=Cf(e._databaseId);return new qg(e._databaseId,!!t.ignoreUndefinedProperties,r)}function Vg(e,t,r,n,o,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,r,o);Yg("Data must be an object, but it was:",a,n);const s=Gg(n,a);let c,l;if(i.merge)c=new uu(a.fieldMask),l=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const n of i.mergeFields){const o=Xg(t,n,r);if(!a.contains(o))throw new cl(sl.INVALID_ARGUMENT,`Field '${o}' is specified in your field mask but missing from your input data.`);ev(e,o)||e.push(o)}c=new uu(e),l=a.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=a.fieldTransforms;return new Lg(new Ku(s),c,l)}class $g extends Dg{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $g}}class Wg extends Dg{_toFieldTransform(e){return new dh(e.path,new nh)}isEqual(e){return e instanceof Wg}}function Hg(e,t){if(Kg(e=as(e)))return Yg("Unsupported field value:",t,e),Gg(e,t);if(e instanceof Dg)return function(e,t){if(!zg(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const r=[];let n=0;for(const o of e){let e=Hg(o,t.wc(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=as(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Bl.fromDate(e);return{timestampValue:ep(t.serializer,r)}}if(e instanceof Bl){const r=new Bl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ep(t.serializer,r)}}if(e instanceof Ig)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _g)return{bytesValue:tp(t.serializer,e._byteString)};if(e instanceof wg){const r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.Sc(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:op(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mg)return r=e,n=t,{mapValue:{fields:{[Cu]:{stringValue:Au},[_u]:{arrayValue:{values:r.toArray().map(e=>{if("number"!=typeof e)throw n.Sc("VectorValues must only contain numeric values.");return Xd(n.serializer,e)})}}}}};var r,n;throw t.Sc(`Unsupported field value: ${Rl(e)}`)}(e,t)}function Gg(e,t){const r={};return ou(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nu(e,(e,n)=>{const o=Hg(n,t.mc(e));null!=o&&(r[e]=o)}),{mapValue:{fields:r}}}function Kg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bl||e instanceof Ig||e instanceof _g||e instanceof wg||e instanceof Dg||e instanceof Mg)}function Yg(e,t,r){if(!Kg(r)||!Ml(r)){const n=Rl(r);throw"an object"===n?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function Xg(e,t,r){if((t=as(t))instanceof Pg)return t._internalPath;if("string"==typeof t)return Qg(e,t);throw Zg("Field path arguments must be of type string or ",e,!1,void 0,r)}const Jg=new RegExp("[~\\*/\\[\\]]");function Qg(e,t,r){if(t.search(Jg)>=0)throw Zg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Pg(...t.split("."))._internalPath}catch(n){throw Zg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function Zg(e,t,r,n,o){const i=n&&!n.isEmpty(),a=void 0!==o;let s=`Function ${t}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${o}`),c+=")"),new cl(sl.INVALID_ARGUMENT,s+e+c)}function ev(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,r,n,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rv extends tv{data(){return super.data()}}function nv(e,t){return"string"==typeof t?Qg(e,t):t instanceof Pg?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cl(sl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iv{}class av extends iv{}function sv(e,t,...r){let n=[];t instanceof iv&&n.push(t),n=n.concat(r),function(e){const t=e.filter(e=>e instanceof lv).length,r=e.filter(e=>e instanceof cv).length;if(t>1||t>0&&r>0)throw new cl(sl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class cv extends av{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cv(e,t,r)}_apply(e){const t=this._parse(e);return fv(e._query,t),new xg(e.firestore,e.converter,Td(e._query,t))}_parse(e){const t=Bg(e.firestore),r=function(e,t,r,n,o,i,a){let s;if(o.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new cl(sl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){pv(a,i);const t=[];for(const r of a)t.push(hv(n,e,r));s={arrayValue:{values:t}}}else s=hv(n,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||pv(a,i),s=function(e,t,r,n=!1){return Hg(r,e.Cc(n?4:3,t))}(r,t,a,"in"===i||"not-in"===i);return nd.create(o,i,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return r}}class lv extends iv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:od.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;const n=t.getFlattenedFilters();for(const o of n)fv(r,o),r=Td(r,o)}(e._query,t),new xg(e.firestore,e.converter,Td(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class uv extends av{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uv(e,t)}_apply(e){const t=function(e,t,r){if(null!==e.startAt)throw new cl(sl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cl(sl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(t,r)}(e._query,this._field,this._direction);return new xg(e.firestore,e.converter,function(e,t){const r=e.explicitOrderBy.concat([t]);return new Sd(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function dv(e,t="asc"){const r=t,n=nv("orderBy",e);return uv._create(n,r)}function hv(e,t,r){if("string"==typeof(r=as(r))){if(""===r)throw new cl(sl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ed(t)&&-1!==r.indexOf("/"))throw new cl(sl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ol.fromString(r));if(!_l.isDocumentKey(n))throw new cl(sl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return qu(e,new _l(n))}if(r instanceof wg)return qu(e,r._key);throw new cl(sl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rl(r)}.`)}function pv(e,t){if(!Array.isArray(e)||0===e.length)throw new cl(sl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function fv(e,t){const r=function(e,t){for(const r of e)for(const e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new cl(sl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new cl(sl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class mv{convertValue(e,t="none"){switch(Pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nl(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nu(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;const o=null==(n=null==(r=null==(t=e.fields)?void 0:t[_u].arrayValue)?void 0:r.values)?void 0:n.map(e=>mu(e.doubleValue));return new Mg(o)}convertGeoPoint(e){return new Ig(mu(e.latitude),mu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ju(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=fu(e);return new Bl(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ol.fromString(e);il(Np(r),9688,{name:e});const n=new Eu(r.get(1),r.get(3)),o=new _l(r.popFirst(5));return n.isEqual(t)||el(`Document ${o} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vv extends tv{constructor(e,t,r,n,o,i){super(e,t,r,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new cl(sl.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vv._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}vv._jsonSchemaVersion="firestore/documentSnapshot/1.0",vv._jsonSchema={type:Fl("string",vv._jsonSchemaVersion),bundleSource:Fl("string","DocumentSnapshot"),bundleName:Fl("string"),bundle:Fl("string")};class yv extends vv{data(e={}){return super.data(e)}}class bv{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new gv(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yv(this._firestore,this._userDataWriter,r.key,r,new gv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new cl(sl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{const n=new yv(e._firestore,e._userDataWriter,r.doc.key,r.doc,new gv(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const n=new yv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let o=-1,i=-1;return 0!==t.type&&(o=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(r=r.add(t.doc),i=r.indexOf(t.doc.key)),{type:xv(t.type),doc:n,oldIndex:o,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new cl(sl.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],n=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),n.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nl(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e){e=Ll(e,wg);const t=Ll(e.firestore,Tg);return function(e,t,r={}){const n=new ll;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,r,n,o){const i=new ag({next:s=>{i.Nu(),t.enqueueAndForget(()=>wm(e,a));const c=s.docs.has(r);!c&&s.fromCache?o.reject(new cl(sl.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&s.fromCache&&n&&"server"===n.source?o.reject(new cl(sl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(s)},error:e=>o.reject(e)}),a=new Cm(Nd(r.path),i,{includeMetadataChanges:!0,qa:!0});return xm(e,a)}(await hg(e),e.asyncQueue,t,r,n)),n.promise}(Ag(t),e._key).then(r=>Ev(t,e,r))}bv._jsonSchemaVersion="firestore/querySnapshot/1.0",bv._jsonSchema={type:Fl("string",bv._jsonSchemaVersion),bundleSource:Fl("string","QuerySnapshot"),bundleName:Fl("string"),bundle:Fl("string")};class jv extends mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new _g(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wg(this.firestore,null,t)}}function Sv(e){e=Ll(e,xg);const t=Ll(e.firestore,Tg),r=Ag(t),n=new jv(t);return ov(e._query),function(e,t,r={}){const n=new ll;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,r,n,o){const i=new ag({next:r=>{i.Nu(),t.enqueueAndForget(()=>wm(e,a)),r.fromCache&&"server"===n.source?o.reject(new cl(sl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(r)},error:e=>o.reject(e)}),a=new Cm(r,i,{includeMetadataChanges:!0,qa:!0});return xm(e,a)}(await hg(e),e.asyncQueue,t,r,n)),n.promise}(r,e._query).then(r=>new bv(t,n,e,r))}function Nv(e,t,r,...n){e=Ll(e,wg);const o=Ll(e.firestore,Tg),i=Bg(o);let a;return a="string"==typeof(t=as(t))||t instanceof Pg?function(e,t,r,n,o,i){const a=e.Cc(1,t,r),s=[Xg(t,n,r)],c=[o];if(i.length%2!=0)throw new cl(sl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)s.push(Xg(t,i[h])),c.push(i[h+1]);const l=[],u=Ku.empty();for(let h=s.length-1;h>=0;--h)if(!ev(l,s[h])){const e=s[h];let t=c[h];t=as(t);const r=a.yc(e);if(t instanceof $g)l.push(e);else{const n=Hg(t,r);null!=n&&(l.push(e),u.set(e,n))}}const d=new uu(l);return new Fg(u,d,a.fieldTransforms)}(i,"updateDoc",e._key,t,r,n):function(e,t,r,n){const o=e.Cc(1,t,r);Yg("Data must be an object, but it was:",o,n);const i=[],a=Ku.empty();nu(n,(e,n)=>{const s=Qg(t,e,r);n=as(n);const c=o.yc(s);if(n instanceof $g)i.push(s);else{const e=Hg(n,c);null!=e&&(i.push(s),a.set(s,e))}});const s=new uu(i);return new Fg(a,s,o.fieldTransforms)}(i,"updateDoc",e._key,t),kv(o,[a.toMutation(e._key,ph.exists(!0))])}function kv(e,t){return function(e,t){const r=new ll;return e.asyncQueue.enqueueAndForget(async()=>Um(await function(e){return dg(e).then(e=>e.syncEngine)}(e),t,r)),r.promise}(Ag(e),t)}function Ev(e,t,r){const n=r.docs.get(t._key),o=new jv(e);return new vv(e,o,t._key,n,new gv(r.hasPendingWrites,r.fromCache),t.converter)}function Cv(){return new Wg("serverTimestamp")}!function(e,t=!0){Xc=wc,gc(new ss("firestore",(e,{instanceIdentifier:r,options:n})=>{const o=e.getProvider("app").getImmediate(),i=new Tg(new pl(e.getProvider("auth-internal")),new vl(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cl(sl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(e.options.projectId,t)}(o,r),o);return n={useFetchStreams:t,...n},i._setSettings(n),i},"PUBLIC").setMultipleInstances(!0)),Nc(Gc,Kc,e),Nc(Gc,Kc,"esm2020")}();function Ov(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Nc("firebase","12.3.0","app");const Tv=Ov,Av=new Za("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_v=new vs("@firebase/auth");function Pv(e,...t){_v.logLevel<=ds.ERROR&&_v.error(`Auth (${wc}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(e,...t){throw Lv(e,...t)}function Iv(e,...t){return Lv(e,...t)}function Mv(e,t,r){const n={...Tv(),[t]:r};return new Za("auth","Firebase",n).create(t,{appName:e.name})}function Rv(e){return Mv(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lv(e,...t){if("string"!=typeof e){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Av.create(e,...t)}function Fv(e,t,...r){if(!e)throw Lv(t,...r)}function zv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Pv(t),new Error(t)}function Uv(e,t){e||zv(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function Bv(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Bv()&&"https:"!==Bv()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $v{constructor(e,t){this.shortDelay=e,this.longDelay=t,Uv(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xa())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Vv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(e,t){Uv(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void zv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void zv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void zv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kv=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yv=new $v(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Jv(e,t,r,n,o={}){return Qv(e,o,async()=>{let o={},i={};n&&("GET"===t?i=n:o={body:JSON.stringify(n)});const a=ns({key:e.config.apiKey,...i}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:s,...o};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Wa(e.emulatorConfig.host)&&(c.credentials="include"),Hv.fetch()(await Zv(e,e.config.apiHost,r,a),c)})}async function Qv(e,t,r){e._canInitEmulator=!1;const n={...Gv,...t};try{const t=new ey(e),o=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw ty(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[r,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw ty(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===r)throw ty(e,"email-already-in-use",i);if("USER_DISABLED"===r)throw ty(e,"user-disabled",i);const s=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Mv(e,s,a);Dv(e,s)}}catch(o){if(o instanceof Qa)throw o;Dv(e,"network-request-failed",{message:String(o)})}}async function Zv(e,t,r,n){const o=`${t}${r}?${n}`,i=e,a=i.config.emulator?Wv(e.config,o):`${e.config.apiScheme}://${o}`;if(Kv.includes(r)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}class ey{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Iv(this.auth,"network-request-failed")),Yv.get())})}}function ty(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const o=Iv(e,t,n);return o.customData._tokenResponse=r,o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(e,t){return Jv(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function oy(e){return 1e3*Number(e)}function iy(e){const[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return Pv("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fa(r);return e?JSON.parse(e):(Pv("Failed to decode base64 JWT payload"),null)}catch(o){return Pv("Caught error parsing JWT payload as JSON",null==o?void 0:o.toString()),null}}function ay(e){const t=iy(e);return Fv(t,"internal-error"),Fv(void 0!==t.exp,"internal-error"),Fv(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Qa&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cy{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ny(this.lastLoginAt),this.creationTime=ny(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(e){var t;const r=e.auth,n=await e.getIdToken(),o=await sy(e,ry(r,{idToken:n}));Fv(null==o?void 0:o.users.length,r,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const a=(null==(t=i.providerUserInfo)?void 0:t.length)?dy(i.providerUserInfo):[],s=(c=e.providerData,l=a,[...c.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var c,l;const u=e.isAnonymous,d=!(e.email&&i.passwordHash||(null==s?void 0:s.length)),h=!!u&&d,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ly(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function dy(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fv(e.idToken,"internal-error"),Fv(void 0!==e.idToken,"internal-error"),Fv(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ay(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fv(0!==e.length,"internal-error");const t=ay(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Fv(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:o}=await async function(e,t){const r=await Qv(e,{},async()=>{const r=ns({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:o}=e.config,i=await Zv(e,n,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:r};return e.emulatorConfig&&Wa(e.emulatorConfig.host)&&(s.credentials="include"),Hv.fetch()(i,s)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(e,t);this.updateTokensAndExpiration(r,n,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:o}=t,i=new hy;return r&&(Fv("string"==typeof r,"internal-error",{appName:e}),i.refreshToken=r),n&&(Fv("string"==typeof n,"internal-error",{appName:e}),i.accessToken=n),o&&(Fv("number"==typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hy,this.toJSON())}_performRefresh(){return zv("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(e,t){Fv("string"==typeof e||void 0===e,"internal-error",{appName:t})}class fy{constructor({uid:e,auth:t,stsTokenManager:r,...n}){this.providerId="firebase",this.proactiveRefresh=new cy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new ly(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const t=await sy(this,this.stsTokenManager.getToken(this.auth,e));return Fv(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const r=as(e),n=await r.getIdToken(t),o=iy(n);Fv(o&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error");const i="object"==typeof o.firebase?o.firebase:void 0,a=null==i?void 0:i.sign_in_provider;return{claims:o,token:n,authTime:ny(oy(o.auth_time)),issuedAtTime:ny(oy(o.iat)),expirationTime:ny(oy(o.exp)),signInProvider:a||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=as(e);await uy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Fv(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fy({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fv(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await uy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yc(this.auth.app))return Promise.reject(Rv(this.auth));const e=await this.getIdToken();return await sy(this,async function(e,t){return Jv(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,n=t.email??void 0,o=t.phoneNumber??void 0,i=t.photoURL??void 0,a=t.tenantId??void 0,s=t._redirectEventId??void 0,c=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:p,stsTokenManager:f}=t;Fv(u&&f,e,"internal-error");const m=hy.fromJSON(this.name,f);Fv("string"==typeof u,e,"internal-error"),py(r,e.name),py(n,e.name),Fv("boolean"==typeof d,e,"internal-error"),Fv("boolean"==typeof h,e,"internal-error"),py(o,e.name),py(i,e.name),py(a,e.name),py(s,e.name),py(c,e.name),py(l,e.name);const g=new fy({uid:u,auth:e,email:n,emailVerified:d,displayName:r,isAnonymous:h,photoURL:i,phoneNumber:o,tenantId:a,stsTokenManager:m,createdAt:c,lastLoginAt:l});return p&&Array.isArray(p)&&(g.providerData=p.map(e=>({...e}))),s&&(g._redirectEventId=s),g}static async _fromIdTokenResponse(e,t,r=!1){const n=new hy;n.updateFromServerResponse(t);const o=new fy({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await uy(o),o}static async _fromGetAccountInfoResponse(e,t,r){const n=t.users[0];Fv(void 0!==n.localId,"internal-error");const o=void 0!==n.providerUserInfo?dy(n.providerUserInfo):[],i=!(n.email&&n.passwordHash||(null==o?void 0:o.length)),a=new hy;a.updateFromIdToken(r);const s=new fy({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:o,metadata:new ly(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash||(null==o?void 0:o.length))};return Object.assign(s,c),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;function gy(e){Uv(e instanceof Function,"Expected a class definition");let t=my.get(e);return t?(Uv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,my.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vy.type="NONE";const yy=vy;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(e,t,r){return`firebase:${e}:${t}:${r}`}class xy{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:o}=this.auth;this.fullUserKey=by(this.userKey,n.apiKey,o),this.fullPersistenceKey=by("persistence",n.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await ry(this.auth,{idToken:e}).catch(()=>{});return t?fy._fromGetAccountInfoResponse(this.auth,t,e):null}return fy._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xy(gy(yy),e,r);const n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let o=n[0]||gy(yy);const i=by(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let r;if("string"==typeof t){const n=await ry(e,{idToken:t}).catch(()=>{});if(!n)break;r=await fy._fromGetAccountInfoResponse(e,n,t)}else r=fy._fromJSON(e,t);c!==o&&(a=r),o=c;break}}catch{}const s=n.filter(e=>e._shouldAllowMigration);return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==o)try{await e._remove(i)}catch{}})),new xy(o,e,r)):new xy(o,e,r)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ky(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(jy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cy(t))return"Blackberry";if(Oy(t))return"Webos";if(Sy(t))return"Safari";if((t.includes("chrome/")||Ny(t))&&!t.includes("edge/"))return"Chrome";if(Ey(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function jy(e=Xa()){return/firefox\//i.test(e)}function Sy(e=Xa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ny(e=Xa()){return/crios\//i.test(e)}function ky(e=Xa()){return/iemobile/i.test(e)}function Ey(e=Xa()){return/android/i.test(e)}function Cy(e=Xa()){return/blackberry/i.test(e)}function Oy(e=Xa()){return/webos/i.test(e)}function Ty(e=Xa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ay(){return function(){const e=Xa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function _y(e=Xa()){return Ty(e)||Ey(e)||Oy(e)||Cy(e)||/windows phone/i.test(e)||ky(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(e,t=[]){let r;switch(e){case"Browser":r=wy(Xa());break;case"Worker":r=`${wy(Xa())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${wc}/${n}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise((r,n)=>{try{r(e(t))}catch(o){n(o)}});r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const e of t)try{e()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==r?void 0:r.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){var t;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??6,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),void 0!==r.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),void 0!==r.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),void 0!==r.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),void 0!==r.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(null==(t=e.allowedNonAlphanumericCharacters)?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ly(this),this.idTokenSubscription=new Ly(this),this.beforeStateQueue=new Dy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Av,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gy(t)),this._initializationPromise=this.queue(async()=>{var r,n,o;if(!this._deleted&&(this.persistenceManager=await xy.create(this,e),null==(r=this._resolvePersistenceManagerAvailable)||r.call(this),!this._deleted)){if(null==(n=this._popupRedirectResolver)?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(o=this.currentUser)?void 0:o.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ry(this,{idToken:e}),r=await fy._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yc(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null==(t=this.redirectUser)?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);r&&r!==i||!(null==a?void 0:a.user)||(n=a.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Fv(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uy(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yc(this.app))return Promise.reject(Rv(this));const t=e?as(e):null;return t&&Fv(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fv(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yc(this.app)?Promise.reject(Rv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yc(this.app)?Promise.reject(Rv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gy(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Jv(e,"GET","/v2/passwordPolicy",Xv(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Iy(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jv(e,"POST","/v2/accounts:revokeToken",Xv(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gy(e)||this._popupRedirectResolver;Fv(t,this,"argument-error"),this.redirectPersistenceManager=await xy.create(this,[gy(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e?this._currentUser:(null==(r=this.redirectUser)?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(null==(e=this.currentUser)?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fv(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),"function"==typeof t){const o=e.addObserver(t,r,n);return()=>{i=!0,o()}}{const r=e.addObserver(t);return()=>{i=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fv(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Py(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(yc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){_v.logLevel<=ds.WARN&&_v.warn(`Auth (${wc}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Ry(e){return as(e)}class Ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const r=new os(e,t);return r.subscribe.bind(r)}(e=>this.observer=e)}get next(){return Fv(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zy(e,t,r){const n=Ry(e);Fv(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const o=!!(null==r?void 0:r.disableWarnings),i=Uy(t),{host:a,port:s}=function(e){const t=Uy(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const e=o[1];return{host:e,port:qy(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:qy(t)}}}(t),c=null===s?"":`:${s}`,l={url:`${i}//${a}${c}/`},u=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator)return Fv(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),void Fv(ts(l,n.config.emulator)&&ts(u,n.emulatorConfig),n,"emulator-config-failed");n.config.emulator=l,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Wa(a)?(Ha(`${i}//${a}${c}`),Ya("Auth",!0)):o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Uy(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class By{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zv("not implemented")}_getIdTokenResponse(e){return zv("not implemented")}_linkToIdToken(e,t){return zv("not implemented")}_getReauthenticationResolver(e){return zv("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(e,t){return async function(e,t,r,n,o={}){const i=await Jv(e,t,r,n,o);return"mfaPendingCredential"in i&&Dv(e,"multi-factor-auth-required",{_serverResponse:i}),i}(e,"POST","/v1/accounts:signInWithIdp",Xv(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends By{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $y(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dv("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n,...o}=t;if(!r||!n)return null;const i=new $y(r,n);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return Vy(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Vy(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ns(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends Wy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends Hy{constructor(){super("facebook.com")}static credential(e){return $y._fromParams({providerId:Gy.PROVIDER_ID,signInMethod:Gy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gy.credentialFromTaggedObject(e)}static credentialFromError(e){return Gy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Gy.credential(e.oauthAccessToken)}catch{return null}}}Gy.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gy.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ky extends Hy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $y._fromParams({providerId:Ky.PROVIDER_ID,signInMethod:Ky.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ky.credentialFromTaggedObject(e)}static credentialFromError(e){return Ky.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ky.credential(t,r)}catch{return null}}}Ky.GOOGLE_SIGN_IN_METHOD="google.com",Ky.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yy extends Hy{constructor(){super("github.com")}static credential(e){return $y._fromParams({providerId:Yy.PROVIDER_ID,signInMethod:Yy.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yy.credentialFromTaggedObject(e)}static credentialFromError(e){return Yy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Yy.credential(e.oauthAccessToken)}catch{return null}}}Yy.GITHUB_SIGN_IN_METHOD="github.com",Yy.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xy extends Hy{constructor(){super("twitter.com")}static credential(e,t){return $y._fromParams({providerId:Xy.PROVIDER_ID,signInMethod:Xy.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xy.credentialFromTaggedObject(e)}static credentialFromError(e){return Xy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xy.credential(t,r)}catch{return null}}}Xy.TWITTER_SIGN_IN_METHOD="twitter.com",Xy.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){const o=await fy._fromIdTokenResponse(e,r,n),i=Qy(r);return new Jy({user:o,providerId:i,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=Qy(r);return new Jy({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function Qy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Qa{constructor(e,t,r,n){super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Zy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new Zy(e,t,r,n)}}function eb(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw Zy._fromErrorAndOperation(e,r,t,n);throw r})}const tb="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tb,"1"),this.storage.removeItem(tb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_y(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});const r=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},o=this.storage.getItem(r);Ay()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nb.type="LOCAL";const ob=nb;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ib.type="SESSION";const ab=ib;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const r=new sb(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:o}=t.data,i=this.handlersMap[n];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const a=Array.from(i).map(async e=>e(t.origin,o)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function cb(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sb.receivers=[];class lb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let o,i;return new Promise((a,s)=>{const c=cb("",20);n.port1.start();const l=setTimeout(()=>{s(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function db(){return void 0!==ub().WorkerGlobalScope&&"function"==typeof ub().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hb="firebaseLocalStorageDb",pb="firebaseLocalStorage",fb="fbase_key";class mb{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gb(e,t){return e.transaction([pb],t?"readwrite":"readonly").objectStore(pb)}function vb(){const e=indexedDB.open(hb,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(pb,{keyPath:fb})}catch(n){r(n)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(pb)?t(r):(r.close(),await function(){const e=indexedDB.deleteDatabase(hb);return new mb(e).toPromise()}(),t(await vb()))})})}async function yb(e,t,r){const n=gb(e,!0).put({[fb]:t,value:r});return new mb(n).toPromise()}function bb(e,t){const r=gb(e,!0).delete(t);return new mb(r).toPromise()}class xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await vb()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(r){if(t++>3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sb._getInstance(db()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new lb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null==(e=r[0])?void 0:e.fulfilled)&&(null==(t=r[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vb();return await yb(e,tb,"1"),await bb(e,tb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>yb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const r=gb(e,!1).get(t),n=await new mb(r).toPromise();return void 0===n?null:n.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=gb(e,!1).getAll();return new mb(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;if(0!==e.length)for(const{fbase_key:n,value:o}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(o)&&(this.notifyListeners(n,o),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xb.type="LOCAL";const wb=xb;new $v(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jb extends By{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sb(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,r=!1){if(yc(e.app))return Promise.reject(Rv(e));const n="signIn",o=await eb(e,n,t),i=await Jy._fromIdTokenResponse(e,n,o);return r||await e._updateCurrentUser(i.user),i}(e.auth,new jb(e),e.bypassAuthState)}function Nb(e){const{auth:t,user:r}=e;return Fv(r,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,r=!1){const{auth:n}=e;if(yc(n.app))return Promise.reject(Rv(n));const o="reauthenticate";try{const i=await sy(e,eb(n,o,t,e),r);Fv(i.idToken,n,"internal-error");const a=iy(i.idToken);Fv(a,n,"internal-error");const{sub:s}=a;return Fv(e.uid===s,n,"user-mismatch"),Jy._forOperation(e,o,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&Dv(n,"user-mismatch"),i}}(r,new jb(e),e.bypassAuthState)}async function kb(e){const{auth:t,user:r}=e;return Fv(r,t,"internal-error"),async function(e,t,r=!1){const n=await sy(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Jy._forOperation(e,"link",n)}(r,new jb(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,r,n,o=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sb;case"linkViaPopup":case"linkViaRedirect":return kb;case"reauthViaPopup":case"reauthViaRedirect":return Nb;default:Dv(this.auth,"internal-error")}}resolve(e){Uv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Uv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new $v(2e3,1e4);class Ob extends Eb{constructor(e,t,r,n,o){super(e,t,n,o),this.provider=r,this.authWindow=null,this.pollId=null,Ob.currentPopupAction&&Ob.currentPopupAction.cancel(),Ob.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fv(e,this.auth,"internal-error"),e}async onExecution(){Uv(1===this.filter.length,"Popup operations only handle one event");const e=cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Iv(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(Iv(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ob.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null==(r=null==(t=this.authWindow)?void 0:t.window)?void 0:r.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Iv(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Cb.get())};e()}}Ob.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tb="pendingRedirect",Ab=new Map;class _b extends Eb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ab.get(this.auth._key());if(!e){try{const t=await async function(e,t){const r=function(e){return by(Tb,e.config.apiKey,e.name)}(t),n=function(e){return gy(e._redirectPersistence)}(e);if(!(await n._isAvailable()))return!1;const o="true"===await n._get(r);return await n._remove(r),o}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ab.set(this.auth._key(),e)}return this.bypassAuthState||Ab.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pb(e,t){Ab.set(e._key(),t)}async function Db(e,t,r=!1){if(yc(e.app))return Promise.reject(Rv(e));const n=Ry(e),o=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?gy(t):(Fv(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(n,t),i=new _b(n,o,r),a=await i.execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rb(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Rb(e)){const n=(null==(r=e.error.code)?void 0:r.split("auth/")[1])||"internal-error";t.onError(Iv(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mb(e))}saveEventToCache(e){this.cachedEventUids.add(Mb(e)),this.lastProcessedEventTime=Date.now()}}function Mb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Rb({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Lb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fb=/^https?/;async function zb(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Jv(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(Ub(r))return}catch{}Dv(e,"unauthorized-domain")}function Ub(e){const t=qv(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===n}if(!Fb.test(r))return!1;if(Lb.test(e))return n===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new $v(3e4,6e4);function Bb(){const e=ub().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}function Vb(e){return new Promise((t,r)=>{var n,o,i,a;function s(){Bb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bb(),r(Iv(e,"network-request-failed"))},timeout:qb.get()})}if(null==(o=null==(n=ub().gapi)?void 0:n.iframes)?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null==(i=ub().gapi)?void 0:i.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return ub()[t]=()=>{gapi.load?s():r(Iv(e,"network-request-failed"))},(a=`${Fy.gapiScript}?onload=${t}`,Fy.loadJS(a)).catch(e=>r(e))}s()}}).catch(e=>{throw $b=null,e})}let $b=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wb=new $v(5e3,15e3),Hb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kb(e){const t=e.config;Fv(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?Wv(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:wc},o=Gb.get(e.config.apiHost);o&&(n.eid=o);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ns(n).slice(1)}`}async function Yb(e){const t=await function(e){return $b=$b||Vb(e),$b}(e),r=ub().gapi;return Fv(r,e,"internal-error"),t.open({where:document.body,url:Kb(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hb,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});const o=Iv(e,"network-request-failed"),i=ub().setTimeout(()=>{n(o)},Wb.get());function a(){ub().clearTimeout(i),r(t)}t.ping(a).then(a,()=>{n(o)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Qb(e,t,r,n=500,o=600){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const c={...Xb,width:n.toString(),height:o.toString(),top:i,left:a},l=Xa().toLowerCase();r&&(s=Ny(l)?"_blank":r),jy(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=Xa()){var t;return Ty(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(l)&&"_self"!==s)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",s),new Jb(null);const d=window.open(t||"",s,u);Fv(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Jb(d)}const Zb="__/auth/handler",ex="emulator/auth/handler",tx=encodeURIComponent("fac");async function rx(e,t,r,n,o,i){Fv(e.config.authDomain,e,"auth-domain-config-required"),Fv(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:wc,eventId:o};if(t instanceof Wy){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Hy){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const c=await e._getAppCheckToken(),l=c?`#${tx}=${encodeURIComponent(c)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Zb}`;return Wv(e,ex)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${ns(s).slice(1)}${l}`}const nx="webStorageSupport";const ox=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ab,this._completeRedirectFn=Db,this._overrideRedirectResult=Pb}async _openPopup(e,t,r,n){var o;Uv(null==(o=this.eventManagers[e._key()])?void 0:o.manager,"_initialize() not called before _openPopup()");return Qb(e,await rx(e,t,r,qv(),n),cb())}async _openRedirect(e,t,r,n){await this._originValidation(e);return function(e){ub().location.href=e}(await rx(e,t,r,qv(),n)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(Uv(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Yb(e),r=new Ib(e);return t.register("authEvent",t=>{Fv(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nx,{type:nx},r=>{var n;const o=null==(n=null==r?void 0:r[0])?void 0:n[nx];void 0!==o&&t(!!o),Dv(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _y()||Sy()||Ty()}};var ix="@firebase/auth",ax="1.11.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fv(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cx=Va("authIdTokenMaxAge")||300;let lx=null;var ux;Fy={loadJS:e=>new Promise((t,r)=>{const n=document.createElement("script");var o;n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=Iv("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",((null==(o=document.getElementsByTagName("head"))?void 0:o[0])??document).appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ux="Browser",gc(new ss("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;Fv(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const s={apiKey:i,authDomain:a,clientPlatform:ux,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Py(ux)},c=new My(r,n,o,s);return function(e,t){const r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(gy);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),gc(new ss("auth-internal",e=>{const t=Ry(e.getProvider("auth").getImmediate());return new sx(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nc(ix,ax,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ux)),Nc(ix,ax,"esm2020");const dx=jc({apiKey:"AIzaSyDZa2C8AZc902HNuRWS0jP2KxfFoX5npyA",authDomain:"firefly-nexus.firebaseapp.com",projectId:"firefly-nexus",storageBucket:"firefly-nexus.firebasestorage.app",messagingSenderId:"981611156212",appId:"1:981611156212:web:aa09e09bbc3995617704a1",measurementId:"G-BG7KGG32F2"}),hx=function(e,t){const r="object"==typeof e?e:Sc(),n="string"==typeof e?e:t||ku,o=vc(r,"firestore").getImmediate({identifier:n});if(!o._initialized){const e=(e=>{const t=qa(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]})("firestore");e&&bg(o,...e)}return o}(dx);!function(e=Sc()){const t=vc(e,"auth");if(t.isInitialized())return t.getImmediate();const r=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const r=vc(e,"auth");if(r.isInitialized()){const e=r.getImmediate();if(ts(r.getOptions(),t??{}))return e;Dv(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:ox,persistence:[wb,ob,ab]}),n=Va("authTokenSyncURL");if(n&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(o=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cx)return;const n=null==t?void 0:t.token;lx!==n&&(lx=n,await fetch(o,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});!function(e,t,r){as(e).beforeAuthStateChanged(t,r)}(r,t,()=>t(r.currentUser)),function(e,t,r,n){as(e).onIdTokenChanged(t,r,n)}(r,e=>t(e))}}var o;const i=qa("auth");i&&zy(r,`http://${i}`)}(dx);const px=new class{constructor(){this.collections={clientes:"clientes",ordensServico:"ordens_servico",ordensVenda:"ordens_venda",produtos:"produtos",categorias:"categorias",movimentacoes:"movimentacoes",financeiro:"financeiro",usuarios:"usuarios",configuracoes:"configuracoes"},this.localStorageKeys={clientes:"crm_clientes",ordensServico:"crm_os",ordensVenda:"crm_ov",produtos:"crm_produtos",categorias:"crm_categorias",movimentacoes:"crm_movimentacoes",financeiro:"crm_financeiro",usuarios:"crm_usuarios",configuracoes:"crm_configuracoes"},this.isFirebaseAvailable=!1,this.initialized=!1,this.initPromise=this.init()}async init(){if(!this.initialized)try{await this.checkFirebaseAvailability(),this.initialized=!0}catch(e){throw console.error("[FirebaseService] Erro na inicialização:",e),this.initialized=!1,e}}async checkFirebaseAvailability(){try{console.log("[FirebaseService] ===== VERIFICANDO FIREBASE ====="),console.log("[FirebaseService] Verificando disponibilidade do Firebase..."),console.log("[FirebaseService] db object:",hx);const e=Ng(hx,"test","test");console.log("[FirebaseService] testDoc criado:",e);const t=await wv(e);console.log("[FirebaseService] getDoc result:",t),this.isFirebaseAvailable=!0,console.log("[FirebaseService] ✅ Firebase disponível"),console.log("[FirebaseService] ===== FIREBASE OK =====")}catch(e){console.log("[FirebaseService] ❌ Firebase não disponível, usando localStorage como fallback"),console.log("[FirebaseService] Erro:",e.message),console.log("[FirebaseService] Stack:",e.stack),this.isFirebaseAvailable=!1,console.log("[FirebaseService] ===== FIREBASE FALHOU =====")}}async saveData(e,t,r=null){if(console.log(`[FirebaseService] Salvando dados em ${e}:`,t),this.initialized||await this.initPromise,console.log("[FirebaseService] Firebase disponível:",this.isFirebaseAvailable),!this.isFirebaseAvailable)return console.log("[FirebaseService] Firebase não disponível, salvando no localStorage"),this.saveToLocalStorage(e,t,r);try{if(r){const n=Ng(hx,e,r);return await Nv(n,{...t,updatedAt:Cv()}),console.log(`[FirebaseService] Documento ${r} atualizado com sucesso`),r}{const r=await function(e,t){const r=Ll(e.firestore,Tg),n=Ng(e),o=function(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}(e.converter,t);return kv(r,[Vg(Bg(e.firestore),"addDoc",n._key,o,null!==e.converter,{}).toMutation(n._key,ph.exists(!1))]).then(()=>n)}(Sg(hx,e),{...t,createdAt:Cv(),updatedAt:Cv()});return console.log(`[FirebaseService] Novo documento criado com ID: ${r.id}`),r.id}}catch(n){return console.error(`[FirebaseService] Erro ao salvar dados em ${e}, usando localStorage:`,n),this.saveToLocalStorage(e,t,r)}}saveToLocalStorage(e,t,r=null){try{console.log(`[FirebaseService] saveToLocalStorage chamado para ${e}:`,t);const n=this.localStorageKeys[e];if(!n)throw new Error(`Chave localStorage não encontrada para ${e}`);if(console.log(`[FirebaseService] Chave localStorage: ${n}`),"configuracoes"===e){const e={...t,id:r||"config",updatedAt:(new Date).toISOString()};return localStorage.setItem(n,JSON.stringify(e)),window.dispatchEvent(new Event("storage")),r||"config"}const o=JSON.parse(localStorage.getItem(n)||"[]");if(console.log(`[FirebaseService] Dados existentes em ${n}:`,o),r){const e=o.findIndex(e=>e.id===r);-1!==e&&(o[e]={...t,id:r,updatedAt:(new Date).toISOString()})}else{const e=r||Date.now().toString(),n={...t,id:e,createdAt:(new Date).toISOString()};o.push(n),console.log("[FirebaseService] Novo item adicionado:",n)}return console.log(`[FirebaseService] Salvando dados finais em ${n}:`,o),localStorage.setItem(n,JSON.stringify(o)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:n,data:o}})),console.log(`[FirebaseService] Evento localStorageChange disparado para ${n}`),r||Date.now().toString()}catch(n){throw console.error("[FirebaseService] Erro ao salvar no localStorage:",n),n}}async getData(e){if(console.log(`[FirebaseService] getData chamado para ${e}`),this.initialized||(console.log(`[FirebaseService] Aguardando inicialização para ${e}`),await this.initPromise),console.log(`[FirebaseService] Firebase disponível para ${e}: ${this.isFirebaseAvailable}`),!this.isFirebaseAvailable)return console.log(`[FirebaseService] Usando localStorage para ${e}`),this.getFromLocalStorage(e);try{const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),2e3)),r=(async()=>{const t=sv(Sg(hx,e),dv("createdAt","desc")),r=await Sv(t),n=[];return r.forEach(e=>{n.push({id:e.id,...e.data()})}),n})(),n=await Promise.race([r,t]);return console.log(`[FirebaseService] Dados carregados do Firebase para ${e}:`,n.length),n}catch(t){return console.warn(`[FirebaseService] Erro ao buscar dados de ${e}, usando localStorage:`,t.message),this.getFromLocalStorage(e)}}getFromLocalStorage(e){try{const t=this.localStorageKeys[e];if(!t)return console.warn(`Chave localStorage não encontrada para ${e}`),"configuracoes"===e?null:[];console.log(`[FirebaseService] getFromLocalStorage para ${e}, chave: ${t}`);const r=localStorage.getItem(t);console.log("[FirebaseService] Dados brutos do localStorage:",r);const n=JSON.parse(r||("configuracoes"===e?"null":"[]"));if(console.log("[FirebaseService] Dados parseados:",n),"configuracoes"===e)return n;const o=Array.isArray(n)?n:[];return console.log(`[FirebaseService] Retornando array para ${e}:`,o),o}catch(t){return console.error("[FirebaseService] Erro ao buscar do localStorage:",t),"configuracoes"===e?null:[]}}async getDocument(e,t){try{const r=Ng(hx,e,t),n=await wv(r);return n.exists()?{id:n.id,...n.data()}:null}catch(r){return console.error(`Erro ao buscar documento ${t} de ${e}:`,r),null}}async deleteDocument(e,t){if(!this.isFirebaseAvailable)return this.deleteFromLocalStorage(e,t);try{return await(r=Ng(hx,e,t),kv(Ll(r.firestore,Tg),[new Eh(r._key,ph.none())])),!0}catch(n){return console.error(`Erro ao deletar documento ${t} de ${e}:`,n),this.deleteFromLocalStorage(e,t)}var r}deleteFromLocalStorage(e,t){try{const r=this.localStorageKeys[e];if(!r)return console.warn(`Chave localStorage não encontrada para ${e}`),!1;const n=JSON.parse(localStorage.getItem(r)||"[]").filter(e=>e.id!==t);return localStorage.setItem(r,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:r,data:n}})),!0}catch(r){return console.error("[FirebaseService] Erro ao deletar do localStorage:",r),!1}}async subscribeToCollection(e,t){if(console.log(`[FirebaseService] ===== SUBSCRIBE TO COLLECTION ${e} =====`),this.initialized||(console.log(`[FirebaseService] Aguardando inicialização para ${e}`),await this.initPromise),console.log(`[FirebaseService] subscribeToCollection para ${e}, Firebase disponível: ${this.isFirebaseAvailable}`),!this.isFirebaseAvailable){console.log(`[FirebaseService] Firebase não disponível, usando localStorage para ${e}`);const r=this.localStorageKeys[e];if(!r)return console.warn(`Chave localStorage não encontrada para ${e}`),()=>{};const n=this.getFromLocalStorage(e);console.log(`[FirebaseService] Dados iniciais para ${e}:`,n),t(n);const o=n=>{if(n.detail&&n.detail.key===r)console.log(`[FirebaseService] Evento localStorageChange recebido para ${e}:`,n.detail.data),t(n.detail.data);else{const r=this.getFromLocalStorage(e);console.log(`[FirebaseService] Fallback - recarregando dados para ${e}:`,r),t(r)}};return window.addEventListener("localStorageChange",o),()=>{window.removeEventListener("localStorageChange",o)}}console.log(`[FirebaseService] Firebase disponível, configurando onSnapshot para ${e}`);return function(e,...t){var r,n,o;e=as(e);let i={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof t[a]||Og(t[a])||(i=t[a++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Og(t[a])){const e=t[a];t[a]=null==(r=e.next)?void 0:r.bind(e),t[a+1]=null==(n=e.error)?void 0:n.bind(e),t[a+2]=null==(o=e.complete)?void 0:o.bind(e)}let c,l,u;if(e instanceof wg)l=Ll(e.firestore,Tg),u=Nd(e._key.path),c={next:r=>{t[a]&&t[a](Ev(l,e,r))},error:t[a+1],complete:t[a+2]};else{const r=Ll(e,xg);l=Ll(r.firestore,Tg),u=r._query;const n=new jv(l);c={next:e=>{t[a]&&t[a](new bv(l,n,r,e))},error:t[a+1],complete:t[a+2]},ov(e._query)}return function(e,t,r,n){const o=new ag(n),i=new Cm(t,o,r);return e.asyncQueue.enqueueAndForget(async()=>xm(await hg(e),i)),()=>{o.Nu(),e.asyncQueue.enqueueAndForget(async()=>wm(await hg(e),i))}}(Ag(l),u,s,c)}(sv(Sg(hx,e),dv("createdAt","desc")),r=>{const n=[];r.forEach(e=>{n.push({id:e.id,...e.data()})}),console.log(`[FirebaseService] onSnapshot recebido para ${e}:`,n),t(n)},r=>{console.error(`[FirebaseService] Erro no onSnapshot para ${e}:`,r);const n=this.getFromLocalStorage(e);console.log("[FirebaseService] Fallback para localStorage:",n),t(n)})}async saveCliente(e,t=null){return await this.saveData(this.collections.clientes,e,t)}async getClientes(){return await this.getData(this.collections.clientes)}async deleteCliente(e){return await this.deleteDocument(this.collections.clientes,e)}subscribeToClientes(e){return this.subscribeToCollection(this.collections.clientes,e)}async saveOS(e,t=null){return await this.saveData(this.collections.ordensServico,e,t)}async getOS(){return await this.getData(this.collections.ordensServico)}async deleteOS(e){return await this.deleteDocument(this.collections.ordensServico,e)}subscribeToOS(e){return this.subscribeToCollection(this.collections.ordensServico,e)}async saveOV(e,t=null){return await this.saveData(this.collections.ordensVenda,e,t)}async getOV(){return await this.getData(this.collections.ordensVenda)}async deleteOV(e){return await this.deleteDocument(this.collections.ordensVenda,e)}subscribeToOV(e){return this.subscribeToCollection(this.collections.ordensVenda,e)}async saveProduto(e,t=null){return await this.saveData(this.collections.produtos,e,t)}async getProdutos(){return await this.getData(this.collections.produtos)}async deleteProduto(e){return await this.deleteDocument(this.collections.produtos,e)}subscribeToProdutos(e){return this.subscribeToCollection(this.collections.produtos,e)}async saveCategoria(e,t=null){return await this.saveData(this.collections.categorias,e,t)}async getCategorias(){return await this.getData(this.collections.categorias)}async deleteCategoria(e){return await this.deleteDocument(this.collections.categorias,e)}subscribeToCategorias(e){return this.subscribeToCollection(this.collections.categorias,e)}async saveMovimentacao(e,t=null){return await this.saveData(this.collections.movimentacoes,e,t)}async getMovimentacoes(){return await this.getData(this.collections.movimentacoes)}async deleteMovimentacao(e){return await this.deleteDocument(this.collections.movimentacoes,e)}subscribeToMovimentacoes(e){return this.subscribeToCollection(this.collections.movimentacoes,e)}async saveFinanceiro(e,t=null){return await this.saveData(this.collections.financeiro,e,t)}async getFinanceiro(){return await this.getData(this.collections.financeiro)}async deleteFinanceiro(e){return await this.deleteDocument(this.collections.financeiro,e)}subscribeToFinanceiro(e){return this.subscribeToCollection(this.collections.financeiro,e)}async saveUsuario(e,t=null){return await this.saveData(this.collections.usuarios,e,t)}async getUsuarios(){return await this.getData(this.collections.usuarios)}async deleteUsuario(e){return await this.deleteDocument(this.collections.usuarios,e)}subscribeToUsuarios(e){return this.subscribeToCollection(this.collections.usuarios,e)}async saveConfiguracao(e,t=null){try{if(console.log("[FirebaseService] 🚀 Salvando configuração:",e),!t)try{const e=await this.getData(this.collections.configuracoes);e.length>0?(t=e[0].id,console.log("[FirebaseService] ✅ Configuração existente encontrada, ID:",t)):console.log("[FirebaseService] 📝 Criando nova configuração")}catch(r){console.warn("[FirebaseService] ⚠️ Erro ao buscar configuração existente:",r)}const n=await this.saveData(this.collections.configuracoes,e,t);return localStorage.removeItem("crm_config_cache"),console.log("[FirebaseService] ✅ Configuração salva com sucesso:",n),n}catch(r){console.error("[FirebaseService] ❌ Erro ao salvar configuração:",r);try{return localStorage.setItem("crm_configuracoes",JSON.stringify(e)),localStorage.setItem("crm_idioma",e.idioma||"pt-BR"),console.log("[FirebaseService] ✅ Fallback: Configuração salva no localStorage"),"localStorage"}catch(n){throw console.error("[FirebaseService] ❌ Erro no fallback localStorage:",n),r}}}async getConfiguracao(){const e=localStorage.getItem("crm_config_cache");if(e)try{const t=JSON.parse(e),r=t.timestamp;if(Date.now()-r<3e5)return console.log("[FirebaseService] Usando configuração do cache"),t.config}catch(n){console.warn("[FirebaseService] Erro ao ler cache de configuração:",n)}const t=await this.getData(this.collections.configuracoes),r=t.length>0?t[0]:null;return r&&localStorage.setItem("crm_config_cache",JSON.stringify({config:r,timestamp:Date.now()})),r}async migrateFromLocalStorage(){console.log("Iniciando migração do localStorage para Firebase...");const e=[{key:"crm_clientes",collection:this.collections.clientes},{key:"crm_os",collection:this.collections.ordensServico},{key:"crm_ov",collection:this.collections.ordensVenda},{key:"crm_produtos",collection:this.collections.produtos},{key:"crm_categorias",collection:this.collections.categorias},{key:"crm_movimentacoes",collection:this.collections.movimentacoes},{key:"crm_financeiro",collection:this.collections.financeiro},{key:"crm_usuarios",collection:this.collections.usuarios}];for(const r of e)try{const e=JSON.parse(localStorage.getItem(r.key)||"[]");if(Array.isArray(e)&&e.length>0){console.log(`Migrando ${e.length} itens de ${r.key}...`);for(const t of e){const{id:e,...n}=t;await this.saveData(r.collection,n)}console.log(`Migração de ${r.key} concluída!`)}}catch(t){console.error(`Erro ao migrar ${r.key}:`,t)}try{const e=localStorage.getItem("crm_configuracoes");if(e){const t=JSON.parse(e);await this.saveConfiguracao(t),console.log("Configurações migradas!")}}catch(t){console.error("Erro ao migrar configurações:",t)}console.log("Migração concluída!")}},fx=(e,t={})=>{const[r,n]=ie.useState([]),[o,i]=ie.useState(!0),[a,s]=ie.useState(null),{enableRealtime:c=!0,onError:l=null}=t;ie.useEffect(()=>{let t=null;return(async()=>{try{if(i(!0),s(null),console.log(`[useFirebaseData] ===== INÍCIO CARREGAMENTO ${e} =====`),console.log(`[useFirebaseData] enableRealtime: ${c}`),c)console.log(`[useFirebaseData] Configurando escuta em tempo real para ${e}`),t=await px.subscribeToCollection(e,t=>{console.log(`[useFirebaseData] Dados recebidos de ${e}:`,t),console.log("[useFirebaseData] Tipo dos dados:",typeof t,Array.isArray(t)),n(Array.isArray(t)?t:[]),i(!1)});else{console.log(`[useFirebaseData] Carregando dados uma única vez para ${e}`);const t=await px.getData(e);console.log(`[useFirebaseData] Dados carregados de ${e}:`,t),console.log("[useFirebaseData] Tipo dos dados:",typeof t,Array.isArray(t)),n(Array.isArray(t)?t:[]),i(!1)}console.log(`[useFirebaseData] ===== FIM CARREGAMENTO ${e} =====`)}catch(r){console.error(`[useFirebaseData] Erro ao carregar dados de ${e}:`,r),s(r),i(!1),l&&l(r)}})(),()=>{t&&t()}},[e,c,l]);return{data:r,loading:o,error:a,save:async(t,r=null)=>{try{console.log(`[useFirebaseData] Salvando item em ${e}:`,t);const n=await px.saveData(e,t,r);return console.log(`[useFirebaseData] Item salvo com sucesso em ${e}:`,n),n}catch(n){throw console.error(`[useFirebaseData] Erro ao salvar em ${e}:`,n),s(n),n}},remove:async t=>{try{console.log(`[useFirebaseData] Removendo item ${t} de ${e}`);const r=await px.deleteDocument(e,t);return console.log(`[useFirebaseData] Item removido com sucesso de ${e}`),r}catch(r){throw console.error(`[useFirebaseData] Erro ao deletar de ${e}:`,r),s(r),r}},refresh:()=>{i(!0),px.getData(e).then(n).finally(()=>i(!1))}}},mx=()=>fx("clientes"),gx=()=>fx("ordens_servico"),vx=()=>fx("ordens_venda"),yx=()=>fx("produtos"),bx=()=>fx("categorias"),xx=()=>fx("movimentacoes"),wx=()=>fx("financeiro"),jx=()=>{const e=fx("usuarios");console.log("[useUsuarios] Hook result completo:",e),console.log("[useUsuarios] result.data:",e.data),console.log("[useUsuarios] result.loading:",e.loading),console.log("[useUsuarios] result.error:",e.error);const t=Array.isArray(e.data)?e.data:[];return console.log("[useUsuarios] usuarios finais:",t),{...e,usuarios:t,saveUsuario:e.save}},Sx=()=>{const[e,t]=ie.useState(null),[r,n]=ie.useState(!0),[o,i]=ie.useState(null);ie.useEffect(()=>{(async()=>{try{n(!0);const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),500)),r=px.getConfiguracao(),o=await Promise.race([r,e]);t(o),n(!1),console.log("[useConfiguracao] Configuração carregada:",o)}catch(e){console.warn("[useConfiguracao] Erro ao carregar configuração, usando padrão:",e.message),t({nomeEmpresa:"CRM MultiSmart",tema:"dark",idioma:"pt-BR"}),i(e),n(!1)}})()},[]);return{config:e,loading:r,error:o,saveConfig:async e=>{try{const r=await px.saveConfiguracao(e);return t(e),r}catch(r){throw console.error("Erro ao salvar configuração:",r),i(r),r}}}},Nx=()=>{const{dialogs:t,openDialog:r,closeDialog:n}=ie.useContext(UZ),{data:o,loading:i,save:a,remove:s}=mx(),{data:c}=vx(),[l,u]=ie.useState(""),[d,h]=ie.useState(null),[p,f]=ie.useState(null),[m,g]=ie.useState("grid"),[v,y]=ie.useState("nome"),[b,x]=ie.useState("asc"),[w,j]=ie.useState("todos"),[S,N]=ie.useState(!0),[k,E]=ie.useState(!1),[C,O]=ie.useState("basico"),[T,A]=ie.useState({nome:"",telefone:"",email:"",endereco:"",observacoes:"",categoria:"cliente",dataNascimento:"",cpf:"",empresa:"",website:"",foto:null,redesSociais:{instagram:"",facebook:"",linkedin:""},preferencias:{formaContato:"telefone",horarioContato:"comercial",newsletter:!1}}),{toast:_}=Io(),P=(e=null)=>{var t,n,o,i,a,s;e?(h(e),A({nome:e.nome||"",telefone:e.telefone||"",email:e.email||"",endereco:e.endereco||"",observacoes:e.observacoes||"",categoria:e.categoria||"cliente",dataNascimento:e.dataNascimento||"",cpf:e.cpf||"",empresa:e.empresa||"",website:e.website||"",foto:e.foto||null,redesSociais:{instagram:(null==(t=e.redesSociais)?void 0:t.instagram)||"",facebook:(null==(n=e.redesSociais)?void 0:n.facebook)||"",linkedin:(null==(o=e.redesSociais)?void 0:o.linkedin)||""},preferencias:{formaContato:(null==(i=e.preferencias)?void 0:i.formaContato)||"telefone",horarioContato:(null==(a=e.preferencias)?void 0:a.horarioContato)||"comercial",newsletter:(null==(s=e.preferencias)?void 0:s.newsletter)||!1}}),console.log("[Clientes] Editando cliente:",e)):(h(null),A({nome:"",telefone:"",email:"",endereco:"",observacoes:"",categoria:"cliente",dataNascimento:"",cpf:"",empresa:"",website:"",foto:null,redesSociais:{instagram:"",facebook:"",linkedin:""},preferencias:{formaContato:"telefone",horarioContato:"comercial",newsletter:!1}}),console.log("[Clientes] Novo cliente, formulário limpo")),r("clientes"),console.log("[Clientes] Dialog de cliente aberto")},D=()=>{n("clientes"),console.log("[Clientes] Dialog de cliente fechado")},I=async e=>{try{await s(e),console.log("[Clientes] Cliente removido:",e),_({title:"Sucesso!",description:"Cliente removido com sucesso!"})}catch(t){console.error("[Clientes] Erro ao remover cliente:",t),_({title:"Erro",description:"Erro ao remover cliente. Tente novamente.",variant:"destructive"})}},M=e=>{const t=c.filter(t=>t.clienteId===e.id),r=t.length,n=t.reduce((e,t)=>e+(t.total||0),0),o=t.length>0?new Date(Math.max(...t.map(e=>new Date(e.createdAt)))):null;return{totalCompras:r,totalGasto:n,ultimaCompra:o,ticketMedio:r>0?n/r:0,status:0===r?"novo":n>1e3?"vip":o&&Date.now()-o.getTime()<2592e6?"ativo":"inativo"}},R=o.filter(e=>{const t=e.nome.toLowerCase().includes(l.toLowerCase())||e.telefone.includes(l)||e.email&&e.email.toLowerCase().includes(l.toLowerCase()),r=M(e),n="todos"===w||"vip"===w&&"vip"===r.status||"novos"===w&&0===r.totalCompras||"ativos"===w&&"ativo"===r.status||"inativos"===w&&"inativo"===r.status;return t&&n}).sort((e,t)=>{let r=0;switch(v){case"nome":default:r=e.nome.localeCompare(t.nome);break;case"data":r=new Date(e.createdAt)-new Date(t.createdAt);break;case"compras":r=M(e).totalCompras-M(t).totalCompras;break;case"gasto":r=M(e).totalGasto-M(t).totalGasto}return"asc"===b?r:-r}),L=e=>{navigator.clipboard.writeText(e),_({title:"Copiado!",description:"Informação copiada para a área de transferência"})},F=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),{getRootProps:z,getInputProps:U,isDragActive:q}=_a({onDrop:e=>{const t=e[0];if(!t)return;if(!t.type.startsWith("image/"))return void _({title:"Tipo de arquivo inválido!",description:"Por favor, selecione apenas imagens.",variant:"destructive"});if(t.size>2097152)return void _({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 2MB.",variant:"destructive"});const r=new FileReader;r.onload=()=>{const e=new Image;e.onload=()=>{const t=document.createElement("canvas"),r=t.getContext("2d");let{width:n,height:o}=e;const i=1e3;n>o?n>i&&(o=o*i/n,n=i):o>i&&(n=n*i/o,o=i),t.width=n,t.height=o,r.drawImage(e,0,0,n,o);const a=t.toDataURL("image/jpeg",.9);A(e=>({...e,foto:a})),_({title:"Foto adicionada!",description:"Foto do cliente carregada com sucesso."})},e.src=r.result},r.onerror=()=>{_({title:"Erro ao carregar imagem!",description:"Tente novamente com outro arquivo.",variant:"destructive"})},r.readAsDataURL(t)},accept:{"image/*":[]},multiple:!1}),B={total:o.length,comCompras:o.filter(e=>c.some(t=>t.clienteId===e.id)).length,novos:o.filter(e=>{const t=new Date(e.createdAt);return Date.now()-t.getTime()<2592e6}).length,vip:o.filter(e=>"vip"===M(e).status).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"👥 Clientes"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Gerencie sua base de clientes com inteligência"})]}),e.jsx(pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(ni,{open:t.clientes,onOpenChange:D,children:[e.jsxs(Rn,{onClick:()=>P(),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 text-white",size:"lg",children:[e.jsx(fe,{className:"h-5 w-5 mr-2"}),"Novo Cliente"]}),e.jsxs(si,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ci,{children:[e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(fe,{className:"h-6 w-6 text-blue-500"}),d?"Editar Cliente":"Novo Cliente"]}),e.jsx(di,{children:"Preencha as informações do cliente. Campos obrigatórios marcados com *."})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),console.log("[Clientes] Submissão do formulário de cliente:",T,d),T.nome){if(!T.telefone)return _({title:"Campo obrigatório",description:"Telefone é obrigatório! Navegando para aba de contato...",variant:"destructive"}),void O("contato");try{const e={...T,createdAt:d?d.createdAt:(new Date).toISOString()};await a(e,null==d?void 0:d.id),d?(console.log("[Clientes] Cliente atualizado:",e),_({title:"Sucesso!",description:"Cliente atualizado com sucesso!"})):(console.log("[Clientes] Cliente cadastrado:",e),_({title:"Sucesso!",description:"Cliente cadastrado com sucesso!"})),D()}catch(t){console.error("[Clientes] Erro ao salvar cliente:",t),_({title:"Erro",description:"Erro ao salvar cliente. Tente novamente.",variant:"destructive"})}}else _({title:"Campo obrigatório",description:"Nome é obrigatório!",variant:"destructive"})},className:"space-y-6",children:[e.jsxs(Pi,{value:C,onValueChange:O,className:"w-full",children:[e.jsxs(Di,{className:"grid w-full grid-cols-3",children:[e.jsx(Ii,{value:"basico",children:"Básico"}),e.jsx(Ii,{value:"contato",children:"Contato"}),e.jsx(Ii,{value:"preferencias",children:"Preferências"})]}),e.jsxs(Mi,{value:"basico",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(gi,{className:"text-sm font-medium",children:"Foto do Cliente"}),T.foto?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:T.foto,alt:"Foto do cliente",className:"w-32 h-32 rounded-full object-cover border-4 border-slate-200 dark:border-slate-700 shadow-lg"}),e.jsx(Rn,{type:"button",variant:"destructive",size:"icon",onClick:()=>{A(e=>({...e,foto:null})),_({title:"Foto removida!",description:"Foto do cliente removida com sucesso."})},className:"absolute -top-2 -right-2 w-6 h-6 rounded-full",children:e.jsx(le,{className:"h-3 w-3"})})]}):e.jsxs("div",{...z(),className:"w-32 h-32 border-2 border-dashed rounded-full flex flex-col items-center justify-center cursor-pointer transition-all duration-200 "+(q?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-300 dark:border-slate-600 hover:border-blue-400 hover:bg-slate-50 dark:hover:bg-slate-800"),children:[e.jsx("input",{...U()}),e.jsx(me,{className:"h-8 w-8 text-slate-400 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 text-center px-2",children:q?"🎯 Solte a foto aqui":"📷 Arraste uma foto ou clique para selecionar"})]}),e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"PNG, JPG até 2MB • Redimensionada para 1000x1000px"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"nome",children:"Nome Completo *"}),e.jsx(hi,{id:"nome",value:T.nome,onChange:e=>A({...T,nome:e.target.value}),placeholder:"João Silva",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"categoria",children:"Categoria"}),e.jsxs(yi,{value:T.categoria,onValueChange:e=>A({...T,categoria:e}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"cliente",children:"Cliente"}),e.jsx(Ni,{value:"fornecedor",children:"Fornecedor"}),e.jsx(Ni,{value:"parceiro",children:"Parceiro"}),e.jsx(Ni,{value:"vip",children:"VIP"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"cpf",children:"CPF"}),e.jsx(hi,{id:"cpf",value:T.cpf,onChange:e=>A({...T,cpf:e.target.value}),placeholder:"000.000.000-00"})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"dataNascimento",children:"Data de Nascimento"}),e.jsx(hi,{id:"dataNascimento",type:"date",value:T.dataNascimento,onChange:e=>A({...T,dataNascimento:e.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"empresa",children:"Empresa"}),e.jsx(hi,{id:"empresa",value:T.empresa,onChange:e=>A({...T,empresa:e.target.value}),placeholder:"Nome da empresa"})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"observacoes",children:"Observações"}),e.jsx(vi,{id:"observacoes",value:T.observacoes,onChange:e=>A({...T,observacoes:e.target.value}),placeholder:"Informações adicionais sobre o cliente",rows:3})]})]}),e.jsxs(Mi,{value:"contato",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"telefone",children:"Telefone *"}),e.jsx(hi,{id:"telefone",value:T.telefone,onChange:e=>A({...T,telefone:e.target.value}),placeholder:"(11) 99999-9999",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"email",children:"E-mail"}),e.jsx(hi,{id:"email",type:"email",value:T.email,onChange:e=>A({...T,email:e.target.value}),placeholder:"email@exemplo.com"})]})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"endereco",children:"Endereço"}),e.jsx(vi,{id:"endereco",value:T.endereco,onChange:e=>A({...T,endereco:e.target.value}),placeholder:"Endereço completo",rows:2})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"website",children:"Website"}),e.jsx(hi,{id:"website",value:T.website,onChange:e=>A({...T,website:e.target.value}),placeholder:"https://exemplo.com"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(gi,{children:"Redes Sociais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"instagram",className:"text-sm",children:"Instagram"}),e.jsx(hi,{id:"instagram",value:T.redesSociais.instagram,onChange:e=>A({...T,redesSociais:{...T.redesSociais,instagram:e.target.value}}),placeholder:"@usuario"})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"facebook",className:"text-sm",children:"Facebook"}),e.jsx(hi,{id:"facebook",value:T.redesSociais.facebook,onChange:e=>A({...T,redesSociais:{...T.redesSociais,facebook:e.target.value}}),placeholder:"facebook.com/usuario"})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"linkedin",className:"text-sm",children:"LinkedIn"}),e.jsx(hi,{id:"linkedin",value:T.redesSociais.linkedin,onChange:e=>A({...T,redesSociais:{...T.redesSociais,linkedin:e.target.value}}),placeholder:"linkedin.com/in/usuario"})]})]})]})]}),e.jsxs(Mi,{value:"preferencias",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"formaContato",children:"Forma de Contato Preferida"}),e.jsxs(yi,{value:T.preferencias.formaContato,onValueChange:e=>A({...T,preferencias:{...T.preferencias,formaContato:e}}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"telefone",children:"Telefone"}),e.jsx(Ni,{value:"email",children:"E-mail"}),e.jsx(Ni,{value:"whatsapp",children:"WhatsApp"}),e.jsx(Ni,{value:"instagram",children:"Instagram"})]})]})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"horarioContato",children:"Horário de Contato"}),e.jsxs(yi,{value:T.preferencias.horarioContato,onValueChange:e=>A({...T,preferencias:{...T.preferencias,horarioContato:e}}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"comercial",children:"Comercial (9h-18h)"}),e.jsx(Ni,{value:"manha",children:"Manhã (6h-12h)"}),e.jsx(Ni,{value:"tarde",children:"Tarde (12h-18h)"}),e.jsx(Ni,{value:"noite",children:"Noite (18h-22h)"}),e.jsx(Ni,{value:"livre",children:"Qualquer horário"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"newsletter",checked:T.preferencias.newsletter,onChange:e=>A({...T,preferencias:{...T.preferencias,newsletter:e.target.checked}}),className:"rounded"}),e.jsx(gi,{htmlFor:"newsletter",children:"Receber newsletter e promoções"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(Rn,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600",children:d?"Atualizar Cliente":"Cadastrar Cliente"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:D,children:"Cancelar"})]})]})]})]})})]}),S&&e.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(ge,{className:"h-5 w-5 text-blue-200"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Total"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:B.total})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(ve,{className:"h-5 w-5 text-green-200"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Compraram"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:B.comCompras})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(ye,{className:"h-5 w-5 text-yellow-200"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"VIP"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:B.vip})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(fe,{className:"h-5 w-5 text-purple-200"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Novos"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:B.novos})]})]})})]})]}),e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar clientes...",value:l,onChange:e=>u(e.target.value),className:"pl-10"})]}),e.jsxs(yi,{value:w,onValueChange:j,children:[e.jsxs(xi,{className:"w-full sm:w-40",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx(bi,{})]}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"todos",children:"Todos"}),e.jsx(Ni,{value:"vip",children:"VIP"}),e.jsx(Ni,{value:"novos",children:"Novos"}),e.jsx(Ni,{value:"ativos",children:"Ativos"}),e.jsx(Ni,{value:"inativos",children:"Inativos"})]})]}),e.jsxs(yi,{value:v,onValueChange:y,children:[e.jsxs(xi,{className:"w-full sm:w-40",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),e.jsx(bi,{})]}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"nome",children:"Nome"}),e.jsx(Ni,{value:"data",children:"Data"}),e.jsx(Ni,{value:"compras",children:"Compras"}),e.jsx(Ni,{value:"gasto",children:"Gasto"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rn,{variant:"asc"===b?"default":"outline",size:"sm",onClick:()=>x("asc"===b?"desc":"asc"),children:"asc"===b?e.jsx(je,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex border border-slate-200 dark:border-slate-700 rounded-lg",children:[e.jsx(Rn,{variant:"grid"===m?"default":"ghost",size:"sm",onClick:()=>g("grid"),className:"rounded-r-none",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"list"===m?"default":"ghost",size:"sm",onClick:()=>g("list"),className:"rounded-l-none",children:e.jsx(ge,{className:"h-4 w-4"})})]})]})]})}),e.jsx(Ne,{mode:"wait",children:i?e.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Carregando clientes..."})]}):e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"grid"===m?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:R.map((t,r)=>{const n=M(t),o={novo:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",ativo:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",inativo:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",vip:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"};return"grid"===m?e.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*r},whileHover:{y:-5},className:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.foto?e.jsx("img",{src:t.foto,alt:t.nome,className:"w-12 h-12 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:t.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-lg group-hover:text-blue-600 transition-colors",children:t.nome}),e.jsx(Ei,{className:o[n.status],children:"novo"===n.status?"Novo":"vip"===n.status?"VIP":"ativo"===n.status?"Ativo":"Inativo"})]})]}),e.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>{f(t),E(!0)},className:"h-8 w-8",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>P(t),className:"h-8 w-8",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>I(t.id),className:"h-8 w-8 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 dark:text-slate-400",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t.telefone}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>L(t.telefone),className:"h-6 w-6 ml-auto",children:e.jsx(Te,{className:"h-3 w-3"})})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 dark:text-slate-400",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:t.email}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>L(t.email),className:"h-6 w-6 ml-auto",children:e.jsx(Te,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.totalCompras}),e.jsx("p",{className:"text-xs text-slate-500",children:"Compras"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:F(n.totalGasto)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Gasto"})]})]})]})]},t.id):e.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*r},className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.foto?e.jsx("img",{src:t.foto,alt:t.nome,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:t.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.nome}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(Oe,{className:"h-3 w-3"}),t.telefone,t.email&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(Ae,{className:"h-3 w-3"}),t.email]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[n.totalCompras," compras"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F(n.totalGasto)})]}),e.jsx(Ei,{className:o[n.status],children:"novo"===n.status?"Novo":"vip"===n.status?"VIP":"ativo"===n.status?"Ativo":"Inativo"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>{f(t),E(!0)},className:"h-8 w-8",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>P(t),className:"h-8 w-8",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>I(t.id),className:"h-8 w-8 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})},t.id)})},m)}),!i&&0===R.length&&e.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ge,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:l?"Nenhum cliente encontrado":"Nenhum cliente cadastrado"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:l?"Tente buscar com outros termos":"Comece cadastrando seu primeiro cliente"}),!l&&e.jsxs(Rn,{onClick:()=>P(),className:"bg-gradient-to-r from-blue-600 to-purple-600",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Cadastrar Primeiro Cliente"]})]}),e.jsx(ni,{open:k,onOpenChange:E,children:e.jsx(si,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:p&&e.jsxs(e.Fragment,{children:[e.jsx(ci,{children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[p.foto?e.jsx("img",{src:p.foto,alt:p.nome,className:"w-12 h-12 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:p.nome.charAt(0).toUpperCase()}),p.nome]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(Ci,{children:[e.jsx(Oi,{className:"pb-3",children:e.jsxs(Ti,{className:"text-lg flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-500"}),"Compras"]})}),e.jsxs(_i,{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:M(p).totalCompras}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total de compras realizadas"})]})]}),e.jsxs(Ci,{children:[e.jsx(Oi,{className:"pb-3",children:e.jsxs(Ti,{className:"text-lg flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5 text-green-500"}),"Total Gasto"]})}),e.jsxs(_i,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:F(M(p).totalGasto)}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Valor total gasto"})]})]})]}),e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsxs(Ti,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-purple-500"}),"Informações de Contato"]})}),e.jsxs(_i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:p.telefone}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>L(p.telefone),className:"h-6 w-6 ml-auto",children:e.jsx(Te,{className:"h-3 w-3"})})]}),p.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:p.email}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>L(p.email),className:"h-6 w-6 ml-auto",children:e.jsx(Te,{className:"h-3 w-3"})})]}),p.endereco&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:p.endereco})]})]})]})]})]})})})]})},kx=()=>{const{dialogs:t,openDialog:r,closeDialog:n}=ie.useContext(UZ),{data:o,loading:i,save:a,remove:s}=gx(),{data:c}=mx(),{save:l}=wx(),[u,d]=ie.useState("");ie.useState("Todos");const[h,p]=ie.useState(null),[f,m]=ie.useState({clienteNome:"",clienteTelefone:"",titulo:"",senha:"",valor:"",observacoes:"",status:"Pendente"}),{toast:g}=Io();console.log("[OS] ===== DADOS CARREGADOS ====="),console.log("[OS] Ordens:",o),console.log("[OS] Clientes:",c),console.log("[OS] Loading:",i);const v=(e=null)=>{e?(p(e),m({...e,valor:e.valor?e.valor.toString():""}),console.log("[OS] Editando OS:",e)):(p(null),m({clienteNome:"",clienteTelefone:"",titulo:"",senha:"",valor:"",observacoes:"",status:"Pendente"}),console.log("[OS] Nova OS, formulário limpo")),r("os"),console.log("[OS] Dialog de OS aberto")},y=()=>{n("os"),console.log("[OS] Dialog de OS fechado")},b=async(e,t)=>{try{if("add"===t){const t={descricao:`Recebimento da OS: ${e.numero}`,valor:parseFloat(e.valor),dataVencimento:(new Date).toISOString().split("T")[0],tipo:"receber",status:"Pendente",origemId:`os-${e.id}`};await l(t),console.log("[OS] ✅ Entrada financeira criada:",t)}}catch(r){console.error("[OS] ❌ Erro ao atualizar financeiro:",r)}},x=(o||[]).filter(e=>{var t,r,n;return(null==(t=e.clienteNome)?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null==(r=e.numero)?void 0:r.toLowerCase().includes(u.toLowerCase()))||(null==(n=e.titulo)?void 0:n.toLowerCase().includes(u.toLowerCase()))}),w=e=>{switch(e){case"Pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Em Andamento":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"Concluída":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Ordens de Serviço"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gerencie suas ordens de serviço"})]}),e.jsxs(ni,{open:t.os,onOpenChange:y,children:[e.jsxs(Rn,{onClick:()=>v(),className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Nova OS"]}),e.jsxs(si,{className:"sm:max-w-md bg-white dark:bg-slate-900",children:[e.jsx(ci,{children:e.jsx(ui,{children:h?"Editar OS":"Nova Ordem de Serviço"})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),f.clienteNome&&f.clienteTelefone&&f.titulo&&f.senha&&f.valor)try{const e={numero:h?h.numero:`OS${String(((null==o?void 0:o.length)||0)+1).padStart(4,"0")}`,...f,valor:parseFloat(f.valor),createdAt:h?h.createdAt:(new Date).toISOString()};await a(e,null==h?void 0:h.id),g(h?{title:"Sucesso!",description:"OS atualizada com sucesso!"}:{title:"Sucesso!",description:"OS criada com sucesso!"}),"Concluída"===e.status?await b(e,"add"):await b(e,"remove"),m({clienteNome:"",clienteTelefone:"",titulo:"",senha:"",valor:"",observacoes:"",status:"Pendente"}),p(null),y()}catch(t){console.error("[OS] ❌ Erro ao salvar OS:",t),g({title:"Erro",description:"Erro ao salvar ordem de serviço. Tente novamente.",variant:"destructive"})}else g({title:"Erro",description:"Todos os campos obrigatórios devem ser preenchidos!",variant:"destructive"})},className:"space-y-4",children:[c.length>0&&e.jsxs("div",{children:[e.jsx(gi,{children:"Selecionar Cliente Existente"}),e.jsxs(yi,{onValueChange:e=>{const t=c.find(t=>t.id===parseInt(e));t&&m({...f,clienteNome:t.nome,clienteTelefone:t.telefone})},children:[e.jsx(xi,{children:e.jsx(bi,{placeholder:"Escolha um cliente..."})}),e.jsx(Si,{children:c.map(t=>e.jsxs(Ni,{value:t.id.toString(),children:[t.nome," - ",t.telefone]},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"clienteNome",children:"Nome do Cliente *"}),e.jsx(hi,{id:"clienteNome",value:f.clienteNome,onChange:e=>m({...f,clienteNome:e.target.value}),placeholder:"Nome do cliente",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"clienteTelefone",children:"Telefone do Cliente *"}),e.jsx(hi,{id:"clienteTelefone",value:f.clienteTelefone,onChange:e=>m({...f,clienteTelefone:e.target.value}),placeholder:"(11) 99999-9999",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"titulo",children:"Descrição/Título *"}),e.jsx(hi,{id:"titulo",value:f.titulo,onChange:e=>m({...f,titulo:e.target.value}),placeholder:"Ex: Troca de tela, reparo de bateria...",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"senha",children:"Senha do Dispositivo *"}),e.jsx(hi,{id:"senha",value:f.senha,onChange:e=>m({...f,senha:e.target.value}),placeholder:"Senha ou PIN",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"valor",children:"Valor do Serviço (R$) *"}),e.jsx(hi,{id:"valor",type:"number",step:"0.01",value:f.valor,onChange:e=>m({...f,valor:e.target.value}),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"status",children:"Status"}),e.jsxs(yi,{value:f.status,onValueChange:e=>m({...f,status:e}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"Pendente",children:"Pendente"}),e.jsx(Ni,{value:"Em Andamento",children:"Em Andamento"}),e.jsx(Ni,{value:"Concluída",children:"Concluída"})]})]})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"observacoes",children:"Observações"}),e.jsx(vi,{id:"observacoes",value:f.observacoes,onChange:e=>m({...f,observacoes:e.target.value}),placeholder:"Observações adicionais",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Rn,{type:"submit",className:"flex-1",children:h?"Atualizar":"Criar OS"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:y,children:"Cancelar"})]})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar por cliente, número ou descrição...",value:u,onChange:e=>d(e.target.value),className:"max-w-sm pl-10"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:i?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:"Carregando ordens de serviço..."})]}):x.map((t,r)=>e.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:"bg-white dark:bg-slate-800/50 rounded-lg p-6 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-lg",children:t.numero}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${w(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>(e=>{const t=`\n      <html>\n        <head>\n          <title>Ordem de Serviço - ${e.numero}</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; color: #000; }\n            .header { text-align: center; margin-bottom: 40px; }\n            h1 { font-size: 24px; margin: 0; }\n            h2 { font-size: 20px; margin: 5px 0; color: #555; }\n            .info { margin-bottom: 30px; border: 1px solid #ccc; padding: 15px; border-radius: 8px; }\n            .field { margin-bottom: 12px; font-size: 16px; }\n            .label { font-weight: bold; }\n            .pattern-area { \n              border: 2px solid #000; \n              width: 250px; \n              height: 250px; \n              margin: 30px auto; \n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-size: 14px;\n              color: #666;\n              border-radius: 8px;\n            }\n            .signature { \n              margin-top: 80px; \n              border-top: 1px solid #000; \n              width: 350px; \n              text-align: center; \n              padding-top: 10px;\n              margin-left: auto;\n              margin-right: auto;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>ORDEM DE SERVIÇO</h1>\n            <h2>${e.numero}</h2>\n          </div>\n          \n          <div class="info">\n            <div class="field">\n              <span class="label">Cliente:</span> ${e.clienteNome}\n            </div>\n            <div class="field">\n              <span class="label">Telefone:</span> ${e.clienteTelefone}\n            </div>\n            <div class="field">\n              <span class="label">Descrição:</span> ${e.titulo}\n            </div>\n            <div class="field">\n              <span class="label">Valor:</span> ${e.valor?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valor):"N/A"}\n            </div>\n            <div class="field">\n              <span class="label">Senha:</span> ${e.senha}\n            </div>\n            <div class="field">\n              <span class="label">Data:</span> ${new Date(e.createdAt).toLocaleDateString("pt-BR")}\n            </div>\n            ${e.observacoes?`<div class="field"><span class="label">Observações:</span> ${e.observacoes}</div>`:""}\n          </div>\n\n          <div class="pattern-area">\n            Padrão de Desbloqueio<br>\n            (Desenhar aqui)\n          </div>\n\n          <div class="signature">\n            Assinatura do Cliente\n          </div>\n        </body>\n      </html>\n    `,r=window.open("","_blank");r.document.write(t),r.document.close(),r.focus(),r.print()})(t),className:"h-8 w-8",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>v(t),className:"h-8 w-8",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>(async e=>{try{const t=null==o?void 0:o.find(t=>t.id===e);t&&await b(t,"remove"),await s(e),g({title:"Sucesso!",description:"OS removida com sucesso!"})}catch(t){console.error("[OS] ❌ Erro ao remover OS:",t),g({title:"Erro",description:"Erro ao remover ordem de serviço. Tente novamente.",variant:"destructive"})}})(t.id),className:"h-8 w-8 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:t.clienteNome}),e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t.clienteTelefone})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:t.titulo})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:t.valor?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.valor):"R$ 0,00"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Senha: ",t.senha]})]}),t.observacoes&&e.jsx("div",{className:"mt-3 p-2 bg-slate-100 dark:bg-slate-700/50 rounded text-sm text-slate-600 dark:text-slate-400",children:t.observacoes}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 pt-2",children:["Criada em: ",new Date(t.createdAt).toLocaleDateString("pt-BR")]})]})]},t.id))}),!i&&0===x.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:u?"Nenhuma OS encontrada":"Nenhuma OS cadastrada"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u?"Tente buscar com outros termos":"Comece criando sua primeira ordem de serviço"})]})]})},Ex=()=>{const{dialogs:t,openDialog:r,closeDialog:n}=ie.useContext(UZ),{toast:o}=Io(),{data:i,save:a,remove:s}=vx(),{data:c}=mx(),{data:l,save:u}=yx(),{data:d}=bx(),{save:h}=xx(),[p,f]=ie.useState(""),[m,g]=ie.useState("todas"),[v,y]=ie.useState(""),[b,x]=ie.useState([]),[w,j]=ie.useState(null),[S,N]=ie.useState("selecionar"),[k,E]=ie.useState(""),[C,O]=ie.useState([]),[T,A]=ie.useState(!1);ie.useState(""),ie.useState([]),ie.useState(!1);const[_,P]=ie.useState({}),[D,I]=ie.useState({}),[M,R]=ie.useState({}),[L,F]=ie.useState(!1),[z,U]=ie.useState([]),[q,B]=ie.useState({tipo:"porcentagem",valor:0}),[V,$]=ie.useState(!1),[W,H]=ie.useState("recentes");ie.useState(!1);const[G,K]=ie.useState(null),[Y,X]=ie.useState({clienteId:"",clienteNome:"",produtos:[{produtoId:"",nome:"",preco:0,quantidade:1}],status:"Pendente",total:0});ie.useEffect(()=>{console.log("[OV] Clientes carregados:",c),console.log("[OV] Produtos carregados:",l),console.log("[OV] Categorias carregadas:",d),console.log("[OV] Ordens carregadas:",i)},[c,l,d,i]);const J=(e=null)=>{K(e),X(e?{clienteId:e.clienteId,clienteNome:e.clienteNome,produtos:e.produtos,status:e.status,total:e.total}:{clienteId:"",clienteNome:"",produtos:[{produtoId:"",nome:"",preco:0,quantidade:1}],status:"Pendente",total:0}),r("ov")},Q=()=>{K(null),n("ov"),console.log("[OV] Dialog de OV fechado")},Z=e=>e.reduce((e,t)=>e+t.preco*t.quantidade,0),ee=(e,t,r)=>{const n=[...Y.produtos];if("produtoId"===t){const t=l.find(e=>e.id===r);t&&(n[e]={...n[e],produtoId:r,nome:t.nome,preco:t.preco})}else n[e][t]="quantidade"===t||"preco"===t?parseFloat(r)||0:r;const o=Z(n);X({...Y,produtos:n,total:o})},te=(e,t)=>{const r=JSON.parse(localStorage.getItem("crm_financeiro")||"[]");let n=r;if("add"===t){if(!r.find(t=>t.origemId===`ov-${e.id}`)){const t={id:Date.now(),descricao:`Recebimento da OV: ${e.numero}`,valor:e.total,dataVencimento:(new Date).toISOString().split("T")[0],tipo:"receber",status:"Pendente",origemId:`ov-${e.id}`,createdAt:(new Date).toISOString()};n=[...r,t]}}else"remove"===t&&(n=r.filter(t=>t.origemId!==`ov-${e.id}`));localStorage.setItem("crm_financeiro",JSON.stringify(n)),window.dispatchEvent(new Event("storage"))},re=e=>{if(E(e),e.length>0){const t=c.filter(t=>{var r;return t.nome.toLowerCase().includes(e.toLowerCase())||t.telefone.includes(e)||(null==(r=t.email)?void 0:r.toLowerCase().includes(e.toLowerCase()))});O(t),A(!0)}else O([]),A(!1)};ie.useEffect(()=>{"selecionar"!==S&&(E(""),O([]),A(!1))},[S]),ie.useEffect(()=>{t.ov||(E(""),O([]),A(!1),P({}),I({}),R({}))},[t.ov]);const ne=e=>{x(b.filter(t=>t.id!==e)),o({title:"Produto removido!",description:"Produto removido do carrinho"})},oe=(e,t)=>{t<=0?ne(e):x(b.map(r=>r.id===e?{...r,quantidade:t}:r))},ae=()=>b.reduce((e,t)=>e+t.preco*t.quantidade,0),se=(e,t,r)=>{U(z.map(n=>n.id===e?{...n,[t]:r}:n))},ce=()=>{const e=ae();return"porcentagem"===q.tipo?e*(1-q.valor/100):Math.max(0,e-q.valor)},ue=()=>z.reduce((e,t)=>e+t.valor,0),de=l.filter(e=>{const t=e.nome.toLowerCase().includes(p.toLowerCase())||e.codigo.toLowerCase().includes(p.toLowerCase()),r="todas"===m||e.categoriaId===m;return t&&r}),he=(new Date).toISOString().slice(0,10),fe=i.filter(e=>{var t,r;return((null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate().toISOString().slice(0,10):null==(r=e.createdAt)?void 0:r.slice(0,10))===he}).sort((e,t)=>{var r,n;const o=(null==(r=e.createdAt)?void 0:r.toDate)?e.createdAt.toDate():new Date(e.createdAt),i=(null==(n=t.createdAt)?void 0:n.toDate)?t.createdAt.toDate():new Date(t.createdAt);return"recentes"===W?i-o:o-i}),me=fe.filter(e=>e.clienteNome.toLowerCase().includes(v.toLowerCase())||e.numero.toLowerCase().includes(v.toLowerCase())),ge=e=>{switch(e){case"Pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Processando":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"Concluída":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Cancelada":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Ordens de Venda"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Catálogo de produtos e carrinho de vendas"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ni,{open:t.ov,onOpenChange:Q,children:[e.jsxs(Rn,{onClick:()=>J(),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Nova OV Manual"]}),e.jsxs(si,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto bg-white dark:bg-slate-900",children:[e.jsx(ci,{children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ve,{className:"h-6 w-6 text-blue-500"}),G?"Editar OV":"Nova Ordem de Venda"]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!Y.clienteNome||0===Y.produtos.length||Y.produtos.some(e=>!e.nome))return void o({title:"Erro",description:"Cliente e pelo menos um produto são obrigatórios!",variant:"destructive"});const t={numero:G?G.numero:`OV${String(i.length+1).padStart(4,"0")}`,...Y,createdAt:G?G.createdAt:(new Date).toISOString()};try{G?(await a(t,G.id),o({title:"Sucesso!",description:"OV atualizada com sucesso!"})):(await a(t),o({title:"Sucesso!",description:"OV criada com sucesso!"})),"Concluída"===t.status?te(t,"add"):te(t,"remove"),Q()}catch(r){console.error("[OV] Erro ao salvar OV:",r),o({title:"Erro!",description:"Erro ao salvar OV.",variant:"destructive"})}},className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-blue-500"}),"Informações do Cliente"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Cliente Cadastrado"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(hi,{value:k,onChange:e=>re(e.target.value),placeholder:"Digite o nome, telefone ou email do cliente...",className:"pr-10"}),e.jsx(be,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),T&&C.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:C.map(t=>e.jsx("div",{onClick:()=>{X({...Y,clienteId:t.id.toString(),clienteNome:t.nome}),E(t.nome),A(!1)},className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 dark:bg-slate-600 rounded-full flex items-center justify-center",children:e.jsx(Fe,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500",children:[t.telefone," ",t.email&&`• ${t.email}`]})]})]})},t.id))})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Digite o nome, telefone ou email do cliente para buscar"}),0===c.length&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"⚠️ Cadastre clientes no módulo Clientes primeiro"})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"clienteNome",className:"text-sm font-medium",children:"Nome do Cliente"}),e.jsx(hi,{id:"clienteNome",value:Y.clienteNome,onChange:e=>X({...Y,clienteNome:e.target.value}),placeholder:"Digite o nome do cliente",className:"mt-1",required:!0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use este campo se o cliente não estiver cadastrado"})]})]}),Y.clienteNome&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["✅ Cliente: ",e.jsx("span",{className:"font-semibold",children:Y.clienteNome})]})})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-green-500"}),"Produtos"]}),e.jsxs(Rn,{type:"button",onClick:()=>{X({...Y,produtos:[...Y.produtos,{produtoId:"",nome:"",preco:0,quantidade:1}]})},size:"sm",className:"bg-green-500 hover:bg-green-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Adicionar Produto"]})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Y.produtos.map((t,r)=>{var n;return e.jsxs("div",{className:"bg-white dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-lg p-4 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"font-medium text-slate-900 dark:text-white",children:["Produto ",r+1]}),Y.produtos.length>1&&e.jsx(Rn,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{const t=Y.produtos.filter((t,r)=>r!==e),r=Z(t);X({...Y,produtos:t,total:r})})(r),className:"h-8 w-8 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Produto Cadastrado"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(hi,{value:_[r]||"",onChange:e=>((e,t)=>{if(P(r=>({...r,[e]:t})),t.length>0){const r=l.filter(e=>e.nome.toLowerCase().includes(t.toLowerCase())||e.codigo.toLowerCase().includes(t.toLowerCase()));I(t=>({...t,[e]:r})),R(t=>({...t,[e]:!0}))}else I(t=>({...t,[e]:[]})),R(t=>({...t,[e]:!1}))})(r,e.target.value),placeholder:"Digite o nome ou código do produto...",className:"pr-10"}),e.jsx(be,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),M[r]&&(null==(n=D[r])?void 0:n.length)>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:D[r].map(t=>e.jsx("div",{onClick:()=>((e,t)=>{ee(e,"produtoId",t.id),P(r=>({...r,[e]:t.nome})),R(t=>({...t,[e]:!1}))})(r,t),className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.imagem&&e.jsx("img",{src:t.imagem,alt:t.nome,className:"w-8 h-8 object-cover rounded border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Código: ",t.codigo," | Estoque: ",t.quantidade," | ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)]})]})]})},t.id))})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Digite o nome ou código do produto para buscar"}),0===l.length&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"⚠️ Cadastre produtos no módulo Estoque primeiro"})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Nome do Produto"}),e.jsx(hi,{value:t.nome,onChange:e=>ee(r,"nome",e.target.value),placeholder:"Nome do produto",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Preço Unitário"}),e.jsx(hi,{type:"number",step:"0.01",value:t.preco,onChange:e=>ee(r,"preco",e.target.value),placeholder:"0.00",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Quantidade"}),e.jsx(hi,{type:"number",min:"1",value:t.quantidade,onChange:e=>ee(r,"quantidade",e.target.value),className:"mt-1"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Subtotal:"}),e.jsx("span",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco*t.quantidade)})]})})]},r)})})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"status",className:"text-sm font-medium",children:"Status da OV"}),e.jsxs(yi,{value:Y.status,onValueChange:e=>X({...Y,status:e}),className:"mt-1",children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"Pendente",children:"Pendente"}),e.jsx(Ni,{value:"Processando",children:"Processando"}),e.jsx(Ni,{value:"Concluída",children:"Concluída"}),e.jsx(Ni,{value:"Cancelada",children:"Cancelada"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-700/50 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Total da OV"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Y.total)})]})})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(Rn,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2",children:G?"Atualizar OV":"Criar OV"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:Q,className:"flex-1",children:"Cancelar"})]})]})]})]}),e.jsxs(Rn,{onClick:()=>$(!0),variant:"outline",className:"border-blue-500 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:["Ver OVs do Dia (",fe.length,")"]})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar produtos...",value:p,onChange:e=>f(e.target.value),className:"pl-10"})]}),e.jsxs(yi,{value:m,onValueChange:g,children:[e.jsx(xi,{className:"w-48",children:e.jsx(bi,{placeholder:"Categoria"})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"todas",children:"Todas as categorias"}),d.map(t=>e.jsx(Ni,{value:t.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.cor}}),t.nome]})},t.id))]})]})]}),e.jsx("div",{className:"space-y-6",children:d.map(t=>{const r=de.filter(e=>e.categoriaId===t.id);return 0===r.length?null:e.jsxs("div",{children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 border rounded-lg p-3 mb-4",style:{borderColor:t.cor},children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.cor}}),e.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-lg",children:t.nome}),e.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 text-xs px-2 py-1 rounded-full",children:[r.length," produtos"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:r.map((t,r)=>e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex gap-3",children:[t.imagem&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:t.imagem,alt:t.nome,className:"w-16 h-16 object-cover rounded-lg shadow-sm border-2 border-slate-200 dark:border-slate-700 cursor-pointer hover:shadow-md transition-all duration-200"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-sm mb-1 truncate",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:["Código: ",t.codigo]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(ze,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs font-semibold "+(t.quantidade<=5?"text-red-500":"text-blue-600 dark:text-blue-400"),children:[t.quantidade," ",t.quantidade<=5&&"(Baixo)"]})]})]}),e.jsxs(Rn,{size:"sm",onClick:()=>(e=>{const t=b.find(t=>t.id===e.id);x(t?b.map(t=>t.id===e.id?{...t,quantidade:t.quantidade+1}:t):[...b,{...e,quantidade:1}]),o({title:"Produto adicionado!",description:`${e.nome} foi adicionado ao carrinho`})})(t),className:"w-full mt-2 bg-green-500 hover:bg-green-600 text-white",disabled:t.quantidade<=0,children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})]})},t.id))})]},t.id)})}),0===de.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:p?"Nenhum produto encontrado":"Nenhum produto cadastrado"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:p?"Tente buscar com outros termos":"Cadastre produtos no módulo de Estoque"})]})]}),e.jsxs("div",{className:"w-80 bg-white dark:bg-slate-800 rounded-lg border p-4 h-fit sticky top-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Carrinho"]}),b.length>0&&e.jsx(Rn,{size:"sm",variant:"outline",onClick:()=>{x([]),j(null),setClienteDigitado(""),N("selecionar"),U([]),B({tipo:"porcentagem",valor:0}),o({title:"Venda cancelada",description:"Carrinho limpo"})},children:e.jsx(le,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(gi,{className:"text-sm font-medium",children:["Cliente ",c.length>0&&`(${c.length} cadastrados)`]}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-xs text-slate-500",children:0===c.length?"Nenhum cliente encontrado":`${c.length} cliente(s) disponível(is)`})}),e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hi,{value:k,onChange:e=>re(e.target.value),placeholder:"Digite o nome, telefone ou email do cliente...",className:"pr-10"}),e.jsx(be,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),T&&C.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:C.map(t=>e.jsx("div",{onClick:()=>(e=>{j(e),E(e.nome),A(!1)})(t),className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-200 dark:bg-slate-600 rounded-full flex items-center justify-center",children:e.jsx(Fe,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500",children:[t.telefone," ",t.email&&`• ${t.email}`]})]})]})},t.id))})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"💡 Digite o nome, telefone ou email do cliente para buscar"}),w&&e.jsxs("div",{className:"text-xs text-green-600 bg-green-50 dark:bg-green-900/20 p-2 rounded",children:["✅ Cliente selecionado: ",w.nome]}),0===c.length&&e.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:"⚠️ Nenhum cliente cadastrado. Digite o nome do cliente abaixo."})]})})]}),e.jsx("div",{className:"space-y-2 mb-4 max-h-60 overflow-y-auto",children:0===b.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Seu carrinho está vazio"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Adicione produtos do catálogo"})]}):b.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.nome}),e.jsx("p",{className:"text-xs text-slate-500",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rn,{size:"sm",variant:"outline",onClick:()=>oe(t.id,t.quantidade-1),className:"h-6 w-6 p-0",children:e.jsx(Ue,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm w-6 text-center",children:t.quantidade}),e.jsx(Rn,{size:"sm",variant:"outline",onClick:()=>oe(t.id,t.quantidade+1),className:"h-6 w-6 p-0",children:e.jsx(Ie,{className:"h-3 w-3"})})]}),e.jsx(Rn,{size:"sm",variant:"outline",onClick:()=>ne(t.id),className:"h-6 w-6 p-0 text-red-500",children:e.jsx(le,{className:"h-3 w-3"})})]},t.id))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-semibold",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",ae().toFixed(2)]})]}),e.jsx(Rn,{onClick:()=>{0!==b.length?w?F(!0):o({title:"Cliente não informado!",description:"Selecione um cliente antes de finalizar",variant:"destructive"}):o({title:"Carrinho vazio!",description:"Adicione produtos ao carrinho antes de finalizar",variant:"destructive"})},className:"w-full bg-green-600 hover:bg-green-700",disabled:0===b.length||!w,children:"Finalizar Venda"})]})]})]}),e.jsx(ni,{open:V,onOpenChange:$,children:e.jsxs(si,{className:"max-w-7xl max-h-[95vh] flex flex-col bg-white dark:bg-slate-900",children:[e.jsxs(ci,{className:"pb-4 flex-shrink-0",children:[e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ve,{className:"h-6 w-6 text-blue-500"}),"Ordens de Venda do Dia",e.jsxs("span",{className:"text-lg font-normal text-slate-500",children:["(",fe.length," OVs)"]})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Todas as ordens de venda criadas hoje (",(new Date).toLocaleDateString("pt-BR"),")"]})]}),e.jsxs("div",{className:"mb-6 space-y-4 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar OVs por cliente ou número...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(gi,{className:"text-sm font-medium",children:"Ordenar por:"}),e.jsxs(yi,{value:W,onValueChange:H,children:[e.jsx(xi,{className:"w-48",children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"recentes",children:"Mais Recentes"}),e.jsx(Ni,{value:"antigas",children:"Mais Antigas"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[me.length," OV(s) encontrada(s)"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",maxHeight:"calc(95vh - 200px)"},children:[e.jsx("style",{jsx:!0,children:"\n              div::-webkit-scrollbar {\n                display: none;\n              }\n            "}),0===me.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-slate-900 dark:text-white mb-2",children:v?"Nenhuma OV encontrada":"Nenhuma OV criada hoje"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:v?"Tente buscar com outros termos":"As OVs criadas hoje aparecerão aqui"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:me.map((t,r)=>{var n;return e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:"bg-white dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-lg",children:t.numero}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ge(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rn,{variant:"ghost",size:"sm",onClick:()=>J(t),className:"h-7 w-7 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/20",children:e.jsx(Ee,{className:"h-3 w-3"})}),e.jsx(Rn,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{const t=i.find(t=>t.id===e);if(!t)return void o({title:"Erro!",description:"OV não encontrada",variant:"destructive"});te(t,"remove"),await s(e),o({title:"Sucesso!",description:"OV removida com sucesso!"}),console.log(`✅ OV ${t.numero} removida com sucesso`)}catch(t){console.error("❌ Erro ao excluir OV:",t),o({title:"Erro!",description:"Erro ao excluir a OV. Tente novamente.",variant:"destructive"})}})(t.id),className:"h-7 w-7 p-0 text-red-500 hover:text-red-700 dark:hover:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20",children:e.jsx(Ce,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:t.clienteNome})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.produtos.length," produto(s)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.total)})]})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date((null==(n=t.createdAt)?void 0:n.toDate)?t.createdAt.toDate():t.createdAt).toLocaleString("pt-BR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"})})]}),e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3",children:e.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.produtos.map((t,r)=>e.jsxs("div",{className:"flex justify-between items-center text-xs bg-slate-50 dark:bg-slate-700/50 p-2 rounded",children:[e.jsx("span",{className:"font-medium truncate flex-1 mr-2",children:t.nome}),e.jsxs("span",{className:"text-slate-500 whitespace-nowrap",children:[t.quantidade,"x ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)]})]},r))})})]})},t.id)})})]})]})}),e.jsx(ni,{open:L,onOpenChange:F,children:e.jsxs(si,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-slate-900",children:[e.jsx(ci,{children:e.jsx(ui,{children:"Finalizar Venda - Formas de Pagamento"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Resumo da Venda"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cliente:"}),e.jsx("span",{className:"font-medium",children:null==w?void 0:w.nome})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Original:"}),e.jsxs("span",{children:["R$ ",ae().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Desconto:"}),e.jsx("span",{className:"text-red-600",children:q.valor>0?"porcentagem"===q.tipo?`${q.valor}% (${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ae()*q.valor/100)})`:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(q.valor):e.jsx("span",{className:"text-slate-500",children:"Nenhum desconto"})})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[e.jsx("span",{children:"Total Final:"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",ce().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"Desconto"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(yi,{value:q.tipo,onValueChange:e=>B({...q,tipo:e}),children:[e.jsx(xi,{className:"w-32",children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"porcentagem",children:"%"}),e.jsx(Ni,{value:"valor",children:"R$"})]})]}),e.jsx(hi,{type:"number",step:"porcentagem"===q.tipo?"1":"0.01",min:"0",max:"porcentagem"===q.tipo?"100":ae(),value:q.valor,onChange:e=>B({...q,valor:parseFloat(e.target.value)||0}),placeholder:"0",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold",children:"Formas de Pagamento"}),e.jsxs(Rn,{size:"sm",onClick:()=>{U([...z,{id:Date.now(),tipo:"dinheiro",valor:0,observacao:""}])},children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-3",children:z.map((t,r)=>e.jsxs("div",{className:"flex gap-3 items-center p-3 border rounded-lg",children:[e.jsxs(yi,{value:t.tipo,onValueChange:e=>se(t.id,"tipo",e),children:[e.jsx(xi,{className:"w-32",children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"dinheiro",children:"Dinheiro"}),e.jsx(Ni,{value:"cartao_debito",children:"Cartão Débito"}),e.jsx(Ni,{value:"cartao_credito",children:"Cartão Crédito"}),e.jsx(Ni,{value:"pix",children:"PIX"}),e.jsx(Ni,{value:"cheque",children:"Cheque"}),e.jsx(Ni,{value:"outros",children:"Outros"})]})]}),e.jsx(hi,{type:"number",step:"0.01",min:"0",value:t.valor,onChange:e=>se(t.id,"valor",parseFloat(e.target.value)||0),placeholder:"Valor",className:"flex-1"}),e.jsx(hi,{value:t.observacao,onChange:e=>se(t.id,"observacao",e.target.value),placeholder:"Observação",className:"flex-1"}),e.jsx(Rn,{size:"sm",variant:"outline",onClick:()=>{return e=t.id,void U(z.filter(t=>t.id!==e));var e},className:"text-red-500",children:e.jsx(le,{className:"h-4 w-4"})})]},t.id))})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pago:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",ue().toFixed(2)]})]}),ue()>ce()&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Troco:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",(ue()-ce()).toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Rn,{onClick:async()=>{const e=ce(),t=ue();if(t<e)return void o({title:"Valor insuficiente!",description:`Total: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)} | Pago: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}`,variant:"destructive"});const r={numero:`OV${String(i.length+1).padStart(4,"0")}`,clienteId:w.id||null,clienteNome:w.nome,produtos:b.map(e=>({produtoId:e.id,nome:e.nome,preco:e.preco,quantidade:e.quantidade})),status:"Concluída",total:e,desconto:q,formasPagamento:z,troco:t-e,createdAt:(new Date).toISOString()};try{await(async e=>{try{await a(e),o({title:"Sucesso!",description:"Ordem de Venda criada com sucesso!"})}catch(t){console.error("[OV] Erro ao salvar OV:",t),o({title:"Erro!",description:"Erro ao criar Ordem de Venda.",variant:"destructive"})}})(r),await(async e=>{try{for(const t of e){const e=l.find(e=>e.id===t.produtoId);if(e){const r=e.quantidade-t.quantidade;await u({...e,quantidade:r},e.id),await h({produtoId:t.produtoId,produto:t.nome,tipo:"saida",quantidade:t.quantidade,observacao:`Venda - OV ${i.length+1}`,data:(new Date).toISOString(),usuario:"Sistema",createdAt:(new Date).toISOString()}),console.log(`✅ Baixa realizada: ${t.nome} - ${t.quantidade} unidades`)}}o({title:"Estoque atualizado!",description:"Baixa realizada com sucesso no estoque"})}catch(t){console.error("❌ Erro ao dar baixa no estoque:",t),o({title:"Erro no estoque!",description:"Erro ao atualizar o estoque. Verifique manualmente.",variant:"destructive"})}})(b),te(r,"add"),x([]),j(null),setClienteDigitado(""),N("selecionar"),U([]),B({tipo:"porcentagem",valor:0}),F(!1),o({title:"Venda finalizada!",description:`OV criada com sucesso. Total: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}. Estoque atualizado.`})}catch(n){console.error("[OV] Erro ao finalizar pagamento:",n),o({title:"Erro!",description:"Erro ao finalizar a venda.",variant:"destructive"})}},className:"flex-1 bg-green-600 hover:bg-green-700",disabled:0===z.length||ue()<ce(),children:"Finalizar Pagamento"}),e.jsx(Rn,{variant:"outline",onClick:()=>F(!1),className:"flex-1",children:"Cancelar"})]})]})]})})]})};var Cx={exports:{}},Ox={};function Tx(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Tx(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Ax(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Tx(e))&&(n&&(n+=" "),n+=t);return n}const _x=se(Object.freeze(Object.defineProperty({__proto__:null,clsx:Ax,default:Ax},Symbol.toStringTag,{value:"Module"})));var Px={},Dx={};Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},Dx.findInArray=function(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},Dx.int=function(e){return parseInt(e,10)},Dx.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},Dx.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var Ix={};Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.browserPrefixToKey=Lx,Ix.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},Ix.default=void 0,Ix.getPrefix=Rx;const Mx=["Moz","Webkit","O","ms"];function Rx(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const r=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!r)return"";if(t in r)return"";for(let n=0;n<Mx.length;n++)if(Lx(t,Mx[n])in r)return Mx[n];return""}function Lx(e,t){return t?"".concat(t).concat(function(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}Ix.default=Rx(),Object.defineProperty(Px,"__esModule",{value:!0}),Px.addClassName=$x,Px.addEvent=function(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,o):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},Px.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&$x(e.body,"react-draggable-transparent-selection")},Px.createCSSTransform=function(e,t){const r=Vx(e,t,"px");return{[(0,zx.browserPrefixToKey)("transform",zx.default)]:r}},Px.createSVGTransform=function(e,t){return Vx(e,t,"")},Px.getTouch=function(e,t){return e.targetTouches&&(0,Fx.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,Fx.findInArray)(e.changedTouches,e=>t===e.identifier)},Px.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},Px.getTranslation=Vx,Px.innerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Fx.int)(r.paddingTop),t-=(0,Fx.int)(r.paddingBottom),t},Px.innerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Fx.int)(r.paddingLeft),t-=(0,Fx.int)(r.paddingRight),t},Px.matchesSelector=Bx,Px.matchesSelectorAndParentsTo=function(e,t,r){let n=e;do{if(Bx(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},Px.offsetXYFromParent=function(e,t,r){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-n.left)/r,i=(e.clientY+t.scrollTop-n.top)/r;return{x:o,y:i}},Px.outerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Fx.int)(r.borderTopWidth),t+=(0,Fx.int)(r.borderBottomWidth),t},Px.outerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Fx.int)(r.borderLeftWidth),t+=(0,Fx.int)(r.borderRightWidth),t},Px.removeClassName=Wx,Px.removeEvent=function(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,o):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},Px.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Wx(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}};var Fx=Dx,zx=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=Ux(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(Ix);function Ux(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Ux=function(e){return e?r:t})(e)}let qx="";function Bx(e,t){return qx||(qx=(0,Fx.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Fx.isFunction)(e[t])})),!!(0,Fx.isFunction)(e[qx])&&e[qx](t)}function Vx(e,t,r){let{x:n,y:o}=e,i="translate(".concat(n).concat(r,",").concat(o).concat(r,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+r),n="".concat("string"==typeof t.y?t.y:t.y+r);i="translate(".concat(e,", ").concat(n,")")+i}return i}function $x(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Wx(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Hx={};Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Hx.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Hx.createCoreData=function(e,t,r){const n=!(0,Gx.isNum)(e.lastX),o=Yx(e);return n?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}},Hx.createDraggableData=function(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},Hx.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n="string"==typeof n?n:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(n);const o=Yx(e);if("string"==typeof n){const{ownerDocument:e}=o,t=e.defaultView;let r;if(r="parent"===n?o.parentNode:e.querySelector(n),!(r instanceof t.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const i=r,a=t.getComputedStyle(o),s=t.getComputedStyle(i);n={left:-o.offsetLeft+(0,Gx.int)(s.paddingLeft)+(0,Gx.int)(a.marginLeft),top:-o.offsetTop+(0,Gx.int)(s.paddingTop)+(0,Gx.int)(a.marginTop),right:(0,Kx.innerWidth)(i)-(0,Kx.outerWidth)(o)-o.offsetLeft+(0,Gx.int)(s.paddingRight)-(0,Gx.int)(a.marginRight),bottom:(0,Kx.innerHeight)(i)-(0,Kx.outerHeight)(o)-o.offsetTop+(0,Gx.int)(s.paddingBottom)-(0,Gx.int)(a.marginBottom)}}(0,Gx.isNum)(n.right)&&(t=Math.min(t,n.right));(0,Gx.isNum)(n.bottom)&&(r=Math.min(r,n.bottom));(0,Gx.isNum)(n.left)&&(t=Math.max(t,n.left));(0,Gx.isNum)(n.top)&&(r=Math.max(r,n.top));return[t,r]},Hx.getControlPosition=function(e,t,r){const n="number"==typeof t?(0,Kx.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;const o=Yx(r),i=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Kx.offsetXYFromParent)(n||e,i,r.props.scale)},Hx.snapToGrid=function(e,t,r){const n=Math.round(t/e[0])*e[0],o=Math.round(r/e[1])*e[1];return[n,o]};var Gx=Dx,Kx=Px;function Yx(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Xx={},Jx={};Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.default=function(){},Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.default=void 0;var Qx=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=aw(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(ie),Zx=iw(St),ew=iw(ne),tw=Px,rw=Hx,nw=Dx,ow=iw(Jx);function iw(e){return e&&e.__esModule?e:{default:e}}function aw(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(aw=function(e){return e?r:t})(e)}function sw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const cw={start:"touchstart",move:"touchmove",stop:"touchend"},lw={start:"mousedown",move:"mousemove",stop:"mouseup"};let uw=lw,dw=class extends Qx.Component{constructor(){super(...arguments),sw(this,"dragging",!1),sw(this,"lastX",NaN),sw(this,"lastY",NaN),sw(this,"touchIdentifier",null),sw(this,"mounted",!1),sw(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,tw.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,tw.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const n=(0,tw.getTouchIdentifier)(e);this.touchIdentifier=n;const o=(0,rw.getControlPosition)(e,n,this);if(null==o)return;const{x:i,y:a}=o,s=(0,rw.createCoreData)(this,i,a);(0,ow.default)("DraggableCore: handleDragStart: %j",s),(0,ow.default)("calling",this.props.onStart);!1!==this.props.onStart(e,s)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,tw.addUserSelectStyles)(r),this.dragging=!0,this.lastX=i,this.lastY=a,(0,tw.addEvent)(r,uw.move,this.handleDrag),(0,tw.addEvent)(r,uw.stop,this.handleDragStop))}),sw(this,"handleDrag",e=>{const t=(0,rw.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=n-this.lastY;if([e,t]=(0,rw.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,n=this.lastY+t}const o=(0,rw.createCoreData)(this,r,n);(0,ow.default)("DraggableCore: handleDrag: %j",o);if(!1!==this.props.onDrag(e,o)&&!1!==this.mounted)this.lastX=r,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(i){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}}),sw(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,rw.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,rw.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,n=this.lastY+t}const o=(0,rw.createCoreData)(this,r,n);if(!1===this.props.onStop(e,o)||!1===this.mounted)return!1;const i=this.findDOMNode();i&&this.props.enableUserSelectHack&&(0,tw.removeUserSelectStyles)(i.ownerDocument),(0,ow.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,i&&((0,ow.default)("DraggableCore: Removing handlers"),(0,tw.removeEvent)(i.ownerDocument,uw.move,this.handleDrag),(0,tw.removeEvent)(i.ownerDocument,uw.stop,this.handleDragStop))}),sw(this,"onMouseDown",e=>(uw=lw,this.handleDragStart(e))),sw(this,"onMouseUp",e=>(uw=lw,this.handleDragStop(e))),sw(this,"onTouchStart",e=>(uw=cw,this.handleDragStart(e))),sw(this,"onTouchEnd",e=>(uw=cw,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,tw.addEvent)(e,cw.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,tw.removeEvent)(t,lw.move,this.handleDrag),(0,tw.removeEvent)(t,cw.move,this.handleDrag),(0,tw.removeEvent)(t,lw.stop,this.handleDragStop),(0,tw.removeEvent)(t,cw.stop,this.handleDragStop),(0,tw.removeEvent)(e,cw.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,tw.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:ew.default.findDOMNode(this)}render(){return Qx.cloneElement(Qx.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Xx.default=dw,sw(dw,"displayName","DraggableCore"),sw(dw,"propTypes",{allowAnyClick:Zx.default.bool,children:Zx.default.node.isRequired,disabled:Zx.default.bool,enableUserSelectHack:Zx.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Zx.default.arrayOf(Zx.default.number),handle:Zx.default.string,cancel:Zx.default.string,nodeRef:Zx.default.object,onStart:Zx.default.func,onDrag:Zx.default.func,onStop:Zx.default.func,onMouseDown:Zx.default.func,scale:Zx.default.number,className:nw.dontSetMe,style:nw.dontSetMe,transform:nw.dontSetMe}),sw(dw,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(ie),r=u(St),n=u(ne),o=u(_x),i=Px,a=Hx,s=Dx,c=u(Xx),l=u(Jx);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends t.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:n}=t;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:{...r}})}constructor(e){super(e),p(this,"onDragStart",(e,t)=>{(0,l.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,a.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",t);const r=(0,a.createDraggableData)(this,t),n={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[o,i]=(0,a.getBoundPosition)(this,n.x,n.y);n.x=o,n.y=i,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-this.state.x,r.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(n)}),p(this,"onDragStop",(e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,a.createDraggableData)(this,t)))return!1;(0,l.default)("Draggable: onDragStop: %j",t);const r={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:n.default.findDOMNode(this)}render(){const{axis:e,bounds:r,children:n,defaultPosition:s,defaultClassName:l,defaultClassNameDragging:u,defaultClassNameDragged:d,position:p,positionOffset:f,scale:m,...g}=this.props;let v={},y=null;const b=!Boolean(p)||this.state.dragging,x=p||s,w={x:(0,a.canDragX)(this)&&b?this.state.x:x.x,y:(0,a.canDragY)(this)&&b?this.state.y:x.y};this.state.isElementSVG?y=(0,i.createSVGTransform)(w,f):v=(0,i.createCSSTransform)(w,f);const j=(0,o.default)(n.props.className||"",l,{[u]:this.state.dragging,[d]:this.state.dragged});return t.createElement(c.default,h({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(n),{className:j,style:{...n.props.style,...v},transform:y}))}}e.default=f,p(f,"displayName","Draggable"),p(f,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),p(f,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(Ox);const{default:hw,DraggableCore:pw}=Ox;Cx.exports=hw,Cx.exports.default=hw,Cx.exports.DraggableCore=pw;const fw=oe(Cx.exports);var mw,gw=globalThis&&globalThis.__assign||function(){return gw=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gw.apply(this,arguments)},vw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},yw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},bw={width:"20px",height:"20px",position:"absolute",zIndex:1},xw={top:gw(gw({},vw),{top:"-5px"}),right:gw(gw({},yw),{left:void 0,right:"-5px"}),bottom:gw(gw({},vw),{top:void 0,bottom:"-5px"}),left:gw(gw({},yw),{left:"-5px"}),topRight:gw(gw({},bw),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:gw(gw({},bw),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:gw(gw({},bw),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:gw(gw({},bw),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ww=ie.memo(function(t){var r=t.onResizeStart,n=t.direction,o=t.children,i=t.replaceStyles,a=t.className,s=ie.useCallback(function(e){r(e,n)},[r,n]),c=ie.useCallback(function(e){r(e,n)},[r,n]),l=ie.useMemo(function(){return gw(gw({position:"absolute",userSelect:"none"},xw[n]),null!=i?i:{})},[i,n]);return e.jsx("div",{className:a||void 0,style:l,onMouseDown:s,onTouchStart:c,children:o})}),jw=globalThis&&globalThis.__extends||(mw=function(e,t){return mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},mw(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Sw=globalThis&&globalThis.__assign||function(){return Sw=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sw.apply(this,arguments)},Nw={width:"auto",height:"auto"},kw=function(e,t,r){return Math.max(Math.min(e,r),t)},Ew=function(e,t,r){var n=Math.round(e/t);return n*t+r*(n-1)},Cw=function(e,t){return new RegExp(e,"i").test(t)},Ow=function(e){return Boolean(e.touches&&e.touches.length)},Tw=function(e,t,r){void 0===r&&(r=0);var n=t.reduce(function(r,n,o){return Math.abs(n-e)<Math.abs(t[r]-e)?o:r},0),o=Math.abs(t[n]-e);return 0===r||o<r?t[n]:e},Aw=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},_w=function(e,t,r,n){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return r*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return n*(Number(e.replace("vh",""))/100)}return e},Pw=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Dw="__resizable_base__",Iw=function(t){function r(e){var r,n,o,i,a=t.call(this,e)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var e=a.parentNode;if(!e)return null;var t=a.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(Dw):t.className+=Dw,e.appendChild(t),t},a.removeBase=function(e){var t=a.parentNode;t&&t.removeChild(e)},a.state={isResizing:!1,width:null!==(n=null===(r=a.propsSize)||void 0===r?void 0:r.width)&&void 0!==n?n:"auto",height:null!==(i=null===(o=a.propsSize)||void 0===o?void 0:o.height)&&void 0!==i?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return jw(r,t),Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Nw},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,n=this.resizable.offsetHeight,o=this.resizable.style.position;"relative"!==o&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:r,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:n,this.resizable.style.position=o}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,r=function(t){var r;if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null===(r=e.propsSize[t])||void 0===r?void 0:r.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var n=e.getParentSize(),o=Number(e.state[t].toString().replace("px",""))/n[t]*100;return"".concat(o,"%")}return Aw(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?Aw(t.width):r("width"),height:t&&void 0!==t.height&&!this.state.isResizing?Aw(t.height):r("height")}},enumerable:!1,configurable:!0}),r.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,r=this.parentNode.style.flexWrap;"wrap"!==r&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var n={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=r),this.removeBase(e),n},r.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},r.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},r.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},r.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},r.prototype.createSizeForCssProperty=function(e,t){var r=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==r&&"auto"!==r?e:"auto"},r.prototype.calculateNewMaxFromBoundary=function(e,t){var r,n,o=this.props.boundsByDirection,i=this.state.direction,a=o&&Cw("left",i),s=o&&Cw("top",i);if("parent"===this.props.bounds){var c=this.parentNode;c&&(r=a?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),n=s?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(r=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,n=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(r=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),n=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return r&&Number.isFinite(r)&&(e=e&&e<r?e:r),n&&Number.isFinite(n)&&(t=t&&t<n?t:n),{maxWidth:e,maxHeight:t}},r.prototype.calculateNewSizeFromDirection=function(e,t){var r,n=this.props.scale||1,o=(r=this.props.resizeRatio||1,Array.isArray(r)?r:[r,r]),i=o[0],a=o[1],s=this.state,c=s.direction,l=s.original,u=this.props,d=u.lockAspectRatio,h=u.lockAspectRatioExtraHeight,p=u.lockAspectRatioExtraWidth,f=l.width,m=l.height,g=h||0,v=p||0;return Cw("right",c)&&(f=l.width+(e-l.x)*i/n,d&&(m=(f-v)/this.ratio+g)),Cw("left",c)&&(f=l.width-(e-l.x)*i/n,d&&(m=(f-v)/this.ratio+g)),Cw("bottom",c)&&(m=l.height+(t-l.y)*a/n,d&&(f=(m-g)*this.ratio+v)),Cw("top",c)&&(m=l.height-(t-l.y)*a/n,d&&(f=(m-g)*this.ratio+v)),{newWidth:f,newHeight:m}},r.prototype.calculateNewSizeFromAspectRatio=function(e,t,r,n){var o=this.props,i=o.lockAspectRatio,a=o.lockAspectRatioExtraHeight,s=o.lockAspectRatioExtraWidth,c=void 0===n.width?10:n.width,l=void 0===r.width||r.width<0?e:r.width,u=void 0===n.height?10:n.height,d=void 0===r.height||r.height<0?t:r.height,h=a||0,p=s||0;if(i){var f=(u-h)*this.ratio+p,m=(d-h)*this.ratio+p,g=(c-p)/this.ratio+h,v=(l-p)/this.ratio+h,y=Math.max(c,f),b=Math.min(l,m),x=Math.max(u,g),w=Math.min(d,v);e=kw(e,y,b),t=kw(t,x,w)}else e=kw(e,c,l),t=kw(t,u,d);return{newWidth:e,newHeight:t}},r.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if("parent"===this.props.bounds){var t=this.parentNode;if(t){var r=t.getBoundingClientRect();this.parentLeft=r.left*e,this.parentTop=r.top*e}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left*e,this.targetTop=n.top*e}if(this.resizable){var o=this.resizable.getBoundingClientRect(),i=o.left,a=o.top,s=o.right,c=o.bottom;this.resizableLeft=i*e,this.resizableRight=s*e,this.resizableTop=a*e,this.resizableBottom=c*e}},r.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var r,n=0,o=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(n=e.nativeEvent.clientX,o=e.nativeEvent.clientY):e.nativeEvent&&Ow(e.nativeEvent)&&(n=e.nativeEvent.touches[0].clientX,o=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var i=this.window.getComputedStyle(this.resizable);if("auto"!==i.flexBasis){var a=this.parentNode;if(a){var s=this.window.getComputedStyle(a).flexDirection;this.flexDir=s.startsWith("row")?"row":"column",r=i.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var c={original:{x:n,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Sw(Sw({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:r};this.setState(c)}},r.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&Ow(e))try{e.preventDefault(),e.stopPropagation()}catch(D){}var r=this.props,n=r.maxWidth,o=r.maxHeight,i=r.minWidth,a=r.minHeight,s=Ow(e)?e.touches[0].clientX:e.clientX,c=Ow(e)?e.touches[0].clientY:e.clientY,l=this.state,u=l.direction,d=l.original,h=l.width,p=l.height,f=this.getParentSize(),m=function(e,t,r,n,o,i,a){return n=_w(n,e.width,t,r),o=_w(o,e.height,t,r),i=_w(i,e.width,t,r),a=_w(a,e.height,t,r),{maxWidth:void 0===n?void 0:Number(n),maxHeight:void 0===o?void 0:Number(o),minWidth:void 0===i?void 0:Number(i),minHeight:void 0===a?void 0:Number(a)}}(f,this.window.innerWidth,this.window.innerHeight,n,o,i,a);n=m.maxWidth,o=m.maxHeight,i=m.minWidth,a=m.minHeight;var g=this.calculateNewSizeFromDirection(s,c),v=g.newHeight,y=g.newWidth,b=this.calculateNewMaxFromBoundary(n,o);this.props.snap&&this.props.snap.x&&(y=Tw(y,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(v=Tw(v,this.props.snap.y,this.props.snapGap));var x=this.calculateNewSizeFromAspectRatio(y,v,{width:b.maxWidth,height:b.maxHeight},{width:i,height:a});if(y=x.newWidth,v=x.newHeight,this.props.grid){var w=Ew(y,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),j=Ew(v,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),S=this.props.snapGap||0;y=0===S||Math.abs(w-y)<=S?w:y,v=0===S||Math.abs(j-v)<=S?j:v}var N={width:y-d.width,height:v-d.height};if(this.delta=N,h&&"string"==typeof h)if(h.endsWith("%")){var k=y/f.width*100;y="".concat(k,"%")}else if(h.endsWith("vw")){var E=y/this.window.innerWidth*100;y="".concat(E,"vw")}else if(h.endsWith("vh")){var C=y/this.window.innerHeight*100;y="".concat(C,"vh")}if(p&&"string"==typeof p)if(p.endsWith("%")){k=v/f.height*100;v="".concat(k,"%")}else if(p.endsWith("vw")){E=v/this.window.innerWidth*100;v="".concat(E,"vw")}else if(p.endsWith("vh")){C=v/this.window.innerHeight*100;v="".concat(C,"vh")}var O={width:this.createSizeForCssProperty(y,"width"),height:this.createSizeForCssProperty(v,"height")};"row"===this.flexDir?O.flexBasis=O.width:"column"===this.flexDir&&(O.flexBasis=O.height);var T=this.state.width!==O.width,A=this.state.height!==O.height,_=this.state.flexBasis!==O.flexBasis,P=T||A||_;P&&ne.flushSync(function(){t.setState(O)}),this.props.onResize&&P&&this.props.onResize(e,u,this.resizable,N)}},r.prototype.onMouseUp=function(e){var t,r,n=this.state,o=n.isResizing,i=n.direction;n.original,o&&this.resizable&&(this.props.onResizeStop&&this.props.onResizeStop(e,i,this.resizable,this.delta),this.props.size&&this.setState({width:null!==(t=this.props.size.width)&&void 0!==t?t:"auto",height:null!==(r=this.props.size.height)&&void 0!==r?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Sw(Sw({},this.state.backgroundStyle),{cursor:"auto"})}))},r.prototype.updateSize=function(e){var t,r;this.setState({width:null!==(t=e.width)&&void 0!==t?t:"auto",height:null!==(r=e.height)&&void 0!==r?r:"auto"})},r.prototype.renderResizer=function(){var t=this,r=this.props,n=r.enable,o=r.handleStyles,i=r.handleClasses,a=r.handleWrapperStyle,s=r.handleWrapperClass,c=r.handleComponent;if(!n)return null;var l=Object.keys(n).map(function(r){return!1!==n[r]?e.jsx(ww,{direction:r,onResizeStart:t.onResizeStart,replaceStyles:o&&o[r],className:i&&i[r],children:c&&c[r]?c[r]:null},r):null});return e.jsx("div",{className:s,style:a,children:l})},r.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(e,r){return-1!==Pw.indexOf(r)||(e[r]=t.props[r]),e},{}),n=Sw(Sw(Sw({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return e.jsxs(o,Sw({style:n,className:this.props.className},r,{ref:function(e){e&&(t.resizable=e)},children:[this.state.isResizing&&e.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},r.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},r}(ie.PureComponent),Mw=function(e,t){return Mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Mw(e,t)};var Rw=function(){return Rw=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rw.apply(this,arguments)};var Lw={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0};!function(e){function t(t){var r=e.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}(function(e,t){function r(){this.constructor=e}Mw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e),t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var e=this.offsetFromParent,t=e.left,r=e.top,n=this.getDraggablePosition(),o=n.x,i=n.y;this.draggable.setState({x:o-t,y:i-r}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state;return{x:e.x,y:e.y}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var t=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/t;case"body":return document.body.offsetHeight/t;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var t=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/t;case"body":return document.body.offsetWidth/t;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,t){this.props.onDragStart&&this.props.onDragStart(e,t);var r=this.getDraggablePosition();if(this.originalPosition=r,this.props.bounds){var n,o=this.getParent(),i=this.props.scale;if("parent"===this.props.bounds)n=o;else{if("body"===this.props.bounds){var a=o.getBoundingClientRect(),s=a.left,c=a.top,l=document.body.getBoundingClientRect(),u=-(s-o.offsetLeft*i-l.left)/i,d=-(c-o.offsetTop*i-l.top)/i,h=(document.body.offsetWidth-this.resizable.size.width*i)/i+u,p=(document.body.offsetHeight-this.resizable.size.height*i)/i+d;return this.setState({bounds:{top:d,right:h,bottom:p,left:u}})}if("window"===this.props.bounds){if(!this.resizable)return;var f=o.getBoundingClientRect(),m=f.left,g=f.top,v=-(m-o.offsetLeft*i)/i,y=-(g-o.offsetTop*i)/i;h=(window.innerWidth-this.resizable.size.width*i)/i+v,p=(window.innerHeight-this.resizable.size.height*i)/i+y;return this.setState({bounds:{top:y,right:h,bottom:p,left:v}})}"string"==typeof this.props.bounds?n=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(n=this.props.bounds)}if(n instanceof HTMLElement&&o instanceof HTMLElement){var b=n.getBoundingClientRect(),x=b.left,w=b.top,j=o.getBoundingClientRect(),S=(x-j.left)/i,N=w-j.top;if(this.resizable){this.updateOffsetFromParent();var k=this.offsetFromParent;this.setState({bounds:{top:N-k.top,right:S+(n.offsetWidth-this.resizable.size.width)-k.left/i,bottom:N+(n.offsetHeight-this.resizable.size.height)-k.top,left:S-k.left/i}})}}}},t.prototype.onDrag=function(e,t){if(this.props.onDrag){var r=this.offsetFromParent,n=r.left,o=r.top;return this.props.dragAxis&&"both"!==this.props.dragAxis?"x"===this.props.dragAxis?this.props.onDrag(e,Rw(Rw({},t),{x:t.x+n,y:this.originalPosition.y+o,deltaY:0})):"y"===this.props.dragAxis?this.props.onDrag(e,Rw(Rw({},t),{x:this.originalPosition.x+n,y:t.y+o,deltaX:0})):void 0:this.props.onDrag(e,Rw(Rw({},t),{x:t.x+n,y:t.y+o}))}},t.prototype.onDragStop=function(e,t){if(this.props.onDragStop){var r=this.offsetFromParent,n=r.left,o=r.top;return this.props.dragAxis&&"both"!==this.props.dragAxis?"x"===this.props.dragAxis?this.props.onDragStop(e,Rw(Rw({},t),{x:t.x+n,y:this.originalPosition.y+o,deltaY:0})):"y"===this.props.dragAxis?this.props.onDragStop(e,Rw(Rw({},t),{x:this.originalPosition.x+n,y:t.y+o,deltaX:0})):void 0:this.props.onDragStop(e,Rw(Rw({},t),{x:t.x+n,y:t.y+o}))}},t.prototype.onResizeStart=function(e,t,r){e.stopPropagation(),this.setState({resizing:!0});var n=this.props.scale,o=this.offsetFromParent,i=this.getDraggablePosition();if(this.resizingPosition={x:i.x+o.left,y:i.y+o.top},this.originalPosition=i,this.props.bounds){var a=this.getParent(),s=void 0;"parent"===this.props.bounds?s=a:"body"===this.props.bounds?s=document.body:"window"===this.props.bounds?s=window:"string"==typeof this.props.bounds?s=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(s=this.props.bounds);var c=this.getSelfElement();if(c instanceof Element&&(s instanceof HTMLElement||s===window)&&a instanceof HTMLElement){var l=this.getMaxSizesFromProps(),u=l.maxWidth,d=l.maxHeight,h=this.getParentSize();if(u&&"string"==typeof u)if(u.endsWith("%")){var p=Number(u.replace("%",""))/100;u=h.width*p}else u.endsWith("px")&&(u=Number(u.replace("px","")));if(d&&"string"==typeof d)if(d.endsWith("%")){p=Number(d.replace("%",""))/100;d=h.height*p}else d.endsWith("px")&&(d=Number(d.replace("px","")));var f=c.getBoundingClientRect(),m=f.left,g=f.top,v="window"===this.props.bounds?{left:0,top:0}:s.getBoundingClientRect(),y=v.left,b=v.top,x=this.getOffsetWidth(s),w=this.getOffsetHeight(s),j=t.toLowerCase().endsWith("left"),S=t.toLowerCase().endsWith("right"),N=t.startsWith("top"),k=t.startsWith("bottom");if((j||N)&&this.resizable){var E=(m-y)/n+this.resizable.size.width;this.setState({maxWidth:E>Number(u)?u:E})}if(S||this.props.lockAspectRatio&&!j&&!N){E=x+(y-m)/n;this.setState({maxWidth:E>Number(u)?u:E})}if((N||j)&&this.resizable){E=(g-b)/n+this.resizable.size.height;this.setState({maxHeight:E>Number(d)?d:E})}if(k||this.props.lockAspectRatio&&!N&&!j){E=w+(b-g)/n;this.setState({maxHeight:E>Number(d)?d:E})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,t,r)},t.prototype.onResize=function(e,t,r,n){var o=this,i={x:this.originalPosition.x,y:this.originalPosition.y},a=-n.width,s=-n.height;["top","left","topLeft","bottomLeft","topRight"].includes(t)&&("bottomLeft"===t?i.x+=a:("topRight"===t||(i.x+=a),i.y+=s));var c=this.draggable.state;i.x===c.x&&i.y===c.y||ne.flushSync(function(){o.draggable.setState(i)}),this.updateOffsetFromParent();var l=this.offsetFromParent,u=this.getDraggablePosition().x+l.left,d=this.getDraggablePosition().y+l.top;this.resizingPosition={x:u,y:d},this.props.onResize&&this.props.onResize(e,t,r,n,{x:u,y:d})},t.prototype.onResizeStop=function(e,t,r,n){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),i=o.maxWidth,a=o.maxHeight;this.setState({maxWidth:i,maxHeight:a}),this.props.onResizeStop&&this.props.onResizeStop(e,t,r,n,this.resizingPosition)},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.updateOffsetFromParent=function(){var e=this.props.scale,t=this.getParent(),r=this.getSelfElement();if(!t||null===r)return{top:0,left:0};var n=t.getBoundingClientRect(),o=n.left,i=n.top,a=r.getBoundingClientRect(),s=this.getDraggablePosition(),c=t.scrollLeft,l=t.scrollTop;this.offsetFromParent={left:a.left-o+c-s.x*e,top:a.top-i+l-s.y*e}},t.prototype.render=function(){var e=this,t=this.props,r=t.disableDragging,n=t.style,o=t.dragHandleClassName,i=t.position,a=t.onMouseDown,s=t.onMouseUp,c=t.dragAxis,l=t.dragGrid,u=t.bounds,d=t.enableUserSelectHack,h=t.cancel,p=t.children;t.onResizeStart,t.onResize,t.onResizeStop,t.onDragStart,t.onDrag,t.onDragStop;var f=t.resizeHandleStyles,m=t.resizeHandleClasses,g=t.resizeHandleComponent,v=t.enableResizing,y=t.resizeGrid,b=t.resizeHandleWrapperClass,x=t.resizeHandleWrapperStyle,w=t.scale,j=t.allowAnyClick,S=t.dragPositionOffset,N=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),k=this.props.default?Rw({},this.props.default):void 0;delete N.default;var E,C=r||o?{cursor:"auto"}:{cursor:"move"},O=Rw(Rw(Rw({},Lw),C),n),T=this.offsetFromParent,A=T.left,_=T.top;i&&(E={x:i.x-A,y:i.y-_});var P,D=this.state.resizing?void 0:E,I=this.state.resizing?"both":c;return ie.createElement(fw,{ref:function(t){t&&(e.draggable=t)},handle:o?".".concat(o):void 0,defaultPosition:k,onMouseDown:a,onMouseUp:s,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:I,disabled:r,grid:l,bounds:u?this.state.bounds:void 0,position:D,enableUserSelectHack:d,cancel:h,scale:w,allowAnyClick:j,nodeRef:this.resizableElement,positionOffset:S},ie.createElement(Iw,Rw({},N,{ref:function(t){t&&(e.resizable=t,e.resizableElement.current=t.resizable)},defaultSize:k,size:this.props.size,enable:"boolean"==typeof v?(P=v,{bottom:P,bottomLeft:P,bottomRight:P,left:P,right:P,top:P,topLeft:P,topRight:P}):v,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:O,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:y,handleWrapperClass:b,handleWrapperStyle:x,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:f,handleClasses:m,handleComponent:g,scale:this.props.scale}),p))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}}}(ie.PureComponent);const Fw=()=>{const{dialogs:t,openDialog:r,closeDialog:n,produtoParaReporEstoque:o,limparProdutoParaReporEstoque:i,darkMode:a}=ie.useContext(UZ),{toast:s}=Io(),{data:c,loading:l,save:u,remove:d}=bx(),{data:h,loading:p,save:f,remove:m}=yx(),{data:g,loading:v,save:y,remove:b}=xx(),[x,w]=ie.useState(""),[j,S]=ie.useState(!1),[N,k]=ie.useState(!1),[E,C]=ie.useState(!1),[O,T]=ie.useState(!1),[A,_]=ie.useState(null),[P,D]=ie.useState(""),[I,M]=ie.useState(!1),[R,L]=ie.useState(null),[F,z]=ie.useState(null),[U,q]=ie.useState({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:"",imagem:null}),[B,V]=ie.useState({nome:"",cor:"#8b5cf6"}),[$,W]=ie.useState({produtoId:"",tipo:"entrada",quantidade:"",observacao:""}),[H,G]=ie.useState(""),[K,Y]=ie.useState([]),[X,J]=ie.useState(!1),[Q,Z]=ie.useState(null),[ee,te]=ie.useState(!1),[re,ne]=ie.useState("personalizada"),[oe,ae]=ie.useState([]),[se,ce]=ie.useState(null),[ue,de]=ie.useState(null);ie.useState(!1),ie.useRef(null),ie.useEffect(()=>{t.produto&&(L(null),q({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:"",imagem:null}),S(!0),n("produto")),t.movimentacao&&(o?(W({produtoId:o.id,tipo:"entrada",quantidade:"",observacao:`Reposição de estoque - ${o.nome}`}),G(o.nome),i()):(W({produtoId:"",tipo:"entrada",quantidade:"",observacao:""}),G(""),Y([]),J(!1)),C(!0),n("movimentacao"))},[t,n,o,i]);const he=e=>{q({nome:e.nome,codigo:e.codigo,preco:e.preco.toString(),quantidade:e.quantidade.toString(),categoriaId:e.categoriaId.toString(),imagem:e.imagem||null}),L(e),S(!0)},fe=async e=>{try{await m(e),s({title:"Sucesso!",description:"Produto removido!"})}catch(t){console.error("[Estoque] ❌ Erro ao remover produto:",t),s({title:"Erro",description:"Erro ao remover produto. Tente novamente.",variant:"destructive"})}},ge=(e,t)=>{_(e),D(t),T(!0)};ie.useEffect(()=>{E||(G(""),Y([]),J(!1))},[E]);const ve=(new Date).toISOString().slice(0,10),ye=(g||[]).filter(e=>{var t;const r=(null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate().toISOString():e.createdAt;return(null==r?void 0:r.slice(0,10))===ve}),xe=(h||[]).filter(e=>{var t,r;return(null==(t=e.nome)?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null==(r=e.codigo)?void 0:r.toLowerCase().includes(x.toLowerCase()))}),{getRootProps:je,getInputProps:Se,isDragActive:Ne}=_a({onDrop:e=>{if(console.log("[Estoque] ===== UPLOAD DE IMAGEM ====="),console.log("[Estoque] Arquivos aceitos:",e),0===e.length)return void console.log("[Estoque] ❌ Nenhum arquivo aceito");const t=e[0];if(console.log("[Estoque] Arquivo selecionado:",t),t.size>2097152)return console.log("[Estoque] ❌ Arquivo muito grande:",t.size),void s({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 2MB.",variant:"destructive"});const r=new FileReader;r.onload=()=>{const e=new Image;e.onload=()=>{const t=document.createElement("canvas"),n=t.getContext("2d"),o=1e3;let{width:i,height:a}=e;i>a?i>o&&(a=a*o/i,i=o):a>o&&(i=i*o/a,a=o),t.width=i,t.height=a,n.drawImage(e,0,0,i,a);const s=t.toDataURL("image/jpeg",.9);console.log("[Estoque] ✅ Imagem comprimida, tamanho original:",r.result.length,"comprimida:",s.length),q(e=>({...e,imagem:s}))},e.src=r.result},r.onerror=()=>{console.log("[Estoque] ❌ Erro ao ler arquivo"),s({title:"Erro ao carregar imagem!",description:"Tente novamente com outro arquivo.",variant:"destructive"})},r.readAsDataURL(t)},accept:{"image/*":[]}}),ke=h.filter(e=>e.quantidade<=5),Oe=()=>{if(null!==se&&null!==ue&&se!==ue){const e=[...oe],t=e[se];e.splice(se,1),e.splice(ue,0,t),ae(e)}ce(null),de(null)};return ie.useEffect(()=>{ee&&ae([...c])},[ee,c]),console.log("[Estoque] Produtos:",null==h?void 0:h.length,"Categorias:",null==c?void 0:c.length),e.jsxs("div",{className:"flex min-h-screen",children:[e.jsxs("aside",{className:"w-64 bg-slate-100 dark:bg-slate-900 border-r h-screen flex flex-col",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-2",children:[e.jsx(Rn,{onClick:()=>Z(null),variant:null===Q?"default":"outline",className:"w-full justify-start",children:"Todos os Produtos"}),e.jsxs(Rn,{onClick:()=>{z(null),V({nome:"",cor:"#8b5cf6"}),k(!0)},variant:"outline",className:"w-full justify-start bg-violet-500 text-white hover:bg-violet-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Nova Categoria"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:e.jsx("ul",{className:"space-y-1",children:c.map(t=>e.jsxs("li",{className:"flex items-center justify-between group",children:[e.jsx(Rn,{onClick:()=>Z(t.id),variant:Q===t.id?"default":"ghost",className:"flex-1 justify-start text-left border-l-2",style:{borderLeftColor:t.cor},children:t.nome}),e.jsx("button",{title:"Editar categoria",className:"p-1 rounded hover:bg-slate-200 dark:hover:bg-slate-800",onClick:()=>{z(t),V({nome:t.nome,cor:t.cor||"#8b5cf6"}),k(!0)},children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{title:"Excluir categoria",className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>(async e=>{try{const t=h.filter(t=>t.categoriaId===e);for(const e of t)await m(e.id);await d(e),Q===e&&Z(null),s({title:"Sucesso!",description:"Categoria e produtos vinculados removidos!"})}catch(t){console.error("[Estoque] ❌ Erro ao remover categoria:",t),s({title:"Erro",description:"Erro ao remover categoria. Tente novamente.",variant:"destructive"})}})(t.id),children:e.jsx(Ce,{className:"h-4 w-4 text-red-500"})})]},t.id))})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Estoque"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gerencie categorias, produtos e movimentações"})]}),ke.length>0&&e.jsxs(pe.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:()=>M(!0),className:"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg p-3 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-all duration-200 cursor-pointer flex items-center gap-2 min-w-0 flex-shrink-0",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Estoque Crítico"}),e.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:[ke.length," produto(s)"]})]})]})]})}),e.jsxs(Pi,{defaultValue:"produtos",className:"flex-1",children:[e.jsxs("div",{className:"px-6 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(Di,{className:"h-12 px-1",children:[e.jsx(Ii,{value:"produtos",className:"px-6",children:"Produtos"}),e.jsx(Ii,{value:"movimentacoes",className:"px-6",children:"Movimentações"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ni,{open:N,onOpenChange:k,children:[e.jsx(oi,{asChild:!0,children:e.jsx(Rn,{variant:"outline",size:"sm",children:"Nova Categoria"})}),e.jsxs(si,{className:"sm:max-w-lg bg-white dark:bg-slate-900 "+(a?"":"shadow-xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(qe,{className:"h-6 w-6 text-purple-500"}),F?"Editar Categoria":"Nova Categoria"]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),B.nome)try{await u({nome:B.nome,cor:B.cor,createdAt:F?F.createdAt:(new Date).toISOString()},null==F?void 0:F.id),s({title:"Sucesso!",description:F?"Categoria atualizada!":"Categoria criada!"}),V({nome:"",cor:"#8b5cf6"}),z(null),k(!1)}catch(t){console.error("[Estoque] ❌ Erro ao salvar categoria:",t),s({title:"Erro",description:"Erro ao salvar categoria. Tente novamente.",variant:"destructive"})}else s({title:"Erro",description:"Nome da categoria é obrigatório!",variant:"destructive"})},className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-500"}),"Informações da Categoria"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Nome da Categoria *"}),e.jsx(hi,{value:B.nome,onChange:e=>V({...B,nome:e.target.value}),placeholder:"Ex: Eletrônicos, Roupas, Acessórios...",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Cor da Categoria *"}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx(hi,{type:"color",value:B.cor,onChange:e=>V({...B,cor:e.target.value}),className:"w-16 h-10 rounded-lg border-2 border-slate-300 dark:border-slate-600"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-slate-300 dark:border-slate-600",style:{backgroundColor:B.cor}}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:B.cor})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Escolha uma cor que represente bem sua categoria"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(Rn,{type:"submit",className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2",children:F?"Atualizar Categoria":"Criar Categoria"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:()=>{k(!1),z(null),V({nome:"",cor:"#8b5cf6"})},className:"flex-1",children:"Cancelar"})]})]})]})]}),e.jsxs(ni,{open:j,onOpenChange:S,children:[e.jsx(oi,{asChild:!0,children:e.jsx(Rn,{size:"sm",className:"bg-gradient-to-r from-orange-500 to-red-500",children:"Novo Produto"})}),e.jsxs(si,{className:"sm:max-w-2xl bg-white dark:bg-slate-900 "+(a?"":"shadow-xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ze,{className:"h-6 w-6 text-green-500"}),R?"Editar Produto":"Novo Produto"]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),console.log("[Estoque] ===== INICIANDO CADASTRO DE PRODUTO ====="),console.log("[Estoque] FormData:",U),!(U.nome&&U.codigo&&U.preco&&U.quantidade&&U.categoriaId))return console.log("[Estoque] ❌ Campos obrigatórios não preenchidos"),void s({title:"Erro",description:"Todos os campos são obrigatórios!",variant:"destructive"});try{const e={nome:U.nome,codigo:U.codigo,preco:parseFloat(U.preco),quantidade:parseInt(U.quantidade),categoriaId:U.categoriaId,imagem:U.imagem,createdAt:R?R.createdAt:(new Date).toISOString()};console.log("[Estoque] ProdutoData preparado:",e),console.log("[Estoque] Salvando produto..."),console.log("[Estoque] editingProduto?.id:",null==R?void 0:R.id);const t=await f(e,null==R?void 0:R.id);console.log("[Estoque] ✅ Produto salvo com ID:",t),console.log("[Estoque] Verificando se produto aparece na lista..."),console.log("[Estoque] Forçando refresh dos dados..."),setTimeout(()=>{console.log("[Estoque] Produtos após salvamento:",h),console.log("[Estoque] Total de produtos:",null==h?void 0:h.length),console.log("[Estoque] Verificando localStorage:",JSON.parse(localStorage.getItem("crm_produtos")||"[]").length)},1e3),s({title:"Sucesso!",description:R?"Produto atualizado!":"Produto cadastrado!"}),q({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:"",imagem:null}),L(null),S(!1),console.log("[Estoque] ===== PRODUTO CADASTRADO COM SUCESSO ====="),console.log("[Estoque] Formulário limpo e dialog fechado")}catch(t){console.error("[Estoque] ❌ Erro ao salvar produto:",t),s({title:"Erro",description:"Erro ao salvar produto. Tente novamente.",variant:"destructive"})}},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-500"}),"Informações Básicas"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Nome do Produto *"}),e.jsx(hi,{value:U.nome,onChange:e=>{if(q({...U,nome:e.target.value}),!U.codigo&&e.target.value){const t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6)+String(Date.now()).slice(-4);q(e=>({...e,codigo:t}))}},placeholder:"Ex: Mouse Gamer RGB",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Preço *"}),e.jsx(hi,{type:"number",step:"0.01",value:U.preco,onChange:e=>q({...U,preco:e.target.value}),placeholder:"0.00",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Quantidade *"}),e.jsx(hi,{type:"number",value:U.quantidade,onChange:e=>q({...U,quantidade:e.target.value}),placeholder:"0",className:"mt-1",required:!0})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-purple-500"}),"Categoria"]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Categoria *"}),e.jsxs(yi,{value:U.categoriaId,onValueChange:e=>q({...U,categoriaId:e}),className:"mt-1",children:[e.jsx(xi,{children:e.jsx(bi,{placeholder:"Selecione uma categoria..."})}),e.jsx(Si,{children:c.map(t=>e.jsx(Ni,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.cor}}),t.nome]})},t.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-orange-500"}),"Código do Produto"]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Código (Gerado Automaticamente)"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx(hi,{value:U.codigo,onChange:e=>q({...U,codigo:e.target.value}),placeholder:"Será gerado automaticamente",className:"pr-10",required:!0}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",title:"Gerado automaticamente"})})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Código gerado automaticamente baseado no nome do produto"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-indigo-500"}),"Imagem do Produto"]}),e.jsxs("div",{...je(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-200 ${Ne?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 scale-105":"border-slate-300 dark:border-slate-600 hover:border-blue-400 hover:bg-slate-50 dark:hover:bg-slate-800/70"} ${U.imagem?"bg-slate-50 dark:bg-slate-800/50":""}`,children:[e.jsx("input",{...Se()}),U.imagem?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:U.imagem,alt:"Preview do produto",className:"max-w-full max-h-40 object-contain rounded-lg border-2 border-slate-200 dark:border-slate-700 shadow-lg"}),e.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),q({...U,imagem:null})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition-colors shadow-lg",children:e.jsx(le,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"✨ Clique ou arraste para alterar a imagem"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:e.jsx(me,{className:"w-10 h-10 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Ne?"🎯 Solte a imagem aqui":"📷 Arraste uma imagem ou clique para selecionar"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"PNG, JPG até 2MB • Redimensionada para 1000x1000px"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(Rn,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-2",children:R?"Atualizar Produto":"Cadastrar Produto"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:()=>{S(!1),L(null),q({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:"",imagem:null})},className:"flex-1",children:"Cancelar"})]})]})]})]}),e.jsxs(ni,{open:E,onOpenChange:C,children:[e.jsx(oi,{asChild:!0,children:e.jsx(Rn,{size:"sm",variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-50",children:"Movimentação"})}),e.jsxs(si,{className:"sm:max-w-lg bg-white dark:bg-slate-900 "+(a?"":"shadow-xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(_e,{className:"h-6 w-6 text-orange-500"}),"Nova Movimentação"]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),$.produtoId&&$.quantidade)try{const e=h.find(e=>e.id===$.produtoId),t=parseInt($.quantidade);if("saida"===$.tipo&&e.quantidade<t)return void s({title:"Erro",description:"Quantidade insuficiente em estoque!",variant:"destructive"});await y({produtoId:$.produtoId,produtoNome:e.nome,tipo:$.tipo,quantidade:t,observacao:$.observacao,createdAt:(new Date).toISOString()});const r={...e,quantidade:"entrada"===$.tipo?e.quantidade+t:e.quantidade-t};await f(r,e.id),s({title:"Sucesso!",description:`Movimentação de ${$.tipo} registrada!`}),W({produtoId:"",tipo:"entrada",quantidade:"",observacao:""}),C(!1)}catch(t){console.error("[Estoque] ❌ Erro ao registrar movimentação:",t),s({title:"Erro",description:"Erro ao registrar movimentação. Tente novamente.",variant:"destructive"})}else s({title:"Erro",description:"Produto e quantidade são obrigatórios!",variant:"destructive"})},className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-500"}),"Dados da Movimentação"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gi,{className:"text-sm font-medium",children:"Produto *"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx(hi,{value:H,onChange:e=>(e=>{if(G(e),e.length>0){const t=h.filter(t=>t.nome.toLowerCase().includes(e.toLowerCase())||t.codigo.toLowerCase().includes(e.toLowerCase()));Y(t),J(!0)}else Y([]),J(!1)})(e.target.value),placeholder:"Digite o nome ou código do produto...",className:"pr-10"}),e.jsx(be,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),X&&K.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:K.map(t=>e.jsx("div",{onClick:()=>(e=>{W({...$,produtoId:e.id}),G(e.nome),J(!1)})(t),className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.imagem&&e.jsx("img",{src:t.imagem,alt:t.nome,className:"w-8 h-8 object-cover rounded border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Código: ",t.codigo," | Estoque: ",t.quantidade]})]})]})},t.id))})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Digite o nome ou código do produto para buscar"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Tipo de Movimentação *"}),e.jsxs(yi,{value:$.tipo,onValueChange:e=>((e,t)=>{const r=h.find(e=>e.id===t);if(r){const t="entrada"===e?`Reposição de estoque - ${r.nome}`:`Saída de estoque - ${r.nome}`;W(r=>({...r,tipo:e,observacao:t}))}})(e,$.produtoId),className:"mt-1",children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"entrada",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-green-500"}),"Entrada"]})}),e.jsx(Ni,{value:"saida",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-red-500"}),"Saída"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Quantidade *"}),e.jsx(hi,{type:"number",min:"1",value:$.quantidade,onChange:e=>W({...$,quantidade:e.target.value}),placeholder:"0",className:"mt-1",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(gi,{className:"text-sm font-medium",children:"Observação"}),e.jsx(hi,{value:$.observacao,onChange:e=>W({...$,observacao:e.target.value}),placeholder:"Ex: Compra, venda, ajuste de estoque...",className:"mt-1"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"💡 Descreva o motivo da movimentação"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(Rn,{type:"submit",className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2",children:"Registrar Movimentação"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:()=>{C(!1),W({produtoId:"",tipo:"entrada",quantidade:"",observacao:""})},className:"flex-1",children:"Cancelar"})]})]})]})]})]})]}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-4"})]}),e.jsxs(Mi,{value:"produtos",className:"px-6 pt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar por nome ou código...",value:x,onChange:e=>w(e.target.value),className:"max-w-sm pl-10"})]}),e.jsxs(Rn,{onClick:()=>te(!0),variant:"outline",size:"sm",className:"bg-black text-white hover:bg-gray-800 dark:bg-gray-900 dark:hover:bg-gray-800",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Reordenar Categorias"]})]}),null===Q?c.map(t=>e.jsxs("div",{children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800/50 rounded-lg p-3 mb-4 border-2 "+(a?"":"shadow-sm"),style:{borderColor:t.cor},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.cor}}),e.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-lg",children:t.nome}),e.jsxs("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 text-xs px-2 py-1 rounded-full",children:[xe.filter(e=>e.categoriaId===t.id).length," produtos"]})]}),e.jsxs(Rn,{size:"sm",variant:"outline",onClick:()=>{L(null),q({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:t.id.toString(),imagem:null}),S(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white border-blue-500",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Novo Produto"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:xe.filter(e=>e.categoriaId===t.id).map((t,r)=>e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300 "+(a?"":"shadow-sm"),children:e.jsxs("div",{className:"flex gap-3",children:[t.imagem&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:t.imagem,alt:t.nome,className:"w-20 h-20 object-cover rounded-lg shadow-sm border-2 border-slate-200 dark:border-slate-700 cursor-pointer hover:shadow-md transition-all duration-200",onClick:()=>ge(t.imagem,t.nome)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-sm mb-1 truncate",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:["Código: ",t.codigo]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs font-semibold "+(t.quantidade<=5?"text-red-500":"text-blue-600 dark:text-blue-400"),children:[t.quantidade," ",t.quantidade<=5&&"(Baixo)"]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>he(t),className:"h-6 w-6",children:e.jsx(Ee,{className:"h-3 w-3"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>fe(t.id),className:"h-6 w-6 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-3 w-3"})})]})]})},t.id))})]},t.id)):c.filter(e=>e.id===Q).map(t=>e.jsxs("div",{children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800/50 rounded-lg p-3 mb-4 border-2 "+(a?"":"shadow-sm"),style:{borderColor:t.cor},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.cor}}),e.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-lg",children:t.nome}),e.jsxs("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 text-xs px-2 py-1 rounded-full",children:[xe.filter(e=>e.categoriaId===t.id).length," produtos"]})]}),e.jsxs(Rn,{size:"sm",variant:"outline",onClick:()=>{L(null),q({nome:"",codigo:"",preco:"",quantidade:"",categoriaId:t.id.toString(),imagem:null}),S(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white border-blue-500",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Novo Produto"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:xe.filter(e=>e.categoriaId===t.id).map((t,r)=>e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300 "+(a?"":"shadow-sm"),children:e.jsxs("div",{className:"flex gap-3",children:[t.imagem&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:t.imagem,alt:t.nome,className:"w-20 h-20 object-cover rounded-lg shadow-sm border-2 border-slate-200 dark:border-slate-700 cursor-pointer hover:shadow-md transition-all duration-200",onClick:()=>ge(t.imagem,t.nome)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-sm mb-1 truncate",children:t.nome}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:["Código: ",t.codigo]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.preco)})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs font-semibold "+(t.quantidade<=5?"text-red-500":"text-blue-600 dark:text-blue-400"),children:[t.quantidade," ",t.quantidade<=5&&"(Baixo)"]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>he(t),className:"h-6 w-6",children:e.jsx(Ee,{className:"h-3 w-3"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>fe(t.id),className:"h-6 w-6 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-3 w-3"})})]})]})},t.id))})]},t.id))]}),e.jsxs(Mi,{value:"movimentacoes",className:"px-6 pt-4 space-y-4",children:[0===ye.length&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"h-8 w-8 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-1",children:"Nenhuma movimentação hoje"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"As movimentações de entrada e saída aparecerão aqui"})]}),e.jsxs(Rn,{onClick:()=>C(!0),size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Nova Movimentação"]})]})}),ye.map(t=>{var r;return e.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white dark:bg-slate-800/50 p-4 rounded-lg border-2 shadow-sm hover:shadow-md transition-all duration-200 "+("entrada"===t.tipo?"border-green-200 dark:border-green-700 bg-green-50/30 dark:bg-green-900/10":"border-red-200 dark:border-red-700 bg-red-50/30 dark:bg-red-900/10"),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-full "+("entrada"===t.tipo?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:"entrada"===t.tipo?e.jsx(_e,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):e.jsx($e,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:t.produtoNome}),e.jsxs("p",{className:"text-sm font-medium "+("entrada"===t.tipo?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"),children:["entrada"===t.tipo?"Entrada":"Saída"," de ",t.quantidade," unidades"]})]})]}),t.observacao&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2 bg-slate-100 dark:bg-slate-700/50 p-2 rounded border-l-2 border-slate-300 dark:border-slate-600",children:[e.jsx("span",{className:"font-medium",children:"Obs:"})," ",t.observacao]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(ze,{className:"h-3 w-3"}),new Date((null==(r=t.createdAt)?void 0:r.toDate)?t.createdAt.toDate():t.createdAt).toLocaleString("pt-BR")]})]})})},t.id)})]})]})]}),e.jsx(ni,{open:O,onOpenChange:T,children:e.jsxs(si,{className:"sm:max-w-4xl max-w-[90vw] bg-white dark:bg-slate-900 border-0 p-0 overflow-hidden "+(a?"":"shadow-2xl"),children:[e.jsx(ci,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:e.jsxs(ui,{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(We,{className:"h-7 w-7"}),P]})}),e.jsx("div",{className:"relative bg-slate-50 dark:bg-slate-800 min-h-[60vh] flex items-center justify-center p-8",children:A&&e.jsxs("div",{className:"relative group",children:[e.jsxs(pe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative overflow-hidden rounded-2xl shadow-2xl",children:[e.jsx("img",{src:A,alt:P,className:"max-w-full max-h-[60vh] object-contain rounded-2xl transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 rounded-2xl"}),e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs(Rn,{size:"sm",variant:"secondary",onClick:()=>{const e=document.createElement("a");e.href=A,e.download=`${P}.jpg`,e.click()},className:"bg-white/90 hover:bg-white text-slate-900 shadow-lg",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Download"]})})]}),e.jsx(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.1},className:"mt-6 text-center",children:e.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl p-4 shadow-lg",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:P})})})]})}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(me,{className:"h-4 w-4"}),"Clique fora da imagem ou use ESC para fechar"]}),e.jsx(Rn,{variant:"outline",onClick:()=>T(!1),className:"bg-white dark:bg-slate-700",children:"Fechar"})]})]})}),e.jsx(ni,{open:ee,onOpenChange:te,children:e.jsxs(si,{className:"sm:max-w-3xl bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 "+(a?"shadow-2xl shadow-slate-900/50":"shadow-2xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs(ui,{className:"flex items-center gap-3 text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[e.jsx(pe.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:e.jsx(we,{className:"h-6 w-6 text-blue-500"})}),"Reordenar Categorias"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Organize suas categorias da forma que preferir"})]})}),e.jsxs(pe.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.3},children:[e.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.3},className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[e.jsxs(gi,{className:"text-sm font-semibold flex items-center gap-2 mb-3",children:[e.jsx(_e,{className:"h-4 w-4 text-blue-500"}),"Tipo de Ordenação:"]}),e.jsxs(yi,{value:re,onValueChange:e=>{ne(e),(e=>{let t=[...c];switch(e){case"alfabetica":t.sort((e,t)=>e.nome.localeCompare(t.nome));break;case"mais_produtos":t.sort((e,t)=>{const r=h.filter(t=>t.categoriaId===e.id).length,n=h.filter(e=>e.categoriaId===t.id).length;return n-r});break;case"menos_produtos":t.sort((e,t)=>{const r=h.filter(t=>t.categoriaId===e.id).length,n=h.filter(e=>e.categoriaId===t.id).length;return r-n});break;default:t.sort((e,t)=>(e.ordem||0)-(t.ordem||0))}ae(t)})(e)},children:[e.jsx(xi,{className:"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 hover:border-blue-400 transition-colors",children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"personalizada",children:"🎯 Personalizada (Arrastar e Soltar)"}),e.jsx(Ni,{value:"alfabetica",children:"🔤 Ordem Alfabética"}),e.jsx(Ni,{value:"mais_produtos",children:"📈 Mais Produtos"}),e.jsx(Ni,{value:"menos_produtos",children:"📉 Menos Produtos"})]})]})]}),e.jsx(pe.div,{className:"space-y-3 max-h-96 overflow-y-auto scrollbar-hide",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},children:oe.map((t,r)=>{const n=h.filter(e=>e.categoriaId===t.id);return e.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*r,duration:.3},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},draggable:"personalizada"===re,onDragStart:()=>(e=>{ce(e)})(r),onDragOver:e=>((e,t)=>{e.preventDefault(),de(t)})(e,r),onDrop:Oe,className:`group relative p-4 rounded-xl cursor-move transition-all duration-300 ${se===r?"border-2 border-blue-400 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/30 dark:to-purple-900/30 shadow-lg shadow-blue-500/20 scale-105":"border border-slate-200 dark:border-slate-700 bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm hover:border-slate-300 dark:hover:border-slate-600 hover:shadow-lg hover:shadow-slate-500/10"} ${a?"":"bg-white/70"}`,style:{borderLeftColor:t.cor,borderLeftWidth:"4px",boxShadow:se===r?`0 10px 25px -5px ${t.cor}20`:void 0},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pe.div,{className:"w-6 h-6 rounded-full shadow-lg",style:{backgroundColor:t.cor},whileHover:{scale:1.2},transition:{type:"spring",stiffness:300}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.nome}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[n.length," produto",1!==n.length?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(pe.div,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400},children:["#",r+1]}),"personalizada"===re&&e.jsxs(pe.div,{className:"flex flex-col gap-1",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full"})]})]})]}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},t.id)})}),e.jsxs(pe.div,{className:"flex justify-end gap-4 pt-6 border-t border-slate-200 dark:border-slate-700",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.3},children:[e.jsx(Rn,{variant:"outline",onClick:()=>te(!1),className:"hover:bg-slate-100 dark:hover:bg-slate-700 transition-all duration-200",children:"Cancelar"}),e.jsx(pe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(Rn,{onClick:async()=>{try{console.log("[Estoque] 🚀 Iniciando salvamento da nova ordem das categorias"),console.log("[Estoque] Categorias reordenadas:",oe.map(e=>({id:e.id,nome:e.nome,ordemAtual:e.ordem})));let e=0;for(let t=0;t<oe.length;t++){const r=oe[t];r.ordem!==t?(console.log(`[Estoque] Atualizando categoria "${r.nome}" (ID: ${r.id}) da ordem ${r.ordem} para ${t}`),await u({...r,ordem:t},r.id),e++):console.log(`[Estoque] Categoria "${r.nome}" já está na ordem correta (${t}), pulando...`)}console.log(`[Estoque] ✅ Salvamento concluído! ${e} categorias atualizadas`),s({title:"Sucesso!",description:`Ordem de ${e} categorias salva com sucesso!`}),te(!1)}catch(e){console.error("[Estoque] ❌ Erro ao salvar ordem das categorias:",e),s({title:"Erro!",description:"Erro ao salvar ordem das categorias.",variant:"destructive"})}},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Salvar Ordem"]})})]})]})]})}),e.jsx(ni,{open:I,onOpenChange:M,children:e.jsxs(si,{className:"sm:max-w-2xl bg-white dark:bg-slate-900 "+(a?"":"shadow-xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(ui,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-500"}),"Estoque Crítico"]})}),e.jsx("div",{className:"space-y-3",children:ke.map(t=>{const r=c.find(e=>e.id===t.categoriaId);return e.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:t.nome}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Categoria: ",(null==r?void 0:r.nome)||"Sem categoria"," | Estoque: ",e.jsx("span",{className:"font-bold",children:t.quantidade})," unidades"]})]}),e.jsx(Rn,{size:"sm",onClick:()=>(e=>{W({produtoId:e.id,tipo:"entrada",quantidade:"",observacao:`Reposição de estoque - ${e.nome}`}),G(e.nome),C(!0),M(!1)})(t),className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:"Repor Estoque"})]})},t.id)})})]})})]})},zw=()=>{const{dialogs:t,openDialog:r,closeDialog:n}=ie.useContext(UZ),{toast:o}=Io(),{data:i,loading:a,save:s,remove:c}=wx(),[l,u]=ie.useState(""),[d,h]=ie.useState(!1),[p,f]=ie.useState(null),[m,g]=ie.useState({descricao:"",valor:"",dataVencimento:"",tipo:"receber",status:"Pendente"});ie.useEffect(()=>{t.lancamento&&(f(null),g({descricao:"",valor:"",dataVencimento:"",tipo:"receber",status:"Pendente"}),h(!0),n("lancamento"))},[t,n]),console.log("[Financeiro] ===== DADOS CARREGADOS ====="),console.log("[Financeiro] Lançamentos:",i),console.log("[Financeiro] Loading:",a);const v=i.filter(e=>e.descricao.toLowerCase().includes(l.toLowerCase())),y=v.filter(e=>"receber"===e.tipo),b=v.filter(e=>"pagar"===e.tipo),x=y.filter(e=>"Pendente"===e.status).reduce((e,t)=>e+t.valor,0),w=b.filter(e=>"Pendente"===e.status).reduce((e,t)=>e+t.valor,0),j=y.filter(e=>"Recebido"===e.status).reduce((e,t)=>e+t.valor,0),S=b.filter(e=>"Pago"===e.status).reduce((e,t)=>e+t.valor,0),N=(e,t)=>{if("Pendente"!==t)return!1;const r=new Date;return r.setHours(0,0,0,0),new Date(e)<r},k=({conta:t,index:r})=>{return e.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*r},className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border transition-all duration-300 "+(N(t.dataVencimento,t.status)?"border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-slate-200 dark:border-slate-700 hover:shadow-lg"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-x-3 gap-y-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.descricao}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(n=t.status,a=t.tipo,"Pendente"===n?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"Recebido"===n&&"receber"===a||"Pago"===n&&"pagar"===a?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"),children:t.status}),N(t.dataVencimento,t.status)&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Vencido"})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold "+("receber"===t.tipo?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.valor)})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:new Date(t.dataVencimento).toLocaleDateString("pt-BR",{timeZone:"UTC"})})]})]})]}),e.jsxs("div",{className:"flex space-x-1 self-start sm:self-center",children:[e.jsx(Rn,{variant:"ghost",size:"sm",onClick:()=>(e=>{const t=i.map(t=>{if(t.id===e){const e="Pendente"===t.status?"receber"===t.tipo?"Recebido":"Pago":"Pendente";return{...t,status:e}}return t});saveLancamentos(t),o({title:"Sucesso!",description:"Status atualizado com sucesso!"})})(t.id),className:"Pendente"===t.status?"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300":"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Pendente"===t.status?"Marcar como "+("receber"===t.tipo?"Recebido":"Pago"):"Marcar como Pendente"}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>{return f(e=t),g({descricao:e.descricao,valor:e.valor.toString(),dataVencimento:e.dataVencimento,tipo:e.tipo,status:e.status}),void h(!0);var e},className:"h-8 w-8",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:()=>(async e=>{try{await c(e),o({title:"Sucesso!",description:"Lançamento removido com sucesso!"})}catch(t){console.error("[Financeiro] ❌ Erro ao remover lançamento:",t),o({title:"Erro",description:"Erro ao remover lançamento. Tente novamente.",variant:"destructive"})}})(t.id),className:"h-8 w-8 text-red-500 hover:text-red-700 dark:hover:text-red-400",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})},t.id);var n,a};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Financeiro"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Controle suas contas a pagar e receber"})]}),e.jsxs(ni,{open:d,onOpenChange:h,children:[e.jsx(oi,{asChild:!0,children:e.jsxs(Rn,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Novo Lançamento"]})}),e.jsxs(si,{className:"sm:max-w-md bg-white dark:bg-slate-900",children:[e.jsx(ci,{children:e.jsx(ui,{children:p?"Editar Lançamento":"Novo Lançamento"})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m.descricao&&m.valor&&m.dataVencimento)try{const e={descricao:m.descricao,valor:parseFloat(m.valor),dataVencimento:m.dataVencimento,tipo:m.tipo,status:m.status,createdAt:p?p.createdAt:(new Date).toISOString()};await s(e,null==p?void 0:p.id),o(p?{title:"Sucesso!",description:"Lançamento atualizado com sucesso!"}:{title:"Sucesso!",description:"Lançamento criado com sucesso!"}),g({descricao:"",valor:"",dataVencimento:"",tipo:"receber",status:"Pendente"}),f(null),h(!1)}catch(t){console.error("[Financeiro] ❌ Erro ao salvar lançamento:",t),o({title:"Erro",description:"Erro ao salvar lançamento. Tente novamente.",variant:"destructive"})}else o({title:"Erro",description:"Todos os campos obrigatórios devem ser preenchidos!",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"descricao",children:"Descrição *"}),e.jsx(hi,{id:"descricao",value:m.descricao,onChange:e=>g({...m,descricao:e.target.value}),placeholder:"Descrição do lançamento",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"valor",children:"Valor *"}),e.jsx(hi,{id:"valor",type:"number",step:"0.01",value:m.valor,onChange:e=>g({...m,valor:e.target.value}),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{htmlFor:"dataVencimento",children:"Data de Vencimento *"}),e.jsx(hi,{id:"dataVencimento",type:"date",value:m.dataVencimento,onChange:e=>g({...m,dataVencimento:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(gi,{children:"Tipo"}),e.jsxs(yi,{value:m.tipo,onValueChange:e=>g({...m,tipo:e}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"receber",children:"Conta a Receber"}),e.jsx(Ni,{value:"pagar",children:"Conta a Pagar"})]})]})]}),e.jsxs("div",{children:[e.jsx(gi,{children:"Status"}),e.jsxs(yi,{value:m.status,onValueChange:e=>g({...m,status:e}),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"Pendente",children:"Pendente"}),e.jsx(Ni,{value:"receber"===m.tipo?"Recebido":"Pago",children:"receber"===m.tipo?"Recebido":"Pago"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Rn,{type:"submit",className:"flex-1",children:p?"Atualizar":"Criar"}),e.jsx(Rn,{type:"button",variant:"outline",onClick:()=>{h(!1),f(null),g({descricao:"",valor:"",dataVencimento:"",tipo:"receber",status:"Pendente"})},children:"Cancelar"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"A Receber"}),e.jsx("p",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x)})]}),e.jsx(_e,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})}),e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"A Pagar"}),e.jsx("p",{className:"text-xl font-bold text-red-700 dark:text-red-300",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w)})]}),e.jsx($e,{className:"h-8 w-8 text-red-600 dark:text-red-400"})]})}),e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Recebido"}),e.jsx("p",{className:"text-xl font-bold text-blue-700 dark:text-blue-300",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j)})]}),e.jsx(Re,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})}),e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Pago"}),e.jsx("p",{className:"text-xl font-bold text-purple-700 dark:text-purple-300",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S)})]}),e.jsx(Re,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})]})})]}),e.jsxs(Pi,{defaultValue:"receber",className:"w-full",children:[e.jsxs(Di,{className:"grid w-full grid-cols-2",children:[e.jsx(Ii,{value:"receber",children:"Contas a Receber"}),e.jsx(Ii,{value:"pagar",children:"Contas a Pagar"})]}),e.jsxs(Mi,{value:"receber",className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar por descrição...",value:l,onChange:e=>u(e.target.value),className:"max-w-sm pl-10"})]}),e.jsx("div",{className:"space-y-3",children:y.map((t,r)=>e.jsx(k,{conta:t,index:r},t.id))}),0===y.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Nenhuma conta a receber"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Suas contas a receber aparecerão aqui"})]})]}),e.jsxs(Mi,{value:"pagar",className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(hi,{placeholder:"Buscar por descrição...",value:l,onChange:e=>u(e.target.value),className:"max-w-sm pl-10"})]}),e.jsx("div",{className:"space-y-3",children:b.map((t,r)=>e.jsx(k,{conta:t,index:r},t.id))}),0===b.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Nenhuma conta a pagar"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Suas contas a pagar aparecerão aqui"})]})]})]})]})};function Uw(e){return(Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qw(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Bw(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Vw(e){Bw(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Uw(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function $w(e,t){Bw(2,arguments);var r=Vw(e),n=qw(t);return isNaN(n)?new Date(NaN):n?(r.setDate(r.getDate()+n),r):r}function Ww(e,t){Bw(2,arguments);var r=Vw(e),n=qw(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var o=r.getDate(),i=new Date(r.getTime());return i.setMonth(r.getMonth()+n+1,0),o>=i.getDate()?i:(r.setFullYear(i.getFullYear(),i.getMonth(),o),r)}var Hw={};function Gw(){return Hw}function Kw(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Gw(),d=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Vw(e),p=h.getDay(),f=(p<d?7:0)+p-d;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function Yw(e){return Bw(1,arguments),Kw(e,{weekStartsOn:1})}function Xw(e){Bw(1,arguments);var t=function(e){Bw(1,arguments);var t=Vw(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var o=Yw(n),i=new Date(0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);var a=Yw(i);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}(e),r=new Date(0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yw(r)}function Jw(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Qw(e){Bw(1,arguments);var t=Vw(e);return t.setHours(0,0,0,0),t}function Zw(e,t){Bw(2,arguments);var r=Qw(e),n=Qw(t),o=r.getTime()-Jw(r),i=n.getTime()-Jw(n);return Math.round((o-i)/864e5)}function ej(e,t){return Bw(2,arguments),$w(e,7*qw(t))}function tj(e,t){return Bw(2,arguments),Ww(e,12*qw(t))}function rj(e,t){Bw(2,arguments);var r=Qw(e),n=Qw(t);return r.getTime()===n.getTime()}function nj(e){return Bw(1,arguments),e instanceof Date||"object"===Uw(e)&&"[object Date]"===Object.prototype.toString.call(e)}function oj(e,t){Bw(2,arguments);var r=Vw(e),n=Vw(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function ij(e){Bw(1,arguments);var t=Vw(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function aj(e){Bw(1,arguments);var t=Vw(e);return t.setDate(1),t.setHours(0,0,0,0),t}function sj(e){Bw(1,arguments);var t=Vw(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function cj(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Gw(),d=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Vw(e),p=h.getDay(),f=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+f),h.setHours(23,59,59,999),h}function lj(e){return Bw(1,arguments),cj(e,{weekStartsOn:1})}function uj(e,t){return Bw(2,arguments),function(e,t){Bw(2,arguments);var r=Vw(e).getTime(),n=qw(t);return new Date(r+n)}(e,-qw(t))}function dj(e){Bw(1,arguments);var t=Vw(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function hj(e){Bw(1,arguments);var t=Vw(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var o=dj(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var a=dj(i);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function pj(e){Bw(1,arguments);var t=Vw(e),r=dj(t).getTime()-function(e){Bw(1,arguments);var t=hj(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),dj(r)}(t).getTime();return Math.round(r/6048e5)+1}function fj(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Gw(),d=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Vw(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function mj(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Vw(e),d=u.getUTCFullYear(),h=Gw(),p=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:h.firstWeekContainsDate)&&void 0!==n?n:null===(c=h.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,p),f.setUTCHours(0,0,0,0);var m=fj(f,t),g=new Date(0);g.setUTCFullYear(d,0,p),g.setUTCHours(0,0,0,0);var v=fj(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function gj(e,t){Bw(1,arguments);var r=Vw(e),n=fj(r,t).getTime()-function(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Gw(),d=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1),h=mj(e,t),p=new Date(0);return p.setUTCFullYear(h,0,d),p.setUTCHours(0,0,0,0),fj(p,t)}(r,t).getTime();return Math.round(n/6048e5)+1}function vj(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}const yj={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return vj("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):vj(r+1,2)},d:function(e,t){return vj(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return vj(e.getUTCHours()%12||12,t.length)},H:function(e,t){return vj(e.getUTCHours(),t.length)},m:function(e,t){return vj(e.getUTCMinutes(),t.length)},s:function(e,t){return vj(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getUTCMilliseconds();return vj(Math.floor(n*Math.pow(10,r-3)),t.length)}};var bj="midnight",xj="noon",wj="morning",jj="afternoon",Sj="evening",Nj="night";function kj(e,t){var r=e>0?"-":"+",n=Math.abs(e),o=Math.floor(n/60),i=n%60;if(0===i)return r+String(o);var a=t||"";return r+String(o)+a+vj(i,2)}function Ej(e,t){return e%60==0?(e>0?"-":"+")+vj(Math.abs(e)/60,2):Cj(e,t)}function Cj(e,t){var r=t||"",n=e>0?"-":"+",o=Math.abs(e);return n+vj(Math.floor(o/60),2)+r+vj(o%60,2)}const Oj={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return yj.y(e,t)},Y:function(e,t,r,n){var o=mj(e,n),i=o>0?o:1-o;return"YY"===t?vj(i%100,2):"Yo"===t?r.ordinalNumber(i,{unit:"year"}):vj(i,t.length)},R:function(e,t){return vj(hj(e),t.length)},u:function(e,t){return vj(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return vj(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return vj(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return yj.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return vj(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var o=gj(e,n);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):vj(o,t.length)},I:function(e,t,r){var n=pj(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):vj(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):yj.d(e,t)},D:function(e,t,r){var n=function(e){Bw(1,arguments);var t=Vw(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=r-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):vj(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var o=e.getUTCDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vj(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var o=e.getUTCDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vj(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return vj(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,o=e.getUTCHours();switch(n=12===o?xj:0===o?bj:o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,o=e.getUTCHours();switch(n=o>=17?Sj:o>=12?jj:o>=4?wj:Nj,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return yj.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):yj.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):vj(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):vj(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):yj.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):yj.s(e,t)},S:function(e,t){return yj.S(e,t)},X:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return Ej(o);case"XXXX":case"XX":return Cj(o);default:return Cj(o,":")}},x:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ej(o);case"xxxx":case"xx":return Cj(o);default:return Cj(o,":")}},O:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kj(o,":");default:return"GMT"+Cj(o,":")}},z:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kj(o,":");default:return"GMT"+Cj(o,":")}},t:function(e,t,r,n){var o=n._originalDate||e;return vj(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,r,n){return vj((n._originalDate||e).getTime(),t.length)}};var Tj=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Aj=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const _j={p:Aj,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return Tj(e,t);switch(o){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Tj(o,t)).replace("{{time}}",Aj(i,t))}};var Pj=["D","DD"],Dj=["YY","YYYY"];function Ij(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Mj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Rj=function(e,t,r){var n,o=Mj[e];return n="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Lj(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Fj={date:Lj({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Lj({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Lj({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var zj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Uj(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=null!=r&&r.width?String(r.width):o;n=e.formattingValues[i]||e.formattingValues[o]}else{var a=e.defaultWidth,s=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function qj(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;var a,s=i[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(c,function(e){return e.test(s)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(c,function(e){return e.test(s)});return a=e.valueCallback?e.valueCallback(l):l,{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(s.length)}}}var Bj;const Vj={code:"en-US",formatDistance:Rj,formatLong:Fj,formatRelative:function(e,t,r,n){return zj[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Uj({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Uj({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Uj({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Uj({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Uj({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Bj={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(Bj.matchPattern);if(!r)return null;var n=r[0],o=e.match(Bj.parsePattern);if(!o)return null;var i=Bj.valueCallback?Bj.valueCallback(o[0]):o[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:e.slice(n.length)}}),era:qj({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:qj({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:qj({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:qj({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:qj({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var $j=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hj=/^'([^]*?)'?$/,Gj=/''/g,Kj=/[a-zA-Z]/;function Yj(e,t,r){var n,o,i,a,s,c,l,u,d,h,p,f,m,g,v,y,b,x;Bw(2,arguments);var w=String(t),j=Gw(),S=null!==(n=null!==(o=null==r?void 0:r.locale)&&void 0!==o?o:j.locale)&&void 0!==n?n:Vj,N=qw(null!==(i=null!==(a=null!==(s=null!==(c=null==r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null==r||null===(l=r.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:j.firstWeekContainsDate)&&void 0!==a?a:null===(d=j.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==i?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=qw(null!==(p=null!==(f=null!==(m=null!==(g=null==r?void 0:r.weekStartsOn)&&void 0!==g?g:null==r||null===(v=r.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:j.weekStartsOn)&&void 0!==f?f:null===(b=j.locale)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==p?p:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var E=Vw(e);if(!function(e){if(Bw(1,arguments),!nj(e)&&"number"!=typeof e)return!1;var t=Vw(e);return!isNaN(Number(t))}(E))throw new RangeError("Invalid time value");var C=uj(E,Jw(E)),O={firstWeekContainsDate:N,weekStartsOn:k,locale:S,_originalDate:E};return w.match(Wj).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,_j[t])(e,S.formatLong):e}).join("").match($j).map(function(n){if("''"===n)return"'";var o=n[0];if("'"===o)return function(e){var t=e.match(Hj);if(!t)return e;return t[1].replace(Gj,"'")}(n);var i,a=Oj[o];if(a)return null!=r&&r.useAdditionalWeekYearTokens||(i=n,-1===Dj.indexOf(i))||Ij(n,t,String(e)),null!=r&&r.useAdditionalDayOfYearTokens||!function(e){return-1!==Pj.indexOf(e)}(n)||Ij(n,t,String(e)),a(C,n,S.localize,O);if(o.match(Kj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return n}).join("")}function Xj(e){return Bw(1,arguments),Math.floor(function(e){return Bw(1,arguments),Vw(e).getTime()}(e)/1e3)}function Jj(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Gw(),d=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1),h=function(e,t){var r,n,o,i,a,s,c,l;Bw(1,arguments);var u=Vw(e),d=u.getFullYear(),h=Gw(),p=qw(null!==(r=null!==(n=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:h.firstWeekContainsDate)&&void 0!==n?n:null===(c=h.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setFullYear(d+1,0,p),f.setHours(0,0,0,0);var m=Kw(f,t),g=new Date(0);g.setFullYear(d,0,p),g.setHours(0,0,0,0);var v=Kw(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}(e,t),p=new Date(0);return p.setFullYear(h,0,d),p.setHours(0,0,0,0),Kw(p,t)}function Qj(e,t){return Bw(1,arguments),function(e,t,r){Bw(2,arguments);var n=Kw(e,r),o=Kw(t,r),i=n.getTime()-Jw(n),a=o.getTime()-Jw(o);return Math.round((i-a)/6048e5)}(function(e){Bw(1,arguments);var t=Vw(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}(e),aj(e),t)+1}function Zj(e,t){Bw(2,arguments);var r=Vw(e),n=Vw(t);return r.getTime()>n.getTime()}function eS(e,t){Bw(2,arguments);var r=Vw(e),n=Vw(t);return r.getTime()<n.getTime()}function tS(e,t){Bw(2,arguments);var r=Vw(e),n=Vw(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function rS(e,t){return Bw(2,arguments),$w(e,-qw(t))}function nS(e,t){Bw(2,arguments);var r=Vw(e),n=qw(t),o=r.getFullYear(),i=r.getDate(),a=new Date(0);a.setFullYear(o,n,15),a.setHours(0,0,0,0);var s=function(e){Bw(1,arguments);var t=Vw(e),r=t.getFullYear(),n=t.getMonth(),o=new Date(0);return o.setFullYear(r,n+1,0),o.setHours(0,0,0,0),o.getDate()}(a);return r.setMonth(n,Math.min(i,s)),r}function oS(e,t){Bw(2,arguments);var r=Vw(e),n=qw(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(n),r)}var iS=function(){return iS=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},iS.apply(this,arguments)};function aS(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function sS(e){return"multiple"===e.mode}function cS(e){return"range"===e.mode}function lS(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var uS={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var dS=Object.freeze({__proto__:null,formatCaption:function(e,t){return Yj(e,"LLLL y",t)},formatDay:function(e,t){return Yj(e,"d",t)},formatMonthCaption:function(e,t){return Yj(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return Yj(e,"cccccc",t)},formatYearCaption:function(e,t){return Yj(e,"yyyy",t)}}),hS=Object.freeze({__proto__:null,labelDay:function(e,t,r){return Yj(e,"do MMMM (EEEE)",r)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return Yj(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var pS=ie.createContext(void 0);function fS(t){var r,n,o=t.initialProps,i={captionLayout:"buttons",classNames:uS,formatters:dS,labels:hS,locale:Vj,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},a=function(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,o=e.toMonth,i=e.fromDate,a=e.toDate;return n?i=aj(n):t&&(i=new Date(t,0,1)),o?a=ij(o):r&&(a=new Date(r,11,31)),{fromDate:i?Qw(i):void 0,toDate:a?Qw(a):void 0}}(o),s=a.fromDate,c=a.toDate,l=null!==(r=o.captionLayout)&&void 0!==r?r:i.captionLayout;"buttons"===l||s&&c||(l="buttons"),(lS(o)||sS(o)||cS(o))&&(n=o.onSelect);var u=iS(iS(iS({},i),o),{captionLayout:l,classNames:iS(iS({},i.classNames),o.classNames),components:iS({},o.components),formatters:iS(iS({},i.formatters),o.formatters),fromDate:s,labels:iS(iS({},i.labels),o.labels),mode:o.mode||i.mode,modifiers:iS(iS({},i.modifiers),o.modifiers),modifiersClassNames:iS(iS({},i.modifiersClassNames),o.modifiersClassNames),onSelect:n,styles:iS(iS({},i.styles),o.styles),toDate:c});return e.jsx(pS.Provider,{value:u,children:t.children})}function mS(){var e=ie.useContext(pS);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function gS(t){var r=mS(),n=r.locale,o=r.classNames,i=r.styles,a=r.formatters.formatCaption;return e.jsx("div",{className:o.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function vS(t){return e.jsx("svg",iS({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yS(t){var r,n,o=t.onChange,i=t.value,a=t.children,s=t.caption,c=t.className,l=t.style,u=mS(),d=null!==(n=null===(r=u.components)||void 0===r?void 0:r.IconDropdown)&&void 0!==n?n:vS;return e.jsxs("div",{className:c,style:l,children:[e.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:o,children:a}),e.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,e.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function bS(t){var r,n=mS(),o=n.fromDate,i=n.toDate,a=n.styles,s=n.locale,c=n.formatters.formatMonthCaption,l=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!o)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});var h=[];if(function(e,t){Bw(2,arguments);var r=Vw(e),n=Vw(t);return r.getFullYear()===n.getFullYear()}(o,i))for(var p=aj(o),f=o.getMonth();f<=i.getMonth();f++)h.push(nS(p,f));else for(p=aj(new Date),f=0;f<=11;f++)h.push(nS(p,f));var m=null!==(r=null==u?void 0:u.Dropdown)&&void 0!==r?r:yS;return e.jsx(m,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:function(e){var r=Number(e.target.value),n=nS(aj(t.displayMonth),r);t.onChange(n)},value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:s}),children:h.map(function(t){return e.jsx("option",{value:t.getMonth(),children:c(t,{locale:s})},t.getMonth())})})}function xS(t){var r,n=t.displayMonth,o=mS(),i=o.fromDate,a=o.toDate,s=o.locale,c=o.styles,l=o.classNames,u=o.components,d=o.formatters.formatYearCaption,h=o.labels.labelYearDropdown,p=[];if(!i)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});for(var f=i.getFullYear(),m=a.getFullYear(),g=f;g<=m;g++)p.push(oS(sj(new Date),g));var v=null!==(r=null==u?void 0:u.Dropdown)&&void 0!==r?r:yS;return e.jsx(v,{name:"years","aria-label":h(),className:l.dropdown_year,style:c.dropdown_year,onChange:function(e){var r=oS(aj(n),Number(e.target.value));t.onChange(r)},value:n.getFullYear(),caption:d(n,{locale:s}),children:p.map(function(t){return e.jsx("option",{value:t.getFullYear(),children:d(t,{locale:s})},t.getFullYear())})})}function wS(){var e=mS(),t=function(e){var t=e.month,r=e.defaultMonth,n=e.today,o=t||r||n||new Date,i=e.toDate,a=e.fromDate,s=e.numberOfMonths,c=void 0===s?1:s;return i&&oj(i,o)<0&&(o=Ww(i,-1*(c-1))),a&&oj(o,a)<0&&(o=a),aj(o)}(e),r=function(e,t){var r=ie.useState(e),n=r[0];return[void 0===t?n:t,r[1]]}(t,e.month),n=r[0],o=r[1];return[n,function(t){var r;if(!e.disableNavigation){var n=aj(t);o(n),null===(r=e.onMonthChange)||void 0===r||r.call(e,n)}}]}var jS=ie.createContext(void 0);function SS(t){var r=mS(),n=wS(),o=n[0],i=n[1],a=function(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,o=aj(e),i=oj(aj(Ww(o,n)),o),a=[],s=0;s<i;s++){var c=Ww(o,s);a.push(c)}return r&&(a=a.reverse()),a}(o,r),s=function(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,o=t.numberOfMonths,i=void 0===o?1:o,a=n?i:1,s=aj(e);if(!r)return Ww(s,a);if(!(oj(r,e)<i))return Ww(s,a)}}(o,r),c=function(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,o=t.numberOfMonths,i=n?void 0===o?1:o:1,a=aj(e);if(!r)return Ww(a,-i);if(!(oj(a,r)<=0))return Ww(a,-i)}}(o,r),l=function(e){return a.some(function(t){return tS(e,t)})},u={currentMonth:o,displayMonths:a,goToMonth:i,goToDate:function(e,t){l(e)||(t&&eS(e,t)?i(Ww(e,1+-1*r.numberOfMonths)):i(e))},previousMonth:c,nextMonth:s,isDateDisplayed:l};return e.jsx(jS.Provider,{value:u,children:t.children})}function NS(){var e=ie.useContext(jS);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function kS(t){var r,n=mS(),o=n.classNames,i=n.styles,a=n.components,s=NS().goToMonth,c=function(e){s(Ww(e,t.displayIndex?-t.displayIndex:0))},l=null!==(r=null==a?void 0:a.CaptionLabel)&&void 0!==r?r:gS,u=e.jsx(l,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:o.caption_dropdowns,style:i.caption_dropdowns,children:[e.jsx("div",{className:o.vhidden,children:u}),e.jsx(bS,{onChange:c,displayMonth:t.displayMonth}),e.jsx(xS,{onChange:c,displayMonth:t.displayMonth})]})}function ES(t){return e.jsx("svg",iS({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function CS(t){return e.jsx("svg",iS({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var OS=ie.forwardRef(function(t,r){var n=mS(),o=n.classNames,i=n.styles,a=[o.button_reset,o.button];t.className&&a.push(t.className);var s=a.join(" "),c=iS(iS({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),e.jsx("button",iS({},t,{ref:r,type:"button",className:s,style:c}))});function TS(t){var r,n,o=mS(),i=o.dir,a=o.locale,s=o.classNames,c=o.styles,l=o.labels,u=l.labelPrevious,d=l.labelNext,h=o.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var p=u(t.previousMonth,{locale:a}),f=[s.nav_button,s.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:a}),g=[s.nav_button,s.nav_button_next].join(" "),v=null!==(r=null==h?void 0:h.IconRight)&&void 0!==r?r:CS,y=null!==(n=null==h?void 0:h.IconLeft)&&void 0!==n?n:ES;return e.jsxs("div",{className:s.nav,style:c.nav,children:[!t.hidePrevious&&e.jsx(OS,{name:"previous-month","aria-label":p,className:f,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:"rtl"===i?e.jsx(v,{className:s.nav_icon,style:c.nav_icon}):e.jsx(y,{className:s.nav_icon,style:c.nav_icon})}),!t.hideNext&&e.jsx(OS,{name:"next-month","aria-label":m,className:g,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:"rtl"===i?e.jsx(y,{className:s.nav_icon,style:c.nav_icon}):e.jsx(v,{className:s.nav_icon,style:c.nav_icon})})]})}function AS(t){var r=mS().numberOfMonths,n=NS(),o=n.previousMonth,i=n.nextMonth,a=n.goToMonth,s=n.displayMonths,c=s.findIndex(function(e){return tS(t.displayMonth,e)}),l=0===c,u=c===s.length-1,d=r>1&&(l||!u),h=r>1&&(u||!l);return e.jsx(TS,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:i,previousMonth:o,onPreviousClick:function(){o&&a(o)},onNextClick:function(){i&&a(i)}})}function _S(t){var r,n,o=mS(),i=o.classNames,a=o.disableNavigation,s=o.styles,c=o.captionLayout,l=o.components,u=null!==(r=null==l?void 0:l.CaptionLabel)&&void 0!==r?r:gS;return n=a?e.jsx(u,{id:t.id,displayMonth:t.displayMonth}):"dropdown"===c?e.jsx(kS,{displayMonth:t.displayMonth,id:t.id}):"dropdown-buttons"===c?e.jsxs(e.Fragment,{children:[e.jsx(kS,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(AS,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(AS,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:i.caption,style:s.caption,children:n})}function PS(t){var r=mS(),n=r.footer,o=r.styles,i=r.classNames.tfoot;return n?e.jsx("tfoot",{className:i,style:o.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function DS(){var t=mS(),r=t.classNames,n=t.styles,o=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,s=t.ISOWeek,c=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,u=function(e,t,r){for(var n=r?Yw(new Date):Kw(new Date,{locale:e,weekStartsOn:t}),o=[],i=0;i<7;i++){var a=$w(n,i);o.push(a)}return o}(i,a,s);return e.jsxs("tr",{style:n.head_row,className:r.head_row,children:[o&&e.jsx("td",{style:n.head_cell,className:r.head_cell}),u.map(function(t,o){return e.jsx("th",{scope:"col",className:r.head_cell,style:n.head_cell,"aria-label":l(t,{locale:i}),children:c(t,{locale:i})},o)})]})}function IS(){var t,r=mS(),n=r.classNames,o=r.styles,i=r.components,a=null!==(t=null==i?void 0:i.HeadRow)&&void 0!==t?t:DS;return e.jsx("thead",{style:o.head,className:n.head,children:e.jsx(a,{})})}function MS(t){var r=mS(),n=r.locale,o=r.formatters.formatDay;return e.jsx(e.Fragment,{children:o(t.date,{locale:n})})}var RS=ie.createContext(void 0);function LS(t){if(!sS(t.initialProps)){return e.jsx(RS.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:t.children})}return e.jsx(FS,{initialProps:t.initialProps,children:t.children})}function FS(t){var r=t.initialProps,n=t.children,o=r.selected,i=r.min,a=r.max,s={disabled:[]};o&&s.disabled.push(function(e){var t=a&&o.length>a-1,r=o.some(function(t){return rj(t,e)});return Boolean(t&&!r)});var c={selected:o,onDayClick:function(e,t,n){var s,c;if((null===(s=r.onDayClick)||void 0===s||s.call(r,e,t,n),!Boolean(t.selected&&i&&(null==o?void 0:o.length)===i))&&!Boolean(!t.selected&&a&&(null==o?void 0:o.length)===a)){var l=o?aS([],o,!0):[];if(t.selected){var u=l.findIndex(function(t){return rj(e,t)});l.splice(u,1)}else l.push(e);null===(c=r.onSelect)||void 0===c||c.call(r,l,e,t,n)}},modifiers:s};return e.jsx(RS.Provider,{value:c,children:n})}function zS(){var e=ie.useContext(RS);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var US,qS,BS=ie.createContext(void 0);function VS(t){if(!cS(t.initialProps)){return e.jsx(BS.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:t.children})}return e.jsx($S,{initialProps:t.initialProps,children:t.children})}function $S(t){var r=t.initialProps,n=t.children,o=r.selected,i=o||{},a=i.from,s=i.to,c=r.min,l=r.max,u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(u.range_start=[a],s?(u.range_end=[s],rj(a,s)||(u.range_middle=[{after:a,before:s}])):u.range_end=[a]):s&&(u.range_start=[s],u.range_end=[s]),c&&(a&&!s&&u.disabled.push({after:rS(a,c-1),before:$w(a,c-1)}),a&&s&&u.disabled.push({after:a,before:$w(a,c-1)}),!a&&s&&u.disabled.push({after:rS(s,c-1),before:$w(s,c-1)})),l){if(a&&!s&&(u.disabled.push({before:$w(a,1-l)}),u.disabled.push({after:$w(a,l-1)})),a&&s){var d=l-(Zw(s,a)+1);u.disabled.push({before:rS(a,d)}),u.disabled.push({after:$w(s,d)})}!a&&s&&(u.disabled.push({before:$w(s,1-l)}),u.disabled.push({after:$w(s,l-1)}))}return e.jsx(BS.Provider,{value:{selected:o,onDayClick:function(e,t,n){var i,a;null===(i=r.onDayClick)||void 0===i||i.call(r,e,t,n);var s=function(e,t){var r=t||{},n=r.from,o=r.to;if(n&&o){if(rj(o,e)&&rj(n,e))return;if(rj(o,e))return{from:o,to:void 0};if(rj(n,e))return;return Zj(n,e)?{from:e,to:o}:{from:n,to:e}}return o?Zj(e,o)?{from:o,to:e}:{from:e,to:o}:n?eS(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}(e,o);null===(a=r.onSelect)||void 0===a||a.call(r,s,e,t,n)},modifiers:u},children:n})}function WS(){var e=ie.useContext(BS);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function HS(e){return Array.isArray(e)?aS([],e,!0):void 0!==e?[e]:[]}(qS=US||(US={})).Outside="outside",qS.Disabled="disabled",qS.Selected="selected",qS.Hidden="hidden",qS.Today="today",qS.RangeStart="range_start",qS.RangeEnd="range_end",qS.RangeMiddle="range_middle";var GS=US.Selected,KS=US.Disabled,YS=US.Hidden,XS=US.Today,JS=US.RangeEnd,QS=US.RangeMiddle,ZS=US.RangeStart,eN=US.Outside;var tN=ie.createContext(void 0);function rN(t){var r=mS(),n=function(e,t,r){var n,o=((n={})[GS]=HS(e.selected),n[KS]=HS(e.disabled),n[YS]=HS(e.hidden),n[XS]=[e.today],n[JS]=[],n[QS]=[],n[ZS]=[],n[eN]=[],n);return e.fromDate&&o[KS].push({before:e.fromDate}),e.toDate&&o[KS].push({after:e.toDate}),sS(e)?o[KS]=o[KS].concat(t.modifiers[KS]):cS(e)&&(o[KS]=o[KS].concat(r.modifiers[KS]),o[ZS]=r.modifiers[ZS],o[QS]=r.modifiers[QS],o[JS]=r.modifiers[JS]),o}(r,zS(),WS()),o=function(e){var t={};return Object.entries(e).forEach(function(e){var r=e[0],n=e[1];t[r]=HS(n)}),t}(r.modifiers),i=iS(iS({},n),o);return e.jsx(tN.Provider,{value:i,children:t.children})}function nN(){var e=ie.useContext(tN);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function oN(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(nj(t))return rj(e,t);var r,n,o,i,a;if(function(e){return Array.isArray(e)&&e.every(nj)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return r=e,i=(n=t).from,a=n.to,i&&a?(Zw(a,i)<0&&(i=(o=[a,i])[0],a=o[1]),Zw(r,i)>=0&&Zw(a,r)>=0):a?rj(a,r):!!i&&rj(i,r);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var s=Zw(t.before,e)>0,c=Zw(t.after,e)<0;return Zj(t.before,t.after)?c&&s:s||c}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?Zw(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?Zw(t.before,e)>0:"function"==typeof t&&t(e)})}function iN(e,t,r){var n=Object.keys(t).reduce(function(r,n){var o=t[n];return oN(e,o)&&r.push(n),r},[]),o={};return n.forEach(function(e){return o[e]=!0}),r&&!tS(e,r)&&(o.outside=!0),o}function aN(e,t){var r=t.moveBy,n=t.direction,o=t.context,i=t.modifiers,a=t.retry,s=void 0===a?{count:0,lastFocused:e}:a,c=o.weekStartsOn,l=o.fromDate,u=o.toDate,d=o.locale,h={day:$w,week:ej,month:Ww,year:tj,startOfWeek:function(e){return o.ISOWeek?Yw(e):Kw(e,{locale:d,weekStartsOn:c})},endOfWeek:function(e){return o.ISOWeek?lj(e):cj(e,{locale:d,weekStartsOn:c})}}[r](e,"after"===n?1:-1);"before"===n&&l?h=function(e){var t,r;if(Bw(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!==Uw(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=Vw(e);(void 0===r||r<t||isNaN(Number(t)))&&(r=t)}),r||new Date(NaN)}([l,h]):"after"===n&&u&&(h=function(e){var t,r;if(Bw(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!==Uw(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach(function(e){var t=Vw(e);(void 0===r||r>t||isNaN(t.getDate()))&&(r=t)}),r||new Date(NaN)}([u,h]));var p=!0;if(i){var f=iN(h,i);p=!f.disabled&&!f.hidden}return p?h:s.count>365?s.lastFocused:aN(h,{moveBy:r,direction:n,context:o,modifiers:i,retry:iS(iS({},s),{count:s.count+1})})}var sN=ie.createContext(void 0);function cN(t){var r=NS(),n=nN(),o=ie.useState(),i=o[0],a=o[1],s=ie.useState(),c=s[0],l=s[1],u=function(e,t){for(var r,n,o=aj(e[0]),i=ij(e[e.length-1]),a=o;a<=i;){var s=iN(a,t);if(s.disabled||s.hidden)a=$w(a,1);else{if(s.selected)return a;s.today&&!n&&(n=a),r||(r=a),a=$w(a,1)}}return n||r}(r.displayMonths,n),d=(null!=i?i:c&&r.isDateDisplayed(c))?c:u,h=function(e){a(e)},p=mS(),f=function(e,t){if(i){var o=aN(i,{moveBy:e,direction:t,context:p,modifiers:n});rj(i,o)||(r.goToDate(o,i),h(o))}},m={focusedDay:i,focusTarget:d,blur:function(){l(i),a(void 0)},focus:h,focusDayAfter:function(){return f("day","after")},focusDayBefore:function(){return f("day","before")},focusWeekAfter:function(){return f("week","after")},focusWeekBefore:function(){return f("week","before")},focusMonthBefore:function(){return f("month","before")},focusMonthAfter:function(){return f("month","after")},focusYearBefore:function(){return f("year","before")},focusYearAfter:function(){return f("year","after")},focusStartOfWeek:function(){return f("startOfWeek","before")},focusEndOfWeek:function(){return f("endOfWeek","after")}};return e.jsx(sN.Provider,{value:m,children:t.children})}function lN(){var e=ie.useContext(sN);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var uN=ie.createContext(void 0);function dN(t){if(!lS(t.initialProps)){return e.jsx(uN.Provider,{value:{selected:void 0},children:t.children})}return e.jsx(hN,{initialProps:t.initialProps,children:t.children})}function hN(t){var r=t.initialProps,n=t.children,o={selected:r.selected,onDayClick:function(e,t,n){var o,i,a;null===(o=r.onDayClick)||void 0===o||o.call(r,e,t,n),!t.selected||r.required?null===(a=r.onSelect)||void 0===a||a.call(r,e,e,t,n):null===(i=r.onSelect)||void 0===i||i.call(r,void 0,e,t,n)}};return e.jsx(uN.Provider,{value:o,children:n})}function pN(){var e=ie.useContext(uN);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function fN(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(t){var n=e.modifiersClassNames[t];if(n)r.push(n);else if(function(e){return Object.values(US).includes(e)}(t)){var o=e.classNames["day_".concat(t)];o&&r.push(o)}}),r}function mN(t,r,n){var o,i,a,s=mS(),c=lN(),l=function(e,t){return iN(e,nN(),t)}(t,r),u=function(e,t){var r=mS(),n=pN(),o=zS(),i=WS(),a=lN(),s=a.focusDayAfter,c=a.focusDayBefore,l=a.focusWeekAfter,u=a.focusWeekBefore,d=a.blur,h=a.focus,p=a.focusMonthBefore,f=a.focusMonthAfter,m=a.focusYearBefore,g=a.focusYearAfter,v=a.focusStartOfWeek,y=a.focusEndOfWeek;return{onClick:function(a){var s,c,l,u;lS(r)?null===(s=n.onDayClick)||void 0===s||s.call(n,e,t,a):sS(r)?null===(c=o.onDayClick)||void 0===c||c.call(o,e,t,a):cS(r)?null===(l=i.onDayClick)||void 0===l||l.call(i,e,t,a):null===(u=r.onDayClick)||void 0===u||u.call(r,e,t,a)},onFocus:function(n){var o;h(e),null===(o=r.onDayFocus)||void 0===o||o.call(r,e,t,n)},onBlur:function(n){var o;d(),null===(o=r.onDayBlur)||void 0===o||o.call(r,e,t,n)},onKeyDown:function(n){var o;switch(n.key){case"ArrowLeft":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?s():c();break;case"ArrowRight":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?c():s();break;case"ArrowDown":n.preventDefault(),n.stopPropagation(),l();break;case"ArrowUp":n.preventDefault(),n.stopPropagation(),u();break;case"PageUp":n.preventDefault(),n.stopPropagation(),n.shiftKey?m():p();break;case"PageDown":n.preventDefault(),n.stopPropagation(),n.shiftKey?g():f();break;case"Home":n.preventDefault(),n.stopPropagation(),v();break;case"End":n.preventDefault(),n.stopPropagation(),y()}null===(o=r.onDayKeyDown)||void 0===o||o.call(r,e,t,n)},onKeyUp:function(n){var o;null===(o=r.onDayKeyUp)||void 0===o||o.call(r,e,t,n)},onMouseEnter:function(n){var o;null===(o=r.onDayMouseEnter)||void 0===o||o.call(r,e,t,n)},onMouseLeave:function(n){var o;null===(o=r.onDayMouseLeave)||void 0===o||o.call(r,e,t,n)},onPointerEnter:function(n){var o;null===(o=r.onDayPointerEnter)||void 0===o||o.call(r,e,t,n)},onPointerLeave:function(n){var o;null===(o=r.onDayPointerLeave)||void 0===o||o.call(r,e,t,n)},onTouchCancel:function(n){var o;null===(o=r.onDayTouchCancel)||void 0===o||o.call(r,e,t,n)},onTouchEnd:function(n){var o;null===(o=r.onDayTouchEnd)||void 0===o||o.call(r,e,t,n)},onTouchMove:function(n){var o;null===(o=r.onDayTouchMove)||void 0===o||o.call(r,e,t,n)},onTouchStart:function(n){var o;null===(o=r.onDayTouchStart)||void 0===o||o.call(r,e,t,n)}}}(t,l),d=function(){var e=mS(),t=pN(),r=zS(),n=WS();return lS(e)?t.selected:sS(e)?r.selected:cS(e)?n.selected:void 0}(),h=Boolean(s.onDayClick||"default"!==s.mode);ie.useEffect(function(){var e;l.outside||c.focusedDay&&h&&rj(c.focusedDay,t)&&(null===(e=n.current)||void 0===e||e.focus())},[c.focusedDay,t,n,h,l.outside]);var p=fN(s,l).join(" "),f=function(e,t){var r=iS({},e.styles.day);return Object.keys(t).forEach(function(t){var n;r=iS(iS({},r),null===(n=e.modifiersStyles)||void 0===n?void 0:n[t])}),r}(s,l),m=Boolean(l.outside&&!s.showOutsideDays||l.hidden),g=null!==(a=null===(i=s.components)||void 0===i?void 0:i.DayContent)&&void 0!==a?a:MS,v={style:f,className:p,children:e.jsx(g,{date:t,displayMonth:r,activeModifiers:l}),role:"gridcell"},y=c.focusTarget&&rj(c.focusTarget,t)&&!l.outside,b=c.focusedDay&&rj(c.focusedDay,t),x=iS(iS(iS({},v),((o={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,o.tabIndex=b||y?0:-1,o)),u);return{isButton:h,isHidden:m,activeModifiers:l,selectedDays:d,buttonProps:x,divProps:v}}function gN(t){var r=ie.useRef(null),n=mN(t.date,t.displayMonth,r);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(OS,iS({name:"day",ref:r},n.buttonProps)):e.jsx("div",iS({},n.divProps))}function vN(t){var r=t.number,n=t.dates,o=mS(),i=o.onWeekNumberClick,a=o.styles,s=o.classNames,c=o.locale,l=o.labels.labelWeekNumber,u=(0,o.formatters.formatWeekNumber)(Number(r),{locale:c});if(!i)return e.jsx("span",{className:s.weeknumber,style:a.weeknumber,children:u});var d=l(Number(r),{locale:c});return e.jsx(OS,{name:"week-number","aria-label":d,className:s.weeknumber,style:a.weeknumber,onClick:function(e){i(r,n,e)},children:u})}function yN(t){var r,n,o,i=mS(),a=i.styles,s=i.classNames,c=i.showWeekNumber,l=i.components,u=null!==(r=null==l?void 0:l.Day)&&void 0!==r?r:gN,d=null!==(n=null==l?void 0:l.WeekNumber)&&void 0!==n?n:vN;return c&&(o=e.jsx("td",{className:s.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:s.row,style:a.row,children:[o,t.dates.map(function(r){return e.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:e.jsx(u,{displayMonth:t.displayMonth,date:r})},Xj(r))})]})}function bN(e,t,r){for(var n=(null==r?void 0:r.ISOWeek)?lj(t):cj(t,r),o=(null==r?void 0:r.ISOWeek)?Yw(e):Kw(e,r),i=Zw(n,o),a=[],s=0;s<=i;s++)a.push($w(o,s));var c=a.reduce(function(e,t){var n=(null==r?void 0:r.ISOWeek)?function(e){Bw(1,arguments);var t=Vw(e),r=Yw(t).getTime()-Xw(t).getTime();return Math.round(r/6048e5)+1}(t):function(e,t){Bw(1,arguments);var r=Vw(e),n=Kw(r,t).getTime()-Jj(r,t).getTime();return Math.round(n/6048e5)+1}(t,r),o=e.find(function(e){return e.weekNumber===n});return o?(o.dates.push(t),e):(e.push({weekNumber:n,dates:[t]}),e)},[]);return c}function xN(t){var r,n,o,i=mS(),a=i.locale,s=i.classNames,c=i.styles,l=i.hideHead,u=i.fixedWeeks,d=i.components,h=i.weekStartsOn,p=i.firstWeekContainsDate,f=i.ISOWeek,m=function(e,t){var r=bN(aj(e),ij(e),t);if(null==t?void 0:t.useFixedWeeks){var n=Qj(e,t);if(n<6){var o=r[r.length-1],i=o.dates[o.dates.length-1],a=ej(i,6-n),s=bN(ej(i,1),a,t);r.push.apply(r,s)}}return r}(t.displayMonth,{useFixedWeeks:Boolean(u),ISOWeek:f,locale:a,weekStartsOn:h,firstWeekContainsDate:p}),g=null!==(r=null==d?void 0:d.Head)&&void 0!==r?r:IS,v=null!==(n=null==d?void 0:d.Row)&&void 0!==n?n:yN,y=null!==(o=null==d?void 0:d.Footer)&&void 0!==o?o:PS;return e.jsxs("table",{id:t.id,className:s.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&e.jsx(g,{}),e.jsx("tbody",{className:s.tbody,style:c.tbody,children:m.map(function(r){return e.jsx(v,{displayMonth:t.displayMonth,dates:r.dates,weekNumber:r.weekNumber},r.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}var wN="undefined"!=typeof window&&window.document&&window.document.createElement?ie.useLayoutEffect:ie.useEffect,jN=!1,SN=0;function NN(){return"react-day-picker-".concat(++SN)}function kN(t){var r,n,o=mS(),i=o.dir,a=o.classNames,s=o.styles,c=o.components,l=NS().displayMonths,u=function(e){var t,r=null!=e?e:jN?NN():null,n=ie.useState(r),o=n[0],i=n[1];return wN(function(){null===o&&i(NN())},[]),ie.useEffect(function(){!1===jN&&(jN=!0)},[]),null!==(t=null!=e?e:o)&&void 0!==t?t:void 0}(o.id?"".concat(o.id,"-").concat(t.displayIndex):void 0),d=o.id?"".concat(o.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],p=s.month,f=0===t.displayIndex,m=t.displayIndex===l.length-1,g=!f&&!m;"rtl"===i&&(m=(r=[f,m])[0],f=r[1]),f&&(h.push(a.caption_start),p=iS(iS({},p),s.caption_start)),m&&(h.push(a.caption_end),p=iS(iS({},p),s.caption_end)),g&&(h.push(a.caption_between),p=iS(iS({},p),s.caption_between));var v=null!==(n=null==c?void 0:c.Caption)&&void 0!==n?n:_S;return e.jsxs("div",{className:h.join(" "),style:p,children:[e.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(xN,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function EN(t){var r=mS(),n=r.classNames,o=r.styles;return e.jsx("div",{className:n.months,style:o.months,children:t.children})}function CN(t){var r,n,o=t.initialProps,i=mS(),a=lN(),s=NS(),c=ie.useState(!1),l=c[0],u=c[1];ie.useEffect(function(){i.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,l,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var h=iS(iS({},i.styles.root),i.style),p=Object.keys(o).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var r;return iS(iS({},e),((r={})[t]=o[t],r))},{}),f=null!==(n=null===(r=o.components)||void 0===r?void 0:r.Months)&&void 0!==n?n:EN;return e.jsx("div",iS({className:d.join(" "),style:h,dir:i.dir,id:i.id,nonce:o.nonce,title:o.title,lang:o.lang},p,{children:e.jsx(f,{children:s.displayMonths.map(function(t,r){return e.jsx(kN,{displayIndex:r,displayMonth:t},r)})})}))}function ON(t){var r=t.children,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["children"]);return e.jsx(fS,{initialProps:n,children:e.jsx(SS,{children:e.jsx(dN,{initialProps:n,children:e.jsx(LS,{initialProps:n,children:e.jsx(VS,{initialProps:n,children:e.jsx(rN,{children:e.jsx(cN,{children:r})})})})})})})}function TN(t){return e.jsx(ON,iS({},t,{children:e.jsx(CN,{initialProps:t})}))}function AN({className:t,classNames:r,showOutsideDays:n=!0,...o}){return e.jsx(TN,{showOutsideDays:n,className:_n("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:_n("h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:_n("h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...t})=>e.jsx(Ke,{className:"h-4 w-4"}),IconRight:({...t})=>e.jsx(Ye,{className:"h-4 w-4"})},...o})}AN.displayName="Calendar";var _N="Popover",[PN,DN]=n(_N,[g]),IN=g(),[MN,RN]=PN(_N),LN=t=>{const{__scopePopover:r,children:n,open:o,defaultOpen:i,onOpenChange:a,modal:s=!1}=t,l=IN(r),u=ie.useRef(null),[d,h]=ie.useState(!1),[p,f]=c({prop:o,defaultProp:i??!1,onChange:a,caller:_N});return e.jsx(te,{...l,children:e.jsx(MN,{scope:r,contentId:re(),triggerRef:u,open:p,onOpenChange:f,onOpenToggle:ie.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:d,onCustomAnchorAdd:ie.useCallback(()=>h(!0),[]),onCustomAnchorRemove:ie.useCallback(()=>h(!1),[]),modal:s,children:n})})};LN.displayName=_N;var FN="PopoverAnchor";ie.forwardRef((t,r)=>{const{__scopePopover:n,...o}=t,i=RN(FN,n),a=IN(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:c}=i;return ie.useEffect(()=>(s(),()=>c()),[s,c]),e.jsx(v,{...a,...o,ref:r})}).displayName=FN;var zN="PopoverTrigger",UN=ie.forwardRef((t,r)=>{const{__scopePopover:n,...i}=t,s=RN(zN,n),c=IN(n),l=o(r,s.triggerRef),u=e.jsx(a.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":QN(s.open),...i,ref:l,onClick:d(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?u:e.jsx(v,{asChild:!0,...c,children:u})});UN.displayName=zN;var qN="PopoverPortal",[BN,VN]=PN(qN,{forceMount:void 0}),$N=t=>{const{__scopePopover:r,forceMount:n,children:o,container:i}=t,a=RN(qN,r);return e.jsx(BN,{scope:r,forceMount:n,children:e.jsx(l,{present:n||a.open,children:e.jsx(p,{asChild:!0,container:i,children:o})})})};$N.displayName=qN;var WN="PopoverContent",HN=ie.forwardRef((t,r)=>{const n=VN(WN,t.__scopePopover),{forceMount:o=n.forceMount,...i}=t,a=RN(WN,t.__scopePopover);return e.jsx(l,{present:o||a.open,children:a.modal?e.jsx(KN,{...i,ref:r}):e.jsx(YN,{...i,ref:r})})});HN.displayName=WN;var GN=ee("PopoverContent.RemoveScroll"),KN=ie.forwardRef((t,r)=>{const n=RN(WN,t.__scopePopover),i=ie.useRef(null),a=o(r,i),s=ie.useRef(!1);return ie.useEffect(()=>{const e=i.current;if(e)return X(e)},[]),e.jsx(J,{as:GN,allowPinchZoom:!0,children:e.jsx(XN,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:d(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),s.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:d(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;s.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:d(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),YN=ie.forwardRef((t,r)=>{const n=RN(WN,t.__scopePopover),o=ie.useRef(!1),i=ie.useRef(!1);return e.jsx(XN,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var r,a;null==(r=t.onCloseAutoFocus)||r.call(t,e),e.defaultPrevented||(o.current||null==(a=n.triggerRef.current)||a.focus(),e.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:e=>{var r,a;null==(r=t.onInteractOutside)||r.call(t,e),e.defaultPrevented||(o.current=!0,"pointerdown"===e.detail.originalEvent.type&&(i.current=!0));const s=e.target;(null==(a=n.triggerRef.current)?void 0:a.contains(s))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&i.current&&e.preventDefault()}})}),XN=ie.forwardRef((t,r)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=t,p=RN(WN,n),f=IN(n);return Q(),e.jsx(Z,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:a,children:e.jsx(y,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:e.jsx(b,{"data-state":QN(p.open),role:"dialog",id:p.contentId,...f,...h,ref:r,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),JN="PopoverClose";ie.forwardRef((t,r)=>{const{__scopePopover:n,...o}=t,i=RN(JN,n);return e.jsx(a.button,{type:"button",...o,ref:r,onClick:d(t.onClick,()=>i.onOpenChange(!1))})}).displayName=JN;function QN(e){return e?"open":"closed"}ie.forwardRef((t,r)=>{const{__scopePopover:n,...o}=t,i=IN(n);return e.jsx(w,{...i,...o,ref:r})}).displayName="PopoverArrow";var ZN=$N,ek=HN;const tk=LN,rk=UN,nk=ae.forwardRef(({className:t,align:r="center",sideOffset:n=4,...o},i)=>e.jsx(ZN,{children:e.jsx(ek,{ref:i,align:r,sideOffset:n,className:_n("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})}));nk.displayName=ek.displayName;var ok=Array.isArray,ik="object"==typeof ce&&ce&&ce.Object===Object&&ce,ak=ik,sk="object"==typeof self&&self&&self.Object===Object&&self,ck=ak||sk||Function("return this")(),lk=ck.Symbol,uk=lk,dk=Object.prototype,hk=dk.hasOwnProperty,pk=dk.toString,fk=uk?uk.toStringTag:void 0;var mk=function(e){var t=hk.call(e,fk),r=e[fk];try{e[fk]=void 0;var n=!0}catch(i){}var o=pk.call(e);return n&&(t?e[fk]=r:delete e[fk]),o},gk=Object.prototype.toString;var vk=mk,yk=function(e){return gk.call(e)},bk=lk?lk.toStringTag:void 0;var xk=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":bk&&bk in Object(e)?vk(e):yk(e)};var wk=function(e){return null!=e&&"object"==typeof e},jk=xk,Sk=wk;var Nk=function(e){return"symbol"==typeof e||Sk(e)&&"[object Symbol]"==jk(e)},kk=ok,Ek=Nk,Ck=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ok=/^\w*$/;var Tk=function(e,t){if(kk(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ek(e))||(Ok.test(e)||!Ck.test(e)||null!=t&&e in Object(t))};var Ak=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const _k=oe(Ak);var Pk=xk,Dk=Ak;var Ik=function(e){if(!Dk(e))return!1;var t=Pk(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Mk=oe(Ik);var Rk,Lk=ck["__core-js_shared__"],Fk=(Rk=/[^.]+$/.exec(Lk&&Lk.keys&&Lk.keys.IE_PROTO||""))?"Symbol(src)_1."+Rk:"";var zk=function(e){return!!Fk&&Fk in e},Uk=Function.prototype.toString;var qk=function(e){if(null!=e){try{return Uk.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Bk=Ik,Vk=zk,$k=Ak,Wk=qk,Hk=/^\[object .+?Constructor\]$/,Gk=Function.prototype,Kk=Object.prototype,Yk=Gk.toString,Xk=Kk.hasOwnProperty,Jk=RegExp("^"+Yk.call(Xk).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qk=function(e){return!(!$k(e)||Vk(e))&&(Bk(e)?Jk:Hk).test(Wk(e))},Zk=function(e,t){return null==e?void 0:e[t]};var eE=function(e,t){var r=Zk(e,t);return Qk(r)?r:void 0},tE=eE(Object,"create"),rE=tE;var nE=function(){this.__data__=rE?rE(null):{},this.size=0};var oE=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},iE=tE,aE=Object.prototype.hasOwnProperty;var sE=function(e){var t=this.__data__;if(iE){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return aE.call(t,e)?t[e]:void 0},cE=tE,lE=Object.prototype.hasOwnProperty;var uE=tE;var dE=nE,hE=oE,pE=sE,fE=function(e){var t=this.__data__;return cE?void 0!==t[e]:lE.call(t,e)},mE=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=uE&&void 0===t?"__lodash_hash_undefined__":t,this};function gE(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gE.prototype.clear=dE,gE.prototype.delete=hE,gE.prototype.get=pE,gE.prototype.has=fE,gE.prototype.set=mE;var vE=gE;var yE=function(){this.__data__=[],this.size=0};var bE=function(e,t){return e===t||e!=e&&t!=t},xE=bE;var wE=function(e,t){for(var r=e.length;r--;)if(xE(e[r][0],t))return r;return-1},jE=wE,SE=Array.prototype.splice;var NE=wE;var kE=wE;var EE=wE;var CE=yE,OE=function(e){var t=this.__data__,r=jE(t,e);return!(r<0)&&(r==t.length-1?t.pop():SE.call(t,r,1),--this.size,!0)},TE=function(e){var t=this.__data__,r=NE(t,e);return r<0?void 0:t[r][1]},AE=function(e){return kE(this.__data__,e)>-1},_E=function(e,t){var r=this.__data__,n=EE(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function PE(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}PE.prototype.clear=CE,PE.prototype.delete=OE,PE.prototype.get=TE,PE.prototype.has=AE,PE.prototype.set=_E;var DE=PE,IE=eE(ck,"Map"),ME=vE,RE=DE,LE=IE;var FE=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var zE=function(e,t){var r=e.__data__;return FE(t)?r["string"==typeof t?"string":"hash"]:r.map},UE=zE;var qE=zE;var BE=zE;var VE=zE;var $E=function(){this.size=0,this.__data__={hash:new ME,map:new(LE||RE),string:new ME}},WE=function(e){var t=UE(this,e).delete(e);return this.size-=t?1:0,t},HE=function(e){return qE(this,e).get(e)},GE=function(e){return BE(this,e).has(e)},KE=function(e,t){var r=VE(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function YE(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}YE.prototype.clear=$E,YE.prototype.delete=WE,YE.prototype.get=HE,YE.prototype.has=GE,YE.prototype.set=KE;var XE=YE,JE=XE;function QE(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(QE.Cache||JE),r}QE.Cache=JE;var ZE=QE;const eC=oe(ZE);var tC=ZE;var rC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nC=/\\(\\)?/g,oC=function(e){var t=tC(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rC,function(e,r,n,o){t.push(n?o.replace(nC,"$1"):r||e)}),t});var iC=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},aC=iC,sC=ok,cC=Nk,lC=lk?lk.prototype:void 0,uC=lC?lC.toString:void 0;var dC=function e(t){if("string"==typeof t)return t;if(sC(t))return aC(t,e)+"";if(cC(t))return uC?uC.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},hC=dC;var pC=function(e){return null==e?"":hC(e)},fC=ok,mC=Tk,gC=oC,vC=pC;var yC=function(e,t){return fC(e)?e:mC(e,t)?[e]:gC(vC(e))},bC=Nk;var xC=function(e){if("string"==typeof e||bC(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},wC=yC,jC=xC;var SC=function(e,t){for(var r=0,n=(t=wC(t,e)).length;null!=e&&r<n;)e=e[jC(t[r++])];return r&&r==n?e:void 0},NC=SC;var kC=function(e,t,r){var n=null==e?void 0:NC(e,t);return void 0===n?r:n};const EC=oe(kC);const CC=oe(function(e){return null==e});var OC=xk,TC=ok,AC=wk;const _C=oe(function(e){return"string"==typeof e||!TC(e)&&AC(e)&&"[object String]"==OC(e)});var PC,DC={exports:{}},IC={},MC=Symbol.for("react.element"),RC=Symbol.for("react.portal"),LC=Symbol.for("react.fragment"),FC=Symbol.for("react.strict_mode"),zC=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),qC=Symbol.for("react.context"),BC=Symbol.for("react.server_context"),VC=Symbol.for("react.forward_ref"),$C=Symbol.for("react.suspense"),WC=Symbol.for("react.suspense_list"),HC=Symbol.for("react.memo"),GC=Symbol.for("react.lazy"),KC=Symbol.for("react.offscreen");function YC(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case MC:switch(e=e.type){case LC:case zC:case FC:case $C:case WC:return e;default:switch(e=e&&e.$$typeof){case BC:case qC:case VC:case GC:case HC:case UC:return e;default:return t}}case RC:return t}}}PC=Symbol.for("react.module.reference"),IC.ContextConsumer=qC,IC.ContextProvider=UC,IC.Element=MC,IC.ForwardRef=VC,IC.Fragment=LC,IC.Lazy=GC,IC.Memo=HC,IC.Portal=RC,IC.Profiler=zC,IC.StrictMode=FC,IC.Suspense=$C,IC.SuspenseList=WC,IC.isAsyncMode=function(){return!1},IC.isConcurrentMode=function(){return!1},IC.isContextConsumer=function(e){return YC(e)===qC},IC.isContextProvider=function(e){return YC(e)===UC},IC.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===MC},IC.isForwardRef=function(e){return YC(e)===VC},IC.isFragment=function(e){return YC(e)===LC},IC.isLazy=function(e){return YC(e)===GC},IC.isMemo=function(e){return YC(e)===HC},IC.isPortal=function(e){return YC(e)===RC},IC.isProfiler=function(e){return YC(e)===zC},IC.isStrictMode=function(e){return YC(e)===FC},IC.isSuspense=function(e){return YC(e)===$C},IC.isSuspenseList=function(e){return YC(e)===WC},IC.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===LC||e===zC||e===FC||e===$C||e===WC||e===KC||"object"==typeof e&&null!==e&&(e.$$typeof===GC||e.$$typeof===HC||e.$$typeof===UC||e.$$typeof===qC||e.$$typeof===VC||e.$$typeof===PC||void 0!==e.getModuleId)},IC.typeOf=YC,DC.exports=IC;var XC=DC.exports,JC=xk,QC=wk;var ZC=function(e){return"number"==typeof e||QC(e)&&"[object Number]"==JC(e)};const eO=oe(ZC);var tO=ZC;const rO=oe(function(e){return tO(e)&&e!=+e});var nO=function(e){return 0===e?0:e>0?1:-1},oO=function(e){return _C(e)&&e.indexOf("%")===e.length-1},iO=function(e){return eO(e)&&!rO(e)},aO=function(e){return iO(e)||_C(e)},sO=0,cO=function(e){var t=++sO;return"".concat(e||"").concat(t)},lO=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!iO(e)&&!_C(e))return n;if(oO(e)){var i=e.indexOf("%");r=t*parseFloat(e.slice(0,i))/100}else r=+e;return rO(r)&&(r=n),o&&r>t&&(r=t),r},uO=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},dO=function(e,t){return iO(e)&&iO(t)?function(r){return e+r*(t-e)}:function(){return t}};function hO(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):EC(e,t))===r}):null}var pO=function(e,t){return iO(e)&&iO(t)?e-t:_C(e)&&_C(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function fO(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function mO(e){return(mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gO=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vO=["points","pathLength"],yO={svg:["viewBox","children"],polygon:vO,polyline:vO},bO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],xO=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(ie.isValidElement(e)&&(r=e.props),!_k(r))return null;var n={};return Object.keys(r).forEach(function(e){bO.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},wO=function(e,t,r){if(!_k(e)||"object"!==mO(e))return null;var n=null;return Object.keys(e).forEach(function(o){var i=e[o];bO.includes(o)&&"function"==typeof i&&(n||(n={}),n[o]=function(e,t,r){return function(n){return e(t,r,n),null}}(i,t,r))}),n},jO=["children"],SO=["children"];function NO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function kO(e){return(kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var EO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},CO=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},OO=null,TO=null,AO=function e(t){if(t===OO&&Array.isArray(TO))return TO;var r=[];return ie.Children.forEach(t,function(t){CC(t)||(XC.isFragment(t)?r=r.concat(e(t.props.children)):r.push(t))}),TO=r,OO=t,r};function _O(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return CO(e)}):[CO(t)],AO(e).forEach(function(e){var t=EC(e,"type.displayName")||EC(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function PO(e,t){var r=_O(e,t);return r&&r[0]}var DO=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!iO(r)||r<=0||!iO(n)||n<=0)},IO=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],MO=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(ie.isValidElement(e)&&(n=e.props),!_k(n))return null;var o={};return Object.keys(n).forEach(function(e){var i;(function(e,t,r,n){var o,i=null!==(o=null==yO?void 0:yO[n])&&void 0!==o?o:[];return t.startsWith("data-")||!Mk(e)&&(n&&i.includes(t)||gO.includes(t))||r&&bO.includes(t)})(null===(i=n)||void 0===i?void 0:i[e],e,t,r)&&(o[e]=n[e])}),o},RO=function e(t,r){if(t===r)return!0;var n=ie.Children.count(t);if(n!==ie.Children.count(r))return!1;if(0===n)return!0;if(1===n)return LO(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var o=0;o<n;o++){var i=t[o],a=r[o];if(Array.isArray(i)||Array.isArray(a)){if(!e(i,a))return!1}else if(!LO(i,a))return!1}return!0},LO=function(e,t){if(CC(e)&&CC(t))return!0;if(!CC(e)&&!CC(t)){var r=e.props||{},n=r.children,o=NO(r,jO),i=t.props||{},a=i.children,s=NO(i,SO);return n&&a?fO(o,s)&&RO(n,a):!n&&!a&&fO(o,s)}return!1},FO=function(e,t){var r=[],n={};return AO(e).forEach(function(e,o){if(function(e){return e&&e.type&&_C(e.type)&&IO.indexOf(e.type)>=0}(e))r.push(e);else if(e){var i=CO(e.type),a=t[i]||{},s=a.handler,c=a.once;if(s&&(!c||!n[i])){var l=s(e,i,o);r.push(l),n[i]=!0}}}),r},zO=["children","width","height","viewBox","className","style","title","desc"];function UO(){return UO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UO.apply(this,arguments)}function qO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function BO(e){var t=e.children,r=e.width,n=e.height,o=e.viewBox,i=e.className,a=e.style,s=e.title,c=e.desc,l=qO(e,zO),u=o||{width:r,height:n,x:0,y:0},d=$r("recharts-surface",i);return ae.createElement("svg",UO({},MO(l,!0,"svg"),{className:d,width:r,height:n,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ae.createElement("title",null,s),ae.createElement("desc",null,c),t)}var VO=["children","className"];function $O(){return $O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$O.apply(this,arguments)}function WO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var HO=ae.forwardRef(function(e,t){var r=e.children,n=e.className,o=WO(e,VO),i=$r("recharts-layer",n);return ae.createElement("g",$O({className:i},MO(o,!0),{ref:t}),r)}),GO=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o]};var KO=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i};var YO=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:KO(e,t,r)},XO=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var JO=function(e){return XO.test(e)};var QO=function(e){return e.split("")},ZO="\\ud800-\\udfff",eT="["+ZO+"]",tT="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rT="\\ud83c[\\udffb-\\udfff]",nT="[^"+ZO+"]",oT="(?:\\ud83c[\\udde6-\\uddff]){2}",iT="[\\ud800-\\udbff][\\udc00-\\udfff]",aT="(?:"+tT+"|"+rT+")"+"?",sT="[\\ufe0e\\ufe0f]?",cT=sT+aT+("(?:\\u200d(?:"+[nT,oT,iT].join("|")+")"+sT+aT+")*"),lT="(?:"+[nT+tT+"?",tT,oT,iT,eT].join("|")+")",uT=RegExp(rT+"(?="+rT+")|"+lT+cT,"g");var dT=QO,hT=JO,pT=function(e){return e.match(uT)||[]};var fT=YO,mT=JO,gT=function(e){return hT(e)?pT(e):dT(e)},vT=pC;const yT=oe(function(e){return function(t){t=vT(t);var r=mT(t)?gT(t):void 0,n=r?r[0]:t.charAt(0),o=r?fT(r,1).join(""):t.slice(1);return n[e]()+o}}("toUpperCase"));function bT(e){return function(){return e}}const xT=Math.cos,wT=Math.sin,jT=Math.sqrt,ST=Math.PI,NT=2*ST,kT=Math.PI,ET=2*kT,CT=1e-6,OT=ET-CT;function TT(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class AT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?TT:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return TT;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,o,i){this._append`C${+e},${+t},${+r},${+n},${this._x1=+o},${this._y1=+i}`}arcTo(e,t,r,n,o){if(e=+e,t=+t,r=+r,n=+n,(o=+o)<0)throw new Error(`negative radius: ${o}`);let i=this._x1,a=this._y1,s=r-e,c=n-t,l=i-e,u=a-t,d=l*l+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>CT)if(Math.abs(u*s-c*l)>CT&&o){let h=r-i,p=n-a,f=s*s+c*c,m=h*h+p*p,g=Math.sqrt(f),v=Math.sqrt(d),y=o*Math.tan((kT-Math.acos((f+d-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>CT&&this._append`L${e+b*l},${t+b*u}`,this._append`A${o},${o},0,0,${+(u*h>l*p)},${this._x1=e+x*s},${this._y1=t+x*c}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,o,i){if(e=+e,t=+t,i=!!i,(r=+r)<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),s=r*Math.sin(n),c=e+a,l=t+s,u=1^i,d=i?n-o:o-n;null===this._x1?this._append`M${c},${l}`:(Math.abs(this._x1-c)>CT||Math.abs(this._y1-l)>CT)&&this._append`L${c},${l}`,r&&(d<0&&(d=d%ET+ET),d>OT?this._append`A${r},${r},0,1,${u},${e-a},${t-s}A${r},${r},0,1,${u},${this._x1=c},${this._y1=l}`:d>CT&&this._append`A${r},${r},0,${+(d>=kT)},${u},${this._x1=e+r*Math.cos(o)},${this._y1=t+r*Math.sin(o)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function _T(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new AT(t)}function PT(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function DT(e){this._context=e}function IT(e){return new DT(e)}function MT(e){return e[0]}function RT(e){return e[1]}function LT(e,t){var r=bT(!0),n=null,o=IT,i=null,a=_T(s);function s(s){var c,l,u,d=(s=PT(s)).length,h=!1;for(null==n&&(i=o(u=a())),c=0;c<=d;++c)!(c<d&&r(l=s[c],c,s))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(l,c,s),+t(l,c,s));if(u)return i=null,u+""||null}return e="function"==typeof e?e:void 0===e?MT:bT(e),t="function"==typeof t?t:void 0===t?RT:bT(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:bT(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:bT(+e),s):t},s.defined=function(e){return arguments.length?(r="function"==typeof e?e:bT(!!e),s):r},s.curve=function(e){return arguments.length?(o=e,null!=n&&(i=o(n)),s):o},s.context=function(e){return arguments.length?(null==e?n=i=null:i=o(n=e),s):n},s}function FT(e,t,r){var n=null,o=bT(!0),i=null,a=IT,s=null,c=_T(l);function l(l){var u,d,h,p,f,m=(l=PT(l)).length,g=!1,v=new Array(m),y=new Array(m);for(null==i&&(s=a(f=c())),u=0;u<=m;++u){if(!(u<m&&o(p=l[u],u,l))===g)if(g=!g)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=d;--h)s.point(v[h],y[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(p,u,l),y[u]=+t(p,u,l),s.point(n?+n(p,u,l):v[u],r?+r(p,u,l):y[u]))}if(f)return s=null,f+""||null}function u(){return LT().defined(o).curve(a).context(i)}return e="function"==typeof e?e:void 0===e?MT:bT(+e),t="function"==typeof t?t:bT(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?RT:bT(+r),l.x=function(t){return arguments.length?(e="function"==typeof t?t:bT(+t),n=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:bT(+t),l):e},l.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:bT(+e),l):n},l.y=function(e){return arguments.length?(t="function"==typeof e?e:bT(+e),r=null,l):t},l.y0=function(e){return arguments.length?(t="function"==typeof e?e:bT(+e),l):t},l.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:bT(+e),l):r},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(r)},l.lineX1=function(){return u().x(n).y(t)},l.defined=function(e){return arguments.length?(o="function"==typeof e?e:bT(!!e),l):o},l.curve=function(e){return arguments.length?(a=e,null!=i&&(s=a(i)),l):a},l.context=function(e){return arguments.length?(null==e?i=s=null:s=a(i=e),l):i},l}DT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class zT{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const UT={draw(e,t){const r=jT(t/ST);e.moveTo(r,0),e.arc(0,0,r,0,NT)}},qT={draw(e,t){const r=jT(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},BT=jT(1/3),VT=2*BT,$T={draw(e,t){const r=jT(t/VT),n=r*BT;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},WT={draw(e,t){const r=jT(t),n=-r/2;e.rect(n,n,r,r)}},HT=wT(ST/10)/wT(7*ST/10),GT=wT(NT/10)*HT,KT=-xT(NT/10)*HT,YT={draw(e,t){const r=jT(.8908130915292852*t),n=GT*r,o=KT*r;e.moveTo(0,-r),e.lineTo(n,o);for(let i=1;i<5;++i){const t=NT*i/5,a=xT(t),s=wT(t);e.lineTo(s*r,-a*r),e.lineTo(a*n-s*o,s*n+a*o)}e.closePath()}},XT=jT(3),JT={draw(e,t){const r=-jT(t/(3*XT));e.moveTo(0,2*r),e.lineTo(-XT*r,-r),e.lineTo(XT*r,-r),e.closePath()}},QT=-.5,ZT=jT(3)/2,eA=1/jT(12),tA=3*(eA/2+1),rA={draw(e,t){const r=jT(t/tA),n=r/2,o=r*eA,i=n,a=r*eA+r,s=-i,c=a;e.moveTo(n,o),e.lineTo(i,a),e.lineTo(s,c),e.lineTo(QT*n-ZT*o,ZT*n+QT*o),e.lineTo(QT*i-ZT*a,ZT*i+QT*a),e.lineTo(QT*s-ZT*c,ZT*s+QT*c),e.lineTo(QT*n+ZT*o,QT*o-ZT*n),e.lineTo(QT*i+ZT*a,QT*a-ZT*i),e.lineTo(QT*s+ZT*c,QT*c-ZT*s),e.closePath()}};function nA(){}function oA(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function iA(e){this._context=e}function aA(e){this._context=e}function sA(e){this._context=e}function cA(e){this._context=e}function lA(e){return e<0?-1:1}function uA(e,t,r){var n=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(n||o<0&&-0),a=(r-e._y1)/(o||n<0&&-0),s=(i*o+a*n)/(n+o);return(lA(i)+lA(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(s))||0}function dA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function hA(e,t,r){var n=e._x0,o=e._y0,i=e._x1,a=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,o+s*t,i-s,a-s*r,i,a)}function pA(e){this._context=e}function fA(e){this._context=new mA(e)}function mA(e){this._context=e}function gA(e){this._context=e}function vA(e){var t,r,n=e.length-1,o=new Array(n),i=new Array(n),a=new Array(n);for(o[0]=0,i[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,i[t]=4,a[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,i[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/i[t-1],i[t]-=r,a[t]-=r*a[t-1];for(o[n-1]=a[n-1]/i[n-1],t=n-2;t>=0;--t)o[t]=(a[t]-o[t+1])/i[t];for(i[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-o[t+1];return[o,i]}function yA(e,t){this._context=e,this._t=t}function bA(e,t){if((o=e.length)>1)for(var r,n,o,i=1,a=e[t[0]],s=a.length;i<o;++i)for(n=a,a=e[t[i]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function xA(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function wA(e,t){return e[t]}function jA(e){const t=[];return t.key=e,t}function SA(e){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}iA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},aA.prototype={areaStart:nA,areaEnd:nA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:oA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},sA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:oA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},cA.prototype={areaStart:nA,areaEnd:nA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},pA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hA(this,this._t0,dA(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hA(this,dA(this,r=uA(this,e,t)),r);break;default:hA(this,this._t0,r=uA(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(fA.prototype=Object.create(pA.prototype)).point=function(e,t){pA.prototype.point.call(this,t,e)},mA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,o,i){this._context.bezierCurveTo(t,e,n,r,i,o)}},gA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=vA(e),o=vA(t),i=0,a=1;a<r;++i,++a)this._context.bezierCurveTo(n[0][i],o[0][i],n[1][i],o[1][i],e[a],t[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},yA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var NA=["type","size","sizeType"];function kA(){return kA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kA.apply(this,arguments)}function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(t){OA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function OA(e,t,r){var n;return n=function(e,t){if("object"!=SA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==SA(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TA(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var AA={symbolCircle:UT,symbolCross:qT,symbolDiamond:$T,symbolSquare:WT,symbolStar:YT,symbolTriangle:JT,symbolWye:rA},_A=Math.PI/180,PA=function(e){var t,r,n=e.type,o=void 0===n?"circle":n,i=e.size,a=void 0===i?64:i,s=e.sizeType,c=void 0===s?"area":s,l=CA(CA({},TA(e,NA)),{},{type:o,size:a,sizeType:c}),u=l.className,d=l.cx,h=l.cy,p=MO(l,!0);return d===+d&&h===+h&&a===+a?ae.createElement("path",kA({},p,{className:$r("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(yT(e));return AA[t]||UT}(o),r=function(e,t){let r=null,n=_T(o);function o(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return e="function"==typeof e?e:bT(e||UT),t="function"==typeof t?t:bT(void 0===t?64:+t),o.type=function(t){return arguments.length?(e="function"==typeof t?t:bT(t),o):e},o.size=function(e){return arguments.length?(t="function"==typeof e?e:bT(+e),o):t},o.context=function(e){return arguments.length?(r=null==e?null:e,o):r},o}().type(t).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*_A;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(a,c,o)),r())})):null};function DA(e){return(DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IA(){return IA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IA.apply(this,arguments)}function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BA(n.key),n)}}function LA(e,t,r){return t=zA(t),function(e,t){if(t&&("object"===DA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,FA()?Reflect.construct(t,r||[],zA(e).constructor):t.apply(e,r))}function FA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(FA=function(){return!!e})()}function zA(e){return(zA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UA(e,t){return(UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qA(e,t,r){return(t=BA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BA(e){var t=function(e,t){if("object"!=DA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DA(t)?t:t+""}PA.registerSymbol=function(e,t){AA["symbol".concat(yT(e))]=t};var VA=32,$A=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),LA(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UA(e,t)}(e,ie.PureComponent),t=e,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=VA/6,o=VA/3,i=e.inactive?t:e.color;if("plainline"===e.type)return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:VA,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(r,"h").concat(o,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*o,",").concat(r,"\n            H").concat(VA,"M").concat(2*o,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return ae.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(VA,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(t){qA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete a.legendIcon,ae.cloneElement(e.legendIcon,a)}return ae.createElement(PA,{fill:i,cx:r,cy:r,size:VA,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,o=t.layout,i=t.formatter,a=t.inactiveColor,s={x:0,y:0,width:VA,height:VA},c={display:"horizontal"===o?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var o=t.formatter||i,u=$r(qA(qA({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=Mk(t.value)?null:t.value;GO(!Mk(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?a:t.color;return ae.createElement("li",IA({className:u,style:c,key:"legend-item-".concat(r)},wO(e.props,t,r)),ae.createElement(BO,{width:n,height:n,viewBox:s,style:l},e.renderIcon(t)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},o?o(d,t,r):d))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],r&&RA(t.prototype,r),n&&RA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();qA($A,"displayName","Legend"),qA($A,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var WA=DE;var HA=DE,GA=IE,KA=XE;var YA=DE,XA=function(){this.__data__=new WA,this.size=0},JA=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},QA=function(e){return this.__data__.get(e)},ZA=function(e){return this.__data__.has(e)},e_=function(e,t){var r=this.__data__;if(r instanceof HA){var n=r.__data__;if(!GA||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new KA(n)}return r.set(e,t),this.size=r.size,this};function t_(e){var t=this.__data__=new YA(e);this.size=t.size}t_.prototype.clear=XA,t_.prototype.delete=JA,t_.prototype.get=QA,t_.prototype.has=ZA,t_.prototype.set=e_;var r_=t_;var n_=XE,o_=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i_=function(e){return this.__data__.has(e)};function a_(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n_;++t<r;)this.add(e[t])}a_.prototype.add=a_.prototype.push=o_,a_.prototype.has=i_;var s_=a_;var c_=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var l_=function(e,t){return e.has(t)},u_=s_,d_=c_,h_=l_;var p_=function(e,t,r,n,o,i){var a=1&r,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=i.get(e),u=i.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=2&r?new u_:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],m=t[d];if(n)var g=a?n(m,f,d,t,e,i):n(f,m,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!d_(t,function(e,t){if(!h_(p,t)&&(f===e||o(f,e,r,n,i)))return p.push(t)})){h=!1;break}}else if(f!==m&&!o(f,m,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h};var f_=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},m_=ck.Uint8Array,g_=bE,v_=p_,y_=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},b_=f_,x_=lk?lk.prototype:void 0,w_=x_?x_.valueOf:void 0;var j_=function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new m_(e),new m_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return g_(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=y_;case"[object Set]":var c=1&n;if(s||(s=b_),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var u=v_(s(e),s(t),n,o,i,a);return a.delete(e),u;case"[object Symbol]":if(w_)return w_.call(e)==w_.call(t)}return!1};var S_=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},N_=S_,k_=ok;var E_=function(e,t,r){var n=t(e);return k_(e)?n:N_(n,r(e))};var C_=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i},O_=function(){return[]},T_=Object.prototype.propertyIsEnumerable,A_=Object.getOwnPropertySymbols,__=A_?function(e){return null==e?[]:(e=Object(e),C_(A_(e),function(t){return T_.call(e,t)}))}:O_;var P_=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},D_=xk,I_=wk;var M_,R_,L_,F_,z_,U_,q_,B_,V_=function(e){return I_(e)&&"[object Arguments]"==D_(e)},$_=wk,W_=Object.prototype,H_=W_.hasOwnProperty,G_=W_.propertyIsEnumerable,K_=V_(function(){return arguments}())?V_:function(e){return $_(e)&&H_.call(e,"callee")&&!G_.call(e,"callee")},Y_={exports:{}};M_=Y_,L_=ck,F_=function(){return!1},z_=(R_=Y_.exports)&&!R_.nodeType&&R_,U_=z_&&M_&&!M_.nodeType&&M_,q_=U_&&U_.exports===z_?L_.Buffer:void 0,B_=(q_?q_.isBuffer:void 0)||F_,M_.exports=B_;var X_=Y_.exports,J_=/^(?:0|[1-9]\d*)$/;var Q_=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&J_.test(e))&&e>-1&&e%1==0&&e<t};var Z_=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},eP=xk,tP=Z_,rP=wk,nP={};nP["[object Float32Array]"]=nP["[object Float64Array]"]=nP["[object Int8Array]"]=nP["[object Int16Array]"]=nP["[object Int32Array]"]=nP["[object Uint8Array]"]=nP["[object Uint8ClampedArray]"]=nP["[object Uint16Array]"]=nP["[object Uint32Array]"]=!0,nP["[object Arguments]"]=nP["[object Array]"]=nP["[object ArrayBuffer]"]=nP["[object Boolean]"]=nP["[object DataView]"]=nP["[object Date]"]=nP["[object Error]"]=nP["[object Function]"]=nP["[object Map]"]=nP["[object Number]"]=nP["[object Object]"]=nP["[object RegExp]"]=nP["[object Set]"]=nP["[object String]"]=nP["[object WeakMap]"]=!1;var oP=function(e){return rP(e)&&tP(e.length)&&!!nP[eP(e)]};var iP=function(e){return function(t){return e(t)}},aP={exports:{}};!function(e,t){var r=ik,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=a}(aP,aP.exports);var sP=aP.exports,cP=oP,lP=iP,uP=sP&&sP.isTypedArray,dP=uP?lP(uP):cP,hP=P_,pP=K_,fP=ok,mP=X_,gP=Q_,vP=dP,yP=Object.prototype.hasOwnProperty;var bP=function(e,t){var r=fP(e),n=!r&&pP(e),o=!r&&!n&&mP(e),i=!r&&!n&&!o&&vP(e),a=r||n||o||i,s=a?hP(e.length,String):[],c=s.length;for(var l in e)!t&&!yP.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||gP(l,c))||s.push(l);return s},xP=Object.prototype;var wP=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xP)};var jP=function(e,t){return function(r){return e(t(r))}},SP=jP(Object.keys,Object),NP=wP,kP=SP,EP=Object.prototype.hasOwnProperty;var CP=Ik,OP=Z_;var TP=function(e){return null!=e&&OP(e.length)&&!CP(e)},AP=bP,_P=function(e){if(!NP(e))return kP(e);var t=[];for(var r in Object(e))EP.call(e,r)&&"constructor"!=r&&t.push(r);return t},PP=TP;var DP=function(e){return PP(e)?AP(e):_P(e)},IP=E_,MP=__,RP=DP;var LP=function(e){return IP(e,RP,MP)},FP=Object.prototype.hasOwnProperty;var zP=function(e,t,r,n,o,i){var a=1&r,s=LP(e),c=s.length;if(c!=LP(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:FP.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++l<c;){var m=e[u=s[l]],g=t[u];if(n)var v=a?n(g,m,u,t,e,i):n(m,g,u,e,t,i);if(!(void 0===v?m===g||o(m,g,r,n,i):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},UP=eE(ck,"DataView"),qP=eE(ck,"Promise"),BP=eE(ck,"Set"),VP=UP,$P=IE,WP=qP,HP=BP,GP=eE(ck,"WeakMap"),KP=xk,YP=qk,XP="[object Map]",JP="[object Promise]",QP="[object Set]",ZP="[object WeakMap]",eD="[object DataView]",tD=YP(VP),rD=YP($P),nD=YP(WP),oD=YP(HP),iD=YP(GP),aD=KP;(VP&&aD(new VP(new ArrayBuffer(1)))!=eD||$P&&aD(new $P)!=XP||WP&&aD(WP.resolve())!=JP||HP&&aD(new HP)!=QP||GP&&aD(new GP)!=ZP)&&(aD=function(e){var t=KP(e),r="[object Object]"==t?e.constructor:void 0,n=r?YP(r):"";if(n)switch(n){case tD:return eD;case rD:return XP;case nD:return JP;case oD:return QP;case iD:return ZP}return t});var sD=r_,cD=p_,lD=j_,uD=zP,dD=aD,hD=ok,pD=X_,fD=dP,mD="[object Arguments]",gD="[object Array]",vD="[object Object]",yD=Object.prototype.hasOwnProperty;var bD=function(e,t,r,n,o,i){var a=hD(e),s=hD(t),c=a?gD:dD(e),l=s?gD:dD(t),u=(c=c==mD?vD:c)==vD,d=(l=l==mD?vD:l)==vD,h=c==l;if(h&&pD(e)){if(!pD(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new sD),a||fD(e)?cD(e,t,r,n,o,i):lD(e,t,c,r,n,o,i);if(!(1&r)){var p=u&&yD.call(e,"__wrapped__"),f=d&&yD.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return i||(i=new sD),o(m,g,r,n,i)}}return!!h&&(i||(i=new sD),uD(e,t,r,n,o,i))},xD=wk;var wD=function e(t,r,n,o,i){return t===r||(null==t||null==r||!xD(t)&&!xD(r)?t!=t&&r!=r:bD(t,r,n,o,e,i))},jD=r_,SD=wD;var ND=Ak;var kD=function(e){return e==e&&!ND(e)},ED=kD,CD=DP;var OD=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},TD=function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=r[o])[0],l=e[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in e))return!1}else{var d=new jD;if(n)var h=n(l,u,c,e,t,d);if(!(void 0===h?SD(u,l,3,n,d):h))return!1}}return!0},AD=function(e){for(var t=CD(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,ED(o)]}return t},_D=OD;var PD=yC,DD=K_,ID=ok,MD=Q_,RD=Z_,LD=xC;var FD=function(e,t){return null!=e&&t in Object(e)},zD=function(e,t,r){for(var n=-1,o=(t=PD(t,e)).length,i=!1;++n<o;){var a=LD(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&RD(o)&&MD(a,o)&&(ID(e)||DD(e))};var UD=wD,qD=kC,BD=function(e,t){return null!=e&&zD(e,t,FD)},VD=Tk,$D=kD,WD=OD,HD=xC;var GD=function(e){return e};var KD=SC;var YD=function(e){return function(t){return null==t?void 0:t[e]}},XD=function(e){return function(t){return KD(t,e)}},JD=Tk,QD=xC;var ZD=function(e){var t=AD(e);return 1==t.length&&t[0][2]?_D(t[0][0],t[0][1]):function(r){return r===e||TD(r,e,t)}},eI=function(e,t){return VD(e)&&$D(t)?WD(HD(e),t):function(r){var n=qD(r,e);return void 0===n&&n===t?BD(r,e):UD(t,n,3)}},tI=GD,rI=ok,nI=function(e){return JD(e)?YD(QD(e)):XD(e)};var oI=function(e){return"function"==typeof e?e:null==e?tI:"object"==typeof e?rI(e)?eI(e[0],e[1]):ZD(e):nI(e)};var iI=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1};var aI=iI,sI=function(e){return e!=e},cI=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1};var lI=function(e,t,r){return t==t?cI(e,t,r):aI(e,sI,r)};var uI=function(e,t){return!!(null==e?0:e.length)&&lI(e,t,0)>-1};var dI=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1};var hI=BP,pI=function(){},fI=hI&&1/f_(new hI([,-0]))[1]==1/0?function(e){return new hI(e)}:pI,mI=s_,gI=uI,vI=dI,yI=l_,bI=fI,xI=f_;var wI=oI,jI=function(e,t,r){var n=-1,o=gI,i=e.length,a=!0,s=[],c=s;if(r)a=!1,o=vI;else if(i>=200){var l=t?null:bI(e);if(l)return xI(l);a=!1,o=yI,c=new mI}else c=t?[]:s;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,a&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),s.push(u)}else o(c,d,r)||(c!==s&&c.push(d),s.push(u))}return s};const SI=oe(function(e,t){return e&&e.length?jI(e,wI(t)):[]});function NI(e,t,r){return!0===t?SI(e,r):Mk(t)?SI(e,t):e}function kI(e){return(kI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var EI=["ref"];function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(t){II(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MI(n.key),n)}}function AI(e,t,r){return t=PI(t),function(e,t){if(t&&("object"===kI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_I()?Reflect.construct(t,r||[],PI(e).constructor):t.apply(e,r))}function _I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_I=function(){return!!e})()}function PI(e){return(PI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DI(e,t){return(DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function II(e,t,r){return(t=MI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MI(e){var t=function(e,t){if("object"!=kI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kI(t)?t:t+""}function RI(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function LI(e){return e.value}var FI=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return II(t=AI(this,e,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DI(e,t)}(e,ie.PureComponent),t=e,n=[{key:"getWithHeight",value:function(e,t){var r=OI(OI({},this.defaultProps),e.props).layout;return"vertical"===r&&iO(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?OI({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,o=n.layout,i=n.align,a=n.verticalAlign,s=n.margin,c=n.chartWidth,l=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===o?{left:((c||0)-this.getBBoxSnapshot().width)/2}:"right"===i?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===a?{top:((l||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),OI(OI({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,o=t.height,i=t.wrapperStyle,a=t.payloadUniqBy,s=t.payload,c=OI(OI({position:"absolute",width:n||"auto",height:o||"auto"},this.getDefaultPosition(i)),i);return ae.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(ae.isValidElement(e))return ae.cloneElement(e,t);if("function"==typeof e)return ae.createElement(e,t);t.ref;var r=RI(t,EI);return ae.createElement($A,r)}(r,OI(OI({},this.props),{},{payload:NI(s,a,LI)})))}}])&&TI(t.prototype,r),n&&TI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();II(FI,"displayName","Legend"),II(FI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var zI=K_,UI=ok,qI=lk?lk.isConcatSpreadable:void 0;var BI=S_,VI=function(e){return UI(e)||zI(e)||!!(qI&&e&&e[qI])};var $I=function e(t,r,n,o,i){var a=-1,s=t.length;for(n||(n=VI),i||(i=[]);++a<s;){var c=t[a];r>0&&n(c)?r>1?e(c,r-1,n,o,i):BI(i,c):o||(i[i.length]=c)}return i};var WI=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===r(i[c],c,i))break}return t}}(),HI=DP;var GI=function(e,t){return e&&WI(e,t,HI)},KI=TP;var YI=function(e,t){return function(r,n){if(null==r)return r;if(!KI(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&!1!==n(a[i],i,a););return r}}(GI),XI=YI,JI=TP;var QI=function(e,t){var r=-1,n=JI(e)?Array(e.length):[];return XI(e,function(e,o,i){n[++r]=t(e,o,i)}),n};var ZI=Nk;var eM=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,i=ZI(e),a=void 0!==t,s=null===t,c=t==t,l=ZI(t);if(!s&&!l&&!i&&e>t||i&&a&&c&&!s&&!l||n&&a&&c||!r&&c||!o)return 1;if(!n&&!i&&!l&&e<t||l&&r&&o&&!n&&!i||s&&r&&o||!a&&o||!c)return-1}return 0};var tM=iC,rM=SC,nM=oI,oM=QI,iM=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},aM=iP,sM=function(e,t,r){for(var n=-1,o=e.criteria,i=t.criteria,a=o.length,s=r.length;++n<a;){var c=eM(o[n],i[n]);if(c)return n>=s?c:c*("desc"==r[n]?-1:1)}return e.index-t.index},cM=GD,lM=ok;var uM=function(e,t,r){t=t.length?tM(t,function(e){return lM(e)?function(t){return rM(t,1===e.length?e[0]:e)}:e}):[cM];var n=-1;t=tM(t,aM(nM));var o=oM(e,function(e,r,o){return{criteria:tM(t,function(t){return t(e)}),index:++n,value:e}});return iM(o,function(e,t){return sM(e,t,r)})};var dM=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},hM=dM,pM=Math.max;var fM=function(e,t,r){return t=pM(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=pM(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),hM(e,this,s)}};var mM=function(e){return function(){return e}},gM=eE,vM=function(){try{var e=gM(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),yM=mM,bM=vM,xM=bM?function(e,t){return bM(e,"toString",{configurable:!0,enumerable:!1,value:yM(t),writable:!0})}:GD,wM=Date.now;var jM=function(e){var t=0,r=0;return function(){var n=wM(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(xM),SM=GD,NM=fM,kM=jM;var EM=bE,CM=TP,OM=Q_,TM=Ak;var AM=function(e,t,r){if(!TM(r))return!1;var n=typeof t;return!!("number"==n?CM(r)&&OM(t,r.length):"string"==n&&t in r)&&EM(r[t],e)},_M=$I,PM=uM,DM=AM;const IM=oe(function(e,t){return kM(NM(e,t,SM),e+"")}(function(e,t){if(null==e)return[];var r=t.length;return r>1&&DM(e,t[0],t[1])?t=[]:r>2&&DM(t[0],t[1],t[2])&&(t=[t[0]]),PM(e,_M(t,1),[])}));function MM(e){return(MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RM(){return RM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RM.apply(this,arguments)}function LM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function UM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zM(Object(r),!0).forEach(function(t){qM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qM(e,t,r){var n;return n=function(e,t){if("object"!=MM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==MM(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BM(e){return Array.isArray(e)&&aO(e[0])&&aO(e[1])?e.join(" ~ "):e}var VM=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,o=void 0===n?{}:n,i=e.itemStyle,a=void 0===i?{}:i,s=e.labelStyle,c=void 0===s?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,f=e.label,m=e.labelFormatter,g=e.accessibilityLayer,v=void 0!==g&&g,y=UM({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=UM({margin:0},c),x=!CC(f),w=x?f:"",j=$r("recharts-default-tooltip",h),S=$r("recharts-tooltip-label",p);x&&m&&null!=l&&(w=m(f,l));var N=v?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",RM({className:j,style:y},N),ae.createElement("p",{className:S,style:b},ae.isValidElement(w)?w:"".concat(w)),function(){if(l&&l.length){var e=(d?IM(l,d):l).map(function(e,t){if("none"===e.type)return null;var n=UM({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),o=e.formatter||u||BM,i=e.value,s=e.name,c=i,d=s;if(o&&null!=c&&null!=d){var h=o(i,s,e,t,l);if(Array.isArray(h)){var p=LM(h,2);c=p[0],d=p[1]}else c=h}return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},aO(d)?ae.createElement("span",{className:"recharts-tooltip-item-name"},d):null,aO(d)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},c),ae.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function $M(e){return($M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WM(e,t,r){var n;return n=function(e,t){if("object"!=$M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==$M(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var HM="recharts-tooltip-wrapper",GM={visibility:"hidden"};function KM(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return $r(HM,WM(WM(WM(WM({},"".concat(HM,"-right"),iO(r)&&t&&iO(t.x)&&r>=t.x),"".concat(HM,"-left"),iO(r)&&t&&iO(t.x)&&r<t.x),"".concat(HM,"-bottom"),iO(n)&&t&&iO(t.y)&&n>=t.y),"".concat(HM,"-top"),iO(n)&&t&&iO(t.y)&&n<t.y))}function YM(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,o=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(i&&iO(i[n]))return i[n];var u=r[n]-s-o,d=r[n]+o;return t[n]?a[n]?u:d:a[n]?u<c[n]?Math.max(d,c[n]):Math.max(u,c[n]):d+s>c[n]+l?Math.max(u,c[n]):Math.max(d,c[n])}function XM(e){return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JM(Object(r),!0).forEach(function(t){oR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iR(n.key),n)}}function eR(e,t,r){return t=rR(t),function(e,t){if(t&&("object"===XM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tR()?Reflect.construct(t,r||[],rR(e).constructor):t.apply(e,r))}function tR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(tR=function(){return!!e})()}function rR(e){return(rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nR(e,t){return(nR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oR(e,t,r){return(t=iR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iR(e){var t=function(e,t){if("object"!=XM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XM(t)?t:t+""}var aR=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return oR(t=eR(this,e,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),oR(t,"handleKeyDown",function(e){var r,n,o,i;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=t.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(o=null===(i=t.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==o?o:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nR(e,t)}(e,ie.PureComponent),t=e,(r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,o=t.animationDuration,i=t.animationEasing,a=t.children,s=t.coordinate,c=t.hasPayload,l=t.isAnimationActive,u=t.offset,d=t.position,h=t.reverseDirection,p=t.useTranslate3d,f=t.viewBox,m=t.wrapperStyle,g=function(e){var t,r,n=e.allowEscapeViewBox,o=e.coordinate,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,c=e.tooltipBox,l=e.useTranslate3d,u=e.viewBox;return{cssProperties:c.height>0&&c.width>0&&o?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=YM({allowEscapeViewBox:n,coordinate:o,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:r=YM({allowEscapeViewBox:n,coordinate:o,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:l}):GM,cssClasses:KM({translateX:t,translateY:r,coordinate:o})}}({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:f}),v=g.cssClasses,y=g.cssProperties,b=QM(QM({transition:l&&r?"transform ".concat(o,"ms ").concat(i):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},m);return ae.createElement("div",{tabIndex:-1,className:v,style:b,ref:function(t){e.wrapperNode=t}},a)}}])&&ZM(t.prototype,r),n&&ZM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),sR={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return sR[e]},set:function(e,t){if("string"==typeof e)sR[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){sR[t]=e[t]})}}};function cR(e){return(cR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lR(Object(r),!0).forEach(function(t){gR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vR(n.key),n)}}function hR(e,t,r){return t=fR(t),function(e,t){if(t&&("object"===cR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pR()?Reflect.construct(t,r||[],fR(e).constructor):t.apply(e,r))}function pR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(pR=function(){return!!e})()}function fR(e){return(fR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mR(e,t){return(mR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gR(e,t,r){return(t=vR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vR(e){var t=function(e,t){if("object"!=cR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cR(t)?t:t+""}function yR(e){return e.dataKey}var bR=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hR(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mR(e,t)}(e,ie.PureComponent),t=e,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,o=t.animationDuration,i=t.animationEasing,a=t.content,s=t.coordinate,c=t.filterNull,l=t.isAnimationActive,u=t.offset,d=t.payload,h=t.payloadUniqBy,p=t.position,f=t.reverseDirection,m=t.useTranslate3d,g=t.viewBox,v=t.wrapperStyle,y=null!=d?d:[];c&&y.length&&(y=NI(d.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,yR));var b=y.length>0;return ae.createElement(aR,{allowEscapeViewBox:n,animationDuration:o,animationEasing:i,isAnimationActive:l,active:r,coordinate:s,hasPayload:b,offset:u,position:p,reverseDirection:f,useTranslate3d:m,viewBox:g,wrapperStyle:v},function(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):"function"==typeof e?ae.createElement(e,t):ae.createElement(VM,t)}(a,uR(uR({},this.props),{},{payload:y})))}}])&&dR(t.prototype,r),n&&dR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();gR(bR,"displayName","Tooltip"),gR(bR,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!sR.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var xR=ck,wR=/\s/;var jR=function(e){for(var t=e.length;t--&&wR.test(e.charAt(t)););return t},SR=/^\s+/;var NR=function(e){return e?e.slice(0,jR(e)+1).replace(SR,""):e},kR=Ak,ER=Nk,CR=/^[-+]0x[0-9a-f]+$/i,OR=/^0b[01]+$/i,TR=/^0o[0-7]+$/i,AR=parseInt;var _R=function(e){if("number"==typeof e)return e;if(ER(e))return NaN;if(kR(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=kR(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=NR(e);var r=OR.test(e);return r||TR.test(e)?AR(e.slice(2),r?2:8):CR.test(e)?NaN:+e},PR=Ak,DR=function(){return xR.Date.now()},IR=_R,MR=Math.max,RR=Math.min;var LR=function(e,t,r){var n,o,i,a,s,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,i=o;return n=o=void 0,l=t,a=e.apply(i,r)}function f(e){var r=e-c;return void 0===c||r>=t||r<0||d&&e-l>=i}function m(){var e=DR();if(f(e))return g(e);s=setTimeout(m,function(e){var r=t-(e-c);return d?RR(r,i-(e-l)):r}(e))}function g(e){return s=void 0,h&&n?p(e):(n=o=void 0,a)}function v(){var e=DR(),r=f(e);if(n=arguments,o=this,c=e,r){if(void 0===s)return function(e){return l=e,s=setTimeout(m,t),u?p(e):a}(c);if(d)return clearTimeout(s),s=setTimeout(m,t),p(c)}return void 0===s&&(s=setTimeout(m,t)),a}return t=IR(t)||0,PR(r)&&(u=!!r.leading,i=(d="maxWait"in r)?MR(IR(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),v.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=o=s=void 0},v.flush=function(){return void 0===s?a:g(DR())},v},FR=LR,zR=Ak;const UR=oe(function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return zR(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),FR(e,t,{leading:n,maxWait:t,trailing:o})});function qR(e){return(qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BR(Object(r),!0).forEach(function(t){$R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $R(e,t,r){var n;return n=function(e,t){if("object"!=qR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==qR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return HR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GR=ie.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,o=void 0===n?{width:-1,height:-1}:n,i=e.width,a=void 0===i?"100%":i,s=e.height,c=void 0===s?"100%":s,l=e.minWidth,u=void 0===l?0:l,d=e.minHeight,h=e.maxHeight,p=e.children,f=e.debounce,m=void 0===f?0:f,g=e.id,v=e.className,y=e.onResize,b=e.style,x=void 0===b?{}:b,w=ie.useRef(null),j=ie.useRef();j.current=y,ie.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=WR(ie.useState({containerWidth:o.width,containerHeight:o.height}),2),N=S[0],k=S[1],E=ie.useCallback(function(e,t){k(function(r){var n=Math.round(e),o=Math.round(t);return r.containerWidth===n&&r.containerHeight===o?r:{containerWidth:n,containerHeight:o}})},[]);ie.useEffect(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,o=r.height;E(n,o),null===(t=j.current)||void 0===t||t.call(j,n,o)};m>0&&(e=UR(e,m,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=w.current.getBoundingClientRect(),n=r.width,o=r.height;return E(n,o),t.observe(w.current),function(){t.disconnect()}},[E,m]);var C=ie.useMemo(function(){var e=N.containerWidth,t=N.containerHeight;if(e<0||t<0)return null;GO(oO(a)||oO(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),GO(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=oO(a)?e:a,o=oO(c)?t:c;r&&r>0&&(n?o=n/r:o&&(n=o*r),h&&o>h&&(o=h)),GO(n>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,o,a,c,u,d,r);var i=!Array.isArray(p)&&CO(p.type).endsWith("Chart");return ae.Children.map(p,function(e){return ae.isValidElement(e)?ie.cloneElement(e,VR({width:n,height:o},i?{style:VR({height:"100%",width:"100%",maxHeight:o,maxWidth:n},e.props.style)}:{})):e})},[r,p,c,h,d,u,N,a]);return ae.createElement("div",{id:g?"".concat(g):void 0,className:$r("recharts-responsive-container",v),style:VR(VR({},x),{},{width:a,height:c,minWidth:u,minHeight:d,maxHeight:h}),ref:w},C)}),KR=function(e){return null};function YR(e){return(YR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function JR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XR(Object(r),!0).forEach(function(t){QR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function QR(e,t,r){var n;return n=function(e,t){if("object"!=YR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==YR(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}KR.displayName="Cell";var ZR={widthCache:{},cacheCount:0},eL={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tL="recharts_measurement_span";var rL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||sR.isSsr)return{width:0,height:0};var r,n=(r=JR({},t),Object.keys(r).forEach(function(e){r[e]||delete r[e]}),r),o=JSON.stringify({text:e,copyStyle:n});if(ZR.widthCache[o])return ZR.widthCache[o];try{var i=document.getElementById(tL);i||((i=document.createElement("span")).setAttribute("id",tL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=JR(JR({},eL),n);Object.assign(i.style,a),i.textContent="".concat(e);var s=i.getBoundingClientRect(),c={width:s.width,height:s.height};return ZR.widthCache[o]=c,++ZR.cacheCount>2e3&&(ZR.cacheCount=0,ZR.widthCache={}),c}catch(l){return{width:0,height:0}}};function nL(e){return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sL(n.key),n)}}function sL(e){var t=function(e,t){if("object"!=nL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nL(t)?t:t+""}var cL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uL=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dL=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},pL=Object.keys(hL),fL="NaN";var mL=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||uL.test(r)||(this.num=NaN,this.unit=""),pL.includes(r)&&(this.num=function(e,t){return e*hL[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=oL(null!==(r=dL.exec(t))&&void 0!==r?r:[],3),o=n[1],i=n[2];return new e(parseFloat(o),null!=i?i:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&aL(t.prototype,r),n&&aL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function gL(e){if(e.includes(fL))return fL;for(var t=e;t.includes("*")||t.includes("/");){var r,n=oL(null!==(r=cL.exec(t))&&void 0!==r?r:[],4),o=n[1],i=n[2],a=n[3],s=mL.parse(null!=o?o:""),c=mL.parse(null!=a?a:""),l="*"===i?s.multiply(c):s.divide(c);if(l.isNaN())return fL;t=t.replace(cL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=oL(null!==(u=lL.exec(t))&&void 0!==u?u:[],4),h=d[1],p=d[2],f=d[3],m=mL.parse(null!=h?h:""),g=mL.parse(null!=f?f:""),v="+"===p?m.add(g):m.subtract(g);if(v.isNaN())return fL;t=t.replace(lL,v.toString())}return t}var vL=/\(([^()]*)\)/;function yL(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=oL(vL.exec(t),2)[1];t=t.replace(vL,gL(r))}return t}(t),t=gL(t)}function bL(e){var t=function(e){try{return yL(e)}catch(t){return fL}}(e.slice(5,-1));return t===fL?"":t}var xL=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wL=["dx","dy","angle","className","breakAll"];function jL(){return jL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jL.apply(this,arguments)}function SL(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function NL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var EL=/[ \f\n\r\t\v\u2028\u2029]+/,CL=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var o=[];return CC(t)||(o=r?t.toString().split(""):t.toString().split(EL)),{wordsWithComputedWidth:o.map(function(e){return{word:e,width:rL(e,n).width}}),spaceWidth:r?0:rL(" ",n).width}}catch(i){return null}},OL=function(e){return[{words:CC(e)?[]:e.toString().split(EL)}]},TL=function(e){var t=e.width,r=e.scaleToFit,n=e.children,o=e.style,i=e.breakAll,a=e.maxLines;if((t||r)&&!sR.isSsr){var s=CL({breakAll:i,children:n,style:o});return s?function(e,t,r,n,o){var i=e.maxLines,a=e.children,s=e.style,c=e.breakAll,l=iO(i),u=a,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var i=t.word,a=t.width,s=e[e.length-1];if(s&&(null==n||o||s.width+a+r<Number(n)))s.words.push(i),s.width+=a+r;else{var c={words:[i],width:a};e.push(c)}return e},[])},h=d(t);if(!l)return h;for(var p,f=function(e){var t=u.slice(0,e),r=CL({breakAll:c,style:s,children:t+"…"}).wordsWithComputedWidth,o=d(r),a=o.length>i||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(o).width>Number(n);return[a,o]},m=0,g=u.length-1,v=0;m<=g&&v<=u.length-1;){var y=Math.floor((m+g)/2),b=NL(f(y-1),2),x=b[0],w=b[1],j=NL(f(y),1)[0];if(x||j||(m=y+1),x&&j&&(g=y-1),!x&&j){p=w;break}v++}return p||h}({breakAll:i,children:n,maxLines:a,style:o},s.wordsWithComputedWidth,s.spaceWidth,t,r):OL(n)}return OL(n)},AL="#808080",_L=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,o=void 0===n?0:n,i=e.lineHeight,a=void 0===i?"1em":i,s=e.capHeight,c=void 0===s?"0.71em":s,l=e.scaleToFit,u=void 0!==l&&l,d=e.textAnchor,h=void 0===d?"start":d,p=e.verticalAnchor,f=void 0===p?"end":p,m=e.fill,g=void 0===m?AL:m,v=SL(e,xL),y=ie.useMemo(function(){return TL({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:u,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,u,v.style,v.width]),b=v.dx,x=v.dy,w=v.angle,j=v.className,S=v.breakAll,N=SL(v,wL);if(!aO(r)||!aO(o))return null;var k,E=r+(iO(b)?b:0),C=o+(iO(x)?x:0);switch(f){case"start":k=bL("calc(".concat(c,")"));break;case"middle":k=bL("calc(".concat((y.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:k=bL("calc(".concat(y.length-1," * -").concat(a,")"))}var O=[];if(u){var T=y[0].width,A=v.width;O.push("scale(".concat((iO(A)?A/T:1)/T,")"))}return w&&O.push("rotate(".concat(w,", ").concat(E,", ").concat(C,")")),O.length&&(N.transform=O.join(" ")),ae.createElement("text",jL({},MO(N,!0),{x:E,y:C,className:$r("recharts-text",j),textAnchor:h,fill:g.includes("url")?AL:g}),y.map(function(e,t){var r=e.words.join(S?"":" ");return ae.createElement("tspan",{x:E,dy:0===t?k:a,key:"".concat(r,"-").concat(t)},r)}))};function PL(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function DL(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IL(e){let t,r,n;function o(e,n,o=0,i=e.length){if(o<i){if(0!==t(n,n))return i;do{const t=o+i>>>1;r(e[t],n)<0?o=t+1:i=t}while(o<i)}return o}return 2!==e.length?(t=PL,r=(t,r)=>PL(e(t),r),n=(t,r)=>e(t)-r):(t=e===PL||e===DL?e:ML,r=e,n=e),{left:o,center:function(e,t,r=0,i=e.length){const a=o(e,t,r,i-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n,o=0,i=e.length){if(o<i){if(0!==t(n,n))return i;do{const t=o+i>>>1;r(e[t],n)<=0?o=t+1:i=t}while(o<i)}return o}}}function ML(){return 0}function RL(e){return null===e?NaN:+e}const LL=IL(PL).right;IL(RL).center;const FL=LL;class zL extends Map{constructor(e,t=qL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(UL(this,e))}has(e){return super.has(UL(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function UL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qL(e){return null!==e&&"object"==typeof e?e.valueOf():e}function BL(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const VL=Math.sqrt(50),$L=Math.sqrt(10),WL=Math.sqrt(2);function HL(e,t,r){const n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),i=n/Math.pow(10,o),a=i>=VL?10:i>=$L?5:i>=WL?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=r&&r<2?HL(e,t,2*r):[s,c,l]}function GL(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[o,i,a]=n?HL(t,e,r):HL(e,t,r);if(!(i>=o))return[];const s=i-o+1,c=new Array(s);if(n)if(a<0)for(let l=0;l<s;++l)c[l]=(i-l)/-a;else for(let l=0;l<s;++l)c[l]=(i-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(o+l)/-a;else for(let l=0;l<s;++l)c[l]=(o+l)*a;return c}function KL(e,t,r){return HL(e=+e,t=+t,r=+r)[2]}function YL(e,t,r){r=+r;const n=(t=+t)<(e=+e),o=n?KL(t,e,r):KL(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function XL(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}function JL(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(r>o||void 0===r&&o>=o)&&(r=o)}return r}function QL(e,t,r=0,n=1/0,o){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(o=void 0===o?BL:function(e=PL){if(e===PL)return BL;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(o);n>r;){if(n-r>600){const i=n-r+1,a=t-r+1,s=Math.log(i),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(i-c)/i)*(a-i/2<0?-1:1);QL(e,t,Math.max(r,Math.floor(t-a*c/i+l)),Math.min(n,Math.floor(t+(i-a)*c/i+l)),o)}const i=e[t];let a=r,s=n;for(ZL(e,r,t),o(e[n],i)>0&&ZL(e,r,n);a<s;){for(ZL(e,a,s),++a,--s;o(e[a],i)<0;)++a;for(;o(e[s],i)>0;)--s}0===o(e[r],i)?ZL(e,r,s):(++s,ZL(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function ZL(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function eF(e,t,r=RL){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,o=(n-1)*t,i=Math.floor(o),a=+r(e[i],i,e);return a+(+r(e[i+1],i+1,e)-a)*(o-i)}}function tF(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function rF(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const nF=Symbol("implicit");function oF(){var e=new zL,t=[],r=[],n=nF;function o(o){let i=e.get(o);if(void 0===i){if(n!==nF)return n;e.set(o,i=t.push(o)-1)}return r[i%r.length]}return o.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new zL;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return o},o.range=function(e){return arguments.length?(r=Array.from(e),o):r.slice()},o.unknown=function(e){return arguments.length?(n=e,o):n},o.copy=function(){return oF(t,r).unknown(n)},tF.apply(o,arguments),o}function iF(){var e,t,r=oF().unknown(void 0),n=r.domain,o=r.range,i=0,a=1,s=!1,c=0,l=0,u=.5;function d(){var r=n().length,d=a<i,h=d?a:i,p=d?i:a;e=(p-h)/Math.max(1,r-c+2*l),s&&(e=Math.floor(e)),h+=(p-h-e*(r-c))*u,t=e*(1-c),s&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(o);++n<o;)i[n]=e+n*r;return i}(r).map(function(t){return h+e*t});return o(d?f.reverse():f)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([i,a]=e,i=+i,a=+a,d()):[i,a]},r.rangeRound=function(e){return[i,a]=e,i=+i,a=+a,s=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,d()):s},r.padding=function(e){return arguments.length?(c=Math.min(1,l=+e),d()):c},r.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),d()):c},r.paddingOuter=function(e){return arguments.length?(l=+e,d()):l},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return iF(n(),[i,a]).round(s).paddingInner(c).paddingOuter(l).align(u)},tF.apply(d(),arguments)}function aF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return aF(t())},e}function sF(){return aF(iF.apply(null,arguments).paddingInner(1))}function cF(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function lF(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function uF(){}var dF=.7,hF=1/dF,pF="\\s*([+-]?\\d+)\\s*",fF="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mF="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gF=/^#([0-9a-f]{3,8})$/,vF=new RegExp(`^rgb\\(${pF},${pF},${pF}\\)$`),yF=new RegExp(`^rgb\\(${mF},${mF},${mF}\\)$`),bF=new RegExp(`^rgba\\(${pF},${pF},${pF},${fF}\\)$`),xF=new RegExp(`^rgba\\(${mF},${mF},${mF},${fF}\\)$`),wF=new RegExp(`^hsl\\(${fF},${mF},${mF}\\)$`),jF=new RegExp(`^hsla\\(${fF},${mF},${mF},${fF}\\)$`),SF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function NF(){return this.rgb().formatHex()}function kF(){return this.rgb().formatRgb()}function EF(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gF.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?CF(t):3===r?new AF(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?OF(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?OF(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=vF.exec(e))?new AF(t[1],t[2],t[3],1):(t=yF.exec(e))?new AF(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=bF.exec(e))?OF(t[1],t[2],t[3],t[4]):(t=xF.exec(e))?OF(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=wF.exec(e))?RF(t[1],t[2]/100,t[3]/100,1):(t=jF.exec(e))?RF(t[1],t[2]/100,t[3]/100,t[4]):SF.hasOwnProperty(e)?CF(SF[e]):"transparent"===e?new AF(NaN,NaN,NaN,0):null}function CF(e){return new AF(e>>16&255,e>>8&255,255&e,1)}function OF(e,t,r,n){return n<=0&&(e=t=r=NaN),new AF(e,t,r,n)}function TF(e,t,r,n){return 1===arguments.length?((o=e)instanceof uF||(o=EF(o)),o?new AF((o=o.rgb()).r,o.g,o.b,o.opacity):new AF):new AF(e,t,r,null==n?1:n);var o}function AF(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function _F(){return`#${MF(this.r)}${MF(this.g)}${MF(this.b)}`}function PF(){const e=DF(this.opacity);return`${1===e?"rgb(":"rgba("}${IF(this.r)}, ${IF(this.g)}, ${IF(this.b)}${1===e?")":`, ${e})`}`}function DF(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function IF(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function MF(e){return((e=IF(e))<16?"0":"")+e.toString(16)}function RF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new FF(e,t,r,n)}function LF(e){if(e instanceof FF)return new FF(e.h,e.s,e.l,e.opacity);if(e instanceof uF||(e=EF(e)),!e)return new FF;if(e instanceof FF)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=NaN,s=i-o,c=(i+o)/2;return s?(a=t===i?(r-n)/s+6*(r<n):r===i?(n-t)/s+2:(t-r)/s+4,s/=c<.5?i+o:2-i-o,a*=60):s=c>0&&c<1?0:a,new FF(a,s,c,e.opacity)}function FF(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function zF(e){return(e=(e||0)%360)<0?e+360:e}function UF(e){return Math.max(0,Math.min(1,e||0))}function qF(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}cF(uF,EF,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NF,formatHex:NF,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return LF(this).formatHsl()},formatRgb:kF,toString:kF}),cF(AF,TF,lF(uF,{brighter(e){return e=null==e?hF:Math.pow(hF,e),new AF(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?dF:Math.pow(dF,e),new AF(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new AF(IF(this.r),IF(this.g),IF(this.b),DF(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_F,formatHex:_F,formatHex8:function(){return`#${MF(this.r)}${MF(this.g)}${MF(this.b)}${MF(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:PF,toString:PF})),cF(FF,function(e,t,r,n){return 1===arguments.length?LF(e):new FF(e,t,r,null==n?1:n)},lF(uF,{brighter(e){return e=null==e?hF:Math.pow(hF,e),new FF(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?dF:Math.pow(dF,e),new FF(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new AF(qF(e>=240?e-240:e+120,o,n),qF(e,o,n),qF(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new FF(zF(this.h),UF(this.s),UF(this.l),DF(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=DF(this.opacity);return`${1===e?"hsl(":"hsla("}${zF(this.h)}, ${100*UF(this.s)}%, ${100*UF(this.l)}%${1===e?")":`, ${e})`}`}}));const BF=e=>()=>e;function VF(e){return 1===(e=+e)?$F:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):BF(isNaN(t)?r:t)}}function $F(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):BF(isNaN(e)?t:e)}const WF=function e(t){var r=VF(t);function n(e,t){var n=r((e=TF(e)).r,(t=TF(t)).r),o=r(e.g,t.g),i=r(e.b,t.b),a=$F(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function HF(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function GF(e,t){var r,n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),a=new Array(n);for(r=0;r<o;++r)i[r]=ez(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<o;++r)a[r]=i[r](e);return a}}function KF(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function YF(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function XF(e,t){var r,n={},o={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=ez(e[r],t[r]):o[r]=t[r];return function(e){for(r in n)o[r]=n[r](e);return o}}var JF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QF=new RegExp(JF.source,"g");function ZF(e,t){var r,n,o,i=JF.lastIndex=QF.lastIndex=0,a=-1,s=[],c=[];for(e+="",t+="";(r=JF.exec(e))&&(n=QF.exec(t));)(o=n.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,c.push({i:a,x:YF(r,n)})),i=QF.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var r,n=0;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join("")})}function ez(e,t){var r,n,o=typeof t;return null==t||"boolean"===o?BF(t):("number"===o?YF:"string"===o?(r=EF(t))?(t=r,WF):ZF:t instanceof EF?WF:t instanceof Date?KF:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?GF:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?XF:YF:HF))(e,t)}function tz(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function rz(e){return+e}var nz=[0,1];function oz(e){return e}function iz(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function az(e,t,r){var n=e[0],o=e[1],i=t[0],a=t[1];return o<n?(n=iz(o,n),i=r(a,i)):(n=iz(n,o),i=r(i,a)),function(e){return i(n(e))}}function sz(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),i=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)o[a]=iz(e[a],e[a+1]),i[a]=r(t[a],t[a+1]);return function(t){var r=FL(e,t,1,n)-1;return i[r](o[r](t))}}function cz(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lz(){var e,t,r,n,o,i,a=nz,s=nz,c=ez,l=oz;function u(){var e,t,r,c=Math.min(a.length,s.length);return l!==oz&&(e=a[0],t=a[c-1],e>t&&(r=e,e=t,t=r),l=function(r){return Math.max(e,Math.min(t,r))}),n=c>2?sz:az,o=i=null,d}function d(t){return null==t||isNaN(t=+t)?r:(o||(o=n(a.map(e),s,c)))(e(l(t)))}return d.invert=function(r){return l(t((i||(i=n(s,a.map(e),YF)))(r)))},d.domain=function(e){return arguments.length?(a=Array.from(e,rz),u()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),c=tz,u()},d.clamp=function(e){return arguments.length?(l=!!e||oz,u()):l!==oz},d.interpolate=function(e){return arguments.length?(c=e,u()):c},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function uz(){return lz()(oz,oz)}function dz(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function hz(e){return(e=dz(Math.abs(e)))?e[1]:NaN}var pz,fz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mz(e){if(!(t=fz.exec(e)))throw new Error("invalid format: "+e);var t;return new gz({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function gz(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function vz(e,t){var r=dz(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}mz.prototype=gz.prototype,gz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const yz={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vz(100*e,t),r:vz,s:function(e,t){var r=dz(e,t);if(!r)return e+"";var n=r[0],o=r[1],i=o-(pz=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+dz(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bz(e){return e}var xz,wz,jz,Sz=Array.prototype.map,Nz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kz(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?bz:(t=Sz.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var o=e.length,i=[],a=0,s=t[0],c=0;o>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(e.substring(o-=s,o+s)),!((c+=s+1)>n));)s=t[a=(a+1)%t.length];return i.reverse().join(r)}),o=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?bz:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Sz.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=mz(e)).fill,r=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):yz[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var b="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?c:"",w=yz[y],j=/[defgprs%]/.test(y);function S(e){var o,i,c,h=b,S=x;if("c"===y)S=w(e)+S,e="";else{var N=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,r=e.length,n=1,o=-1;n<r;++n)switch(e[n]){case".":o=t=n;break;case"0":0===o&&(o=n),t=n;break;default:if(!+e[n])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),N&&0===+e&&"+"!==d&&(N=!1),h=(N?"("===d?d:l:"-"===d||"("===d?"":d)+h,S=("s"===y?Nz[8+pz/3]:"")+S+(N&&"("===d?")":""),j)for(o=-1,i=e.length;++o<i;)if(48>(c=e.charCodeAt(o))||c>57){S=(46===c?a+e.slice(o+1):e.slice(o))+S,e=e.slice(0,o);break}}m&&!p&&(e=n(e,1/0));var k=h.length+e.length+S.length,E=k<f?new Array(f-k+1).join(t):"";switch(m&&p&&(e=n(E+e,E.length?f-S.length:1/0),E=""),r){case"<":e=h+e+S+E;break;case"=":e=h+E+e+S;break;case"^":e=E.slice(0,k=E.length>>1)+h+e+S+E.slice(k);break;default:e=E+h+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var r=d(((e=mz(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(hz(t)/3))),o=Math.pow(10,-n),i=Nz[8+n/3];return function(e){return r(o*e)+i}}}}function Ez(e,t,r,n){var o,i=YL(e,t,r);switch((n=mz(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hz(t)/3)))-hz(Math.abs(e)))}(i,a))||(n.precision=o),jz(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hz(t)-hz(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=function(e){return Math.max(0,-hz(Math.abs(e)))}(i))||(n.precision=o-2*("%"===n.type))}return wz(n)}function Cz(e){var t=e.domain;return e.ticks=function(e){var r=t();return GL(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Ez(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,o,i=t(),a=0,s=i.length-1,c=i[a],l=i[s],u=10;for(l<c&&(o=c,c=l,l=o,o=a,a=s,s=o);u-- >0;){if((o=KL(c,l,r))===n)return i[a]=c,i[s]=l,t(i);if(o>0)c=Math.floor(c/o)*o,l=Math.ceil(l/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,l=Math.floor(l*o)/o}n=o}return e},e}function Oz(){var e=uz();return e.copy=function(){return cz(e,Oz())},tF.apply(e,arguments),Cz(e)}function Tz(e,t){var r,n=0,o=(e=e.slice()).length-1,i=e[n],a=e[o];return a<i&&(r=n,n=o,o=r,r=i,i=a,a=r),e[n]=t.floor(i),e[o]=t.ceil(a),e}function Az(e){return Math.log(e)}function _z(e){return Math.exp(e)}function Pz(e){return-Math.log(-e)}function Dz(e){return-Math.exp(-e)}function Iz(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Mz(e){return(t,r)=>-e(-t,r)}function Rz(e){const t=e(Az,_z),r=t.domain;let n,o,i=10;function a(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),o=function(e){return 10===e?Iz:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),r()[0]<0?(n=Mz(n),o=Mz(o),e(Pz,Dz)):e(Az,_z),t}return t.base=function(e){return arguments.length?(i=+e,a()):i},t.domain=function(e){return arguments.length?(r(e),a()):r()},t.ticks=e=>{const t=r();let a=t[0],s=t[t.length-1];const c=s<a;c&&([a,s]=[s,a]);let l,u,d=n(a),h=n(s);const p=null==e?10:+e;let f=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),a>0){for(;d<=h;++d)for(l=1;l<i;++l)if(u=d<0?l/o(-d):l*o(d),!(u<a)){if(u>s)break;f.push(u)}}else for(;d<=h;++d)for(l=i-1;l>=1;--l)if(u=d>0?l/o(-d):l*o(d),!(u<a)){if(u>s)break;f.push(u)}2*f.length<p&&(f=GL(a,s,p))}else f=GL(d,h,Math.min(h-d,p)).map(o);return c?f.reverse():f},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===i?"s":","),"function"!=typeof r&&(i%1||null!=(r=mz(r)).precision||(r.trim=!0),r=wz(r)),e===1/0)return r;const a=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/o(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=a?r(e):""}},t.nice=()=>r(Tz(r(),{floor:e=>o(Math.floor(n(e))),ceil:e=>o(Math.ceil(n(e)))})),t}function Lz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Fz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zz(e){var t=1,r=e(Lz(t),Fz(t));return r.constant=function(r){return arguments.length?e(Lz(t=+r),Fz(t)):t},Cz(r)}function Uz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qz(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Bz(e){return e<0?-e*e:e*e}function Vz(e){var t=e(oz,oz),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(oz,oz):.5===r?e(qz,Bz):e(Uz(r),Uz(1/r)):r},Cz(t)}function $z(){var e=Vz(lz());return e.copy=function(){return cz(e,$z()).exponent(e.exponent())},tF.apply(e,arguments),e}function Wz(e){return Math.sign(e)*e*e}xz=kz({thousands:",",grouping:[3],currency:["$",""]}),wz=xz.format,jz=xz.formatPrefix;const Hz=new Date,Gz=new Date;function Kz(e,t,r,n){function o(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=t=>(e(t=new Date(+t)),t),o.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),o.round=e=>{const t=o(e),r=o.ceil(e);return e-t<r-e?t:r},o.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),o.range=(r,n,i)=>{const a=[];if(r=o.ceil(r),i=null==i?1:Math.floor(i),!(r<n&&i>0))return a;let s;do{a.push(s=new Date(+r)),t(r,i),e(r)}while(s<r&&r<n);return a},o.filter=r=>Kz(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(o.count=(t,n)=>(Hz.setTime(+t),Gz.setTime(+n),e(Hz),e(Gz),Math.floor(r(Hz,Gz))),o.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(n?t=>n(t)%e===0:t=>o.count(0,t)%e===0):o:null)),o}const Yz=Kz(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Yz.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Kz(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Yz:null),Yz.range;const Xz=1e3,Jz=6e4,Qz=36e5,Zz=864e5,eU=6048e5,tU=2592e6,rU=31536e6,nU=Kz(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xz)},(e,t)=>(t-e)/Xz,e=>e.getUTCSeconds());nU.range;const oU=Kz(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xz)},(e,t)=>{e.setTime(+e+t*Jz)},(e,t)=>(t-e)/Jz,e=>e.getMinutes());oU.range;const iU=Kz(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jz)},(e,t)=>(t-e)/Jz,e=>e.getUTCMinutes());iU.range;const aU=Kz(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xz-e.getMinutes()*Jz)},(e,t)=>{e.setTime(+e+t*Qz)},(e,t)=>(t-e)/Qz,e=>e.getHours());aU.range;const sU=Kz(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qz)},(e,t)=>(t-e)/Qz,e=>e.getUTCHours());sU.range;const cU=Kz(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jz)/Zz,e=>e.getDate()-1);cU.range;const lU=Kz(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zz,e=>e.getUTCDate()-1);lU.range;const uU=Kz(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zz,e=>Math.floor(e/Zz));function dU(e){return Kz(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jz)/eU)}uU.range;const hU=dU(0),pU=dU(1),fU=dU(2),mU=dU(3),gU=dU(4),vU=dU(5),yU=dU(6);function bU(e){return Kz(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/eU)}hU.range,pU.range,fU.range,mU.range,gU.range,vU.range,yU.range;const xU=bU(0),wU=bU(1),jU=bU(2),SU=bU(3),NU=bU(4),kU=bU(5),EU=bU(6);xU.range,wU.range,jU.range,SU.range,NU.range,kU.range,EU.range;const CU=Kz(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());CU.range;const OU=Kz(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());OU.range;const TU=Kz(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());TU.every=e=>isFinite(e=Math.floor(e))&&e>0?Kz(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,TU.range;const AU=Kz(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function _U(e,t,r,n,o,i){const a=[[nU,1,Xz],[nU,5,5e3],[nU,15,15e3],[nU,30,3e4],[i,1,Jz],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,Qz],[o,3,108e5],[o,6,216e5],[o,12,432e5],[n,1,Zz],[n,2,1728e5],[r,1,eU],[t,1,tU],[t,3,7776e6],[e,1,rU]];function s(t,r,n){const o=Math.abs(r-t)/n,i=IL(([,,e])=>e).right(a,o);if(i===a.length)return e.every(YL(t/rU,r/rU,n));if(0===i)return Yz.every(Math.max(YL(t,r,n),1));const[s,c]=a[o/a[i-1][2]<a[i][2]/o?i-1:i];return s.every(c)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const o=r&&"function"==typeof r.range?r:s(e,t,r),i=o?o.range(e,+t+1):[];return n?i.reverse():i},s]}AU.every=e=>isFinite(e=Math.floor(e))&&e>0?Kz(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,AU.range;const[PU,DU]=_U(AU,OU,xU,uU,sU,iU),[IU,MU]=_U(TU,CU,hU,cU,aU,oU);function RU(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LU(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function FU(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var zU,UU,qU,BU={"-":"",_:" ",0:"0"},VU=/^\s*\d+/,$U=/^%/,WU=/[\\^$*+?|[\]().{}]/g;function HU(e,t,r){var n=e<0?"-":"",o=(n?-e:e)+"",i=o.length;return n+(i<r?new Array(r-i+1).join(t)+o:o)}function GU(e){return e.replace(WU,"\\$&")}function KU(e){return new RegExp("^(?:"+e.map(GU).join("|")+")","i")}function YU(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function XU(e,t,r){var n=VU.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function JU(e,t,r){var n=VU.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function QU(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ZU(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function eq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tq(e,t,r){var n=VU.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function nq(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oq(e,t,r){var n=VU.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function iq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function aq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sq(e,t,r){var n=VU.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function cq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function lq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function uq(e,t,r){var n=VU.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function dq(e,t,r){var n=VU.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function hq(e,t,r){var n=VU.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function pq(e,t,r){var n=$U.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function fq(e,t,r){var n=VU.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function mq(e,t,r){var n=VU.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function gq(e,t){return HU(e.getDate(),t,2)}function vq(e,t){return HU(e.getHours(),t,2)}function yq(e,t){return HU(e.getHours()%12||12,t,2)}function bq(e,t){return HU(1+cU.count(TU(e),e),t,3)}function xq(e,t){return HU(e.getMilliseconds(),t,3)}function wq(e,t){return xq(e,t)+"000"}function jq(e,t){return HU(e.getMonth()+1,t,2)}function Sq(e,t){return HU(e.getMinutes(),t,2)}function Nq(e,t){return HU(e.getSeconds(),t,2)}function kq(e){var t=e.getDay();return 0===t?7:t}function Eq(e,t){return HU(hU.count(TU(e)-1,e),t,2)}function Cq(e){var t=e.getDay();return t>=4||0===t?gU(e):gU.ceil(e)}function Oq(e,t){return e=Cq(e),HU(gU.count(TU(e),e)+(4===TU(e).getDay()),t,2)}function Tq(e){return e.getDay()}function Aq(e,t){return HU(pU.count(TU(e)-1,e),t,2)}function _q(e,t){return HU(e.getFullYear()%100,t,2)}function Pq(e,t){return HU((e=Cq(e)).getFullYear()%100,t,2)}function Dq(e,t){return HU(e.getFullYear()%1e4,t,4)}function Iq(e,t){var r=e.getDay();return HU((e=r>=4||0===r?gU(e):gU.ceil(e)).getFullYear()%1e4,t,4)}function Mq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+HU(t/60|0,"0",2)+HU(t%60,"0",2)}function Rq(e,t){return HU(e.getUTCDate(),t,2)}function Lq(e,t){return HU(e.getUTCHours(),t,2)}function Fq(e,t){return HU(e.getUTCHours()%12||12,t,2)}function zq(e,t){return HU(1+lU.count(AU(e),e),t,3)}function Uq(e,t){return HU(e.getUTCMilliseconds(),t,3)}function qq(e,t){return Uq(e,t)+"000"}function Bq(e,t){return HU(e.getUTCMonth()+1,t,2)}function Vq(e,t){return HU(e.getUTCMinutes(),t,2)}function $q(e,t){return HU(e.getUTCSeconds(),t,2)}function Wq(e){var t=e.getUTCDay();return 0===t?7:t}function Hq(e,t){return HU(xU.count(AU(e)-1,e),t,2)}function Gq(e){var t=e.getUTCDay();return t>=4||0===t?NU(e):NU.ceil(e)}function Kq(e,t){return e=Gq(e),HU(NU.count(AU(e),e)+(4===AU(e).getUTCDay()),t,2)}function Yq(e){return e.getUTCDay()}function Xq(e,t){return HU(wU.count(AU(e)-1,e),t,2)}function Jq(e,t){return HU(e.getUTCFullYear()%100,t,2)}function Qq(e,t){return HU((e=Gq(e)).getUTCFullYear()%100,t,2)}function Zq(e,t){return HU(e.getUTCFullYear()%1e4,t,4)}function eB(e,t){var r=e.getUTCDay();return HU((e=r>=4||0===r?NU(e):NU.ceil(e)).getUTCFullYear()%1e4,t,4)}function tB(){return"+0000"}function rB(){return"%"}function nB(e){return+e}function oB(e){return Math.floor(+e/1e3)}function iB(e){return new Date(e)}function aB(e){return e instanceof Date?+e:+new Date(+e)}function sB(e,t,r,n,o,i,a,s,c,l){var u=uz(),d=u.invert,h=u.domain,p=l(".%L"),f=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(c(e)<e?p:s(e)<e?f:a(e)<e?m:i(e)<e?g:n(e)<e?o(e)<e?v:y:r(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,aB)):h().map(iB)},u.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:l(t)},u.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(Tz(r,e)):u},u.copy=function(){return cz(u,sB(e,t,r,n,o,i,a,s,c,l))},u}function cB(){var e,t,r,n,o,i=0,a=1,s=oz,c=!1;function l(t){return null==t||isNaN(t=+t)?o:s(0===r?.5:(t=(n(t)-e)*r,c?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,s=e(r,n),l):[s(0),s(1)]}}return l.domain=function(o){return arguments.length?([i,a]=o,e=n(i=+i),t=n(a=+a),r=e===t?0:1/(t-e),l):[i,a]},l.clamp=function(e){return arguments.length?(c=!!e,l):c},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=u(ez),l.rangeRound=u(tz),l.unknown=function(e){return arguments.length?(o=e,l):o},function(o){return n=o,e=o(i),t=o(a),r=e===t?0:1/(t-e),l}}function lB(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uB(){var e=Vz(cB());return e.copy=function(){return lB(e,uB()).exponent(e.exponent())},rF.apply(e,arguments)}function dB(){var e,t,r,n,o,i,a,s=0,c=.5,l=1,u=1,d=oz,h=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+i(e))-t)*(u*e<u*t?n:o),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var r,n,o;return arguments.length?([r,n,o]=t,d=function(e,t){void 0===t&&(t=e,e=ez);for(var r=0,n=t.length-1,o=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(o,o=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}(e,[r,n,o]),p):[d(0),d(.5),d(1)]}}return p.domain=function(a){return arguments.length?([s,c,l]=a,e=i(s=+s),t=i(c=+c),r=i(l=+l),n=e===t?0:.5/(t-e),o=t===r?0:.5/(r-t),u=t<e?-1:1,p):[s,c,l]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(ez),p.rangeRound=f(tz),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return i=a,e=a(s),t=a(c),r=a(l),n=e===t?0:.5/(t-e),o=t===r?0:.5/(r-t),u=t<e?-1:1,p}}function hB(){var e=Vz(dB());return e.copy=function(){return lB(e,hB()).exponent(e.exponent())},rF.apply(e,arguments)}!function(e){zU=function(e){var t=e.dateTime,r=e.date,n=e.time,o=e.periods,i=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=KU(o),u=YU(o),d=KU(i),h=YU(i),p=KU(a),f=YU(a),m=KU(s),g=YU(s),v=KU(c),y=YU(c),b={a:function(e){return a[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:gq,e:gq,f:wq,g:Pq,G:Iq,H:vq,I:yq,j:bq,L:xq,m:jq,M:Sq,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:nB,s:oB,S:Nq,u:kq,U:Eq,V:Oq,w:Tq,W:Aq,x:null,X:null,y:_q,Y:Dq,Z:Mq,"%":rB},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Rq,e:Rq,f:qq,g:Qq,G:eB,H:Lq,I:Fq,j:zq,L:Uq,m:Bq,M:Vq,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:nB,s:oB,S:$q,u:Wq,U:Hq,V:Kq,w:Yq,W:Xq,x:null,X:null,y:Jq,Y:Zq,Z:tB,"%":rB},w={a:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return N(e,t,r,n)},d:aq,e:aq,f:hq,g:rq,G:tq,H:cq,I:cq,j:sq,L:dq,m:iq,M:lq,p:function(e,t,r){var n=l.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:oq,Q:fq,s:mq,S:uq,u:JU,U:QU,V:ZU,w:XU,W:eq,x:function(e,t,n){return N(e,r,t,n)},X:function(e,t,r){return N(e,n,t,r)},y:rq,Y:tq,Z:nq,"%":pq};function j(e,t){return function(r){var n,o,i,a=[],s=-1,c=0,l=e.length;for(r instanceof Date||(r=new Date(+r));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(c,s)),null!=(o=BU[n=e.charAt(++s)])?n=e.charAt(++s):o="e"===n?" ":"0",(i=t[n])&&(n=i(r,o)),a.push(n),c=s+1);return a.push(e.slice(c,s)),a.join("")}}function S(e,t){return function(r){var n,o,i=FU(1900,void 0,1);if(N(i,e,r+="",0)!=r.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(n=LU(FU(i.y,0,1))).getUTCDay(),n=o>4||0===o?wU.ceil(n):wU(n),n=lU.offset(n,7*(i.V-1)),i.y=n.getUTCFullYear(),i.m=n.getUTCMonth(),i.d=n.getUTCDate()+(i.w+6)%7):(o=(n=RU(FU(i.y,0,1))).getDay(),n=o>4||0===o?pU.ceil(n):pU(n),n=cU.offset(n,7*(i.V-1)),i.y=n.getFullYear(),i.m=n.getMonth(),i.d=n.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?LU(FU(i.y,0,1)).getUTCDay():RU(FU(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,LU(i)):RU(i)}}function N(e,t,r,n){for(var o,i,a=0,s=t.length,c=r.length;a<s;){if(n>=c)return-1;if(37===(o=t.charCodeAt(a++))){if(o=t.charAt(a++),!(i=w[o in BU?t.charAt(a++):o])||(n=i(e,r,n))<0)return-1}else if(o!=r.charCodeAt(n++))return-1}return n}return b.x=j(r,b),b.X=j(n,b),b.c=j(t,b),x.x=j(r,x),x.X=j(n,x),x.c=j(t,x),{format:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),UU=zU.format,zU.parse,qU=zU.utcFormat,zU.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const pB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iF,scaleDiverging:function e(){var t=Cz(dB()(oz));return t.copy=function(){return lB(t,e())},rF.apply(t,arguments)},scaleDivergingLog:function e(){var t=Rz(dB()).domain([.1,1,10]);return t.copy=function(){return lB(t,e()).base(t.base())},rF.apply(t,arguments)},scaleDivergingPow:hB,scaleDivergingSqrt:function(){return hB.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=zz(dB());return t.copy=function(){return lB(t,e()).constant(t.constant())},rF.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,rz),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,rz):[0,1],Cz(n)},scaleImplicit:nF,scaleLinear:Oz,scaleLog:function e(){const t=Rz(lz()).domain([1,10]);return t.copy=()=>cz(t,e()).base(t.base()),tF.apply(t,arguments),t},scaleOrdinal:oF,scalePoint:sF,scalePow:$z,scaleQuantile:function e(){var t,r=[],n=[],o=[];function i(){var e=0,t=Math.max(1,n.length);for(o=new Array(t-1);++e<t;)o[e-1]=eF(r,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:n[FL(o,e)]}return a.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?o[t-1]:r[0],t<o.length?o[t]:r[r.length-1]]},a.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(PL),i()},a.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return o.slice()},a.copy=function(){return e().domain(r).range(n).unknown(t)},tF.apply(a,arguments)},scaleQuantize:function e(){var t,r=0,n=1,o=1,i=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[FL(i,e,0,o)]:t}function c(){var e=-1;for(i=new Array(o);++e<o;)i[e]=((e+1)*n-(e-o)*r)/(o+1);return s}return s.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,c()):[r,n]},s.range=function(e){return arguments.length?(o=(a=Array.from(e)).length-1,c()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,i[0]]:t>=o?[i[o-1],n]:[i[t-1],i[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return e().domain([r,n]).range(a).unknown(t)},tF.apply(Cz(s),arguments)},scaleRadial:function e(){var t,r=uz(),n=[0,1],o=!1;function i(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:o?Math.round(n):n}return i.invert=function(e){return r.invert(Wz(e))},i.domain=function(e){return arguments.length?(r.domain(e),i):r.domain()},i.range=function(e){return arguments.length?(r.range((n=Array.from(e,rz)).map(Wz)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(o=!!e,i):o},i.clamp=function(e){return arguments.length?(r.clamp(e),i):r.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e(r.domain(),n).round(o).clamp(r.clamp()).unknown(t)},tF.apply(i,arguments),Cz(i)},scaleSequential:function e(){var t=Cz(cB()(oz));return t.copy=function(){return lB(t,e())},rF.apply(t,arguments)},scaleSequentialLog:function e(){var t=Rz(cB()).domain([1,10]);return t.copy=function(){return lB(t,e()).base(t.base())},rF.apply(t,arguments)},scaleSequentialPow:uB,scaleSequentialQuantile:function e(){var t=[],r=oz;function n(e){if(null!=e&&!isNaN(e=+e))return r((FL(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(PL),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return JL(e);if(t>=1)return XL(e);var n,o=(n-1)*t,i=Math.floor(o),a=XL(QL(e,i).subarray(0,i+1));return a+(JL(e.subarray(i+1))-a)*(o-i)}}(t,n/e))},n.copy=function(){return e(r).domain(t)},rF.apply(n,arguments)},scaleSequentialSqrt:function(){return uB.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=zz(cB());return t.copy=function(){return lB(t,e()).constant(t.constant())},rF.apply(t,arguments)},scaleSqrt:function(){return $z.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=zz(lz());return t.copy=function(){return cz(t,e()).constant(t.constant())},tF.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],o=1;function i(e){return null!=e&&e<=e?n[FL(r,e,0,o)]:t}return i.domain=function(e){return arguments.length?(r=Array.from(e),o=Math.min(r.length,n.length-1),i):r.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),o=Math.min(r.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(r).range(n).unknown(t)},tF.apply(i,arguments)},scaleTime:function(){return tF.apply(sB(IU,MU,TU,CU,hU,cU,aU,oU,nU,UU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return tF.apply(sB(PU,DU,AU,OU,xU,lU,sU,iU,nU,qU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:Ez},Symbol.toStringTag,{value:"Module"}));var fB=Nk;var mB=function(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],a=t(i);if(null!=a&&(void 0===s?a==a&&!fB(a):r(a,s)))var s=a,c=i}return c};var gB=mB,vB=function(e,t){return e>t},yB=GD;const bB=oe(function(e){return e&&e.length?gB(e,yB,vB):void 0});var xB=mB,wB=function(e,t){return e<t},jB=GD;const SB=oe(function(e){return e&&e.length?xB(e,jB,wB):void 0});var NB=iC,kB=oI,EB=QI,CB=ok;var OB=$I,TB=function(e,t){return(CB(e)?NB:EB)(e,kB(t))};const AB=oe(function(e,t){return OB(TB(e,t),1)});var _B=wD;const PB=oe(function(e,t){return _B(e,t)});var DB,IB=1e9,MB=!0,RB="[DecimalError] ",LB=RB+"Invalid argument: ",FB=RB+"Exponent out of range: ",zB=Math.floor,UB=Math.pow,qB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BB=1e7,VB=9007199254740991,$B=zB(1286742750677284.5),WB={};function HB(e,t){var r,n,o,i,a,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),MB?rV(t,d):t;if(c=e.d,l=t.d,a=e.e,o=t.e,c=c.slice(),i=a-o){for(i<0?(n=c,i=-i,s=l.length):(n=l,o=a,s=c.length),i>(s=(a=Math.ceil(d/7))>s?a+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,n=l,l=c,c=n),r=0;i;)r=(c[--i]=c[i]+l[i]+r)/BB|0,c[i]%=BB;for(r&&(c.unshift(r),++o),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=o,MB?rV(t,d):t}function GB(e,t,r){if(e!==~~e||e<t||e>r)throw Error(LB+e)}function KB(e){var t,r,n,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)(r=7-(n=e[t]+"").length)&&(i+=ZB(r)),i+=n;(r=7-(n=(a=e[t])+"").length)&&(i+=ZB(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}WB.absoluteValue=WB.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},WB.comparedTo=WB.cmp=function(e){var t,r,n,o,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,r=(n=i.d.length)<(o=e.d.length)?n:o;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===o?0:n>o^i.s<0?1:-1},WB.decimalPlaces=WB.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},WB.dividedBy=WB.div=function(e){return YB(this,new this.constructor(e))},WB.dividedToIntegerBy=WB.idiv=function(e){var t=this.constructor;return rV(YB(this,new t(e),0,1),t.precision)},WB.equals=WB.eq=function(e){return!this.cmp(e)},WB.exponent=function(){return JB(this)},WB.greaterThan=WB.gt=function(e){return this.cmp(e)>0},WB.greaterThanOrEqualTo=WB.gte=function(e){return this.cmp(e)>=0},WB.isInteger=WB.isint=function(){return this.e>this.d.length-2},WB.isNegative=WB.isneg=function(){return this.s<0},WB.isPositive=WB.ispos=function(){return this.s>0},WB.isZero=function(){return 0===this.s},WB.lessThan=WB.lt=function(e){return this.cmp(e)<0},WB.lessThanOrEqualTo=WB.lte=function(e){return this.cmp(e)<1},WB.logarithm=WB.log=function(e){var t,r=this,n=r.constructor,o=n.precision,i=o+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(DB))throw Error(RB+"NaN");if(r.s<1)throw Error(RB+(r.s?"NaN":"-Infinity"));return r.eq(DB)?new n(0):(MB=!1,t=YB(eV(r,i),eV(e,i),i),MB=!0,rV(t,o))},WB.minus=WB.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nV(t,e):HB(t,(e.s=-e.s,e))},WB.modulo=WB.mod=function(e){var t,r=this,n=r.constructor,o=n.precision;if(!(e=new n(e)).s)throw Error(RB+"NaN");return r.s?(MB=!1,t=YB(r,e,0,1).times(e),MB=!0,r.minus(t)):rV(new n(r),o)},WB.naturalExponential=WB.exp=function(){return XB(this)},WB.naturalLogarithm=WB.ln=function(){return eV(this)},WB.negated=WB.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},WB.plus=WB.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?HB(t,e):nV(t,(e.s=-e.s,e))},WB.precision=WB.sd=function(e){var t,r,n,o=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(LB+e);if(t=JB(o)+1,r=7*(n=o.d.length-1)+1,n=o.d[n]){for(;n%10==0;n/=10)r--;for(n=o.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},WB.squareRoot=WB.sqrt=function(){var e,t,r,n,o,i,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(RB+"NaN")}for(e=JB(s),MB=!1,0==(o=Math.sqrt(+s))||o==1/0?(((t=KB(s.d)).length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=zB((e+1)/2)-(e<0||e%2),n=new c(t=o==1/0?"5e"+e:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new c(o.toString()),o=a=(r=c.precision)+3;;)if(n=(i=n).plus(YB(s,i,a+2)).times(.5),KB(i.d).slice(0,a)===(t=KB(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),o==a&&"4999"==t){if(rV(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if("9999"!=t)break;a+=4}return MB=!0,rV(n,r)},WB.times=WB.mul=function(e){var t,r,n,o,i,a,s,c,l,u=this,d=u.constructor,h=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,r=u.e+e.e,(c=h.length)<(l=p.length)&&(i=h,h=p,p=i,a=c,c=l,l=a),i=[],n=a=c+l;n--;)i.push(0);for(n=l;--n>=0;){for(t=0,o=c+n;o>n;)s=i[o]+p[n]*h[o-n-1]+t,i[o--]=s%BB|0,t=s/BB|0;i[o]=(i[o]+t)%BB|0}for(;!i[--a];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,MB?rV(e,d.precision):e},WB.toDecimalPlaces=WB.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(GB(e,0,IB),void 0===t?t=n.rounding:GB(t,0,8),rV(r,e+JB(r)+1,t))},WB.toExponential=function(e,t){var r,n=this,o=n.constructor;return void 0===e?r=oV(n,!0):(GB(e,0,IB),void 0===t?t=o.rounding:GB(t,0,8),r=oV(n=rV(new o(n),e+1,t),!0,e+1)),r},WB.toFixed=function(e,t){var r,n,o=this,i=o.constructor;return void 0===e?oV(o):(GB(e,0,IB),void 0===t?t=i.rounding:GB(t,0,8),r=oV((n=rV(new i(o),e+JB(o)+1,t)).abs(),!1,e+JB(n)+1),o.isneg()&&!o.isZero()?"-"+r:r)},WB.toInteger=WB.toint=function(){var e=this,t=e.constructor;return rV(new t(e),JB(e)+1,t.rounding)},WB.toNumber=function(){return+this},WB.toPower=WB.pow=function(e){var t,r,n,o,i,a,s=this,c=s.constructor,l=+(e=new c(e));if(!e.s)return new c(DB);if(!(s=new c(s)).s){if(e.s<1)throw Error(RB+"Infinity");return s}if(s.eq(DB))return s;if(n=c.precision,e.eq(DB))return rV(s,n);if(a=(t=e.e)>=(r=e.d.length-1),i=s.s,a){if((r=l<0?-l:l)<=VB){for(o=new c(DB),t=Math.ceil(n/7+4),MB=!1;r%2&&iV((o=o.times(s)).d,t),0!==(r=zB(r/2));)iV((s=s.times(s)).d,t);return MB=!0,e.s<0?new c(DB).div(o):rV(o,n)}}else if(i<0)throw Error(RB+"NaN");return i=i<0&&1&e.d[Math.max(t,r)]?-1:1,s.s=1,MB=!1,o=e.times(eV(s,n+12)),MB=!0,(o=XB(o)).s=i,o},WB.toPrecision=function(e,t){var r,n,o=this,i=o.constructor;return void 0===e?n=oV(o,(r=JB(o))<=i.toExpNeg||r>=i.toExpPos):(GB(e,1,IB),void 0===t?t=i.rounding:GB(t,0,8),n=oV(o=rV(new i(o),e,t),e<=(r=JB(o))||r<=i.toExpNeg,e)),n},WB.toSignificantDigits=WB.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(GB(e,1,IB),void 0===t?t=r.rounding:GB(t,0,8)),rV(new r(this),e,t)},WB.toString=WB.valueOf=WB.val=WB.toJSON=WB[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=JB(e),r=e.constructor;return oV(e,t<=r.toExpNeg||t>=r.toExpPos)};var YB=function(){function e(e,t){var r,n=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+n,e[o]=r%BB|0,n=r/BB|0;return n&&e.unshift(n),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*BB+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,o,i,a){var s,c,l,u,d,h,p,f,m,g,v,y,b,x,w,j,S,N,k=n.constructor,E=n.s==o.s?1:-1,C=n.d,O=o.d;if(!n.s)return new k(n);if(!o.s)throw Error(RB+"Division by zero");for(c=n.e-o.e,S=O.length,w=C.length,f=(p=new k(E)).d=[],l=0;O[l]==(C[l]||0);)++l;if(O[l]>(C[l]||0)&&--c,(y=null==i?i=k.precision:a?i+(JB(n)-JB(o))+1:i)<0)return new k(0);if(y=y/7+2|0,l=0,1==S)for(u=0,O=O[0],y++;(l<w||u)&&y--;l++)b=u*BB+(C[l]||0),f[l]=b/O|0,u=b%O|0;else{for((u=BB/(O[0]+1)|0)>1&&(O=e(O,u),C=e(C,u),S=O.length,w=C.length),x=S,g=(m=C.slice(0,S)).length;g<S;)m[g++]=0;(N=O.slice()).unshift(0),j=O[0],O[1]>=BB/2&&++j;do{u=0,(s=t(O,m,S,g))<0?(v=m[0],S!=g&&(v=v*BB+(m[1]||0)),(u=v/j|0)>1?(u>=BB&&(u=BB-1),1==(s=t(d=e(O,u),m,h=d.length,g=m.length))&&(u--,r(d,S<h?N:O,h))):(0==u&&(s=u=1),d=O.slice()),(h=d.length)<g&&d.unshift(0),r(m,d,g),-1==s&&(s=t(O,m,S,g=m.length))<1&&(u++,r(m,S<g?N:O,g)),g=m.length):0===s&&(u++,m=[0]),f[l++]=u,s&&m[0]?m[g++]=C[x]||0:(m=[C[x]],g=1)}while((x++<w||void 0!==m[0])&&y--)}return f[0]||f.shift(),p.e=c,rV(p,a?i+JB(p)+1:i)}}();function XB(e,t){var r,n,o,i,a,s=0,c=0,l=e.constructor,u=l.precision;if(JB(e)>16)throw Error(FB+JB(e));if(!e.s)return new l(DB);for(null==t?(MB=!1,a=u):a=t,i=new l(.03125);e.abs().gte(.1);)e=e.times(i),c+=5;for(a+=Math.log(UB(2,c))/Math.LN10*2+5|0,r=n=o=new l(DB),l.precision=a;;){if(n=rV(n.times(e),a),r=r.times(++s),KB((i=o.plus(YB(n,r,a))).d).slice(0,a)===KB(o.d).slice(0,a)){for(;c--;)o=rV(o.times(o),a);return l.precision=u,null==t?(MB=!0,rV(o,u)):o}o=i}}function JB(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function QB(e,t,r){if(t>e.LN10.sd())throw MB=!0,r&&(e.precision=r),Error(RB+"LN10 precision limit exceeded");return rV(new e(e.LN10),t)}function ZB(e){for(var t="";e--;)t+="0";return t}function eV(e,t){var r,n,o,i,a,s,c,l,u,d=1,h=e,p=h.d,f=h.constructor,m=f.precision;if(h.s<1)throw Error(RB+(h.s?"NaN":"-Infinity"));if(h.eq(DB))return new f(0);if(null==t?(MB=!1,l=m):l=t,h.eq(10))return null==t&&(MB=!0),QB(f,l);if(l+=10,f.precision=l,n=(r=KB(p)).charAt(0),i=JB(h),!(Math.abs(i)<15e14))return c=QB(f,l+2,m).times(i+""),h=eV(new f(n+"."+r.slice(1)),l-10).plus(c),f.precision=m,null==t?(MB=!0,rV(h,m)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=KB((h=h.times(e)).d)).charAt(0),d++;for(i=JB(h),n>1?(h=new f("0."+r),i++):h=new f(n+"."+r.slice(1)),s=a=h=YB(h.minus(DB),h.plus(DB),l),u=rV(h.times(h),l),o=3;;){if(a=rV(a.times(u),l),KB((c=s.plus(YB(a,new f(o),l))).d).slice(0,l)===KB(s.d).slice(0,l))return s=s.times(2),0!==i&&(s=s.plus(QB(f,l+2,m).times(i+""))),s=YB(s,new f(d),l),f.precision=m,null==t?(MB=!0,rV(s,m)):s;s=c,o+=2}}function tV(e,t){var r,n,o;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(o=t.length;48===t.charCodeAt(o-1);)--o;if(t=t.slice(n,o)){if(o-=n,r=r-n-1,e.e=zB(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<o){for(n&&e.d.push(+t.slice(0,n)),o-=7;n<o;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=o;for(;n--;)t+="0";if(e.d.push(+t),MB&&(e.e>$B||e.e<-$B))throw Error(FB+r)}else e.s=0,e.e=0,e.d=[0];return e}function rV(e,t,r){var n,o,i,a,s,c,l,u,d=e.d;for(a=1,i=d[0];i>=10;i/=10)a++;if((n=t-a)<0)n+=7,o=t,l=d[u=0];else{if((u=Math.ceil((n+1)/7))>=(i=d.length))return e;for(l=i=d[u],a=1;i>=10;i/=10)a++;o=(n%=7)-7+a}if(void 0!==r&&(s=l/(i=UB(10,a-o-1))%10|0,c=t<0||void 0!==d[u+1]||l%i,c=r<4?(s||c)&&(0==r||r==(e.s<0?3:2)):s>5||5==s&&(4==r||c||6==r&&(n>0?o>0?l/UB(10,a-o):0:d[u-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=JB(e),d.length=1,t=t-i-1,d[0]=UB(10,(7-t%7)%7),e.e=zB(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=u,i=1,u--):(d.length=u+1,i=UB(10,7-n),d[u]=o>0?(l/UB(10,a-o)%UB(10,o)|0)*i:0),c)for(;;){if(0==u){(d[0]+=i)==BB&&(d[0]=1,++e.e);break}if(d[u]+=i,d[u]!=BB)break;d[u--]=0,i=1}for(n=d.length;0===d[--n];)d.pop();if(MB&&(e.e>$B||e.e<-$B))throw Error(FB+JB(e));return e}function nV(e,t){var r,n,o,i,a,s,c,l,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),MB?rV(t,p):t;if(c=e.d,d=t.d,n=t.e,l=e.e,c=c.slice(),a=l-n){for((u=a<0)?(r=c,a=-a,s=d.length):(r=d,n=l,s=c.length),a>(o=Math.max(Math.ceil(p/7),s)+2)&&(a=o,r.length=1),r.reverse(),o=a;o--;)r.push(0);r.reverse()}else{for((u=(o=c.length)<(s=d.length))&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}a=0}for(u&&(r=c,c=d,d=r,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>a;){if(c[--o]<d[o]){for(i=o;i&&0===c[--i];)c[i]=BB-1;--c[i],c[o]+=BB}c[o]-=d[o]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,MB?rV(t,p):t):new h(0)}function oV(e,t,r){var n,o=JB(e),i=KB(e.d),a=i.length;return t?(r&&(n=r-a)>0?i=i.charAt(0)+"."+i.slice(1)+ZB(n):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(o<0?"e":"e+")+o):o<0?(i="0."+ZB(-o-1)+i,r&&(n=r-a)>0&&(i+=ZB(n))):o>=a?(i+=ZB(o+1-a),r&&(n=r-o-1)>0&&(i=i+"."+ZB(n))):((n=o+1)<a&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-a)>0&&(o+1===a&&(i+="."),i+=ZB(n))),e.s<0?"-"+i:i}function iV(e,t){if(e.length>t)return e.length=t,!0}function aV(e){if(!e||"object"!=typeof e)throw Error(RB+"Object expected");var t,r,n,o=["precision",1,IB,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if(void 0!==(n=e[r=o[t]])){if(!(zB(n)===n&&n>=o[t+1]&&n<=o[t+2]))throw Error(LB+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(LB+r+": "+n);this[r]=new this(n)}return this}var sV=function e(t){var r,n,o;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(LB+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):tV(t,e.toString())}if("string"!=typeof e)throw Error(LB+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!qB.test(e))throw Error(LB+e);tV(t,e)}if(i.prototype=WB,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=aV,void 0===t&&(t={}),t)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<o.length;)t.hasOwnProperty(n=o[r++])||(t[n]=this[n]);return i.config(t),i}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});DB=new sV(1);const cV=sV;function lV(e){return function(e){if(Array.isArray(e))return uV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dV=function(e){return e},hV={"@@functional/placeholder":!0},pV=function(e){return e===hV},fV=function(e){return function t(){return 0===arguments.length||1===arguments.length&&pV(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},mV=function e(t,r){return 1===t?r:fV(function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=o.filter(function(e){return e!==hV}).length;return a>=t?r.apply(void 0,o):e(t-a,fV(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o.map(function(e){return pV(e)?t.shift():e});return r.apply(void 0,lV(i).concat(t))}))})},gV=function(e){return mV(e.length,e)},vV=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},yV=gV(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),bV=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},xV=function(e){var t=null,r=null;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t&&o.every(function(e,r){return e===t[r]})?r:(t=o,r=e.apply(void 0,o))}};const wV={rangeStep:function(e,t,r){for(var n=new cV(e),o=0,i=[];n.lt(t)&&o<1e5;)i.push(n.toNumber()),n=n.add(r),o++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new cV(e).abs().log(10).toNumber())+1},interpolateNumber:gV(function(e,t,r){var n=+e;return n+r*(+t-n)}),uninterpolateNumber:gV(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),uninterpolateTruncation:gV(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))})};function jV(e){return function(e){if(Array.isArray(e))return kV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||NV(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||NV(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NV(e,t){if(e){if("string"==typeof e)return kV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kV(e,t):void 0}}function kV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EV(e){var t=SV(e,2),r=t[0],n=t[1],o=r,i=n;return r>n&&(o=n,i=r),[o,i]}function CV(e,t,r){if(e.lte(0))return new cV(0);var n=wV.getDigitCount(e.toNumber()),o=new cV(10).pow(n),i=e.div(o),a=1!==n?.05:.1,s=new cV(Math.ceil(i.div(a).toNumber())).add(r).mul(a).mul(o);return t?s:new cV(Math.ceil(s))}function OV(e,t,r){var n=1,o=new cV(e);if(!o.isint()&&r){var i=Math.abs(e);i<1?(n=new cV(10).pow(wV.getDigitCount(e)-1),o=new cV(Math.floor(o.div(n).toNumber())).mul(n)):i>1&&(o=new cV(Math.floor(e)))}else 0===e?o=new cV(Math.floor((t-1)/2)):r||(o=new cV(Math.floor(e)));var a=Math.floor((t-1)/2),s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return dV;var n=t.reverse(),o=n[0],i=n.slice(1);return function(){return i.reduce(function(e,t){return t(e)},o.apply(void 0,arguments))}}(yV(function(e){return o.add(new cV(e-a).mul(n)).toNumber()}),vV);return s(0,t)}function TV(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new cV(0),tickMin:new cV(0),tickMax:new cV(0)};var i,a=CV(new cV(t).sub(e).div(r-1),n,o);i=e<=0&&t>=0?new cV(0):(i=new cV(e).add(t).div(2)).sub(new cV(i).mod(a));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new cV(t).sub(i).div(a).toNumber()),l=s+c+1;return l>r?TV(e,t,r,n,o+1):(l<r&&(c=t>0?c+(r-l):c,s=t>0?s:s+(r-l)),{step:a,tickMin:i.sub(new cV(s).mul(a)),tickMax:i.add(new cV(c).mul(a))})}var AV=xV(function(e){var t=SV(e,2),r=t[0],n=t[1],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(o,2),s=SV(EV([r,n]),2),c=s[0],l=s[1];if(c===-1/0||l===1/0){var u=l===1/0?[c].concat(jV(vV(0,o-1).map(function(){return 1/0}))):[].concat(jV(vV(0,o-1).map(function(){return-1/0})),[l]);return r>n?bV(u):u}if(c===l)return OV(c,o,i);var d=TV(c,l,a,i),h=d.step,p=d.tickMin,f=d.tickMax,m=wV.rangeStep(p,f.add(new cV(.1).mul(h)),h);return r>n?bV(m):m}),_V=xV(function(e,t){var r=SV(e,2),n=r[0],o=r[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=SV(EV([n,o]),2),s=a[0],c=a[1];if(s===-1/0||c===1/0)return[n,o];if(s===c)return[s];var l=Math.max(t,2),u=CV(new cV(c).sub(s).div(l-1),i,0),d=[].concat(jV(wV.rangeStep(new cV(s),new cV(c).sub(new cV(.99).mul(u)),u)),[c]);return n>o?bV(d):d}),PV="Invariant failed";function DV(e,t){if(!e)throw new Error(PV)}var IV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function MV(e){return(MV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RV(){return RV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RV.apply(this,arguments)}function LV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FV(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zV(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function UV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HV(n.key),n)}}function qV(e,t,r){return t=VV(t),function(e,t){if(t&&("object"===MV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BV()?Reflect.construct(t,r||[],VV(e).constructor):t.apply(e,r))}function BV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(BV=function(){return!!e})()}function VV(e){return(VV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $V(e,t){return($V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WV(e,t,r){return(t=HV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HV(e){var t=function(e,t){if("object"!=MV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MV(t)?t:t+""}var GV=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qV(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$V(e,t)}(e,ae.Component),t=e,(r=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,o=e.dataKey,i=e.data,a=e.dataPointFormatter,s=e.xAxis,c=e.yAxis,l=zV(e,IV),u=MO(l,!1);"x"===this.props.direction&&"number"!==s.type&&DV(!1);var d=i.map(function(e){var i=a(e,o),l=i.x,d=i.y,h=i.value,p=i.errorVal;if(!p)return null;var f,m,g=[];if(Array.isArray(p)){var v=LV(p,2);f=v[0],m=v[1]}else f=m=p;if("vertical"===r){var y=s.scale,b=d+t,x=b+n,w=b-n,j=y(h-f),S=y(h+m);g.push({x1:S,y1:x,x2:S,y2:w}),g.push({x1:j,y1:b,x2:S,y2:b}),g.push({x1:j,y1:x,x2:j,y2:w})}else if("horizontal"===r){var N=c.scale,k=l+t,E=k-n,C=k+n,O=N(h-f),T=N(h+m);g.push({x1:E,y1:T,x2:C,y2:T}),g.push({x1:k,y1:O,x2:k,y2:T}),g.push({x1:E,y1:O,x2:C,y2:O})}return ae.createElement(HO,RV({className:"recharts-errorBar",key:"bar-".concat(g.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},u),g.map(function(e){return ae.createElement("line",RV({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return ae.createElement(HO,{className:"recharts-errorBars"},d)}}])&&UV(t.prototype,r),n&&UV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function KV(e){return(KV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function XV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YV(Object(r),!0).forEach(function(t){JV(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JV(e,t,r){var n;return n=function(e,t){if("object"!=KV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=KV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==KV(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}WV(GV,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),WV(GV,"displayName","ErrorBar");var QV=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,o=e.legendContent,i=PO(t,FI);if(!i)return null;var a,s=FI.defaultProps,c=void 0!==s?XV(XV({},s),i.props):{};return a=i.props&&i.props.payload?i.props&&i.props.payload:"children"===o?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,o=n.sectors||n.data||[];return e.concat(o.map(function(e){return{type:i.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?XV(XV({},r),t.props):{},o=n.dataKey,i=n.name,a=n.legendType;return{inactive:n.hide,dataKey:o,type:c.iconType||a||"square",color:s$(t),value:i||o,payload:n}}),XV(XV(XV({},c),FI.getWithHeight(i,n)),{},{payload:a,item:i})};function ZV(e){return(ZV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e$(e){return function(e){if(Array.isArray(e))return t$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return t$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t$(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(t){o$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o$(e,t,r){var n;return n=function(e,t){if("object"!=ZV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ZV(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i$(e,t,r){return CC(e)||CC(t)?r:aO(t)?EC(e,t,r):Mk(t)?t(e):r}function a$(e,t,r,n){var o=AB(e,function(e){return i$(e,t)});if("number"===r){var i=o.filter(function(e){return iO(e)||parseFloat(e)});return i.length?[SB(i),bB(i)]:[1/0,-1/0]}return(n?o.filter(function(e){return!CC(e)}):o).map(function(e){return aO(e)||e instanceof Date?e:""})}var s$=function(e){var t,r,n=e.type.displayName,o=null!==(t=e.type)&&void 0!==t&&t.defaultProps?n$(n$({},e.type.defaultProps),e.props):e.props,i=o.stroke,a=o.fill;switch(n){case"Line":r=i;break;case"Area":case"Radar":r=i&&"none"!==i?i:a;break;default:r=a}return r},c$=function(e,t,r,n,o){var i=_O(t.props.children,GV).filter(function(e){return function(e,t,r){return!!CC(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,o,e.props.direction)});if(i&&i.length){var a=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=i$(t,r);if(CC(n))return e;var o=Array.isArray(n)?[SB(n),bB(n)]:[n,n],i=a.reduce(function(e,r){var n=i$(t,r,0),i=o[0]-Math.abs(Array.isArray(n)?n[0]:n),a=o[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(i,e[0]),Math.max(a,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},l$=function(e,t,r,n,o){var i=t.map(function(t){var i=t.props.dataKey;return"number"===r&&i&&c$(e,t,i,n)||a$(e,i,r,o)});if("number"===r)return i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var a={};return i.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)a[t[r]]||(a[t[r]]=!0,e.push(t[r]));return e},[])},u$=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},d$=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var o,i,a=e.map(function(e){return e.coordinate===t&&(o=!0),e.coordinate===r&&(i=!0),e.coordinate});return o||a.push(t),i||a.push(r),a},h$=function(e,t,r){if(!e)return null;var n=e.scale,o=e.duplicateDomain,i=e.type,a=e.range,s="scaleBand"===e.realScaleType?n.bandwidth()/2:2,c=(t||r)&&"category"===i&&n.bandwidth?n.bandwidth()/s:0;return c="angleAxis"===e.axisType&&(null==a?void 0:a.length)>=2?2*nO(a[0]-a[1])*c:c,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=o?o.indexOf(e):e;return{coordinate:n(t)+c,value:e,offset:c}}).filter(function(e){return!rO(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+c,value:e,index:t,offset:c}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+c,value:e,offset:c}}):n.domain().map(function(e,t){return{coordinate:n(e)+c,value:o?o[e]:e,index:t,offset:c}})},p$=new WeakMap,f$=function(e,t){if("function"!=typeof t)return e;p$.has(e)||p$.set(e,new WeakMap);var r=p$.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},m$=1e-4,g$={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var o=0,i=0,a=0;a<t;++a){var s=rO(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,o,i=0,a=e[0].length;i<a;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}bA(e,t)}},none:bA,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,o=e[t[0]],i=o.length;n<i;++n){for(var a=0,s=0;a<r;++a)s+=e[a][n][1]||0;o[n][1]+=o[n][0]=-s/2}bA(e,t)}},wiggle:function(e,t){if((o=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,o,i=0,a=1;a<n;++a){for(var s=0,c=0,l=0;s<o;++s){for(var u=e[t[s]],d=u[a][1]||0,h=(d-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];h+=(f[a][1]||0)-(f[a-1][1]||0)}c+=d,l+=h*d}r[a-1][1]+=r[a-1][0]=i,c&&(i-=l/c)}r[a-1][1]+=r[a-1][0]=i,bA(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var o=0,i=0;i<t;++i){var a=rO(e[i][r][1])?e[i][r][0]:e[i][r][1];a>=0?(e[i][r][0]=o,e[i][r][1]=o+a,o=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}}},v$=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),o=g$[r],i=function(){var e=bT([]),t=xA,r=bA,n=wA;function o(o){var i,a,s=Array.from(e.apply(this,arguments),jA),c=s.length,l=-1;for(const e of o)for(i=0,++l;i<c;++i)(s[i][l]=[0,+n(e,s[i].key,l,o)]).data=e;for(i=0,a=PT(t(s));i<c;++i)s[a[i]].index=i;return r(s,a),s}return o.keys=function(t){return arguments.length?(e="function"==typeof t?t:bT(Array.from(t)),o):e},o.value=function(e){return arguments.length?(n="function"==typeof e?e:bT(+e),o):n},o.order=function(e){return arguments.length?(t=null==e?xA:"function"==typeof e?e:bT(Array.from(e)),o):t},o.offset=function(e){return arguments.length?(r=null==e?bA:e,o):r},o}().keys(n).value(function(e,t){return+i$(e,t,0)}).order(xA).offset(o);return i(e)};function y$(e){var t=e.axis,r=e.ticks,n=e.bandSize,o=e.entry,i=e.index,a=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!CC(o[t.dataKey])){var s=hO(r,"value",o[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=i$(o,CC(a)?t.dataKey:a);return CC(c)?null:t.scale(c)}var b$=function(e){var t=e.axis,r=e.ticks,n=e.offset,o=e.bandSize,i=e.entry,a=e.index;if("category"===t.type)return r[a]?r[a].coordinate+n:null;var s=i$(i,t.dataKey,t.domain[a]);return CC(s)?null:t.scale(s)-o/2+n},x$=function(e,t,r){return Object.keys(e).reduce(function(n,o){var i=e[o].stackedData.reduce(function(e,n){var o=n.slice(t,r+1).reduce(function(e,t){return[SB(t.concat([e[0]]).filter(iO)),bB(t.concat([e[1]]).filter(iO))]},[1/0,-1/0]);return[Math.min(e[0],o[0]),Math.max(e[1],o[1])]},[1/0,-1/0]);return[Math.min(i[0],n[0]),Math.max(i[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},w$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,j$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S$=function(e,t,r){if(Mk(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(iO(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(w$.test(e[0])){var o=+w$.exec(e[0])[1];n[0]=t[0]-o}else Mk(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(iO(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(j$.test(e[1])){var i=+j$.exec(e[1])[1];n[1]=t[1]+i}else Mk(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},N$=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var o=IM(t,function(e){return e.coordinate}),i=1/0,a=1,s=o.length;a<s;a++){var c=o[a],l=o[a-1];i=Math.min((c.coordinate||0)-(l.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},k$=function(e,t,r){return e&&e.length?PB(e,EC(r,"type.defaultProps.domain"))?t:e:t},E$=function(e,t){var r=e.type.defaultProps?n$(n$({},e.type.defaultProps),e.props):e.props,n=r.dataKey,o=r.name,i=r.unit,a=r.formatter,s=r.tooltipType,c=r.chartType,l=r.hide;return n$(n$({},MO(e,!1)),{},{dataKey:n,unit:i,formatter:a,name:o||n,color:s$(e),value:i$(t,n),type:s,payload:t,chartType:c,hide:l})};function C$(e){return(C$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(t){A$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A$(e,t,r){var n;return n=function(e,t){if("object"!=C$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==C$(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _$=Math.PI/180,P$=function(e){return 180*e/Math.PI},D$=function(e,t,r,n){return{x:e+Math.cos(-_$*n)*r,y:t+Math.sin(-_$*n)*r}},I$=function(e,t){var r,n,o,i,a,s,c=e.x,l=e.y,u=t.cx,d=t.cy,h=(n={x:u,y:d},o=(r={x:c,y:l}).x,i=r.y,a=n.x,s=n.y,Math.sqrt(Math.pow(o-a,2)+Math.pow(i-s,2)));if(h<=0)return{radius:h};var p=(c-u)/h,f=Math.acos(p);return l>d&&(f=2*Math.PI-f),{radius:h,angle:P$(f),angleInRadian:f}},M$=function(e,t){var r=t.startAngle,n=t.endAngle,o=Math.floor(r/360),i=Math.floor(n/360);return e+360*Math.min(o,i)},R$=function(e,t){var r=e.x,n=e.y,o=I$({x:r,y:n},t),i=o.radius,a=o.angle,s=t.innerRadius,c=t.outerRadius;if(i<s||i>c)return!1;if(0===i)return!0;var l,u=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),o=Math.floor(r/360),i=Math.min(n,o);return{startAngle:t-360*i,endAngle:r-360*i}}(t),d=u.startAngle,h=u.endAngle,p=a;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;l=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;l=p>=h&&p<=d}return l?T$(T$({},t),{},{radius:i,angle:M$(p,t)}):null};function L$(e){return(L$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F$=["offset"];function z$(e){return function(e){if(Array.isArray(e))return U$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U$(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q$(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function B$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B$(Object(r),!0).forEach(function(t){$$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $$(e,t,r){var n;return n=function(e,t){if("object"!=L$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==L$(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W$(){return W$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W$.apply(this,arguments)}var H$=function(e,t,r){var n,o,i=e.position,a=e.viewBox,s=e.offset,c=e.className,l=a,u=l.cx,d=l.cy,h=l.innerRadius,p=l.outerRadius,f=l.startAngle,m=l.endAngle,g=l.clockWise,v=(h+p)/2,y=function(e,t){return nO(t-e)*Math.min(Math.abs(t-e),360)}(f,m),b=y>=0?1:-1;"insideStart"===i?(n=f+b*s,o=g):"insideEnd"===i?(n=m-b*s,o=!g):"end"===i&&(n=m+b*s,o=g),o=y<=0?o:!o;var x=D$(u,d,v,n),w=D$(u,d,v,n+359*(o?1:-1)),j="M".concat(x.x,",").concat(x.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),S=CC(e.id)?cO("recharts-radial-line-"):e.id;return ae.createElement("text",W$({},r,{dominantBaseline:"central",className:$r("recharts-radial-bar-label",c)}),ae.createElement("defs",null,ae.createElement("path",{id:S,d:j})),ae.createElement("textPath",{xlinkHref:"#".concat(S)},t))};function G$(e){var t,r=e.offset,n=V$({offset:void 0===r?5:r},q$(e,F$)),o=n.viewBox,i=n.position,a=n.value,s=n.children,c=n.content,l=n.className,u=void 0===l?"":l,d=n.textBreakAll;if(!o||CC(a)&&CC(s)&&!ie.isValidElement(c)&&!Mk(c))return null;if(ie.isValidElement(c))return ie.cloneElement(c,n);if(Mk(c)){if(t=ie.createElement(c,n),ie.isValidElement(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=CC(e.children)?t:e.children;return Mk(r)?r(n):n}(n);var h=function(e){return"cx"in e&&iO(e.cx)}(o),p=MO(n,!0);if(h&&("insideStart"===i||"insideEnd"===i||"end"===i))return H$(n,t,p);var f=h?function(e){var t=e.viewBox,r=e.offset,n=e.position,o=t,i=o.cx,a=o.cy,s=o.innerRadius,c=o.outerRadius,l=(o.startAngle+o.endAngle)/2;if("outside"===n){var u=D$(i,a,c+r,l),d=u.x;return{x:d,y:u.y,textAnchor:d>=i?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=D$(i,a,(s+c)/2,l);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,o=e.position,i=t,a=i.x,s=i.y,c=i.width,l=i.height,u=l>=0?1:-1,d=u*n,h=u>0?"end":"start",p=u>0?"start":"end",f=c>=0?1:-1,m=f*n,g=f>0?"end":"start",v=f>0?"start":"end";if("top"===o)return V$(V$({},{x:a+c/2,y:s-u*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(s-r.y,0),width:c}:{});if("bottom"===o)return V$(V$({},{x:a+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:p}),r?{height:Math.max(r.y+r.height-(s+l),0),width:c}:{});if("left"===o){var y={x:a-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return V$(V$({},y),r?{width:Math.max(y.x-r.x,0),height:l}:{})}if("right"===o){var b={x:a+c+m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return V$(V$({},b),r?{width:Math.max(r.x+r.width-b.x,0),height:l}:{})}var x=r?{width:c,height:l}:{};return"insideLeft"===o?V$({x:a+m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},x):"insideRight"===o?V$({x:a+c-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===o?V$({x:a+c/2,y:s+d,textAnchor:"middle",verticalAnchor:p},x):"insideBottom"===o?V$({x:a+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:h},x):"insideTopLeft"===o?V$({x:a+m,y:s+d,textAnchor:v,verticalAnchor:p},x):"insideTopRight"===o?V$({x:a+c-m,y:s+d,textAnchor:g,verticalAnchor:p},x):"insideBottomLeft"===o?V$({x:a+m,y:s+l-d,textAnchor:v,verticalAnchor:h},x):"insideBottomRight"===o?V$({x:a+c-m,y:s+l-d,textAnchor:g,verticalAnchor:h},x):_k(o)&&(iO(o.x)||oO(o.x))&&(iO(o.y)||oO(o.y))?V$({x:a+lO(o.x,c),y:s+lO(o.y,l),textAnchor:"end",verticalAnchor:"end"},x):V$({x:a+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(n);return ae.createElement(_L,W$({className:$r("recharts-label",u)},p,f,{breakAll:d}),t)}G$.displayName="Label";var K$=function(e){var t=e.cx,r=e.cy,n=e.angle,o=e.startAngle,i=e.endAngle,a=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,h=e.top,p=e.left,f=e.width,m=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(iO(f)&&iO(m)){if(iO(u)&&iO(d))return{x:u,y:d,width:f,height:m};if(iO(h)&&iO(p))return{x:h,y:p,width:f,height:m}}return iO(u)&&iO(d)?{x:u,y:d,width:0,height:0}:iO(t)&&iO(r)?{cx:t,cy:r,startAngle:o||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:l||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}};G$.parseViewBox=K$,G$.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,o=K$(e),i=_O(n,G$).map(function(e,r){return ie.cloneElement(e,{viewBox:t||o,key:"label-".concat(r)})});if(!r)return i;var a=function(e,t){return e?!0===e?ae.createElement(G$,{key:"label-implicit",viewBox:t}):aO(e)?ae.createElement(G$,{key:"label-implicit",viewBox:t,value:e}):ie.isValidElement(e)?e.type===G$?ie.cloneElement(e,{key:"label-implicit",viewBox:t}):ae.createElement(G$,{key:"label-implicit",content:e,viewBox:t}):Mk(e)?ae.createElement(G$,{key:"label-implicit",content:e,viewBox:t}):_k(e)?ae.createElement(G$,W$({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||o);return[a].concat(z$(i))};const Y$=oe(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function X$(e){return(X$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J$=["valueAccessor"],Q$=["data","dataKey","clockWise","id","textBreakAll"];function Z$(e){return function(e){if(Array.isArray(e))return eW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eW(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tW(){return tW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tW.apply(this,arguments)}function rW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rW(Object(r),!0).forEach(function(t){oW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oW(e,t,r){var n;return n=function(e,t){if("object"!=X$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==X$(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iW(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var aW=function(e){return Array.isArray(e.value)?Y$(e.value):e.value};function sW(e){var t=e.valueAccessor,r=void 0===t?aW:t,n=iW(e,J$),o=n.data,i=n.dataKey,a=n.clockWise,s=n.id,c=n.textBreakAll,l=iW(n,Q$);return o&&o.length?ae.createElement(HO,{className:"recharts-label-list"},o.map(function(e,t){var n=CC(i)?r(e,t):i$(e&&e.payload,i),o=CC(s)?{}:{id:"".concat(s,"-").concat(t)};return ae.createElement(G$,tW({},MO(e,!0),l,o,{parentViewBox:e.parentViewBox,value:n,textBreakAll:c,viewBox:G$.parseViewBox(CC(a)?e:nW(nW({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))})):null}function cW(e){return(cW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lW(){return lW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lW.apply(this,arguments)}function uW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(r),!0).forEach(function(t){hW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hW(e,t,r){var n;return n=function(e,t){if("object"!=cW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==cW(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}sW.displayName="LabelList",sW.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=_O(e.children,sW).map(function(e,r){return ie.cloneElement(e,{data:t,key:"labelList-".concat(r)})});return r?[function(e,t){return e?!0===e?ae.createElement(sW,{key:"labelList-implicit",data:t}):ae.isValidElement(e)||Mk(e)?ae.createElement(sW,{key:"labelList-implicit",data:t,content:e}):_k(e)?ae.createElement(sW,tW({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(Z$(n)):n};var pW=function(e){var t=e.cx,r=e.cy,n=e.radius,o=e.angle,i=e.sign,a=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(a?1:-1)+n,u=Math.asin(s/l)/_$,d=c?o:o+i*u,h=c?o-i*u:o;return{center:D$(t,r,l,d),circleTangency:D$(t,r,n,d),lineTangency:D$(t,r,l*Math.cos(u*_$),h),theta:u}},fW=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,o=e.outerRadius,i=e.startAngle,a=function(e,t){return nO(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),s=i+a,c=D$(t,r,o,i),l=D$(t,r,o,s),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(o,",").concat(o,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(i>s),",\n    ").concat(l.x,",").concat(l.y,"\n  ");if(n>0){var d=D$(t,r,n,i),h=D$(t,r,n,s);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(i<=s),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},mW={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gW=function(e){var t=dW(dW({},mW),e),r=t.cx,n=t.cy,o=t.innerRadius,i=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(i<o||l===u)return null;var h,p=$r("recharts-sector",d),f=i-o,m=lO(a,f,0,!0);return h=m>0&&Math.abs(l-u)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,o=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=nO(l-c),d=pW({cx:t,cy:r,radius:o,angle:c,sign:u,cornerRadius:i,cornerIsExternal:s}),h=d.circleTangency,p=d.lineTangency,f=d.theta,m=pW({cx:t,cy:r,radius:o,angle:l,sign:-u,cornerRadius:i,cornerIsExternal:s}),g=m.circleTangency,v=m.lineTangency,y=m.theta,b=s?Math.abs(c-l):Math.abs(c-l)-f-y;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):fW({cx:t,cy:r,innerRadius:n,outerRadius:o,startAngle:c,endAngle:l});var x="M ".concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(o,",").concat(o,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(n>0){var w=pW({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),j=w.circleTangency,S=w.lineTangency,N=w.theta,k=pW({cx:t,cy:r,radius:n,angle:l,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),E=k.circleTangency,C=k.lineTangency,O=k.theta,T=s?Math.abs(c-l):Math.abs(c-l)-N-O;if(T<0&&0===i)return"".concat(x,"L").concat(t,",").concat(r,"Z");x+="L".concat(C.x,",").concat(C.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(E.x,",").concat(E.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(r,"Z");return x}({cx:r,cy:n,innerRadius:o,outerRadius:i,cornerRadius:Math.min(m,f/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):fW({cx:r,cy:n,innerRadius:o,outerRadius:i,startAngle:l,endAngle:u}),ae.createElement("path",lW({},MO(t,!0),{className:p,d:h,role:"img"}))};function vW(e){return(vW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yW(){return yW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yW.apply(this,arguments)}function bW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bW(Object(r),!0).forEach(function(t){wW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wW(e,t,r){var n;return n=function(e,t){if("object"!=vW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vW(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jW={curveBasisClosed:function(e){return new aA(e)},curveBasisOpen:function(e){return new sA(e)},curveBasis:function(e){return new iA(e)},curveBumpX:function(e){return new zT(e,!0)},curveBumpY:function(e){return new zT(e,!1)},curveLinearClosed:function(e){return new cA(e)},curveLinear:IT,curveMonotoneX:function(e){return new pA(e)},curveMonotoneY:function(e){return new fA(e)},curveNatural:function(e){return new gA(e)},curveStep:function(e){return new yA(e,.5)},curveStepAfter:function(e){return new yA(e,1)},curveStepBefore:function(e){return new yA(e,0)}},SW=function(e){return e.x===+e.x&&e.y===+e.y},NW=function(e){return e.x},kW=function(e){return e.y},EW=function(e){var t,r=e.type,n=void 0===r?"linear":r,o=e.points,i=void 0===o?[]:o,a=e.baseLine,s=e.layout,c=e.connectNulls,l=void 0!==c&&c,u=function(e,t){if(Mk(e))return e;var r="curve".concat(yT(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?jW[r]||IT:jW["".concat(r).concat("vertical"===t?"Y":"X")]}(n,s),d=l?i.filter(function(e){return SW(e)}):i;if(Array.isArray(a)){var h=l?a.filter(function(e){return SW(e)}):a,p=d.map(function(e,t){return xW(xW({},e),{},{base:h[t]})});return(t="vertical"===s?FT().y(kW).x1(NW).x0(function(e){return e.base.x}):FT().x(NW).y1(kW).y0(function(e){return e.base.y})).defined(SW).curve(u),t(p)}return(t="vertical"===s&&iO(a)?FT().y(kW).x1(NW).x0(a):iO(a)?FT().x(NW).y1(kW).y0(a):LT().x(NW).y(kW)).defined(SW).curve(u),t(d)},CW=function(e){var t=e.className,r=e.points,n=e.path,o=e.pathRef;if(!(r&&r.length||n))return null;var i=r&&r.length?EW(e):n;return ie.createElement("path",yW({},MO(e,!1),xO(e),{className:$r("recharts-curve",t),d:i,ref:o}))},OW=Object.getOwnPropertyNames,TW=Object.getOwnPropertySymbols,AW=Object.prototype.hasOwnProperty;function _W(e,t){return function(r,n,o){return e(r,n,o)&&t(r,n,o)}}function PW(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var o=n.cache,i=o.get(t),a=o.get(r);if(i&&a)return i===r&&a===t;o.set(t,r),o.set(r,t);var s=e(t,r,n);return o.delete(t),o.delete(r),s}}function DW(e){return OW(e).concat(TW(e))}var IW=Object.hasOwn||function(e,t){return AW.call(e,t)};function MW(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var RW=Object.getOwnPropertyDescriptor,LW=Object.keys;function FW(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function zW(e,t){return MW(e.getTime(),t.getTime())}function UW(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function qW(e,t){return e===t}function BW(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o,i,a=new Array(n),s=e.entries(),c=0;(o=s.next())&&!o.done;){for(var l=t.entries(),u=!1,d=0;(i=l.next())&&!i.done;)if(a[d])d++;else{var h=o.value,p=i.value;if(r.equals(h[0],p[0],c,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1;c++}return!0}var VW=MW;function $W(e,t,r){var n=LW(e),o=n.length;if(LW(t).length!==o)return!1;for(;o-- >0;)if(!JW(e,t,r,n[o]))return!1;return!0}function WW(e,t,r){var n,o,i,a=DW(e),s=a.length;if(DW(t).length!==s)return!1;for(;s-- >0;){if(!JW(e,t,r,n=a[s]))return!1;if(o=RW(e,n),i=RW(t,n),(o||i)&&(!o||!i||o.configurable!==i.configurable||o.enumerable!==i.enumerable||o.writable!==i.writable))return!1}return!0}function HW(e,t){return MW(e.valueOf(),t.valueOf())}function GW(e,t){return e.source===t.source&&e.flags===t.flags}function KW(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var o,i,a=new Array(n),s=e.values();(o=s.next())&&!o.done;){for(var c=t.values(),l=!1,u=0;(i=c.next())&&!i.done;){if(!a[u]&&r.equals(o.value,i.value,o.value,i.value,e,t,r)){l=a[u]=!0;break}u++}if(!l)return!1}return!0}function YW(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function XW(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function JW(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||IW(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var QW=Array.isArray,ZW="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,eH=Object.assign,tH=Object.prototype.toString.call.bind(Object.prototype.toString);var rH=nH();function nH(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,o=e.createInternalComparator,i=e.createState,a=e.strict,s=void 0!==a&&a,c=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?WW:FW,areDatesEqual:zW,areErrorsEqual:UW,areFunctionsEqual:qW,areMapsEqual:n?_W(BW,WW):BW,areNumbersEqual:VW,areObjectsEqual:n?WW:$W,arePrimitiveWrappersEqual:HW,areRegExpsEqual:GW,areSetsEqual:n?_W(KW,WW):KW,areTypedArraysEqual:n?WW:YW,areUrlsEqual:XW};if(r&&(o=eH({},o,r(o))),t){var i=PW(o.areArraysEqual),a=PW(o.areMapsEqual),s=PW(o.areObjectsEqual),c=PW(o.areSetsEqual);o=eH({},o,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return o}(e),l=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,o=e.areFunctionsEqual,i=e.areMapsEqual,a=e.areNumbersEqual,s=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,l=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,f){if(e===p)return!0;if(null==e||null==p)return!1;var m=typeof e;if(m!==typeof p)return!1;if("object"!==m)return"number"===m?a(e,p,f):"function"===m&&o(e,p,f);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return s(e,p,f);if(QW(e))return t(e,p,f);if(null!=ZW&&ZW(e))return d(e,p,f);if(g===Date)return r(e,p,f);if(g===RegExp)return l(e,p,f);if(g===Map)return i(e,p,f);if(g===Set)return u(e,p,f);var v=tH(e);return"[object Date]"===v?r(e,p,f):"[object RegExp]"===v?l(e,p,f):"[object Map]"===v?i(e,p,f):"[object Set]"===v?u(e,p,f):"[object Object]"===v?"function"!=typeof e.then&&"function"!=typeof p.then&&s(e,p,f):"[object URL]"===v?h(e,p,f):"[object Error]"===v?n(e,p,f):"[object Arguments]"===v?s(e,p,f):("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)&&c(e,p,f)}}(c);return function(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,i=e.strict;if(n)return function(e,a){var s=n(),c=s.cache,l=void 0===c?t?new WeakMap:void 0:c,u=s.meta;return r(e,a,{cache:l,equals:o,meta:u,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:o,meta:void 0,strict:i})};var a={cache:void 0,equals:o,meta:void 0,strict:i};return function(e,t){return r(e,t,a)}}({circular:n,comparator:l,createState:i,equals:o?o(l):(t=l,function(e,r,n,o,i,a,s){return t(e,r,s)}),strict:s})}function oH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(o){r<0&&(r=o),o-r>t?(e(o),r=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function iH(e){return(iH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aH(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return sH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cH(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var o=aH(n),i=o[0],a=o.slice(1);return"number"==typeof i?void oH(r.bind(null,a),i):(r(i),void oH(r.bind(null,a)))}"object"===iH(n)&&e(n),"function"==typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function lH(e){return(lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uH(Object(r),!0).forEach(function(t){hH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==lH(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==lH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lH(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}nH({strict:!0}),nH({circular:!0}),nH({circular:!0,strict:!0}),nH({createInternalComparator:function(){return MW}}),nH({strict:!0,createInternalComparator:function(){return MW}}),nH({circular:!0,createInternalComparator:function(){return MW}}),nH({circular:!0,createInternalComparator:function(){return MW},strict:!0});var pH=function(e){return e},fH=function(e,t){return Object.keys(t).reduce(function(r,n){return dH(dH({},r),{},hH({},n,e(n,t[n])))},{})},mH=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function gH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||yH(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vH(e){return function(e){if(Array.isArray(e))return bH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yH(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yH(e,t){if(e){if("string"==typeof e)return bH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bH(e,t):void 0}}function bH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xH=1e-4,wH=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},jH=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},SH=function(e,t){return function(r){var n=wH(e,t);return jH(n,r)}},NH=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,o=0,i=1,a=1;break;case"ease":n=.25,o=.1,i=.25,a=1;break;case"ease-in":n=.42,o=0,i=1,a=1;break;case"ease-out":n=.42,o=0,i=.58,a=1;break;case"ease-in-out":n=0,o=0,i=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var c=gH(s[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=c[0],o=c[1],i=c[2],a=c[3]}}var l,u,d=SH(n,i),h=SH(o,a),p=(l=n,u=i,function(e){var t=wH(l,u),r=[].concat(vH(t.map(function(e,t){return e*t}).slice(1)),[0]);return jH(r,e)}),f=function(e){return e>1?1:e<0?0:e},m=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var o=d(r)-t,i=p(r);if(Math.abs(o-t)<xH||i<xH)return h(r);r=f(r-o/i)}return h(r)};return m.isStepper=!1,m},kH=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NH(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,o=void 0===n?8:n,i=e.dt,a=void 0===i?17:i,s=function(e,t,n){var i=n+(-(e-t)*r-n*o)*a/1e3,s=n*a/1e3+e;return Math.abs(s-t)<xH&&Math.abs(i)<xH?[t,0]:[s,i]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===n.split("(")[0])return NH(n)}return"function"==typeof n?n:null};function EH(e){return(EH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CH(e){return function(e){if(Array.isArray(e))return DH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||PH(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OH(Object(r),!0).forEach(function(t){AH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function AH(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==EH(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==EH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===EH(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||PH(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PH(e,t){if(e){if("string"==typeof e)return DH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DH(e,t):void 0}}function DH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IH=function(e,t,r){return e+(t-e)*r},MH=function(e){return e.from!==e.to},RH=function e(t,r,n){var o=fH(function(e,r){if(MH(r)){var n=_H(t(r.from,r.to,r.velocity),2),o=n[0],i=n[1];return TH(TH({},r),{},{from:o,velocity:i})}return r},r);return n<1?fH(function(e,t){return MH(t)?TH(TH({},t),{},{velocity:IH(t.velocity,o[e].velocity,n),from:IH(t.from,o[e].from,n)}):t},r):e(t,o,n-1)};const LH=function(e,t,r,n,o){var i,a,s,c,l=(i=e,a=t,[Object.keys(i),Object.keys(a)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),u=l.reduce(function(r,n){return TH(TH({},r),{},AH({},n,[e[n],t[n]]))},{}),d=l.reduce(function(r,n){return TH(TH({},r),{},AH({},n,{from:e[n],velocity:0,to:t[n]}))},{}),h=-1,p=function(){return null};return p=r.isStepper?function(n){s||(s=n);var i=(n-s)/r.dt;d=RH(r,d,i),o(TH(TH(TH({},e),t),fH(function(e,t){return t.from},d))),s=n,Object.values(d).filter(MH).length&&(h=requestAnimationFrame(p))}:function(i){c||(c=i);var a=(i-c)/n,s=fH(function(e,t){return IH.apply(void 0,CH(t).concat([r(a)]))},u);if(o(TH(TH(TH({},e),t),s)),a<1)h=requestAnimationFrame(p);else{var l=fH(function(e,t){return IH.apply(void 0,CH(t).concat([r(1)]))},u);o(TH(TH(TH({},e),t),l))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function FH(e){return(FH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zH=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function UH(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function qH(e){return function(e){if(Array.isArray(e))return BH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return BH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VH(Object(r),!0).forEach(function(t){WH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function WH(e,t,r){return(t=GH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GH(n.key),n)}}function GH(e){var t=function(e,t){if("object"!==FH(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==FH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===FH(t)?t:String(t)}function KH(e,t){return(KH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=QH(e);if(t){var o=QH(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return XH(this,r)}}function XH(e,t){if(t&&("object"===FH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JH(e)}function JH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QH(e){return(QH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZH=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KH(e,t)}(o,ie.PureComponent);var e,t,r,n=YH(o);function o(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var i=(r=n.call(this,e,t)).props,a=i.isActive,s=i.attributeName,c=i.from,l=i.to,u=i.steps,d=i.children,h=i.duration;if(r.handleStyleChange=r.handleStyleChange.bind(JH(r)),r.changeStyle=r.changeStyle.bind(JH(r)),!a||h<=0)return r.state={style:{}},"function"==typeof d&&(r.state={style:l}),XH(r);if(u&&u.length)r.state={style:u[0].style};else if(c){if("function"==typeof d)return r.state={style:c},XH(r);r.state={style:s?WH({},s,c):c}}else r.state={style:{}};return r}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,o=t.attributeName,i=t.shouldReAnimate,a=t.to,s=t.from,c=this.state.style;if(n)if(r){if(!(rH(e.to,a)&&e.canBegin&&e.isActive)){var l=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=l||i?s:e.to;if(this.state&&c){var d={style:o?WH({},o,u):u};(o&&c[o]!==u||!o&&c!==u)&&this.setState(d)}this.runAnimation($H($H({},this.props),{},{from:u,begin:0}))}}else{var h={style:o?WH({},o,a):a};this.state&&c&&(o&&c[o]!==a||!o&&c!==a)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,o=e.duration,i=e.easing,a=e.begin,s=e.onAnimationEnd,c=e.onAnimationStart,l=LH(r,n,kH(i),o,this.changeStyle);this.manager.start([c,a,function(){t.stopJSAnimation=l()},o,s])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,o=e.onAnimationStart,i=r[0],a=i.style,s=i.duration,c=void 0===s?0:s;return this.manager.start([o].concat(qH(r.reduce(function(e,n,o){if(0===o)return e;var i=n.duration,a=n.easing,s=void 0===a?"ease":a,c=n.style,l=n.properties,u=n.onAnimationEnd,d=o>0?r[o-1]:n,h=l||Object.keys(c);if("function"==typeof s||"spring"===s)return[].concat(qH(e),[t.runJSAnimation.bind(t,{from:d.style,to:c,duration:i,easing:s}),i]);var p=mH(h,i,s),f=$H($H($H({},d.style),c),{},{transition:p});return[].concat(qH(e),[f,i,u]).filter(pH)},[a,Math.max(c,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=cH());var t=e.begin,r=e.duration,n=e.attributeName,o=e.to,i=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,c=e.steps,l=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!=typeof i&&"function"!=typeof l&&"spring"!==i)if(c.length>1)this.runStepAnimation(e);else{var d=n?WH({},n,o):o,h=mH(Object.keys(d),r,i);u.start([a,t,$H($H({},d),{},{transition:h}),r,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var r=e.duration;e.attributeName,e.easing;var n=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var o=UH(e,zH),i=ie.Children.count(t),a=this.state.style;if("function"==typeof t)return t(a);if(!n||0===i||r<=0)return t;var s=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,i=t.className;return ie.cloneElement(e,$H($H({},o),{},{style:$H($H({},n),a),className:i}))};return 1===i?s(ie.Children.only(t)):ae.createElement("div",null,ie.Children.map(t,function(e){return s(e)}))}}])&&HH(e.prototype,t),r&&HH(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}();ZH.displayName="Animate",ZH.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},ZH.propTypes={from:Nt.oneOfType([Nt.object,Nt.string]),to:Nt.oneOfType([Nt.object,Nt.string]),attributeName:Nt.string,duration:Nt.number,begin:Nt.number,easing:Nt.oneOfType([Nt.string,Nt.func]),steps:Nt.arrayOf(Nt.shape({duration:Nt.number.isRequired,style:Nt.object.isRequired,easing:Nt.oneOfType([Nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Nt.func]),properties:Nt.arrayOf("string"),onAnimationEnd:Nt.func})),children:Nt.oneOfType([Nt.node,Nt.func]),isActive:Nt.bool,canBegin:Nt.bool,onAnimationEnd:Nt.func,shouldReAnimate:Nt.bool,onAnimationStart:Nt.func,onAnimationReStart:Nt.func};const eG=ZH;function tG(e){return(tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rG(){return rG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rG.apply(this,arguments)}function nG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(t){sG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sG(e,t,r){var n;return n=function(e,t){if("object"!=tG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cG=function(e,t,r,n,o){var i,a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,c=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=o[d]>a?a:o[d];i="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(i+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+c*u[0],",").concat(t)),i+="L ".concat(e+r-c*u[1],",").concat(t),u[1]>0&&(i+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,",\n        ").concat(e+r,",").concat(t+s*u[1])),i+="L ".concat(e+r,",").concat(t+n-s*u[2]),u[2]>0&&(i+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,",\n        ").concat(e+r-c*u[2],",").concat(t+n)),i+="L ".concat(e+c*u[3],",").concat(t+n),u[3]>0&&(i+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,",\n        ").concat(e,",").concat(t+n-s*u[3])),i+="Z"}else if(a>0&&o===+o&&o>0){var h=Math.min(a,o);i="M ".concat(e,",").concat(t+s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+c*h,",").concat(t,"\n            L ").concat(e+r-c*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*h,"\n            L ").concat(e+r,",").concat(t+n-s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+r-c*h,",").concat(t+n,"\n            L ").concat(e+c*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return i},lG=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,o=t.x,i=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var c=Math.min(o,o+a),l=Math.max(o,o+a),u=Math.min(i,i+s),d=Math.max(i,i+s);return r>=c&&r<=l&&n>=u&&n<=d}return!1},uG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dG=function(e){var t=aG(aG({},uG),e),r=ie.useRef(),n=nG(ie.useState(-1),2),o=n[0],i=n[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}},[]);var a=t.x,s=t.y,c=t.width,l=t.height,u=t.radius,d=t.className,h=t.animationEasing,p=t.animationDuration,f=t.animationBegin,m=t.isAnimationActive,g=t.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||l!==+l||0===c||0===l)return null;var v=$r("recharts-rectangle",d);return g?ae.createElement(eG,{canBegin:o>0,from:{width:c,height:l,x:a,y:s},to:{width:c,height:l,x:a,y:s},duration:p,animationEasing:h,isActive:g},function(e){var n=e.width,i=e.height,a=e.x,s=e.y;return ae.createElement(eG,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:m,easing:h},ae.createElement("path",rG({},MO(t,!0),{className:v,d:cG(a,s,n,i,u),ref:r})))}):ae.createElement("path",rG({},MO(t,!0),{className:v,d:cG(a,s,c,l,u)}))};function hG(){return hG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hG.apply(this,arguments)}var pG=function(e){var t=e.cx,r=e.cy,n=e.r,o=$r("recharts-dot",e.className);return t===+t&&r===+r&&n===+n?ie.createElement("circle",hG({},MO(e,!1),xO(e),{className:o,cx:t,cy:r,r:n})):null};function fG(e){return(fG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mG=["x","y","top","left","width","height","className"];function gG(){return gG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gG.apply(this,arguments)}function vG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yG(e,t,r){var n;return n=function(e,t){if("object"!=fG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==fG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bG(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var xG=function(e,t,r,n,o,i){return"M".concat(e,",").concat(o,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r)},wG=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,o=void 0===n?0:n,i=e.top,a=void 0===i?0:i,s=e.left,c=void 0===s?0:s,l=e.width,u=void 0===l?0:l,d=e.height,h=void 0===d?0:d,p=e.className,f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vG(Object(r),!0).forEach(function(t){yG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:o,top:a,left:c,width:u,height:h},bG(e,mG));return iO(r)&&iO(o)&&iO(u)&&iO(h)&&iO(a)&&iO(c)?ae.createElement("path",gG({},MO(f,!0),{className:$r("recharts-cross",p),d:xG(r,o,u,h,a,c)})):null},jG=jP(Object.getPrototypeOf,Object),SG=xk,NG=jG,kG=wk,EG=Function.prototype,CG=Object.prototype,OG=EG.toString,TG=CG.hasOwnProperty,AG=OG.call(Object);const _G=oe(function(e){if(!kG(e)||"[object Object]"!=SG(e))return!1;var t=NG(e);if(null===t)return!0;var r=TG.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&OG.call(r)==AG});var PG=xk,DG=wk;const IG=oe(function(e){return!0===e||!1===e||DG(e)&&"[object Boolean]"==PG(e)});function MG(e){return(MG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RG(){return RG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RG.apply(this,arguments)}function LG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function UG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zG(Object(r),!0).forEach(function(t){qG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qG(e,t,r){var n;return n=function(e,t){if("object"!=MG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==MG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BG=function(e,t,r,n,o){var i,a=r-n;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-a/2,",").concat(t+o),i+="L ".concat(e+r-a/2-n,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z")},VG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$G=function(e){var t=UG(UG({},VG),e),r=ie.useRef(),n=LG(ie.useState(-1),2),o=n[0],i=n[1];ie.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}},[]);var a=t.x,s=t.y,c=t.upperWidth,l=t.lowerWidth,u=t.height,d=t.className,h=t.animationEasing,p=t.animationDuration,f=t.animationBegin,m=t.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||l!==+l||u!==+u||0===c&&0===l||0===u)return null;var g=$r("recharts-trapezoid",d);return m?ae.createElement(eG,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:u,x:a,y:s},to:{upperWidth:c,lowerWidth:l,height:u,x:a,y:s},duration:p,animationEasing:h,isActive:m},function(e){var n=e.upperWidth,i=e.lowerWidth,a=e.height,s=e.x,c=e.y;return ae.createElement(eG,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:h},ae.createElement("path",RG({},MO(t,!0),{className:g,d:BG(s,c,n,i,a),ref:r})))}):ae.createElement("g",null,ae.createElement("path",RG({},MO(t,!0),{className:g,d:BG(a,s,c,l,u)})))},WG=["option","shapeType","propTransformer","activeClassName","isActive"];function HG(e){return(HG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GG(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function KG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KG(Object(r),!0).forEach(function(t){XG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function XG(e,t,r){var n;return n=function(e,t){if("object"!=HG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==HG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JG(e,t){return YG(YG({},t),e)}function QG(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ae.createElement(dG,r);case"trapezoid":return ae.createElement($G,r);case"sector":return ae.createElement(gW,r);case"symbols":if(function(e){return"symbols"===e}(t))return ae.createElement(PA,r);break;default:return null}}function ZG(e){var t,r=e.option,n=e.shapeType,o=e.propTransformer,i=void 0===o?JG:o,a=e.activeClassName,s=void 0===a?"recharts-active-shape":a,c=e.isActive,l=GG(e,WG);if(ie.isValidElement(r))t=ie.cloneElement(r,YG(YG({},l),function(e){return ie.isValidElement(e)?e.props:e}(r)));else if(Mk(r))t=r(l);else if(_G(r)&&!IG(r)){var u=i(r,l);t=ae.createElement(QG,{shapeType:n,elementProps:u})}else{var d=l;t=ae.createElement(QG,{shapeType:n,elementProps:d})}return c?ae.createElement(HO,{className:s},t):t}function eK(e,t){return null!=t&&"trapezoids"in e.props}function tK(e,t){return null!=t&&"sectors"in e.props}function rK(e,t){return null!=t&&"points"in e.props}function nK(e,t){var r,n,o=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,i=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return o&&i}function oK(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function iK(e,t){var r=e.x===t.x,n=e.y===t.y,o=e.z===t.z;return r&&n&&o}function aK(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,o=function(e,t){var r;return eK(e,t)?r="trapezoids":tK(e,t)?r="sectors":rK(e,t)&&(r="points"),r}(r,t),i=function(e,t){var r,n;return eK(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:tK(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:rK(e,t)?t.payload:{}}(r,t),a=n.filter(function(e,n){var a=PB(i,e),s=r.props[o].filter(function(e){var n=function(e,t){var r;return eK(e,t)?r=nK:tK(e,t)?r=oK:rK(e,t)&&(r=iK),r}(r,t);return n(e,t)}),c=r.props[o].indexOf(s[s.length-1]);return a&&n===c});return n.indexOf(a[a.length-1])}var sK=Math.ceil,cK=Math.max;var lK=_R,uK=1/0;var dK=function(e){return e?(e=lK(e))===uK||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},hK=function(e,t,r,n){for(var o=-1,i=cK(sK((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a},pK=AM,fK=dK;const mK=oe(function(e){return function(t,r,n){return n&&"number"!=typeof n&&pK(t,r,n)&&(r=n=void 0),t=fK(t),void 0===r?(r=t,t=0):r=fK(r),n=void 0===n?t<r?1:-1:fK(n),hK(t,r,n,e)}}());function gK(e){return(gK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vK(Object(r),!0).forEach(function(t){bK(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bK(e,t,r){var n;return n=function(e,t){if("object"!=gK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==gK(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xK=["Webkit","Moz","O","ms"];function wK(e){return(wK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jK(){return jK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jK.apply(this,arguments)}function SK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SK(Object(r),!0).forEach(function(t){AK(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_K(n.key),n)}}function EK(e,t,r){return t=OK(t),function(e,t){if(t&&("object"===wK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CK()?Reflect.construct(t,r||[],OK(e).constructor):t.apply(e,r))}function CK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(CK=function(){return!!e})()}function OK(e){return(OK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TK(e,t){return(TK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function AK(e,t,r){return(t=_K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _K(e){var t=function(e,t){if("object"!=wK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wK(t)?t:t+""}var PK=function(e){return e.changedTouches&&!!e.changedTouches.length},DK=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),AK(r=EK(this,e,[t]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),AK(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),AK(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,o=e.startIndex;null==n||n({endIndex:t,startIndex:o})}),r.detachDragEndListener()}),AK(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),AK(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),AK(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),AK(r,"handleSlideDragStart",function(e){var t=PK(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TK(e,t)}(e,ie.PureComponent),t=e,n=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=e.stroke,a=Math.floor(r+o/2)-1;return ae.createElement(ae.Fragment,null,ae.createElement("rect",{x:t,y:r,width:n,height:o,fill:i,stroke:"none"}),ae.createElement("line",{x1:t+1,y1:a,x2:t+n-1,y2:a,fill:"none",stroke:"#fff"}),ae.createElement("line",{x1:t+1,y1:a+2,x2:t+n-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return ae.isValidElement(t)?ae.cloneElement(t,r):Mk(t)?t(r):e.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,o=e.x,i=e.travellerWidth,a=e.updateId,s=e.startIndex,c=e.endIndex;if(r!==t.prevData||a!==t.prevUpdateId)return NK({prevData:r,prevTravellerWidth:i,prevUpdateId:a,prevX:o,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,o=e.x,i=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=sF().domain(mK(0,s)).range([o,o+i-a]),l=c.domain().map(function(e){return c(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(n),scale:c,scaleValues:l}}({data:r,width:n,x:o,travellerWidth:i,startIndex:s,endIndex:c}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||o!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([o,o+n-i]);var l=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:i,prevUpdateId:a,prevX:o,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:l}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var o=Math.floor((r+n)/2);e[o]>t?n=o:r=o}return t>=e[n]?n:r}}],(r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var r=t.startX,n=t.endX,o=this.state.scaleValues,i=this.props,a=i.gap,s=i.data.length-1,c=Math.min(r,n),l=Math.max(r,n),u=e.getIndexInRange(o,c),d=e.getIndexInRange(o,l);return{startIndex:u-u%a,endIndex:d===s?s:d-d%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,o=t.dataKey,i=i$(r[e],o,e);return Mk(n)?n(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,o=t.endX,i=this.props,a=i.x,s=i.width,c=i.travellerWidth,l=i.startIndex,u=i.endIndex,d=i.onChange,h=e.pageX-r;h>0?h=Math.min(h,a+s-c-o,a+s-c-n):h<0&&(h=Math.max(h,a-n,a-o));var p=this.getIndex({startX:n+h,endX:o+h});p.startIndex===l&&p.endIndex===u||!d||d(p),this.setState({startX:n+h,endX:o+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=PK(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,o=t.endX,i=t.startX,a=this.state[n],s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.onChange,h=s.gap,p=s.data,f={startX:this.state.startX,endX:this.state.endX},m=e.pageX-r;m>0?m=Math.min(m,c+l-u-a):m<0&&(m=Math.max(m,c-a)),f[n]=a+m;var g=this.getIndex(f),v=g.startIndex,y=g.endIndex;this.setState(AK(AK({},n,a+m),"brushMoveStartX",e.pageX),function(){var e;d&&(e=p.length-1,("startX"===n&&(o>i?v%h===0:y%h===0)||o<i&&y===e||"endX"===n&&(o>i?y%h===0:v%h===0)||o>i&&y===e)&&d(g))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,o=n.scaleValues,i=n.startX,a=n.endX,s=this.state[t],c=o.indexOf(s);if(-1!==c){var l=c+e;if(!(-1===l||l>=o.length)){var u=o[l];"startX"===t&&u>=a||"endX"===t&&u<=i||this.setState(AK({},t,u),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,o=e.height,i=e.fill,a=e.stroke;return ae.createElement("rect",{stroke:a,fill:i,x:t,y:r,width:n,height:o})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,o=e.height,i=e.data,a=e.children,s=e.padding,c=ie.Children.only(a);return c?ae.cloneElement(c,{x:t,y:r,width:n,height:o,margin:s,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(t,r){var n,o,i=this,a=this.props,s=a.y,c=a.travellerWidth,l=a.height,u=a.traveller,d=a.ariaLabel,h=a.data,p=a.startIndex,f=a.endIndex,m=Math.max(t,this.props.x),g=NK(NK({},MO(this.props,!1)),{},{x:m,y:s,width:c,height:l}),v=d||"Min value: ".concat(null===(n=h[p])||void 0===n?void 0:n.name,", Max value: ").concat(null===(o=h[f])||void 0===o?void 0:o.name);return ae.createElement(HO,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(u,g))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,o=r.height,i=r.stroke,a=r.travellerWidth,s=Math.min(e,t)+a,c=Math.max(Math.abs(t-e)-a,0);return ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:s,y:n,width:c,height:o})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,o=e.height,i=e.travellerWidth,a=e.stroke,s=this.state,c=s.startX,l=s.endX,u={pointerEvents:"none",fill:a};return ae.createElement(HO,{className:"recharts-brush-texts"},ae.createElement(_L,jK({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,l)-5,y:n+o/2},u),this.getTextOfTick(t)),ae.createElement(_L,jK({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,l)+i+5,y:n+o/2},u),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,o=e.x,i=e.y,a=e.width,s=e.height,c=e.alwaysShowText,l=this.state,u=l.startX,d=l.endX,h=l.isTextActive,p=l.isSlideMoving,f=l.isTravellerMoving,m=l.isTravellerFocused;if(!t||!t.length||!iO(o)||!iO(i)||!iO(a)||!iO(s)||a<=0||s<=0)return null;var g=$r("recharts-brush",r),v=1===ae.Children.count(n),y=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=xK.reduce(function(e,n){return yK(yK({},e),{},bK({},n+r,t))},{});return n[e]=t,n}("userSelect","none");return ae.createElement(HO,{className:g,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(u,d),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(d,"endX"),(h||p||f||m||c)&&this.renderText())}}])&&kK(t.prototype,r),n&&kK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();AK(DK,"displayName","Brush"),AK(DK,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var IK=YI;var MK=c_,RK=oI,LK=function(e,t){var r;return IK(e,function(e,n,o){return!(r=t(e,n,o))}),!!r},FK=ok,zK=AM;const UK=oe(function(e,t,r){var n=FK(e)?MK:LK;return r&&zK(e,t,r)&&(t=void 0),n(e,RK(t))});var qK=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},BK=vM;var VK=function(e,t,r){"__proto__"==t&&BK?BK(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},$K=GI,WK=oI;const HK=oe(function(e,t){var r={};return t=WK(t),$K(e,function(e,n,o){VK(r,n,t(e,n,o))}),r});var GK=YI;var KK=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0},YK=function(e,t){var r=!0;return GK(e,function(e,n,o){return r=!!t(e,n,o)}),r},XK=oI,JK=ok,QK=AM;const ZK=oe(function(e,t,r){var n=JK(e)?KK:YK;return r&&QK(e,t,r)&&(t=void 0),n(e,XK(t))});var eY=["x","y"];function tY(e){return(tY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rY(){return rY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rY.apply(this,arguments)}function nY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nY(Object(r),!0).forEach(function(t){iY(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iY(e,t,r){var n;return n=function(e,t){if("object"!=tY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tY(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function sY(e,t){var r=e.x,n=e.y,o=aY(e,eY),i="".concat(r),a=parseInt(i,10),s="".concat(n),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),h=parseInt(d,10);return oY(oY(oY(oY(oY({},t),o),a?{x:a}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function cY(e){return ae.createElement(ZG,rY({shapeType:"rectangle",propTransformer:sY,activeClassName:"recharts-active-bar"},e))}var lY,uY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var o=iO(r)||function(e){return CC(e)}(r);return o?e(r,n):(o||DV(!1),t)}},dY=["value","background"];function hY(e){return(hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pY(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function fY(){return fY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fY.apply(this,arguments)}function mY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mY(Object(r),!0).forEach(function(t){jY(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SY(n.key),n)}}function yY(e,t,r){return t=xY(t),function(e,t){if(t&&("object"===hY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bY()?Reflect.construct(t,r||[],xY(e).constructor):t.apply(e,r))}function bY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bY=function(){return!!e})()}function xY(e){return(xY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wY(e,t){return(wY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jY(e,t,r){return(t=SY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SY(e){var t=function(e,t){if("object"!=hY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hY(t)?t:t+""}var NY=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jY(t=yY(this,e,[].concat(n)),"state",{isAnimationFinished:!1}),jY(t,"id",cO("recharts-bar-")),jY(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),jY(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wY(e,t)}(e,ie.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(r=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,o=r.dataKey,i=r.activeIndex,a=r.activeBar,s=MO(this.props,!1);return e&&e.map(function(e,r){var c=r===i,l=c?a:n,u=gY(gY(gY({},s),e),{},{isActive:c,option:l,index:r,dataKey:o,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return ae.createElement(HO,fY({className:"recharts-bar-rectangle"},wO(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(r)}),ae.createElement(cY,u))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,o=t.isAnimationActive,i=t.animationBegin,a=t.animationDuration,s=t.animationEasing,c=t.animationId,l=this.state.prevData;return ae.createElement(eG,{begin:i,duration:a,isActive:o,easing:s,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var o=t.t,i=r.map(function(e,t){var r=l&&l[t];if(r){var i=dO(r.x,e.x),a=dO(r.y,e.y),s=dO(r.width,e.width),c=dO(r.height,e.height);return gY(gY({},e),{},{x:i(o),y:a(o),width:s(o),height:c(o)})}if("horizontal"===n){var u=dO(0,e.height)(o);return gY(gY({},e),{},{y:e.y+e.height-u,height:u})}var d=dO(0,e.width)(o);return gY(gY({},e),{},{width:d})});return ae.createElement(HO,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&PB(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,o=t.activeIndex,i=MO(this.props.background,!1);return r.map(function(t,r){t.value;var a=t.background,s=pY(t,dY);if(!a)return null;var c=gY(gY(gY(gY(gY({},s),{},{fill:"#eee"},a),i),wO(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return ae.createElement(cY,fY({key:"background-bar-".concat(r),option:e.props.background,isActive:r===o},c))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,o=r.xAxis,i=r.yAxis,a=r.layout,s=_O(r.children,GV);if(!s)return null;var c="vertical"===a?n[0].height/2:n[0].width/2,l=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:i$(e,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ae.createElement(HO,u,s.map(function(e){return ae.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:o,yAxis:i,layout:a,offset:c,dataPointFormatter:l})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,o=e.xAxis,i=e.yAxis,a=e.left,s=e.top,c=e.width,l=e.height,u=e.isAnimationActive,d=e.background,h=e.id;if(t||!r||!r.length)return null;var p=this.state.isAnimationFinished,f=$r("recharts-bar",n),m=o&&o.allowDataOverflow,g=i&&i.allowDataOverflow,v=m||g,y=CC(h)?this.id:h;return ae.createElement(HO,{className:f},m||g?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(y)},ae.createElement("rect",{x:m?a:a-c/2,y:g?s:s-l/2,width:m?c:2*c,height:g?l:2*l}))):null,ae.createElement(HO,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(y,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,y),(!u||p)&&sW.renderCallByParent(this.props,r))}}])&&vY(t.prototype,r),n&&vY(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function kY(e){return(kY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AY(n.key),n)}}function CY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CY(Object(r),!0).forEach(function(t){TY(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TY(e,t,r){return(t=AY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AY(e){var t=function(e,t){if("object"!=kY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kY(t)?t:t+""}lY=NY,jY(NY,"displayName","Bar"),jY(NY,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!sR.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),jY(NY,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,o=e.bandSize,i=e.xAxis,a=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!p)return null;var f=t.layout,m=r.type.defaultProps,g=void 0!==m?gY(gY({},m),r.props):r.props,v=g.dataKey,y=g.children,b=g.minPointSize,x="horizontal"===f?a:i,w=l?x.scale.domain():null,j=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return n<=0&&o>=0?0:o<0?o:n}return r[0]}({numericAxis:x}),S=_O(y,KR),N=d.map(function(e,t){var n,d,h,m,g,y;l?n=function(e,t){if(!t||2!==t.length||!iO(t[0])||!iO(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!iO(e[0])||e[0]<r)&&(o[0]=r),(!iO(e[1])||e[1]>n)&&(o[1]=n),o[0]>n&&(o[0]=n),o[1]<r&&(o[1]=r),o}(l[u+t],w):(n=i$(e,v),Array.isArray(n)||(n=[j,n]));var x=uY(b,lY.defaultProps.minPointSize)(n[1],t);if("horizontal"===f){var N,k=[a.scale(n[0]),a.scale(n[1])],E=k[0],C=k[1];d=b$({axis:i,ticks:s,bandSize:o,offset:p.offset,entry:e,index:t}),h=null!==(N=null!=C?C:E)&&void 0!==N?N:void 0,m=p.size;var O=E-C;if(g=Number.isNaN(O)?0:O,y={x:d,y:a.y,width:m,height:a.height},Math.abs(x)>0&&Math.abs(g)<Math.abs(x)){var T=nO(g||x)*(Math.abs(x)-Math.abs(g));h-=T,g+=T}}else{var A=[i.scale(n[0]),i.scale(n[1])],_=A[0],P=A[1];if(d=_,h=b$({axis:a,ticks:c,bandSize:o,offset:p.offset,entry:e,index:t}),m=P-_,g=p.size,y={x:i.x,y:h,width:i.width,height:g},Math.abs(x)>0&&Math.abs(m)<Math.abs(x))m+=nO(m||x)*(Math.abs(x)-Math.abs(m))}return gY(gY(gY({},e),{},{x:d,y:h,width:m,height:g,value:l?n:n[1],payload:e,background:y},S&&S[t]&&S[t].props),{},{tooltipPayload:[E$(r,e)],tooltipPosition:{x:d+m/2,y:h+g/2}})});return gY({data:N,layout:f},h)});var _Y=function(e,t,r,n,o){var i=e.width,a=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:r.left,leftMirror:r.left,right:i-r.right,rightMirror:i-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},d=!!PO(c,NY);return l.reduce(function(i,a){var c,l,h,p,f,m=t[a],g=m.orientation,v=m.domain,y=m.padding,b=void 0===y?{}:y,x=m.mirror,w=m.reversed,j="".concat(g).concat(x?"Mirror":"");if("number"===m.type&&("gap"===m.padding||"no-gap"===m.padding)){var S=v[1]-v[0],N=1/0,k=m.categoricalDomain.sort(pO);if(k.forEach(function(e,t){t>0&&(N=Math.min((e||0)-(k[t-1]||0),N))}),Number.isFinite(N)){var E=N/S,C="vertical"===m.layout?r.height:r.width;if("gap"===m.padding&&(c=E*C/2),"no-gap"===m.padding){var O=lO(e.barCategoryGap,E*C),T=E*C/2;c=T-O-(T-O)/C*O}}}l="xAxis"===n?[r.left+(b.left||0)+(c||0),r.left+r.width-(b.right||0)-(c||0)]:"yAxis"===n?"horizontal"===s?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(c||0),r.top+r.height-(b.bottom||0)-(c||0)]:m.range,w&&(l=[l[1],l[0]]);var A=function(e,t,r){var n=e.scale,o=e.type,i=e.layout,a=e.axisType;if("auto"===n)return"radial"===i&&"radiusAxis"===a?{scale:iF(),realScaleType:"band"}:"radial"===i&&"angleAxis"===a?{scale:Oz(),realScaleType:"linear"}:"category"===o&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:sF(),realScaleType:"point"}:"category"===o?{scale:iF(),realScaleType:"band"}:{scale:Oz(),realScaleType:"linear"};if(_C(n)){var s="scale".concat(yT(n));return{scale:(pB[s]||sF)(),realScaleType:pB[s]?s:"point"}}return Mk(n)?{scale:n}:{scale:sF(),realScaleType:"point"}}(m,o,d),_=A.scale,P=A.realScaleType;_.domain(v).range(l),function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),o=Math.min(n[0],n[1])-m$,i=Math.max(n[0],n[1])+m$,a=e(t[0]),s=e(t[r-1]);(a<o||a>i||s<o||s>i)&&e.domain([t[0],t[r-1]])}}(_);var D=function(e,t){var r=t.realScaleType,n=t.type,o=t.tickCount,i=t.originalDomain,a=t.allowDecimals,s=r||t.scale;if("auto"!==s&&"linear"!==s)return null;if(o&&"number"===n&&i&&("auto"===i[0]||"auto"===i[1])){var c=e.domain();if(!c.length)return null;var l=AV(c,o,a);return e.domain([SB(l),bB(l)]),{niceTicks:l}}if(o&&"number"===n){var u=e.domain();return{niceTicks:_V(u,o,a)}}return null}(_,OY(OY({},m),{},{realScaleType:P}));"xAxis"===n?(f="top"===g&&!x||"bottom"===g&&x,h=r.left,p=u[j]-f*m.height):"yAxis"===n&&(f="left"===g&&!x||"right"===g&&x,h=u[j]-f*m.width,p=r.top);var I=OY(OY(OY({},m),D),{},{realScaleType:P,x:h,y:p,scale:_,width:"xAxis"===n?r.width:m.width,height:"yAxis"===n?r.height:m.height});return I.bandSize=N$(I,D),m.hide||"xAxis"!==n?m.hide||(u[j]+=(f?-1:1)*I.width):u[j]+=(f?-1:1)*I.height,OY(OY({},i),{},TY({},a,I))},{})},PY=function(e,t){var r=e.x,n=e.y,o=t.x,i=t.y;return{x:Math.min(r,o),y:Math.min(n,i),width:Math.abs(o-r),height:Math.abs(i-n)}},DY=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(r){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&EY(t.prototype,r),n&&EY(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();TY(DY,"EPS",1e-4);var IY=function(e){var t=Object.keys(e).reduce(function(t,r){return OY(OY({},t),{},TY({},r,DY.create(e[r])))},{});return OY(OY({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,o=r.position;return HK(e,function(e,r){return t[r].apply(e,{bandAware:n,position:o})})},isInRange:function(e){return ZK(e,function(e,r){return t[r].isInRange(e)})}})};var MY=oI,RY=TP,LY=DP;var FY=function(e){return function(t,r,n){var o=Object(t);if(!RY(t)){var i=MY(r);t=LY(t),r=function(e){return i(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[i?t[a]:a]:void 0}},zY=dK;var UY=iI,qY=oI,BY=function(e){var t=zY(e),r=t%1;return t==t?r?t-r:t:0},VY=Math.max;const $Y=oe(FY(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:BY(r);return o<0&&(o=VY(n+o,0)),UY(e,qY(t),o)}));var WY=eC(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),HY=ie.createContext(void 0),GY=ie.createContext(void 0),KY=ie.createContext(void 0),YY=ie.createContext({}),XY=ie.createContext(void 0),JY=ie.createContext(0),QY=ie.createContext(0),ZY=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,o=t.offset,i=e.clipPathId,a=e.children,s=e.width,c=e.height,l=WY(o);return ae.createElement(HY.Provider,{value:r},ae.createElement(GY.Provider,{value:n},ae.createElement(YY.Provider,{value:o},ae.createElement(KY.Provider,{value:l},ae.createElement(XY.Provider,{value:i},ae.createElement(JY.Provider,{value:c},ae.createElement(QY.Provider,{value:s},a)))))))},eX=function(e){var t=ie.useContext(HY);null==t&&DV(!1);var r=t[e];return null==r&&DV(!1),r},tX=function(e){var t=ie.useContext(GY);null==t&&DV(!1);var r=t[e];return null==r&&DV(!1),r},rX=function(){return ie.useContext(QY)},nX=function(){return ie.useContext(JY)};function oX(e){return(oX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pX(n.key),n)}}function aX(e,t,r){return t=cX(t),function(e,t){if(t&&("object"===oX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sX()?Reflect.construct(t,r||[],cX(e).constructor):t.apply(e,r))}function sX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sX=function(){return!!e})()}function cX(e){return(cX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lX(e,t){return(lX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uX(Object(r),!0).forEach(function(t){hX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hX(e,t,r){return(t=pX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=function(e,t){if("object"!=oX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oX(t)?t:t+""}function fX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mX(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gX(){return gX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gX.apply(this,arguments)}function vX(e){var t=e.x,r=e.y,n=e.segment,o=e.xAxisId,i=e.yAxisId,a=e.shape,s=e.className,c=e.alwaysShow,l=ie.useContext(XY),u=eX(o),d=tX(i),h=ie.useContext(KY);if(!l||!h)return null;GO(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,r,n,o,i,a,s,c){var l=o.x,u=o.y,d=o.width,h=o.height;if(r){var p=c.y,f=e.y.apply(p,{position:i});if(qK(c,"discard")&&!e.y.isInRange(f))return null;var m=[{x:l+d,y:f},{x:l,y:f}];return"left"===s?m.reverse():m}if(t){var g=c.x,v=e.x.apply(g,{position:i});if(qK(c,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:u+h},{x:v,y:u}];return"top"===a?y.reverse():y}if(n){var b=c.segment.map(function(t){return e.apply(t,{position:i})});return qK(c,"discard")&&UK(b,function(t){return!e.isInRange(t)})?null:b}return null}(IY({x:u.scale,y:d.scale}),aO(t),aO(r),n&&2===n.length,h,e.position,u.orientation,d.orientation,e);if(!p)return null;var f=fX(p,2),m=f[0],g=m.x,v=m.y,y=f[1],b=y.x,x=y.y,w=dX(dX({clipPath:qK(e,"hidden")?"url(#".concat(l,")"):void 0},MO(e,!0)),{},{x1:g,y1:v,x2:b,y2:x});return ae.createElement(HO,{className:$r("recharts-reference-line",s)},function(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):Mk(e)?e(t):ae.createElement("line",gX({},t,{className:"recharts-reference-line-line"}))}(a,w),G$.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,o=e.y2;return PY({x:t,y:r},{x:n,y:o})}({x1:g,y1:v,x2:b,y2:x})))}var yX=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aX(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lX(e,t)}(e,ae.Component),t=e,(r=[{key:"render",value:function(){return ae.createElement(vX,this.props)}}])&&iX(t.prototype,r),n&&iX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function bX(){return bX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bX.apply(this,arguments)}function xX(e){return(xX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wX(Object(r),!0).forEach(function(t){OX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TX(n.key),n)}}function NX(e,t,r){return t=EX(t),function(e,t){if(t&&("object"===xX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kX()?Reflect.construct(t,r||[],EX(e).constructor):t.apply(e,r))}function kX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(kX=function(){return!!e})()}function EX(e){return(EX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CX(e,t){return(CX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OX(e,t,r){return(t=TX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TX(e){var t=function(e,t){if("object"!=xX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xX(t)?t:t+""}hX(yX,"displayName","ReferenceLine"),hX(yX,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var AX=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),NX(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CX(e,t)}(e,ae.Component),t=e,(r=[{key:"render",value:function(){var t=this.props,r=t.x,n=t.y,o=t.r,i=t.alwaysShow,a=t.clipPathId,s=aO(r),c=aO(n);if(GO(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!c)return null;var l=function(e){var t=e.x,r=e.y,n=e.xAxis,o=e.yAxis,i=IY({x:n.scale,y:o.scale}),a=i.apply({x:t,y:r},{bandAware:!0});return qK(e,"discard")&&!i.isInRange(a)?null:a}(this.props);if(!l)return null;var u=l.x,d=l.y,h=this.props,p=h.shape,f=h.className,m=jX(jX({clipPath:qK(this.props,"hidden")?"url(#".concat(a,")"):void 0},MO(this.props,!0)),{},{cx:u,cy:d});return ae.createElement(HO,{className:$r("recharts-reference-dot",f)},e.renderDot(p,m),G$.renderCallByParent(this.props,{x:u-o,y:d-o,width:2*o,height:2*o}))}}])&&SX(t.prototype,r),n&&SX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function _X(){return _X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_X.apply(this,arguments)}function PX(e){return(PX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function IX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DX(Object(r),!0).forEach(function(t){UX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function MX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qX(n.key),n)}}function RX(e,t,r){return t=FX(t),function(e,t){if(t&&("object"===PX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,LX()?Reflect.construct(t,r||[],FX(e).constructor):t.apply(e,r))}function LX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(LX=function(){return!!e})()}function FX(e){return(FX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zX(e,t){return(zX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UX(e,t,r){return(t=qX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qX(e){var t=function(e,t){if("object"!=PX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PX(t)?t:t+""}OX(AX,"displayName","ReferenceDot"),OX(AX,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),OX(AX,"renderDot",function(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):Mk(e)?e(t):ae.createElement(pG,bX({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var BX=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),RX(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zX(e,t)}(e,ae.Component),t=e,r=[{key:"render",value:function(){var t=this.props,r=t.x1,n=t.x2,o=t.y1,i=t.y2,a=t.className,s=t.alwaysShow,c=t.clipPathId;GO(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=aO(r),u=aO(n),d=aO(o),h=aO(i),p=this.props.shape;if(!(l||u||d||h||p))return null;var f=function(e,t,r,n,o){var i=o.x1,a=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=IY({x:l.scale,y:u.scale}),h={x:e?d.x.apply(i,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:n?d.y.apply(c,{position:"end"}):d.y.rangeMax};return!qK(o,"discard")||d.isInRange(h)&&d.isInRange(p)?PY(h,p):null}(l,u,d,h,this.props);if(!f&&!p)return null;var m=qK(this.props,"hidden")?"url(#".concat(c,")"):void 0;return ae.createElement(HO,{className:$r("recharts-reference-area",a)},e.renderRect(p,IX(IX({clipPath:m},MO(this.props,!0)),f)),G$.renderCallByParent(this.props,f))}}],r&&MX(t.prototype,r),n&&MX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function VX(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],o=0;o<e.length;o+=t){if(void 0!==r&&!0!==r(e[o]))return;n.push(e[o])}return n}function $X(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),o=n*Math.PI/180,i=Math.atan(r/t),a=o>i&&o<Math.PI-i?r/Math.sin(o):t/Math.cos(o);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},r)}function WX(e,t,r,n,o){if(e*t<e*n||e*t>e*o)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-o)<=0}function HX(e){return(HX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GX(Object(r),!0).forEach(function(t){YX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function YX(e,t,r){var n;return n=function(e,t){if("object"!=HX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==HX(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XX(e,t,r){var n=e.tick,o=e.ticks,i=e.viewBox,a=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!n)return[];if(iO(c)||sR.isSsr)return function(e,t){return VX(e,t+1)}(o,"number"==typeof c&&iO(c)?c:0);var h=[],p="top"===s||"bottom"===s?"width":"height",f=u&&"width"===p?rL(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(e,n){var o=Mk(l)?l(e.value,n):e.value;return"width"===p?$X(rL(o,{fontSize:t,letterSpacing:r}),f,d):rL(o,{fontSize:t,letterSpacing:r})[p]},g=o.length>=2?nO(o[1].coordinate-o[0].coordinate):1,v=function(e,t,r){var n="width"===r,o=e.x,i=e.y,a=e.width,s=e.height;return 1===t?{start:n?o:i,end:n?o+a:i+s}:{start:n?o+a:i+s,end:n?o:i}}(i,g,p);return"equidistantPreserveStart"===c?function(e,t,r,n,o){for(var i,a=(n||[]).slice(),s=t.start,c=t.end,l=0,u=1,d=s,h=function(){var t=null==n?void 0:n[l];if(void 0===t)return{v:VX(n,u)};var i,a=l,h=function(){return void 0===i&&(i=r(t,a)),i},p=t.coordinate,f=0===l||WX(e,p,h,d,c);f||(l=0,d=s,u+=1),f&&(d=p+e*(h()/2+o),l+=u)};u<=a.length;)if(i=h())return i.v;return[]}(g,v,m,o,a):(h="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,o,i){var a=(n||[]).slice(),s=a.length,c=t.start,l=t.end;if(i){var u=n[s-1],d=r(u,s-1),h=e*(u.coordinate+e*d/2-l);a[s-1]=u=KX(KX({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),WX(e,u.tickCoord,function(){return d},c,l)&&(l=u.tickCoord-e*(d/2+o),a[s-1]=KX(KX({},u),{},{isShow:!0}))}for(var p=i?s-1:s,f=function(t){var n,i=a[t],s=function(){return void 0===n&&(n=r(i,t)),n};if(0===t){var u=e*(i.coordinate-e*s()/2-c);a[t]=i=KX(KX({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else a[t]=i=KX(KX({},i),{},{tickCoord:i.coordinate});WX(e,i.tickCoord,s,c,l)&&(c=i.tickCoord+e*(s()/2+o),a[t]=KX(KX({},i),{},{isShow:!0}))},m=0;m<p;m++)f(m);return a}(g,v,m,o,a,"preserveStartEnd"===c):function(e,t,r,n,o){for(var i=(n||[]).slice(),a=i.length,s=t.start,c=t.end,l=function(t){var n,l=i[t],u=function(){return void 0===n&&(n=r(l,t)),n};if(t===a-1){var d=e*(l.coordinate+e*u()/2-c);i[t]=l=KX(KX({},l),{},{tickCoord:d>0?l.coordinate-d*e:l.coordinate})}else i[t]=l=KX(KX({},l),{},{tickCoord:l.coordinate});WX(e,l.tickCoord,u,s,c)&&(c=l.tickCoord-e*(u()/2+o),i[t]=KX(KX({},l),{},{isShow:!0}))},u=a-1;u>=0;u--)l(u);return i}(g,v,m,o,a),h.filter(function(e){return e.isShow}))}UX(BX,"displayName","ReferenceArea"),UX(BX,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),UX(BX,"renderRect",function(e,t){return ae.isValidElement(e)?ae.cloneElement(e,t):Mk(e)?e(t):ae.createElement(dG,_X({},t,{className:"recharts-reference-area-rect"}))});var JX=["viewBox"],QX=["viewBox"],ZX=["ticks"];function eJ(e){return(eJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tJ(){return tJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tJ.apply(this,arguments)}function rJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rJ(Object(r),!0).forEach(function(t){uJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oJ(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function iJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dJ(n.key),n)}}function aJ(e,t,r){return t=cJ(t),function(e,t){if(t&&("object"===eJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sJ()?Reflect.construct(t,r||[],cJ(e).constructor):t.apply(e,r))}function sJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sJ=function(){return!!e})()}function cJ(e){return(cJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lJ(e,t){return(lJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uJ(e,t,r){return(t=dJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJ(e){var t=function(e,t){if("object"!=eJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eJ(t)?t:t+""}var hJ=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=aJ(this,e,[t])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lJ(e,t)}(e,ie.Component),t=e,n=[{key:"renderTickItem",value:function(e,t,r){var n=$r(t.className,"recharts-cartesian-axis-tick-value");return ae.isValidElement(e)?ae.cloneElement(e,nJ(nJ({},t),{},{className:n})):Mk(e)?e(nJ(nJ({},t),{},{className:n})):ae.createElement(_L,tJ({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=oJ(e,JX),o=this.props,i=o.viewBox,a=oJ(o,QX);return!fO(r,i)||!fO(n,a)||!fO(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,o,i,a,s=this.props,c=s.x,l=s.y,u=s.width,d=s.height,h=s.orientation,p=s.tickSize,f=s.mirror,m=s.tickMargin,g=f?-1:1,v=e.tickSize||p,y=iO(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,a=(n=(o=l+ +!f*d)-g*v)-g*m,i=y;break;case"left":n=o=e.coordinate,i=(t=(r=c+ +!f*u)-g*v)-g*m,a=y;break;case"right":n=o=e.coordinate,i=(t=(r=c+ +f*u)+g*v)+g*m,a=y;break;default:t=r=e.coordinate,a=(n=(o=l+ +f*d)+g*v)+g*m,i=y}return{line:{x1:t,y1:n,x2:r,y2:o},tick:{x:i,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,o=e.height,i=e.orientation,a=e.mirror,s=e.axisLine,c=nJ(nJ(nJ({},MO(this.props,!1)),MO(s,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var l=+("top"===i&&!a||"bottom"===i&&a);c=nJ(nJ({},c),{},{x1:t,y1:r+l*o,x2:t+n,y2:r+l*o})}else{var u=+("left"===i&&!a||"right"===i&&a);c=nJ(nJ({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+o})}return ae.createElement("line",tJ({},c,{className:$r("recharts-cartesian-axis-line",EC(s,"className"))}))}},{key:"renderTicks",value:function(t,r,n){var o=this,i=this.props,a=i.tickLine,s=i.stroke,c=i.tick,l=i.tickFormatter,u=i.unit,d=XX(nJ(nJ({},this.props),{},{ticks:t}),r,n),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=MO(this.props,!1),m=MO(c,!1),g=nJ(nJ({},f),{},{fill:"none"},MO(a,!1)),v=d.map(function(t,r){var n=o.getTickLineCoord(t),i=n.line,v=n.tick,y=nJ(nJ(nJ(nJ({textAnchor:h,verticalAnchor:p},f),{},{stroke:"none",fill:s},m),v),{},{index:r,payload:t,visibleTicksCount:d.length,tickFormatter:l});return ae.createElement(HO,tJ({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},wO(o.props,t,r)),a&&ae.createElement("line",tJ({},g,i,{className:$r("recharts-cartesian-axis-tick-line",EC(a,"className"))})),c&&e.renderTickItem(c,y,"".concat(Mk(l)?l(t.value,r):t.value).concat(u||"")))});return ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,o=t.height,i=t.ticksGenerator,a=t.className;if(t.hide)return null;var s=this.props,c=s.ticks,l=oJ(s,ZX),u=c;return Mk(i)&&(u=c&&c.length>0?i(this.props):i(l)),n<=0||o<=0||!u||!u.length?null:ae.createElement(HO,{className:$r("recharts-cartesian-axis",a),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),G$.renderCallByParent(this.props))}}])&&iJ(t.prototype,r),n&&iJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();uJ(hJ,"displayName","CartesianAxis"),uJ(hJ,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var pJ=["x1","y1","x2","y2","key"],fJ=["offset"];function mJ(e){return(mJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gJ(Object(r),!0).forEach(function(t){yJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yJ(e,t,r){var n;return n=function(e,t){if("object"!=mJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==mJ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(){return bJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bJ.apply(this,arguments)}function xJ(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var wJ=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,o=e.y,i=e.width,a=e.height,s=e.ry;return ae.createElement("rect",{x:n,y:o,ry:s,width:i,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function jJ(e,t){var r;if(ae.isValidElement(e))r=ae.cloneElement(e,t);else if(Mk(e))r=e(t);else{var n=t.x1,o=t.y1,i=t.x2,a=t.y2,s=t.key,c=xJ(t,pJ),l=MO(c,!1);l.offset;var u=xJ(l,fJ);r=ae.createElement("line",bJ({},u,{x1:n,y1:o,x2:i,y2:a,fill:"none",key:s}))}return r}function SJ(e){var t=e.x,r=e.width,n=e.horizontal,o=void 0===n||n,i=e.horizontalPoints;if(!o||!i||!i.length)return null;var a=i.map(function(n,i){var a=vJ(vJ({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(i),index:i});return jJ(o,a)});return ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function NJ(e){var t=e.y,r=e.height,n=e.vertical,o=void 0===n||n,i=e.verticalPoints;if(!o||!i||!i.length)return null;var a=i.map(function(n,i){var a=vJ(vJ({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(i),index:i});return jJ(o,a)});return ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function kJ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,o=e.y,i=e.width,a=e.height,s=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!t||!t.length)return null;var l=s.map(function(e){return Math.round(e+o-o)}).sort(function(e,t){return e-t});o!==l[0]&&l.unshift(0);var u=l.map(function(e,s){var c=!l[s+1]?o+a-e:l[s+1]-e;if(c<=0)return null;var u=s%t.length;return ae.createElement("rect",{key:"react-".concat(s),y:e,x:n,height:c,width:i,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function EJ(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,o=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!r||!n||!n.length)return null;var u=l.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var d=u.map(function(e,t){var r=!u[t+1]?i+s-e:u[t+1]-e;if(r<=0)return null;var l=t%n.length;return ae.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:r,height:c,stroke:"none",fill:n[l],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var CJ=function(e,t){var r=e.xAxis,n=e.width,o=e.height,i=e.offset;return d$(XX(vJ(vJ(vJ({},hJ.defaultProps),r),{},{ticks:h$(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.left,i.left+i.width,t)},OJ=function(e,t){var r=e.yAxis,n=e.width,o=e.height,i=e.offset;return d$(XX(vJ(vJ(vJ({},hJ.defaultProps),r),{},{ticks:h$(r,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.top,i.top+i.height,t)},TJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function AJ(e){var t,r,n,o,i,a,s,c,l=rX(),u=nX(),d=ie.useContext(YY),h=vJ(vJ({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:TJ.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:TJ.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:TJ.horizontal,horizontalFill:null!==(o=e.horizontalFill)&&void 0!==o?o:TJ.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:TJ.vertical,verticalFill:null!==(a=e.verticalFill)&&void 0!==a?a:TJ.verticalFill,x:iO(e.x)?e.x:d.left,y:iO(e.y)?e.y:d.top,width:iO(e.width)?e.width:d.width,height:iO(e.height)?e.height:d.height}),p=h.x,f=h.y,m=h.width,g=h.height,v=h.syncWithTicks,y=h.horizontalValues,b=h.verticalValues,x=(s=ie.useContext(HY),uO(s)),w=(c=ie.useContext(GY),$Y(c,function(e){return ZK(e.domain,Number.isFinite)})||uO(c));if(!iO(m)||m<=0||!iO(g)||g<=0||!iO(p)||p!==+p||!iO(f)||f!==+f)return null;var j=h.verticalCoordinatesGenerator||CJ,S=h.horizontalCoordinatesGenerator||OJ,N=h.horizontalPoints,k=h.verticalPoints;if((!N||!N.length)&&Mk(S)){var E=y&&y.length,C=S({yAxis:w?vJ(vJ({},w),{},{ticks:E?y:w.ticks}):void 0,width:l,height:u,offset:d},!!E||v);GO(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(mJ(C),"]")),Array.isArray(C)&&(N=C)}if((!k||!k.length)&&Mk(j)){var O=b&&b.length,T=j({xAxis:x?vJ(vJ({},x),{},{ticks:O?b:x.ticks}):void 0,width:l,height:u,offset:d},!!O||v);GO(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(mJ(T),"]")),Array.isArray(T)&&(k=T)}return ae.createElement("g",{className:"recharts-cartesian-grid"},ae.createElement(wJ,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),ae.createElement(SJ,bJ({},h,{offset:d,horizontalPoints:N,xAxis:x,yAxis:w})),ae.createElement(NJ,bJ({},h,{offset:d,verticalPoints:k,xAxis:x,yAxis:w})),ae.createElement(kJ,bJ({},h,{horizontalPoints:N})),ae.createElement(EJ,bJ({},h,{verticalPoints:k})))}AJ.displayName="CartesianGrid";var _J=["type","layout","connectNulls","ref"],PJ=["key"];function DJ(e){return(DJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IJ(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function MJ(){return MJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MJ.apply(this,arguments)}function RJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RJ(Object(r),!0).forEach(function(t){WJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FJ(e){return function(e){if(Array.isArray(e))return zJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return zJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zJ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HJ(n.key),n)}}function qJ(e,t,r){return t=VJ(t),function(e,t){if(t&&("object"===DJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BJ()?Reflect.construct(t,r||[],VJ(e).constructor):t.apply(e,r))}function BJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(BJ=function(){return!!e})()}function VJ(e){return(VJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $J(e,t){return($J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WJ(e,t,r){return(t=HJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HJ(e){var t=function(e,t){if("object"!=DJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DJ(t)?t:t+""}var GJ=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return WJ(t=qJ(this,e,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),WJ(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),WJ(t,"getStrokeDasharray",function(r,n,o){var i=o.reduce(function(e,t){return e+t});if(!i)return t.generateSimpleStrokeDasharray(n,r);for(var a=Math.floor(r/i),s=r%i,c=n-r,l=[],u=0,d=0;u<o.length;d+=o[u],++u)if(d+o[u]>s){l=[].concat(FJ(o.slice(0,u)),[s-d]);break}var h=l.length%2==0?[0,c]:[c];return[].concat(FJ(e.repeat(o,a)),FJ(l),h).map(function(e){return"".concat(e,"px")}).join(", ")}),WJ(t,"id",cO("recharts-line-")),WJ(t,"pathRef",function(e){t.mainCurve=e}),WJ(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),WJ(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$J(e,t)}(e,ie.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(FJ(e),[0]):e,n=[],o=0;o<t;++o)n=[].concat(FJ(n),FJ(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(ae.isValidElement(e))r=ae.cloneElement(e,t);else if(Mk(e))r=e(t);else{var n=t.key,o=IJ(t,PJ),i=$r("recharts-line-dot","boolean"!=typeof e?e.className:"");r=ae.createElement(pG,MJ({key:n},o,{className:i}))}return r}}],(r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,o=r.xAxis,i=r.yAxis,a=r.layout,s=_O(r.children,GV);if(!s)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:i$(e.payload,t)}},l={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ae.createElement(HO,l,s.map(function(e){return ae.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:o,yAxis:i,layout:a,dataPointFormatter:c})}))}},{key:"renderDots",value:function(t,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.dot,a=o.points,s=o.dataKey,c=MO(this.props,!1),l=MO(i,!0),u=a.map(function(t,r){var n=LJ(LJ(LJ({key:"dot-".concat(r),r:3},c),l),{},{index:r,cx:t.x,cy:t.y,value:t.value,dataKey:s,payload:t.payload,points:a});return e.renderDotItem(i,n)}),d={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return ae.createElement(HO,MJ({className:"recharts-line-dots",key:"dots"},d),u)}},{key:"renderCurveStatically",value:function(e,t,r,n){var o=this.props,i=o.type,a=o.layout,s=o.connectNulls;o.ref;var c=IJ(o,_J),l=LJ(LJ(LJ({},MO(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:i,layout:a,connectNulls:s});return ae.createElement(CW,MJ({},l,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,o=n.points,i=n.strokeDasharray,a=n.isAnimationActive,s=n.animationBegin,c=n.animationDuration,l=n.animationEasing,u=n.animationId,d=n.animateNewValues,h=n.width,p=n.height,f=this.state,m=f.prevPoints,g=f.totalLength;return ae.createElement(eG,{begin:s,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"line-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t;if(m){var s=m.length/o.length,c=o.map(function(e,t){var r=Math.floor(t*s);if(m[r]){var n=m[r],o=dO(n.x,e.x),i=dO(n.y,e.y);return LJ(LJ({},e),{},{x:o(a),y:i(a)})}if(d){var c=dO(2*h,e.x),l=dO(p/2,e.y);return LJ(LJ({},e),{},{x:c(a),y:l(a)})}return LJ(LJ({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(c,e,t)}var l,u=dO(0,g)(a);if(i){var f="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});l=r.getStrokeDasharray(u,g,f)}else l=r.generateSimpleStrokeDasharray(g,u);return r.renderCurveStatically(o,e,t,{strokeDasharray:l})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,o=r.isAnimationActive,i=this.state,a=i.prevPoints,s=i.totalLength;return o&&n&&n.length&&(!a&&s>0||!PB(a,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,o=t.points,i=t.className,a=t.xAxis,s=t.yAxis,c=t.top,l=t.left,u=t.width,d=t.height,h=t.isAnimationActive,p=t.id;if(r||!o||!o.length)return null;var f=this.state.isAnimationFinished,m=1===o.length,g=$r("recharts-line",i),v=a&&a.allowDataOverflow,y=s&&s.allowDataOverflow,b=v||y,x=CC(p)?this.id:p,w=null!==(e=MO(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,S=void 0===j?3:j,N=w.strokeWidth,k=void 0===N?2:N,E=(function(e){return e&&"object"===kO(e)&&"clipDot"in e}(n)?n:{}).clipDot,C=void 0===E||E,O=2*S+k;return ae.createElement(HO,{className:g},v||y?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(x)},ae.createElement("rect",{x:v?l:l-u/2,y:y?c:c-d/2,width:v?u:2*u,height:y?d:2*d})),!C&&ae.createElement("clipPath",{id:"clipPath-dots-".concat(x)},ae.createElement("rect",{x:l-O/2,y:c-O/2,width:u+O,height:d+O}))):null,!m&&this.renderCurve(b,x),this.renderErrorBar(b,x),(m||n)&&this.renderDots(b,C,x),(!h||f)&&sW.renderCallByParent(this.props,o))}}])&&UJ(t.prototype,r),n&&UJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function KJ(e){return(KJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tQ(n.key),n)}}function XJ(e,t,r){return t=QJ(t),function(e,t){if(t&&("object"===KJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,JJ()?Reflect.construct(t,r||[],QJ(e).constructor):t.apply(e,r))}function JJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(JJ=function(){return!!e})()}function QJ(e){return(QJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZJ(e,t){return(ZJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eQ(e,t,r){return(t=tQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=function(e,t){if("object"!=KJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=KJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KJ(t)?t:t+""}function rQ(){return rQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rQ.apply(this,arguments)}function nQ(e){var t=e.xAxisId,r=rX(),n=nX(),o=eX(t);return null==o?null:ie.createElement(hJ,rQ({},o,{className:$r("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return h$(e,!0)}}))}WJ(GJ,"displayName","Line"),WJ(GJ,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!sR.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),WJ(GJ,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,a=e.dataKey,s=e.bandSize,c=e.displayedData,l=e.offset,u=t.layout;return LJ({points:c.map(function(e,t){var c=i$(e,a);return"horizontal"===u?{x:y$({axis:r,ticks:o,bandSize:s,entry:e,index:t}),y:CC(c)?null:n.scale(c),value:c,payload:e}:{x:CC(c)?null:r.scale(c),y:y$({axis:n,ticks:i,bandSize:s,entry:e,index:t}),value:c,payload:e}}),layout:u},l)});var oQ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),XJ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZJ(e,t)}(e,ie.Component),t=e,(r=[{key:"render",value:function(){return ie.createElement(nQ,this.props)}}])&&YJ(t.prototype,r),n&&YJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function iQ(e){return(iQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hQ(n.key),n)}}function sQ(e,t,r){return t=lQ(t),function(e,t){if(t&&("object"===iQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cQ()?Reflect.construct(t,r||[],lQ(e).constructor):t.apply(e,r))}function cQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(cQ=function(){return!!e})()}function lQ(e){return(lQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uQ(e,t){return(uQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dQ(e,t,r){return(t=hQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=function(e,t){if("object"!=iQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iQ(t)?t:t+""}function pQ(){return pQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pQ.apply(this,arguments)}eQ(oQ,"displayName","XAxis"),eQ(oQ,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var fQ=function(e){var t=e.yAxisId,r=rX(),n=nX(),o=tX(t);return null==o?null:ie.createElement(hJ,pQ({},o,{className:$r("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return h$(e,!0)}}))},mQ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sQ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uQ(e,t)}(e,ie.Component),t=e,(r=[{key:"render",value:function(){return ie.createElement(fQ,this.props)}}])&&aQ(t.prototype,r),n&&aQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function gQ(e){return function(e){if(Array.isArray(e))return vQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vQ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}dQ(mQ,"displayName","YAxis"),dQ(mQ,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var yQ=function(e,t,r,n,o){var i=_O(e,yX),a=_O(e,AX),s=[].concat(gQ(i),gQ(a)),c=_O(e,BX),l="".concat(n,"Id"),u=n[0],d=t;if(s.length&&(d=s.reduce(function(e,t){if(t.props[l]===r&&qK(t.props,"extendDomain")&&iO(t.props[u])){var n=t.props[u];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},d)),c.length){var h="".concat(u,"1"),p="".concat(u,"2");d=c.reduce(function(e,t){if(t.props[l]===r&&qK(t.props,"extendDomain")&&iO(t.props[h])&&iO(t.props[p])){var n=t.props[h],o=t.props[p];return[Math.min(e[0],n,o),Math.max(e[1],n,o)]}return e},d)}return o&&o.length&&(d=o.reduce(function(e,t){return iO(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},bQ={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,o),!0;case 5:return u.fn.call(u.context,t,n,o,i),!0;case 6:return u.fn.call(u.context,t,n,o,i,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,o);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||o&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(bQ);var xQ=new(oe(bQ.exports)),wQ="recharts.syncMouseEvents";function jQ(e){return(jQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kQ(n.key),n)}}function NQ(e,t,r){return(t=kQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kQ(e){var t=function(e,t){if("object"!=jQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jQ(t)?t:t+""}var EQ=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),NQ(this,"activeIndex",0),NQ(this,"coordinateList",[]),NQ(this,"layout","horizontal")},(t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,o=e.container,i=void 0===o?null:o,a=e.layout,s=void 0===a?null:a,c=e.offset,l=void 0===c?null:c,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!=n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!=i?i:this.container,this.layout=null!=s?s:this.layout,this.offset=null!=l?l:this.offset,this.mouseHandlerCallback=null!=d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,o=r.y,i=r.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,c=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,l=n+a+s,u=o+this.offset.top+i/2+c;this.mouseHandlerCallback({pageX:l,pageY:u})}}}])&&SQ(e.prototype,t),r&&SQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function CQ(e){var t=e.cx,r=e.cy,n=e.radius,o=e.startAngle,i=e.endAngle;return{points:[D$(t,r,n,o),D$(t,r,n,i)],cx:t,cy:r,radius:n,startAngle:o,endAngle:i}}function OQ(e,t,r){var n,o,i,a;if("horizontal"===e)i=n=t.x,o=r.top,a=r.top+r.height;else if("vertical"===e)a=o=t.y,n=r.left,i=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return CQ(t);var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,h=D$(s,c,l,d),p=D$(s,c,u,d);n=h.x,o=h.y,i=p.x,a=p.y}return[{x:n,y:o},{x:i,y:a}]}function TQ(e){return(TQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AQ(Object(r),!0).forEach(function(t){PQ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function PQ(e,t,r){var n;return n=function(e,t){if("object"!=TQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==TQ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DQ(e){var t,r,n,o=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,c=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,f=null!==(t=o.props.cursor)&&void 0!==t?t:null===(r=o.type.defaultProps)||void 0===r?void 0:r.cursor;if(!o||!f||!a||!s||"ScatterChart"!==p&&"axis"!==i)return null;var m=CW;if("ScatterChart"===p)n=s,m=wG;else if("BarChart"===p)n=function(e,t,r,n){var o=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-o:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-o,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(h,s,l,d),m=dG;else if("radial"===h){var g=CQ(s),v=g.cx,y=g.cy,b=g.radius;n={cx:v,cy:y,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:b,outerRadius:b},m=gW}else n={points:OQ(h,s,l)},m=CW;var x=_Q(_Q(_Q(_Q({stroke:"#ccc",pointerEvents:"none"},l),n),MO(f,!1)),{},{payload:c,payloadIndex:u,className:$r("recharts-tooltip-cursor",f.className)});return ie.isValidElement(f)?ie.cloneElement(f,x):ie.createElement(m,x)}var IQ=["item"],MQ=["children","className","width","height","style","compact","title","desc"];function RQ(e){return(RQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LQ(){return LQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LQ.apply(this,arguments)}function FQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||HQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zQ(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function UQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JQ(n.key),n)}}function qQ(e,t,r){return t=VQ(t),function(e,t){if(t&&("object"===RQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BQ()?Reflect.construct(t,r||[],VQ(e).constructor):t.apply(e,r))}function BQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(BQ=function(){return!!e})()}function VQ(e){return(VQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $Q(e,t){return($Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WQ(e){return function(e){if(Array.isArray(e))return GQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||HQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HQ(e,t){if(e){if("string"==typeof e)return GQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GQ(e,t):void 0}}function GQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function KQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KQ(Object(r),!0).forEach(function(t){XQ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function XQ(e,t,r){return(t=JQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JQ(e){var t=function(e,t){if("object"!=RQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RQ(t)?t:t+""}var QQ={xAxis:["bottom","top"],yAxis:["left","right"]},ZQ={width:"100%",height:"100%"},eZ={x:0,y:0};function tZ(e){return e}var rZ=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,o=t.dataEndIndex,i=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(WQ(e),WQ(r)):e},[]);return i.length>0?i:e&&e.length&&iO(n)&&iO(o)?e.slice(n,o+1):[]};function nZ(e){return"number"===e?[0,"auto"]:void 0}var oZ=function(e,t,r,n){var o=e.graphicalItems,i=e.tooltipAxis,a=rZ(t,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(o,s){var c,l,u=null!==(c=s.props.data)&&void 0!==c?c:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),i.dataKey&&!i.allowDuplicatedCategory)?l=hO(void 0===u?a:u,i.dataKey,n):l=u&&u[r]||a[r];return l?[].concat(WQ(o),[E$(s,l)]):o},[])},iZ=function(e,t,r,n){var o=n||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(o,r),a=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,a=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(a<=1)return 0;if(o&&"angleAxis"===o.axisType&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<a;c++){var l=c>0?n[c-1].coordinate:n[a-1].coordinate,u=n[c].coordinate,d=c>=a-1?n[0].coordinate:n[c+1].coordinate,h=void 0;if(nO(u-l)!==nO(d-u)){var p=[];if(nO(d-u)===nO(s[1]-s[0])){h=d;var f=u+s[1]-s[0];p[0]=Math.min(f,(f+l)/2),p[1]=Math.max(f,(f+l)/2)}else{h=l;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){i=n[c].index;break}}else{var v=Math.min(l,d),y=Math.max(l,d);if(e>(v+u)/2&&e<=(y+u)/2){i=n[c].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){i=r[b].index;break}return i}(i,a,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=oZ(e,t,l,u),h=function(e,t,r,n){var o=t.find(function(e){return e&&e.index===r});if(o){if("horizontal"===e)return{x:o.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:o.coordinate};if("centric"===e){var i=o.coordinate,a=n.radius;return YQ(YQ(YQ({},n),D$(n.cx,n.cy,a,i)),{},{angle:i,radius:a})}var s=o.coordinate,c=n.angle;return YQ(YQ(YQ({},n),D$(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return eZ}(r,a,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},aZ=function(e,t){var r=t.axes,n=t.graphicalItems,o=t.axisType,i=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,h=u$(l,o);return r.reduce(function(t,r){var p,f=void 0!==r.type.defaultProps?YQ(YQ({},r.type.defaultProps),r.props):r.props,m=f.type,g=f.dataKey,v=f.allowDataOverflow,y=f.allowDuplicatedCategory,b=f.scale,x=f.ticks,w=f.includeHidden,j=f[i];if(t[j])return t;var S,N,k,E=rZ(e.data,{graphicalItems:n.filter(function(e){var t;return(i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i])===j}),dataStartIndex:s,dataEndIndex:c}),C=E.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],o=null==e?void 0:e[1];if(n&&o&&iO(n)&&iO(o))return!0}return!1})(f.domain,v,m)&&(S=S$(f.domain,null,v),!h||"number"!==m&&"auto"===b||(k=a$(E,g,"category")));var O=nZ(m);if(!S||0===S.length){var T,A=null!==(T=f.domain)&&void 0!==T?T:O;if(g){if(S=a$(E,g,m),"category"===m&&h){var _=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(S);y&&_?(N=S,S=mK(0,C)):y||(S=k$(A,S,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(WQ(e),[t])},[]))}else if("category"===m)S=y?S.filter(function(e){return""!==e&&!CC(e)}):k$(A,S,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||CC(t)?e:[].concat(WQ(e),[t])},[]);else if("number"===m){var P=function(e,t,r,n,o){var i=t.map(function(t){return c$(e,t,r,o,n)}).filter(function(e){return!CC(e)});return i&&i.length?i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(E,n.filter(function(e){var t,r,n=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],o="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===j&&(w||!o)}),g,o,l);P&&(S=P)}!h||"number"!==m&&"auto"===b||(k=a$(E,g,"category"))}else S=h?mK(0,C):a&&a[j]&&a[j].hasStack&&"number"===m?"expand"===d?[0,1]:x$(a[j].stackGroups,s,c):l$(E,n.filter(function(e){var t=i in e.props?e.props[i]:e.type.defaultProps[i],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===j&&(w||!r)}),m,l,!0);if("number"===m)S=yQ(u,S,j,o,x),A&&(S=S$(A,S,v));else if("category"===m&&A){var D=A;S.every(function(e){return D.indexOf(e)>=0})&&(S=D)}}return YQ(YQ({},t),{},XQ({},j,YQ(YQ({},f),{},{axisType:o,domain:S,categoricalDomain:k,duplicateDomain:N,originalDomain:null!==(p=f.domain)&&void 0!==p?p:O,isCategorical:h,layout:l})))},{})},sZ=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,o=t.AxisComp,i=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(n,"Id"),d=_O(l,o),h={};return d&&d.length?h=aZ(e,{axes:d,graphicalItems:i,axisType:n,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c}):i&&i.length&&(h=function(e,t){var r=t.graphicalItems,n=t.Axis,o=t.axisType,i=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=rZ(e.data,{graphicalItems:r,dataStartIndex:s,dataEndIndex:c}),h=d.length,p=u$(l,o),f=-1;return r.reduce(function(e,t){var m,g=(void 0!==t.type.defaultProps?YQ(YQ({},t.type.defaultProps),t.props):t.props)[i],v=nZ("number");return e[g]?e:(f++,p?m=mK(0,h):a&&a[g]&&a[g].hasStack?(m=x$(a[g].stackGroups,s,c),m=yQ(u,m,g,o)):(m=S$(v,l$(d,r.filter(function(e){var t,r,n=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],o="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===g&&!o}),"number",l),n.defaultProps.allowDataOverflow),m=yQ(u,m,g,o)),YQ(YQ({},e),{},XQ({},g,YQ(YQ({axisType:o},n.defaultProps),{},{hide:!0,orientation:EC(QQ,"".concat(o,".").concat(f%2),null),domain:m,originalDomain:v,isCategorical:p,layout:l}))))},{})}(e,{Axis:o,graphicalItems:i,axisType:n,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c})),h},cZ=function(e){var t=e.children,r=e.defaultShowTooltip,n=PO(t,DK),o=0,i=0;return e.data&&0!==e.data.length&&(i=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(o=n.props.startIndex),n.props.endIndex>=0&&(i=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},lZ=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},uZ=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),o=void 0===n?{}:n,i=e.yAxisMap,a=void 0===i?{}:i,s=r.width,c=r.height,l=r.children,u=r.margin||{},d=PO(l,DK),h=PO(l,FI),p=Object.keys(a).reduce(function(e,t){var r=a[t],n=r.orientation;return r.mirror||r.hide?e:YQ(YQ({},e),{},XQ({},n,e[n]+r.width))},{left:u.left||0,right:u.right||0}),f=Object.keys(o).reduce(function(e,t){var r=o[t],n=r.orientation;return r.mirror||r.hide?e:YQ(YQ({},e),{},XQ({},n,EC(e,"".concat(n))+r.height))},{top:u.top||0,bottom:u.bottom||0}),m=YQ(YQ({},f),p),g=m.bottom;d&&(m.bottom+=d.props.height||DK.defaultProps.height),h&&t&&(m=function(e,t,r,n){var o=r.children,i=r.width,a=r.margin,s=i-(a.left||0)-(a.right||0),c=QV({children:o,legendWidth:s});if(c){var l=n||{},u=l.width,d=l.height,h=c.align,p=c.verticalAlign,f=c.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==h&&iO(e[h]))return n$(n$({},e),{},o$({},h,e[h]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===h)&&"middle"!==p&&iO(e[p]))return n$(n$({},e),{},o$({},p,e[p]+(d||0)))}return e}(m,0,r,t));var v=s-m.left-m.right,y=c-m.top-m.bottom;return YQ(YQ({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(y,0)})},dZ=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},hZ=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,o=void 0===n?"axis":n,i=e.validateTooltipEventTypes,a=void 0===i?["axis"]:i,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(e,t){var r=t.graphicalItems,n=t.stackGroups,o=t.offset,i=t.updateId,a=t.dataStartIndex,c=t.dataEndIndex,l=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,f=lZ(u),m=f.numericAxisName,g=f.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some(function(e){var t=CO(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),y=[];return r.forEach(function(r,f){var b=rZ(e.data,{graphicalItems:[r],dataStartIndex:a,dataEndIndex:c}),x=void 0!==r.type.defaultProps?YQ(YQ({},r.type.defaultProps),r.props):r.props,w=x.dataKey,j=x.maxBarSize,S=x["".concat(m,"Id")],N=x["".concat(g,"Id")],k=s.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],o=x["".concat(r.axisType,"Id")];n&&n[o]||"zAxis"===r.axisType||DV(!1);var i=n[o];return YQ(YQ({},e),{},XQ(XQ({},r.axisType,i),"".concat(r.axisType,"Ticks"),h$(i)))},{}),E=k[g],C=k["".concat(g,"Ticks")],O=n&&n[S]&&n[S].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?n$(n$({},e.type.defaultProps),e.props):e.props).stackId;if(aO(n)){var o=t[n];if(o){var i=o.items.indexOf(e);return i>=0?o.stackedData[i]:null}}return null}(r,n[S].stackGroups),T=CO(r.type).indexOf("Bar")>=0,A=N$(E,C),_=[],P=v&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,o=void 0===n?{}:n;if(!o)return{};for(var i={},a=Object.keys(o),s=0,c=a.length;s<c;s++)for(var l=o[a[s]].stackGroups,u=Object.keys(l),d=0,h=u.length;d<h;d++){var p=l[u[d]],f=p.items,m=p.cateAxisId,g=f.filter(function(e){return CO(e.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].type.defaultProps,y=void 0!==v?n$(n$({},v),g[0].props):g[0].props,b=y.barSize,x=y[m];i[x]||(i[x]=[]);var w=CC(b)?t:b;i[x].push({item:g[0],stackList:g.slice(1),barSize:CC(w)?void 0:lO(w,r,0)})}}return i}({barSize:l,stackGroups:n,totalSize:dZ(k,g)});if(T){var D,I,M=CC(j)?p:j,R=null!==(D=null!==(I=N$(E,C,!0))&&void 0!==I?I:M)&&void 0!==D?D:0;_=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,o=e.sizeList,i=void 0===o?[]:o,a=e.maxBarSize,s=i.length;if(s<1)return null;var c,l=lO(t,n,0,!0),u=[];if(i[0].barSize===+i[0].barSize){var d=!1,h=n/s,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(s-1)*l)>=n&&(p-=(s-1)*l,l=0),p>=n&&h>0&&(d=!0,p=s*(h*=.9));var f={offset:((n-p)/2|0)-l,size:0};c=i.reduce(function(e,t){var r={item:t.item,position:{offset:f.offset+f.size+l,size:d?h:t.barSize}},n=[].concat(e$(e),[r]);return f=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:f})}),n},u)}else{var m=lO(r,n,0,!0);n-2*m-(s-1)*l<=0&&(l=0);var g=(n-2*m-(s-1)*l)/s;g>1&&(g>>=0);var v=a===+a?Math.min(g,a):g;c=i.reduce(function(e,t,r){var n=[].concat(e$(e),[{item:t.item,position:{offset:m+(g+l)*r+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},u)}return c}({barGap:d,barCategoryGap:h,bandSize:R!==A?R:A,sizeList:P[N],maxBarSize:M}),R!==A&&(_=_.map(function(e){return YQ(YQ({},e),{},{position:YQ(YQ({},e.position),{},{offset:e.position.offset-R/2})})}))}var L,F,z=r&&r.type&&r.type.getComposedData;z&&y.push({props:YQ(YQ({},z(YQ(YQ({},k),{},{displayedData:b,props:e,dataKey:w,item:r,bandSize:A,barPosition:_,offset:o,stackedData:O,layout:u,dataStartIndex:a,dataEndIndex:c}))),{},XQ(XQ(XQ({key:r.key||"item-".concat(f)},m,k[m]),g,k[g]),"animationId",i)),childIndex:(L=r,F=e.children,AO(F).indexOf(L)),item:r})}),y},h=function(e,n){var o=e.props,i=e.dataStartIndex,a=e.dataEndIndex,c=e.updateId;if(!DO({props:o}))return null;var u=o.children,h=o.layout,p=o.stackOffset,f=o.data,m=o.reverseStackOrder,g=lZ(h),v=g.numericAxisName,y=g.cateAxisName,b=_O(u,r),x=function(e,t,r,n,o,i){if(!e)return null;var a=(i?t.reverse():t).reduce(function(e,t){var o,i=null!==(o=t.type)&&void 0!==o&&o.defaultProps?n$(n$({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(i.hide)return e;var s=i[r],c=e[s]||{hasStack:!1,stackGroups:{}};if(aO(a)){var l=c.stackGroups[a]||{numericAxisId:r,cateAxisId:n,items:[]};l.items.push(t),c.hasStack=!0,c.stackGroups[a]=l}else c.stackGroups[cO("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return n$(n$({},e),{},o$({},s,c))},{});return Object.keys(a).reduce(function(t,i){var s=a[i];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce(function(t,i){var a=s.stackGroups[i];return n$(n$({},t),{},o$({},i,{numericAxisId:r,cateAxisId:n,items:a.items,stackedData:v$(e,a.items,o)}))},{})),n$(n$({},t),{},o$({},i,s))},{})}(f,b,"".concat(v,"Id"),"".concat(y,"Id"),p,m),w=s.reduce(function(e,t){var r="".concat(t.axisType,"Map");return YQ(YQ({},e),{},XQ({},r,sZ(o,YQ(YQ({},t),{},{graphicalItems:b,stackGroups:t.axisType===v&&x,dataStartIndex:i,dataEndIndex:a}))))},{}),j=uZ(YQ(YQ({},w),{},{props:o,graphicalItems:b}),null==n?void 0:n.legendBBox);Object.keys(w).forEach(function(e){w[e]=l(o,w[e],j,e.replace("Map",""),t)});var S,N,k=w["".concat(y,"Map")],E=(S=uO(k),{tooltipTicks:N=h$(S,!1,!0),orderedTooltipTicks:IM(N,function(e){return e.coordinate}),tooltipAxis:S,tooltipAxisBandSize:N$(S,N)}),C=d(o,YQ(YQ({},w),{},{dataStartIndex:i,dataEndIndex:a,updateId:c,graphicalItems:b,stackGroups:x,offset:j}));return YQ(YQ({formattedGraphicalItems:C,graphicalItems:b,offset:j,stackGroups:x},E),w)},p=function(){function e(r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),XQ(i=qQ(this,e,[r]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),XQ(i,"accessibilityManager",new EQ),XQ(i,"handleLegendBBoxUpdate",function(e){if(e){var t=i.state,r=t.dataStartIndex,n=t.dataEndIndex,o=t.updateId;i.setState(YQ({legendBBox:e},h({props:i.props,dataStartIndex:r,dataEndIndex:n,updateId:o},YQ(YQ({},i.state),{},{legendBBox:e}))))}}),XQ(i,"handleReceiveSyncEvent",function(e,t,r){if(i.props.syncId===e){if(r===i.eventEmitterSymbol&&"function"!=typeof i.props.syncMethod)return;i.applySyncEvent(t)}}),XQ(i,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==i.state.dataStartIndex||r!==i.state.dataEndIndex){var n=i.state.updateId;i.setState(function(){return YQ({dataStartIndex:t,dataEndIndex:r},h({props:i.props,dataStartIndex:t,dataEndIndex:r,updateId:n},i.state))}),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),XQ(i,"handleMouseEnter",function(e){var t=i.getMouseInfo(e);if(t){var r=YQ(YQ({},t),{},{isTooltipActive:!0});i.setState(r),i.triggerSyncEvent(r);var n=i.props.onMouseEnter;Mk(n)&&n(r,e)}}),XQ(i,"triggeredAfterMouseMove",function(e){var t=i.getMouseInfo(e),r=t?YQ(YQ({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(r),i.triggerSyncEvent(r);var n=i.props.onMouseMove;Mk(n)&&n(r,e)}),XQ(i,"handleItemMouseEnter",function(e){i.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),XQ(i,"handleItemMouseLeave",function(){i.setState(function(){return{isTooltipActive:!1}})}),XQ(i,"handleMouseMove",function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)}),XQ(i,"handleMouseLeave",function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var r=i.props.onMouseLeave;Mk(r)&&r(t,e)}),XQ(i,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&EO[t]?EO[t]:null}(e),n=EC(i.props,"".concat(r));r&&Mk(n)&&n(null!==(t=/.*touch.*/i.test(r)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)}),XQ(i,"handleClick",function(e){var t=i.getMouseInfo(e);if(t){var r=YQ(YQ({},t),{},{isTooltipActive:!0});i.setState(r),i.triggerSyncEvent(r);var n=i.props.onClick;Mk(n)&&n(r,e)}}),XQ(i,"handleMouseDown",function(e){var t=i.props.onMouseDown;Mk(t)&&t(i.getMouseInfo(e),e)}),XQ(i,"handleMouseUp",function(e){var t=i.props.onMouseUp;Mk(t)&&t(i.getMouseInfo(e),e)}),XQ(i,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),XQ(i,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])}),XQ(i,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])}),XQ(i,"handleDoubleClick",function(e){var t=i.props.onDoubleClick;Mk(t)&&t(i.getMouseInfo(e),e)}),XQ(i,"handleContextMenu",function(e){var t=i.props.onContextMenu;Mk(t)&&t(i.getMouseInfo(e),e)}),XQ(i,"triggerSyncEvent",function(e){void 0!==i.props.syncId&&xQ.emit(wQ,i.props.syncId,e,i.eventEmitterSymbol)}),XQ(i,"applySyncEvent",function(e){var t=i.props,r=t.layout,n=t.syncMethod,o=i.state.updateId,a=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(YQ({dataStartIndex:a,dataEndIndex:s},h({props:i.props,dataStartIndex:a,dataEndIndex:s,updateId:o},i.state)));else if(void 0!==e.activeTooltipIndex){var c=e.chartX,l=e.chartY,u=e.activeTooltipIndex,d=i.state,p=d.offset,f=d.tooltipTicks;if(!p)return;if("function"==typeof n)u=n(f,e);else if("value"===n){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===e.activeLabel){u=m;break}}var g=YQ(YQ({},p),{},{x:p.left,y:p.top}),v=Math.min(c,g.x+g.width),y=Math.min(l,g.y+g.height),b=f[u]&&f[u].value,x=oZ(i.state,i.props.data,u),w=f[u]?{x:"horizontal"===r?f[u].coordinate:v,y:"horizontal"===r?y:f[u].coordinate}:eZ;i.setState(YQ(YQ({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:u}))}else i.setState(e)}),XQ(i,"renderCursor",function(e){var r,n=i.state,o=n.isTooltipActive,a=n.activeCoordinate,s=n.activePayload,c=n.offset,l=n.activeTooltipIndex,u=n.tooltipAxisBandSize,d=i.getTooltipEventType(),h=null!==(r=e.props.active)&&void 0!==r?r:o,p=i.props.layout,f=e.key||"_recharts-cursor";return ae.createElement(DQ,{key:f,activeCoordinate:a,activePayload:s,activeTooltipIndex:l,chartName:t,element:e,isActive:h,layout:p,offset:c,tooltipAxisBandSize:u,tooltipEventType:d})}),XQ(i,"renderPolarAxis",function(e,t,r){var n=EC(e,"type.axisType"),o=EC(i.state,"".concat(n,"Map")),a=e.type.defaultProps,s=void 0!==a?YQ(YQ({},a),e.props):e.props,c=o&&o[s["".concat(n,"Id")]];return ie.cloneElement(e,YQ(YQ({},c),{},{className:$r(n,c.className),key:e.key||"".concat(t,"-").concat(r),ticks:h$(c,!0)}))}),XQ(i,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,o=t.polarRadius,a=i.state,s=a.radiusAxisMap,c=a.angleAxisMap,l=uO(s),u=uO(c),d=u.cx,h=u.cy,p=u.innerRadius,f=u.outerRadius;return ie.cloneElement(e,{polarAngles:Array.isArray(n)?n:h$(u,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(o)?o:h$(l,!0).map(function(e){return e.coordinate}),cx:d,cy:h,innerRadius:p,outerRadius:f,key:e.key||"polar-grid",radialLines:r})}),XQ(i,"renderLegend",function(){var e=i.state.formattedGraphicalItems,t=i.props,r=t.children,n=t.width,o=t.height,a=i.props.margin||{},s=n-(a.left||0)-(a.right||0),l=QV({children:r,formattedGraphicalItems:e,legendWidth:s,legendContent:c});if(!l)return null;var u=l.item,d=zQ(l,IQ);return ie.cloneElement(u,YQ(YQ({},d),{},{chartWidth:n,chartHeight:o,margin:a,onBBoxUpdate:i.handleLegendBBoxUpdate}))}),XQ(i,"renderTooltip",function(){var e,t=i.props,r=t.children,n=t.accessibilityLayer,o=PO(r,bR);if(!o)return null;var a=i.state,s=a.isTooltipActive,c=a.activeCoordinate,l=a.activePayload,u=a.activeLabel,d=a.offset,h=null!==(e=o.props.active)&&void 0!==e?e:s;return ie.cloneElement(o,{viewBox:YQ(YQ({},d),{},{x:d.left,y:d.top}),active:h,label:u,payload:h?l:[],coordinate:c,accessibilityLayer:n})}),XQ(i,"renderBrush",function(e){var t=i.props,r=t.margin,n=t.data,o=i.state,a=o.offset,s=o.dataStartIndex,c=o.dataEndIndex,l=o.updateId;return ie.cloneElement(e,{key:e.key||"_recharts-brush",onChange:f$(i.handleBrushChange,e.props.onChange),data:n,x:iO(e.props.x)?e.props.x:a.left,y:iO(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(r.bottom||0),width:iO(e.props.width)?e.props.width:a.width,startIndex:s,endIndex:c,updateId:"brush-".concat(l)})}),XQ(i,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=i.clipPathId,o=i.state,a=o.xAxisMap,s=o.yAxisMap,c=o.offset,l=e.type.defaultProps||{},u=e.props,d=u.xAxisId,h=void 0===d?l.xAxisId:d,p=u.yAxisId,f=void 0===p?l.yAxisId:p;return ie.cloneElement(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:a[h],yAxis:s[f],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:n})}),XQ(i,"renderActivePoints",function(t){var r=t.item,n=t.activePoint,o=t.basePoint,i=t.childIndex,a=t.isRange,s=[],c=r.props.key,l=void 0!==r.item.type.defaultProps?YQ(YQ({},r.item.type.defaultProps),r.item.props):r.item.props,u=l.activeDot,d=YQ(YQ({index:i,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:s$(r.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},MO(u,!1)),xO(u));return s.push(e.renderActiveDot(u,d,"".concat(c,"-activePoint-").concat(i))),o?s.push(e.renderActiveDot(u,YQ(YQ({},d),{},{cx:o.x,cy:o.y}),"".concat(c,"-basePoint-").concat(i))):a&&s.push(null),s}),XQ(i,"renderGraphicChild",function(e,t,r){var n=i.filterFormatItem(e,t,r);if(!n)return null;var o=i.getTooltipEventType(),a=i.state,s=a.isTooltipActive,c=a.tooltipAxis,l=a.activeTooltipIndex,u=a.activeLabel,d=PO(i.props.children,bR),h=n.props,p=h.points,f=h.isRange,m=h.baseLine,g=void 0!==n.item.type.defaultProps?YQ(YQ({},n.item.type.defaultProps),n.item.props):n.item.props,v=g.activeDot,y=g.hide,b=g.activeBar,x=g.activeShape,w=Boolean(!y&&s&&d&&(v||b||x)),j={};"axis"!==o&&d&&"click"===d.props.trigger?j={onClick:f$(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==o&&(j={onMouseLeave:f$(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:f$(i.handleItemMouseEnter,e.props.onMouseEnter)});var S=ie.cloneElement(e,YQ(YQ({},n.props),j));if(w){if(!(l>=0)){var N,k=(null!==(N=i.getItemByXY(i.state.activeCoordinate))&&void 0!==N?N:{graphicalItem:S}).graphicalItem,E=k.item,C=void 0===E?e:E,O=k.childIndex,T=YQ(YQ(YQ({},n.props),j),{},{activeIndex:O});return[ie.cloneElement(C,T),null,null]}var A,_;if(c.dataKey&&!c.allowDuplicatedCategory){var P="function"==typeof c.dataKey?function(e){return"function"==typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=hO(p,P,u),_=f&&m&&hO(m,P,u)}else A=null==p?void 0:p[l],_=f&&m&&m[l];if(x||b){var D=void 0!==e.props.activeIndex?e.props.activeIndex:l;return[ie.cloneElement(e,YQ(YQ(YQ({},n.props),j),{},{activeIndex:D})),null,null]}if(!CC(A))return[S].concat(WQ(i.renderActivePoints({item:n,activePoint:A,basePoint:_,childIndex:l,isRange:f})))}return f?[S,null,null]:[S,null]}),XQ(i,"renderCustomized",function(e,t,r){return ie.cloneElement(e,YQ(YQ({key:"recharts-customized-".concat(r)},i.props),i.state))}),XQ(i,"renderMap",{CartesianGrid:{handler:tZ,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:tZ},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:tZ},YAxis:{handler:tZ},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(n=r.id)&&void 0!==n?n:cO("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=UR(i.triggeredAfterMouseMove,null!==(o=r.throttleDelay)&&void 0!==o?o:1e3/60),i.state={},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$Q(e,t)}(e,ie.Component),r=e,n=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,o=e.layout,i=PO(t,bR);if(i){var a=i.props.defaultIndex;if(!("number"!=typeof a||a<0||a>this.state.tooltipTicks.length-1)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,c=oZ(this.state,r,a,s),l=this.state.tooltipTicks[a].coordinate,u=(this.state.offset.top+n)/2,d="horizontal"===o?{x:l,y:u}:{y:l,x:u},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(d=YQ(YQ({},d),h.props.points[a].tooltipPosition),c=h.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:c,activeCoordinate:d};this.setState(p),this.renderCursor(i),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){RO([PO(e.children,bR)],[PO(this.props.children,bR)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=PO(this.props.children,bR);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:o}return o}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),o={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},i={chartX:Math.round(e.pageX-o.left),chartY:Math.round(e.pageY-o.top)},a=n.width/r.offsetWidth||1,s=this.inRange(i.chartX,i.chartY,a);if(!s)return null;var c=this.state,l=c.xAxisMap,u=c.yAxisMap,d=this.getTooltipEventType(),h=iZ(this.state,this.props.data,this.props.layout,s);if("axis"!==d&&l&&u){var p=uO(l).scale,f=uO(u).scale,m=p&&p.invert?p.invert(i.chartX):null,g=f&&f.invert?f.invert(i.chartY):null;return YQ(YQ({},i),{},{xValue:m,yValue:g},h)}return h?YQ(YQ({},i),h):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,o=e/r,i=t/r;if("horizontal"===n||"vertical"===n){var a=this.state.offset;return o>=a.left&&o<=a.left+a.width&&i>=a.top&&i<=a.top+a.height?{x:o,y:i}:null}var s=this.state,c=s.angleAxisMap,l=s.radiusAxisMap;if(c&&l){var u=uO(c);return R$({x:o,y:i},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=PO(e,bR),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),YQ(YQ({},xO(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){xQ.on(wQ,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xQ.removeListener(wQ,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,o=0,i=n.length;o<i;o++){var a=n[o];if(a.item===e||a.props.key===e.key||t===CO(a.item.type)&&r===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,o=t.height,i=t.width;return ae.createElement("defs",null,ae.createElement("clipPath",{id:e},ae.createElement("rect",{x:r,y:n,height:o,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=FQ(t,2),n=r[0],o=r[1];return YQ(YQ({},e),{},XQ({},n,o.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=FQ(t,2),n=r[0],o=r[1];return YQ(YQ({},e),{},XQ({},n,o.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var o=0,i=r.length;o<i;o++){var a=r[o],s=a.props,c=a.item,l=void 0!==c.type.defaultProps?YQ(YQ({},c.type.defaultProps),c.props):c.props,u=CO(c.type);if("Bar"===u){var d=(s.data||[]).find(function(t){return lG(e,t)});if(d)return{graphicalItem:a,payload:d}}else if("RadialBar"===u){var h=(s.data||[]).find(function(t){return R$(e,t)});if(h)return{graphicalItem:a,payload:h}}else if(eK(a,n)||tK(a,n)||rK(a,n)){var p=aK({graphicalItem:a,activeTooltipItem:n,itemData:l.data}),f=void 0===l.activeIndex?p:l.activeIndex;return{graphicalItem:YQ(YQ({},a),{},{childIndex:f}),payload:rK(a,n)?l.data[p]:a.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!DO(this))return null;var t,r,n=this.props,o=n.children,i=n.className,a=n.width,s=n.height,c=n.style,l=n.compact,u=n.title,d=n.desc,h=zQ(n,MQ),p=MO(h,!1);if(l)return ae.createElement(ZY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement(BO,LQ({},p,{width:a,height:s,title:u,desc:d}),this.renderClipPath(),FO(o,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(r=this.props.role)&&void 0!==r?r:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return ae.createElement(ZY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement("div",LQ({className:$r("recharts-wrapper",i),style:YQ({position:"relative",cursor:"default",width:a,height:s},c)},f,{ref:function(t){e.container=t}}),ae.createElement(BO,LQ({},p,{width:a,height:s,title:u,desc:d,style:ZQ}),this.renderClipPath(),FO(o,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],n&&UQ(r.prototype,n),i&&UQ(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();XQ(p,"displayName",t),XQ(p,"defaultProps",YQ({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),XQ(p,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,o=e.children,i=e.width,a=e.height,s=e.layout,c=e.stackOffset,l=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var p=cZ(e);return YQ(YQ(YQ({},p),{},{updateId:0},h(YQ(YQ({props:e},p),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:i,prevHeight:a,prevLayout:s,prevStackOffset:c,prevMargin:l,prevChildren:o})}if(r!==t.prevDataKey||n!==t.prevData||i!==t.prevWidth||a!==t.prevHeight||s!==t.prevLayout||c!==t.prevStackOffset||!fO(l,t.prevMargin)){var f=cZ(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=YQ(YQ({},iZ(t,n,s)),{},{updateId:t.updateId+1}),v=YQ(YQ(YQ({},f),m),g);return YQ(YQ(YQ({},v),h(YQ({props:e},v),t)),{},{prevDataKey:r,prevData:n,prevWidth:i,prevHeight:a,prevLayout:s,prevStackOffset:c,prevMargin:l,prevChildren:o})}if(!RO(o,t.prevChildren)){var y,b,x,w,j=PO(o,DK),S=j&&null!==(y=null===(b=j.props)||void 0===b?void 0:b.startIndex)&&void 0!==y?y:u,N=j&&null!==(x=null===(w=j.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:d,k=S!==u||N!==d,E=!CC(n)&&!k?t.updateId:t.updateId+1;return YQ(YQ({updateId:E},h(YQ(YQ({props:e},t),{},{updateId:E,dataStartIndex:S,dataEndIndex:N}),t)),{},{prevChildren:o,dataStartIndex:S,dataEndIndex:N})}return null}),XQ(p,"renderActiveDot",function(e,t,r){var n;return n=ie.isValidElement(e)?ie.cloneElement(e,t):Mk(e)?e(t):ae.createElement(pG,t),ae.createElement(HO,{className:"recharts-active-dot",key:r},n)});var f=ie.forwardRef(function(e,t){return ae.createElement(p,LQ({},e,{ref:t}))});return f.displayName=p.displayName,f},pZ=hZ({chartName:"LineChart",GraphicalChild:GJ,axisComponents:[{axisType:"xAxis",AxisComp:oQ},{axisType:"yAxis",AxisComp:mQ}],formatAxisMap:_Y}),fZ=hZ({chartName:"BarChart",GraphicalChild:NY,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:oQ},{axisType:"yAxis",AxisComp:mQ}],formatAxisMap:_Y});const mZ=()=>{const[t,r]=ie.useState({from:$w(new Date,-30),to:new Date}),[n,o]=ie.useState([]),[i,a]=ie.useState([]),[s,c]=ie.useState([]);ie.useEffect(()=>{o(JSON.parse(localStorage.getItem("crm_ov")||"[]")),a(JSON.parse(localStorage.getItem("crm_financeiro")||"[]")),c(JSON.parse(localStorage.getItem("crm_produtos")||"[]"))},[]);const l=n.filter(e=>{const r=new Date(e.createdAt);return t.from&&t.to&&r>=t.from&&r<=t.to&&"Concluída"===e.status}),u=i.filter(e=>{const r=new Date(e.createdAt);return t.from&&t.to&&r>=t.from&&r<=t.to}),d=l.reduce((e,t)=>{const r=Yj(new Date(t.createdAt),"dd/MM");return e[r]||(e[r]={date:r,total:0,quantidade:0}),e[r].total+=t.total,e[r].quantidade+=1,e},{}),h=u.reduce((e,t)=>{const r=Yj(new Date(t.createdAt),"dd/MM");return e[r]||(e[r]={date:r,recebido:0,pago:0}),"receber"===t.tipo&&"Recebido"===t.status&&(e[r].recebido+=t.valor),"pagar"===t.tipo&&"Pago"===t.status&&(e[r].pago+=t.valor),e},{}),p=l.flatMap(e=>e.produtos).reduce((e,t)=>(e[t.nome]||(e[t.nome]={nome:t.nome,quantidade:0,total:0}),e[t.nome].quantidade+=t.quantidade,e[t.nome].total+=t.preco*t.quantidade,e),{}),f=Object.values(p).sort((e,t)=>t.quantidade-e.quantidade).slice(0,10),m=l.reduce((e,t)=>e+t.total,0),g=Object.values(h).reduce((e,t)=>e+t.recebido,0),v=Object.values(h).reduce((e,t)=>e+t.pago,0),y=({title:t,value:r,icon:n,color:o})=>e.jsx("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg border border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r})]}),e.jsx("div",{className:`p-3 rounded-lg ${o}`,children:e.jsx(n,{className:"h-6 w-6 text-white"})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Relatórios"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Analise a performance do seu negócio"})]}),e.jsxs(tk,{children:[e.jsx(rk,{asChild:!0,children:e.jsxs(Rn,{id:"date",variant:"outline",className:_n("w-full sm:w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),(null==t?void 0:t.from)?t.to?e.jsxs(e.Fragment,{children:[Yj(t.from,"LLL dd, y")," - ",Yj(t.to,"LLL dd, y")]}):Yj(t.from,"LLL dd, y"):e.jsx("span",{children:"Selecione um período"})]})}),e.jsx(nk,{className:"w-auto p-0",align:"end",children:e.jsx(AN,{initialFocus:!0,mode:"range",defaultMonth:null==t?void 0:t.from,selected:t,onSelect:r,numberOfMonths:2})})]})]}),e.jsxs(Pi,{defaultValue:"vendas",className:"w-full",children:[e.jsxs(Di,{className:"grid w-full grid-cols-1 sm:grid-cols-3",children:[e.jsx(Ii,{value:"vendas",children:"Relatório de Vendas"}),e.jsx(Ii,{value:"financeiro",children:"Relatório Financeiro"}),e.jsx(Ii,{value:"produtos",children:"Performance de Produtos"})]}),e.jsx(Mi,{value:"vendas",className:"space-y-6 pt-6",children:e.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(y,{title:"Total Vendido",value:`R$ ${m.toFixed(2)}`,icon:Re,color:"bg-green-500"}),e.jsx(y,{title:"Vendas Realizadas",value:l.length,icon:ve,color:"bg-blue-500"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700 h-[400px]",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Vendas por Dia"}),e.jsx(GR,{width:"100%",height:"100%",children:e.jsxs(fZ,{data:Object.values(d),children:[e.jsx(AJ,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(oQ,{dataKey:"date",stroke:"hsl(var(--muted-foreground))"}),e.jsx(mQ,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(bR,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(FI,{}),e.jsx(NY,{dataKey:"total",fill:"hsl(var(--primary))",name:"Total (R$)"})]})})]})]})}),e.jsx(Mi,{value:"financeiro",className:"space-y-6 pt-6",children:e.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx(y,{title:"Total Recebido",value:`R$ ${g.toFixed(2)}`,icon:_e,color:"bg-emerald-500"}),e.jsx(y,{title:"Total Pago",value:`R$ ${v.toFixed(2)}`,icon:$e,color:"bg-red-500"}),e.jsx(y,{title:"Saldo",value:`R$ ${(g-v).toFixed(2)}`,icon:Re,color:"bg-purple-500"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700 h-[400px]",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Fluxo de Caixa por Dia"}),e.jsx(GR,{width:"100%",height:"100%",children:e.jsxs(pZ,{data:Object.values(h),children:[e.jsx(AJ,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(oQ,{dataKey:"date",stroke:"hsl(var(--muted-foreground))"}),e.jsx(mQ,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(bR,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(FI,{}),e.jsx(GJ,{type:"monotone",dataKey:"recebido",stroke:"#22c55e",name:"Recebido (R$)"}),e.jsx(GJ,{type:"monotone",dataKey:"pago",stroke:"#ef4444",name:"Pago (R$)"})]})})]})]})}),e.jsx(Mi,{value:"produtos",className:"space-y-6 pt-6",children:e.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700 h-[400px]",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Top 10 Produtos Mais Vendidos (por quantidade)"}),e.jsx(GR,{width:"100%",height:"100%",children:e.jsxs(fZ,{data:f,layout:"vertical",children:[e.jsx(AJ,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(oQ,{type:"number",stroke:"hsl(var(--muted-foreground))"}),e.jsx(mQ,{type:"category",dataKey:"nome",width:120,stroke:"hsl(var(--muted-foreground))"}),e.jsx(bR,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),e.jsx(FI,{}),e.jsx(NY,{dataKey:"quantidade",fill:"#8884d8",name:"Quantidade Vendida"})]})})]})})})]})]})},gZ=ae.forwardRef(({className:t,checked:r,onCheckedChange:n,...o},i)=>e.jsx("button",{type:"button",role:"switch","aria-checked":r,onClick:()=>null==n?void 0:n(!r),className:_n("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",r?"bg-primary":"bg-input",t),ref:i,...o,children:e.jsx("span",{className:_n("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform",r?"translate-x-5":"translate-x-0")})}));gZ.displayName="Switch";const vZ={"pt-BR":{"nav.dashboard":"Dashboard","nav.clientes":"Clientes","nav.os":"Ordens de Serviço","nav.ov":"Ordens de Venda","nav.estoque":"Estoque","nav.financeiro":"Financeiro","nav.relatorios":"Relatórios","nav.configuracoes":"Configurações","config.titulo":"Configurações","config.descricao":"Gerencie todas as configurações do sistema","config.salvar":"Salvar Configurações","config.restaurarPadroes":"Restaurar Padrões","config.personalizacao.titulo":"Personalização do Sistema","config.personalizacao.descricao":"Configure a aparência e identidade visual do sistema","config.tema":"Tema","config.tema.descricao":"Escolha entre tema claro, escuro ou automático do sistema","config.tema.light":"Claro","config.tema.dark":"Escuro","config.tema.system":"Sistema","config.corPrimaria":"Cor Primária","config.corPrimaria.descricao":"Cor principal usada em botões, links e elementos destacados","config.corSecundaria":"Cor Secundária","config.corSecundaria.descricao":"Cor complementar usada em gradientes e elementos secundários","config.nomeEmpresa":"Nome da Empresa","config.nomeEmpresa.descricao":"Nome que aparecerá no cabeçalho e título do sistema","config.logoEmpresa":"Logo da Empresa","config.logoEmpresa.descricao":"Imagem que aparecerá no cabeçalho do sistema","config.idioma":"Idioma","config.idioma.descricao":"Idioma principal da interface do usuário","config.idioma.pt-BR":"Português (Brasil)","config.idioma.en-US":"English (US)","config.idioma.es-ES":"Español","config.idioma.zh-CN":"中文 (简体)","config.idioma ja-JP":"日本語","config.usuarios.titulo":"Configurações de Usuários","config.usuarios.descricao":"Gerencie configurações relacionadas aos usuários do sistema","config.permitirCadastro":"Permitir Cadastro","config.permitirCadastro.descricao":"Permite que novos usuários se cadastrem no sistema","config.requerAprovacao":"Requer Aprovação","config.requerAprovacao.descricao":"Novos cadastros precisam ser aprovados por um administrador","config.limiteUsuarios":"Limite de Usuários","config.limiteUsuarios.descricao":"Número máximo de usuários permitidos no sistema","config.notificacaoNovosUsuarios":"Notificar Novos Usuários","config.notificacaoNovosUsuarios.descricao":"Enviar notificações quando novos usuários se cadastrarem","usuarios.tipos.admin":"Administrador","usuarios.tipos.financeiro":"Financeiro","usuarios.tipos.comum":"Comum","usuarios.status.ativo":"Ativo","usuarios.status.inativo":"Inativo","usuarios.erros.nomeObrigatorio":"Nome é obrigatório","usuarios.erros.nomeMinimo":"Nome deve ter pelo menos 2 caracteres","usuarios.erros.emailObrigatorio":"Email é obrigatório","usuarios.erros.emailInvalido":"Email inválido","usuarios.erros.telefoneInvalido":"Telefone inválido","usuarios.edicao.titulo":"Editar Usuário","usuarios.edicao.descricao":"Edite as informações do usuário","usuarios.edicao.cancelar":"Cancelar","usuarios.edicao.salvar":"Salvar","usuarios.edicao.salvando":"Salvando...","usuarios.edicao.erro":"Erro ao salvar","usuarios.edicao.erroDescricao":"Não foi possível salvar as alterações","usuarios.remocao.titulo":"Remover Usuário","usuarios.remocao.descricao":"Tem certeza que deseja remover este usuário?","usuarios.remocao.cancelar":"Cancelar","usuarios.remocao.confirmar":"Remover","usuarios.remocao.removendo":"Removendo...","usuarios.remocao.erro":"Erro ao remover","usuarios.remocao.erroDescricao":"Não foi possível remover o usuário","usuarios.remocao.erroConfirmacao":"Confirmação necessária","usuarios.remocao.erroConfirmacaoDescricao":'Digite "CONFIRMAR" para remover o usuário',"usuarios.remocao.aviso.titulo":"Atenção!","usuarios.remocao.aviso.descricao":"Esta ação não pode ser desfeita.","usuarios.remocao.aviso.item1":"O usuário perderá acesso ao sistema","usuarios.remocao.aviso.item2":"Todos os dados do usuário serão removidos","usuarios.remocao.aviso.item3":"Esta ação não pode ser desfeita","usuarios.remocao.confirmacao.label":"Confirmação","usuarios.remocao.confirmacao.descricao":'Digite "CONFIRMAR" para confirmar a remoção',"usuarios.remocao.confirmacao.placeholder":"CONFIRMAR","usuarios.cadastro.form.nome":"Nome","usuarios.cadastro.form.nomePlaceholder":"Digite o nome completo","usuarios.cadastro.form.email":"Email","usuarios.cadastro.form.emailPlaceholder":"Digite o email","usuarios.cadastro.form.telefone":"Telefone","usuarios.cadastro.form.telefonePlaceholder":"Digite o telefone","usuarios.cadastro.form.tipo":"Tipo de Usuário","usuarios.cadastro.form.senha":"Senha","usuarios.cadastro.form.senhaPlaceholder":"Digite a senha","usuarios.cadastro.form.confirmarSenha":"Confirmar Senha","usuarios.cadastro.form.confirmarSenhaPlaceholder":"Confirme a senha","usuarios.listagem.titulo":"Usuários","usuarios.listagem.descricao":"Gerencie os usuários do sistema","usuarios.filtros.titulo":"Filtros","usuarios.busca":"Buscar","usuarios.busca.placeholder":"Buscar por nome ou email...","usuarios.filtros.tipo":"Tipo","usuarios.filtros.status":"Status","usuarios.filtros.todos":"Todos","usuarios.lista.titulo":"Lista de Usuários","usuarios.lista.descricao":"Usuários encontrados","usuarios.adicionar":"Adicionar Usuário","usuarios.tabela.nome":"Nome","usuarios.tabela.email":"Email","usuarios.tabela.tipo":"Tipo","usuarios.tabela.status":"Status","usuarios.tabela.ultimoAcesso":"Último Acesso","usuarios.tabela.acoes":"Ações","usuarios.lista.vazia":"Nenhum usuário encontrado","config.seguranca.titulo":"Configurações de Segurança","config.seguranca.descricao":"Configure as políticas de segurança e autenticação","config.autenticacaoDoisFatores":"Autenticação 2 Fatores","config.autenticacaoDoisFatores.descricao":"Requer segundo fator de autenticação para login","config.tempoSessao":"Tempo da Sessão (min)","config.tempoSessao.descricao":"Tempo em minutos antes da sessão expirar automaticamente","config.tentativasLogin":"Tentativas de Login","config.tentativasLogin.descricao":"Número de tentativas de login antes do bloqueio","config.bloqueioAutomatico":"Bloqueio Automático","config.bloqueioAutomatico.descricao":"Bloqueia automaticamente após tentativas falhas","config.auditoriaAtivada":"Auditoria Ativada","config.auditoriaAtivada.descricao":"Registra todas as ações dos usuários no sistema","config.impressao.titulo":"Configurações de Impressão","config.impressao.descricao":"Configure as opções padrão para impressão de documentos","config.formatoPadrao":"Formato Padrão","config.formatoPadrao.descricao":"Formato de papel padrão para impressões","config.formato.A4":"A4","config.formato.A3":"A3","config.formato.Carta":"Carta","config.orientacao":"Orientação","config.orientacao.descricao":"Orientação padrão da página para impressões","config.orientacao.retrato":"Retrato","config.orientacao.paisagem":"Paisagem","config.margens":"Margens","config.margens.descricao":"Configuração das margens padrão para impressões","config.margens.normal":"Normal","config.margens.estreita":"Estreita","config.margens.larga":"Larga","config.cabecalhoPersonalizado":"Cabeçalho Personalizado","config.cabecalhoPersonalizado.descricao":"Incluir cabeçalho personalizado nas impressões","config.rodapePersonalizado":"Rodapé Personalizado","config.rodapePersonalizado.descricao":"Incluir rodapé personalizado nas impressões","config.sistema.titulo":"Configurações do Sistema","config.sistema.descricao":"Configurações técnicas e de performance do sistema","config.backupAutomatico":"Backup Automático","config.backupAutomatico.descricao":"Realizar backups automáticos dos dados","config.frequenciaBackup":"Frequência Backup","config.frequenciaBackup.descricao":"Com que frequência os backups devem ser realizados","config.frequencia.diario":"Diário","config.frequencia.semanal":"Semanal","config.frequencia.mensal":"Mensal","config.notificacoesEmail":"Notificações Email","config.notificacoesEmail.descricao":"Enviar notificações importantes por email","config.cacheAtivo":"Cache Ativo","config.cacheAtivo.descricao":"Ativar sistema de cache para melhorar performance","config.logsAtivo":"Logs Ativo","config.logsAtivo.descricao":"Manter registros detalhados das atividades do sistema","msg.configuracoesSalvas":"Configurações salvas com sucesso!","msg.configuracoesRestauradas":"Configurações restauradas para os padrões!","msg.descricaoRestaurada":"Todas as configurações foram restauradas para os valores padrão.","msg.arquivoInvalido":"Arquivo inválido! Por favor, selecione uma imagem.","msg.logoRemovido":"Logo removido com sucesso!","msg.erroUpload":"Erro no upload da imagem. Tente novamente.","common.salvar":"Salvar","common.cancelar":"Cancelar","config.logoDescricao":"Arraste uma imagem ou clique para selecionar","config.logoTipos":"PNG, JPG ou GIF (máx. 5MB)","config.removerLogo":"Remover Logo","config.selecionarArquivo":"clique para selecionar"},"en-US":{"nav.dashboard":"Dashboard","nav.clientes":"Clients","nav.os":"Service Orders","nav.ov":"Sales Orders","nav.estoque":"Inventory","nav.financeiro":"Financial","nav.relatorios":"Reports","nav.configuracoes":"Settings","config.titulo":"Settings","config.descricao":"Manage all system settings","config.salvar":"Save Settings","config.restaurarPadroes":"Restore Defaults","config.personalizacao.titulo":"System Personalization","config.personalizacao.descricao":"Configure system appearance and visual identity","config.tema":"Theme","config.tema.descricao":"Choose between light, dark or system automatic theme","config.tema.light":"Light","config.tema.dark":"Dark","config.tema.system":"System","config.corPrimaria":"Primary Color","config.corPrimaria.descricao":"Main color used in buttons, links and highlighted elements","config.corSecundaria":"Secondary Color","config.corSecundaria.descricao":"Complementary color used in gradients and secondary elements","config.nomeEmpresa":"Company Name","config.nomeEmpresa.descricao":"Name that will appear in the header and system title","config.logoEmpresa":"Company Logo","config.logoEmpresa.descricao":"Image that will appear in the system header","config.idioma":"Language","config.idioma.descricao":"Main language of the user interface","config.idioma.pt-BR":"Portuguese (Brazil)","config.idioma.en-US":"English (US)","config.idioma.es-ES":"Spanish","config.idioma.zh-CN":"Chinese (Simplified)","config.idioma ja-JP":"Japanese","config.usuarios.titulo":"User Settings","config.usuarios.descricao":"Manage user-related system settings","config.permitirCadastro":"Allow Registration","config.permitirCadastro.descricao":"Allows new users to register in the system","config.requerAprovacao":"Require Approval","config.requerAprovacao.descricao":"New registrations need to be approved by an administrator","config.limiteUsuarios":"User Limit","config.limiteUsuarios.descricao":"Maximum number of users allowed in the system","config.notificacaoNovosUsuarios":"Notify New Users","config.notificacaoNovosUsuarios.descricao":"Send notifications when new users register","usuarios.tipos.admin":"Administrator","usuarios.tipos.financeiro":"Financial","usuarios.tipos.comum":"Common","usuarios.status.ativo":"Active","usuarios.status.inativo":"Inactive","usuarios.erros.nomeObrigatorio":"Name is required","usuarios.erros.nomeMinimo":"Name must have at least 2 characters","usuarios.erros.emailObrigatorio":"Email is required","usuarios.erros.emailInvalido":"Invalid email","usuarios.erros.telefoneInvalido":"Invalid phone","usuarios.edicao.titulo":"Edit User","usuarios.edicao.descricao":"Edit user information","usuarios.edicao.cancelar":"Cancel","usuarios.edicao.salvar":"Save","usuarios.edicao.salvando":"Saving...","usuarios.edicao.erro":"Error saving","usuarios.edicao.erroDescricao":"Could not save changes","usuarios.remocao.titulo":"Remove User","usuarios.remocao.descricao":"Are you sure you want to remove this user?","usuarios.remocao.cancelar":"Cancel","usuarios.remocao.confirmar":"Remove","usuarios.remocao.removendo":"Removing...","usuarios.remocao.erro":"Error removing","usuarios.remocao.erroDescricao":"Could not remove user","usuarios.remocao.erroConfirmacao":"Confirmation required","usuarios.remocao.erroConfirmacaoDescricao":'Type "CONFIRM" to remove the user',"usuarios.remocao.aviso.titulo":"Warning!","usuarios.remocao.aviso.descricao":"This action cannot be undone.","usuarios.remocao.aviso.item1":"The user will lose access to the system","usuarios.remocao.aviso.item2":"All user data will be removed","usuarios.remocao.aviso.item3":"This action cannot be undone","usuarios.remocao.confirmacao.label":"Confirmation","usuarios.remocao.confirmacao.descricao":'Type "CONFIRM" to confirm removal',"usuarios.remocao.confirmacao.placeholder":"CONFIRM","usuarios.cadastro.form.nome":"Name","usuarios.cadastro.form.nomePlaceholder":"Enter full name","usuarios.cadastro.form.email":"Email","usuarios.cadastro.form.emailPlaceholder":"Enter email","usuarios.cadastro.form.telefone":"Phone","usuarios.cadastro.form.telefonePlaceholder":"Enter phone","usuarios.cadastro.form.tipo":"User Type","usuarios.cadastro.form.senha":"Password","usuarios.cadastro.form.senhaPlaceholder":"Enter password","usuarios.cadastro.form.confirmarSenha":"Confirm Password","usuarios.cadastro.form.confirmarSenhaPlaceholder":"Confirm password","usuarios.listagem.titulo":"Users","usuarios.listagem.descricao":"Manage system users","usuarios.filtros.titulo":"Filters","usuarios.busca":"Search","usuarios.busca.placeholder":"Search by name or email...","usuarios.filtros.tipo":"Type","usuarios.filtros.status":"Status","usuarios.filtros.todos":"All","usuarios.lista.titulo":"User List","usuarios.lista.descricao":"Users found","usuarios.adicionar":"Add User","usuarios.tabela.nome":"Name","usuarios.tabela.email":"Email","usuarios.tabela.tipo":"Type","usuarios.tabela.status":"Status","usuarios.tabela.ultimoAcesso":"Last Access","usuarios.tabela.acoes":"Actions","usuarios.lista.vazia":"No users found","config.seguranca.titulo":"Security Settings","config.seguranca.descricao":"Configure security and authentication policies","config.autenticacaoDoisFatores":"Two-Factor Authentication","config.autenticacaoDoisFatores.descricao":"Requires second authentication factor for login","config.tempoSessao":"Session Time (min)","config.tempoSessao.descricao":"Time in minutes before session expires automatically","config.tentativasLogin":"Login Attempts","config.tentativasLogin.descricao":"Number of login attempts before blocking","config.bloqueioAutomatico":"Automatic Lock","config.bloqueioAutomatico.descricao":"Automatically blocks after failed attempts","config.auditoriaAtivada":"Audit Enabled","config.auditoriaAtivada.descricao":"Records all user actions in the system","config.impressao.titulo":"Print Settings","config.impressao.descricao":"Configure default options for document printing","config.formatoPadrao":"Default Format","config.formatoPadrao.descricao":"Default paper format for printing","config.formato.A4":"A4","config.formato.A3":"A3","config.formato.Carta":"Letter","config.orientacao":"Orientation","config.orientacao.descricao":"Default page orientation for printing","config.orientacao.retrato":"Portrait","config.orientacao.paisagem":"Landscape","config.margens":"Margins","config.margens.descricao":"Default margin configuration for printing","config.margens.normal":"Normal","config.margens.estreita":"Narrow","config.margens.larga":"Wide","config.cabecalhoPersonalizado":"Custom Header","config.cabecalhoPersonalizado.descricao":"Include custom header in prints","config.rodapePersonalizado":"Custom Footer","config.rodapePersonalizado.descricao":"Include custom footer in prints","config.sistema.titulo":"System Settings","config.sistema.descricao":"Technical and performance system settings","config.backupAutomatico":"Automatic Backup","config.backupAutomatico.descricao":"Perform automatic data backups","config.frequenciaBackup":"Backup Frequency","config.frequenciaBackup.descricao":"How often backups should be performed","config.frequencia.diario":"Daily","config.frequencia.semanal":"Weekly","config.frequencia.mensal":"Monthly","config.notificacoesEmail":"Email Notifications","config.notificacoesEmail.descricao":"Send important notifications by email","config.cacheAtivo":"Cache Active","config.cacheAtivo.descricao":"Enable cache system to improve performance","config.logsAtivo":"Logs Active","config.logsAtivo.descricao":"Keep detailed records of system activities","msg.configuracoesSalvas":"Settings saved successfully!","msg.configuracoesRestauradas":"Settings restored to defaults!","msg.descricaoRestaurada":"All settings have been restored to default values.","msg.arquivoInvalido":"Invalid file! Please select an image.","msg.logoRemovido":"Logo removed successfully!","msg.erroUpload":"Upload error. Please try again.","common.salvar":"Save","common.cancelar":"Cancel","config.logoDescricao":"Drag an image or click to select","config.logoTipos":"PNG, JPG or GIF (max. 5MB)","config.removerLogo":"Remove Logo","config.selecionarArquivo":"click to select"},"es-ES":{"nav.dashboard":"Panel","nav.clientes":"Clientes","nav.os":"Órdenes de Servicio","nav.ov":"Órdenes de Venta","nav.estoque":"Inventario","nav.financeiro":"Financiero","nav.relatorios":"Reportes","nav.configuracoes":"Configuraciones","config.titulo":"Configuraciones","config.descricao":"Gestionar todas las configuraciones del sistema","config.salvar":"Guardar Configuraciones","config.restaurarPadroes":"Restaurar Predeterminados","config.personalizacao.titulo":"Personalización del Sistema","config.personalizacao.descricao":"Configurar apariencia e identidad visual del sistema","config.tema":"Tema","config.tema.descricao":"Elegir entre tema claro, oscuro o automático del sistema","config.tema.light":"Claro","config.tema.dark":"Oscuro","config.tema.system":"Sistema","config.corPrimaria":"Color Primario","config.corPrimaria.descricao":"Color principal usado en botones, enlaces y elementos destacados","config.corSecundaria":"Color Secundario","config.corSecundaria.descricao":"Color complementario usado en gradientes y elementos secundarios","config.nomeEmpresa":"Nombre de la Empresa","config.nomeEmpresa.descricao":"Nombre que aparecerá en el encabezado y título del sistema","config.logoEmpresa":"Logo de la Empresa","config.logoEmpresa.descricao":"Imagen que aparecerá en el encabezado del sistema","config.idioma":"Idioma","config.idioma.descricao":"Idioma principal de la interfaz de usuario","config.idioma.pt-BR":"Portugués (Brasil)","config.idioma.en-US":"Inglés (EE.UU.)","config.idioma.es-ES":"Español","config.idioma.zh-CN":"Chino (Simplificado)","config.idioma ja-JP":"Japonés","config.usuarios.titulo":"Configuraciones de Usuarios","config.usuarios.descricao":"Gestionar configuraciones relacionadas con usuarios del sistema","config.permitirCadastro":"Permitir Registro","config.permitirCadastro.descricao":"Permite que nuevos usuarios se registren en el sistema","config.requerAprovacao":"Requiere Aprobación","config.requerAprovacao.descricao":"Nuevos registros necesitan ser aprobados por un administrador","config.limiteUsuarios":"Límite de Usuários","config.limiteUsuarios.descricao":"Número máximo de usuarios permitidos en el sistema","config.notificacaoNovosUsuarios":"Notificar Nuevos Usuarios","config.notificacaoNovosUsuarios.descricao":"Enviar notificaciones cuando nuevos usuarios se registren","config.seguranca.titulo":"Configuraciones de Seguridad","config.seguranca.descricao":"Configurar políticas de seguridad y autenticación","config.autenticacaoDoisFatores":"Autenticación de Dos Factores","config.autenticacaoDoisFatores.descricao":"Requiere segundo factor de autenticación para inicio de sesión","config.tempoSessao":"Tiempo de Sesión (min)","config.tempoSessao.descricao":"Tiempo en minutos antes de que la sesión expire automáticamente","config.tentativasLogin":"Intentos de Inicio de Sesión","config.tentativasLogin.descricao":"Número de intentos de inicio de sesión antes del bloqueo","config.bloqueioAutomatico":"Bloqueo Automático","config.bloqueioAutomatico.descricao":"Bloquea automáticamente después de intentos fallidos","config.auditoriaAtivada":"Auditoría Activada","config.auditoriaAtivada.descricao":"Registra todas las acciones de los usuarios en el sistema","config.impressao.titulo":"Configuraciones de Impresión","config.impressao.descricao":"Configurar opciones predeterminadas para impresión de documentos","config.formatoPadrao":"Formato Predeterminado","config.formatoPadrao.descricao":"Formato de papel predeterminado para impresiones","config.formato.A4":"A4","config.formato.A3":"A3","config.formato.Carta":"Carta","config.orientacao":"Orientación","config.orientacao.descricao":"Orientación predeterminada de la página para impresiones","config.orientacao.retrato":"Retrato","config.orientacao.paisagem":"Paisaje","config.margens":"Márgenes","config.margens.descricao":"Configuración de los márgenes predeterminados para impresiones","config.margens.normal":"Normal","config.margens.estreita":"Estrecha","config.margens.larga":"Ancha","config.cabecalhoPersonalizado":"Encabezado Personalizado","config.cabecalhoPersonalizado.descricao":"Incluir encabezado personalizado en las impresiones","config.rodapePersonalizado":"Pie de Página Personalizado","config.rodapePersonalizado.descricao":"Incluir pie de página personalizado en las impresiones","config.sistema.titulo":"Configuraciones del Sistema","config.sistema.descricao":"Configuraciones técnicas y de rendimiento del sistema","config.backupAutomatico":"Copia de Seguridad Automática","config.backupAutomatico.descricao":"Realizar copias de seguridad automáticas de los datos","config.frequenciaBackup":"Frecuencia de Copia de Seguridad","config.frequenciaBackup.descricao":"Con qué frecuencia deben realizarse las copias de seguridad","config.frequencia.diario":"Diario","config.frequencia.semanal":"Semanal","config.frequencia.mensal":"Mensual","config.notificacoesEmail":"Notificaciones por Correo","config.notificacoesEmail.descricao":"Enviar notificaciones importantes por correo electrónico","config.cacheAtivo":"Caché Activo","config.cacheAtivo.descricao":"Activar sistema de caché para mejorar el rendimiento","config.logsAtivo":"Registros Activos","config.logsAtivo.descricao":"Mantener registros detallados de las actividades del sistema","msg.configuracoesSalvas":"¡Configuraciones guardadas exitosamente!","msg.configuracoesRestauradas":"¡Configuraciones restauradas a los valores predeterminados!","msg.descricaoRestaurada":"Todas las configuraciones han sido restauradas a los valores predeterminados.","msg.arquivoInvalido":"¡Archivo inválido! Por favor selecciona una imagen.","msg.logoRemovido":"¡Logo eliminado exitosamente!","msg.erroUpload":"Error en la carga. Inténtalo de nuevo.","common.salvar":"Guardar","common.cancelar":"Cancelar","config.logoDescricao":"Arrastra una imagen o haz clic para seleccionar","config.logoTipos":"PNG, JPG o GIF (máx. 5MB)","config.removerLogo":"Eliminar Logo","config.selecionarArquivo":"haz clic para seleccionar"},"zh-CN":{"nav.dashboard":"仪表板","nav.clientes":"客户","nav.os":"服务订单","nav.ov":"销售订单","nav.estoque":"库存","nav.financeiro":"财务","nav.relatorios":"报告","nav.configuracoes":"设置","config.titulo":"设置","config.descricao":"管理系统所有设置","config.salvar":"保存设置","config.restaurarPadroes":"恢复默认值","config.personalizacao.titulo":"系统个性化","config.personalizacao.descricao":"配置系统外观和视觉标识","config.tema":"主题","config.tema.descricao":"在浅色、深色或系统自动主题之间选择","config.tema.light":"浅色","config.tema.dark":"深色","config.tema.system":"系统","config.corPrimaria":"主色","config.corPrimaria.descricao":"按钮、链接和突出元素中使用的主色","config.corSecundaria":"副色","config.corSecundaria.descricao":"渐变和次要元素中使用的互补色","config.nomeEmpresa":"公司名称","config.nomeEmpresa.descricao":"将显示在系统标题和页眉中的名称","config.logoEmpresa":"公司标志","config.logoEmpresa.descricao":"将显示在系统页眉中的图像","config.idioma":"语言","config.idioma.descricao":"用户界面的主要语言","config.idioma.pt-BR":"葡萄牙语（巴西）","config.idioma.en-US":"英语（美国）","config.idioma.es-ES":"西班牙语","config.idioma.zh-CN":"中文（简体）","config.idioma ja-JP":"日语","config.usuarios.titulo":"用户设置","config.usuarios.descricao":"管理系统用户相关设置","config.permitirCadastro":"允许注册","config.permitirCadastro.descricao":"允许新用户在系统中注册","config.requerAprovacao":"需要批准","config.requerAprovacao.descricao":"新注册需要管理员批准","config.limiteUsuarios":"用户限制","config.limiteUsuarios.descricao":"系统中允许的最大用户数","config.notificacaoNovosUsuarios":"通知新用户","config.notificacaoNovosUsuarios.descricao":"新用户注册时发送通知","config.seguranca.titulo":"安全设置","config.seguranca.descricao":"配置安全和认证策略","config.autenticacaoDoisFatores":"双因素认证","config.autenticacaoDoisFatores.descricao":"登录需要第二认证因素","config.tempoSessao":"会话时间（分钟）","config.tempoSessao.descricao":"会话自动过期前的分钟数","config.tentativasLogin":"登录尝试","config.tentativasLogin.descricao":"阻塞前的登录尝试次数","config.bloqueioAutomatico":"自动锁定","config.bloqueioAutomatico.descricao":"失败尝试后自动阻塞","config.auditoriaAtivada":"启用审计","config.auditoriaAtivada.descricao":"记录系统中所有用户操作","config.impressao.titulo":"打印设置","config.impressao.descricao":"配置文档打印的默认选项","config.formatoPadrao":"默认格式","config.formatoPadrao.descricao":"打印的默认纸张格式","config.formato.A4":"A4","config.formato.A3":"A3","config.formato.Carta":"信纸","config.orientacao":"方向","config.orientacao.descricao":"打印的默认页面方向","config.orientacao.retrato":"纵向","config.orientacao.paisagem":"横向","config.margens":"边距","config.margens.descricao":"打印的默认边距配置","config.margens.normal":"正常","config.margens.estreita":"窄","config.margens.larga":"宽","config.cabecalhoPersonalizado":"自定义页眉","config.cabecalhoPersonalizado.descricao":"在打印中包含自定义页眉","config.rodapePersonalizado":"自定义页脚","config.rodapePersonalizado.descricao":"在打印中包含自定义页脚","config.sistema.titulo":"系统设置","config.sistema.descricao":"系统技术和性能设置","config.backupAutomatico":"自动备份","config.backupAutomatico.descricao":"执行数据自动备份","config.frequenciaBackup":"备份频率","config.frequenciaBackup.descricao":"备份应执行的频率","config.frequencia.diario":"每日","config.frequencia.semanal":"每周","config.frequencia.mensal":"每月","config.notificacoesEmail":"电子邮件通知","config.notificacoesEmail.descricao":"通过电子邮件发送重要通知","config.cacheAtivo":"缓存激活","config.cacheAtivo.descricao":"启用缓存系统以提高性能","config.logsAtivo":"日志激活","config.logsAtivo.descricao":"保持系统活动的详细记录","msg.configuracoesSalvas":"设置保存成功！","msg.configuracoesRestauradas":"设置已恢复为默认值！","msg.descricaoRestaurada":"所有设置已恢复为默认值。","msg.arquivoInvalido":"无效文件！请选择图片。","msg.logoRemovido":"标志移除成功！","msg.erroUpload":"上传错误。请重试。","common.salvar":"保存","common.cancelar":"取消","config.logoDescricao":"拖拽图片或点击选择","config.logoTipos":"PNG、JPG 或 GIF（最大 5MB）","config.removerLogo":"移除标志","config.selecionarArquivo":"点击选择"},"ja-JP":{"nav.dashboard":"ダッシュボード","nav.clientes":"クライアント","nav.os":"サービス注文","nav.ov":"販売注文","nav.estoque":"在庫","nav.financeiro":"財務","nav.relatorios":"レポート","nav.configuracoes":"設定","config.titulo":"設定","config.descricao":"システムのすべての設定を管理","config.salvar":"設定を保存","config.restaurarPadroes":"デフォルトに戻す","config.personalizacao.titulo":"システムパーソナライズ","config.personalizacao.descricao":"システムの外観と視覚的アイデンティティを構成","config.tema":"テーマ","config.tema.descricao":"ライト、ダーク、またはシステム自動テーマから選択","config.tema.light":"ライト","config.tema.dark":"ダーク","config.tema.system":"システム","config.corPrimaria":"プライマリカラー","config.corPrimaria.descricao":"ボタン、リンク、強調要素で使用されるメインカラー","config.corSecundaria":"セカンダリカラー","config.corSecundaria.descricao":"グラデーションとセカンダリ要素で使用される補完カラー","config.nomeEmpresa":"会社名","config.nomeEmpresa.descricao":"システムのタイトルとヘッダーに表示される名前","config.logoEmpresa":"会社のロゴ","config.logoEmpresa.descricao":"システムのヘッダーに表示される画像","config.idioma":"言語","config.idioma.descricao":"ユーザーインターフェースの主要言語","config.idioma.pt-BR":"ポルトガル語（ブラジル）","config.idioma.en-US":"英語（米国）","config.idioma.es-ES":"スペイン語","config.idioma.zh-CN":"中国語（簡体字）","config.idioma ja-JP":"日本語","config.usuarios.titulo":"ユーザー設定","config.usuarios.descricao":"システムユーザーの関連設定を管理","config.permitirCadastro":"登録を許可","config.permitirCadastro.descricao":"新しいユーザーがシステムに登録することを許可","config.requerAprovacao":"承認が必要","config.requerAprovacao.descricao":"新しい登録は管理者による承認が必要","config.limiteUsuarios":"ユーザーリミット","config.limiteUsuarios.descricao":"システムで許可される最大ユーザー数","config.notificacaoNovosUsuarios":"新規ユーザーに通知","config.notificacaoNovosUsuarios.descricao":"新しいユーザーが登録したときに通知を送信","config.seguranca.titulo":"セキュリティ設定","config.seguranca.descricao":"セキュリティと認証ポリシーを構成","config.autenticacaoDoisFatores":"二要素認証","config.autenticacaoDoisFatores.descricao":"ログインに第二認証要素が必要","config.tempoSessao":"セッション時間（分）","config.tempoSessao.descricao":"セッションが自動的に期限切れになるまでの分数","config.tentativasLogin":"ログイン試行","config.tentativasLogin.descricao":"ブロック前のログイン試行回数","config.bloqueioAutomatico":"自動ロック","config.bloqueioAutomatico.descricao":"失敗した試行後に自動的にブロック","config.auditoriaAtivada":"監査有効","config.auditoriaAtivada.descricao":"システム内のすべてのユーザー操作を記録","config.impressao.titulo":"印刷設定","config.impressao.descricao":"ドキュメント印刷のデフォルトオプションを構成","config.formatoPadrao":"デフォルトフォーマット","config.formatoPadrao.descricao":"印刷のデフォルト用紙フォーマット","config.formato.A4":"A4","config.formato.A3":"A3","config.formato.Carta":"レター","config.orientacao":"方向","config.orientacao.descricao":"印刷のデフォルトページ方向","config.orientacao.retrato":"縦","config.orientacao.paisagem":"横","config.margens":"マージン","config.margens.descricao":"印刷のデフォルトマージン構成","config.margens.normal":"標準","config.margens.estreita":"狭い","config.margens.larga":"広い","config.cabecalhoPersonalizado":"カスタムヘッダー","config.cabecalhoPersonalizado.descricao":"印刷にカスタムヘッダーを含める","config.rodapePersonalizado":"カスタムフッター","config.rodapePersonalizado.descricao":"印刷にカスタムフッターを含める","config.sistema.titulo":"システム設定","config.sistema.descricao":"システムの技術的およびパフォーマンス設定","config.backupAutomatico":"自動バックアップ","config.backupAutomatico.descricao":"データの自動バックアップを実行","config.frequenciaBackup":"バックアップ頻度","config.frequenciaBackup.descricao":"バックアップを実行する頻度","config.frequencia.diario":"毎日","config.frequencia.semanal":"毎週","config.frequencia.mensal":"毎月","config.notificacoesEmail":"メール通知","config.notificacoesEmail.descricao":"重要な通知をメールで送信","config.cacheAtivo":"キャッシュ有効","config.cacheAtivo.descricao":"パフォーマンス向上のためのキャッシュシステムを有効化","config.logsAtivo":"ログ有効","config.logsAtivo.descricao":"システム活動の詳細な記録を保持","msg.configuracoesSalvas":"設定が正常に保存されました！","msg.configuracoesRestauradas":"設定がデフォルト値に復元されました！","msg.descricaoRestaurada":"すべての設定がデフォルト値に復元されました。","msg.arquivoInvalido":"無効なファイルです！画像を選択してください。","msg.logoRemovido":"ロゴが正常に削除されました！","msg.erroUpload":"アップロードエラー。再試行してください。","common.salvar":"保存","common.cancelar":"キャンセル","config.logoDescricao":"画像をドラッグするかクリックして選択","config.logoTipos":"PNG、JPG、または GIF（最大 5MB）","config.removerLogo":"ロゴを削除","config.selecionarArquivo":"クリックして選択"}},yZ=(e,t="pt-BR")=>(vZ[t]||vZ["pt-BR"])[e]||e,bZ=()=>{ie.useContext(UZ);const{toast:t}=Io(),{usuarios:r,saveUsuario:n}=jx(),[o,i]=ie.useState({nome:"",email:"",senha:"",confirmarSenha:"",telefone:"",endereco:"",tipoUsuario:"comum",ativo:!0,foto:""}),[a,s]=ie.useState(!1),[c,l]=ie.useState(!1),[u,d]=ie.useState(""),h=ie.useRef(null),p=(e,t)=>{i(r=>({...r,[e]:t}))},f=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?l(!0):"dragleave"===e.type&&l(!1)},m=e=>{if(e.type.startsWith("image/")){if(e.size>1048576)return void t({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 1MB. Por favor, escolha uma imagem menor.",variant:"destructive"});const r=new FileReader;r.onload=e=>{g(e.target.result,e=>{d(e),i(t=>({...t,foto:e}))})},r.readAsDataURL(e)}else t({title:"Arquivo inválido",description:"Por favor, selecione apenas arquivos de imagem.",variant:"destructive"})},g=(e,t)=>{const r=document.createElement("canvas"),n=r.getContext("2d"),o=new Image;o.onload=()=>{const e=200;let{width:i,height:a}=o;i>a?i>e&&(a=a*e/i,i=e):a>e&&(i=i*e/a,a=e),r.width=i,r.height=a,n.drawImage(o,0,0,i,a);const s=r.toDataURL("image/jpeg",.7);t(s)},o.src=e};return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.nome.trim()?o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?o.senha?o.senha.length<6?(t({title:"Erro de validação",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"}),0):o.senha===o.confirmarSenha||(t({title:"Erro de validação",description:"As senhas não coincidem.",variant:"destructive"}),0):(t({title:"Erro de validação",description:"A senha é obrigatória.",variant:"destructive"}),0):(t({title:"Erro de validação",description:"Por favor, insira um email válido.",variant:"destructive"}),0):(t({title:"Erro de validação",description:"O email é obrigatório.",variant:"destructive"}),0):(t({title:"Erro de validação",description:"O nome é obrigatório.",variant:"destructive"}),0)){s(!0);try{if(r.some(e=>e.email===o.email))return t({title:"Erro de validação",description:"Este email já está cadastrado.",variant:"destructive"}),void s(!1);const e={nome:o.nome,email:o.email,senha:o.senha,telefone:o.telefone,endereco:o.endereco,tipo:o.tipoUsuario,foto:o.foto,status:"ativo",dataCriacao:(new Date).toISOString(),ultimoAcesso:null};await n(e),t({title:"Usuário cadastrado!",description:`${o.nome} foi cadastrado com sucesso.`,variant:"default"}),i({nome:"",email:"",senha:"",confirmarSenha:"",telefone:"",endereco:"",tipoUsuario:"comum",ativo:!0,foto:""}),d("")}catch(a){console.error("Erro ao cadastrar usuário:",a),t({title:"Erro ao cadastrar",description:"Ocorreu um erro ao cadastrar o usuário. Tente novamente.",variant:"destructive"})}finally{s(!1)}}},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Informações Pessoais"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"nome",children:"Nome Completo *"}),e.jsx(hi,{id:"nome",type:"text",value:o.nome,onChange:e=>p("nome",e.target.value),placeholder:"Digite o nome completo",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"email",children:"Email *"}),e.jsx(hi,{id:"email",type:"email",value:o.email,onChange:e=>p("email",e.target.value),placeholder:"usuario@exemplo.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"telefone",children:"Telefone"}),e.jsx(hi,{id:"telefone",type:"tel",value:o.telefone,onChange:e=>p("telefone",e.target.value),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"endereco",children:"Endereço"}),e.jsx(hi,{id:"endereco",type:"text",value:o.endereco,onChange:e=>p("endereco",e.target.value),placeholder:"Rua, número, bairro, cidade"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Foto do Usuário"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors "+(c?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"),onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:e=>{e.preventDefault(),e.stopPropagation(),l(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&m(e.dataTransfer.files[0])},children:u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:u,alt:"Preview da foto",className:"w-24 h-24 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}),e.jsx(Rn,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{d(""),i(e=>({...e,foto:""})),h.current&&(h.current.value="")},children:e.jsx(le,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("p",{className:"font-medium",children:"Foto selecionada!"}),e.jsx(Rn,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},className:"mt-2",children:"Trocar imagem"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Je,{className:"h-8 w-8 mx-auto text-slate-400"}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("p",{className:"font-medium",children:"Arraste e solte uma imagem aqui"}),e.jsx("p",{children:"ou"}),e.jsx(Rn,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},className:"mt-2",children:"Selecione uma imagem"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"PNG, JPG, GIF até 1MB"})]})}),e.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&m(e.target.files[0])},className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Informações de Acesso"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"senha",children:"Senha *"}),e.jsx(hi,{id:"senha",type:"password",value:o.senha,onChange:e=>p("senha",e.target.value),placeholder:"Mínimo 6 caracteres",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"confirmarSenha",children:"Confirmar Senha *"}),e.jsx(hi,{id:"confirmarSenha",type:"password",value:o.confirmarSenha,onChange:e=>p("confirmarSenha",e.target.value),placeholder:"Digite a senha novamente",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{htmlFor:"tipoUsuario",children:"Tipo de Usuário"}),e.jsxs(yi,{value:o.tipoUsuario,onValueChange:e=>p("tipoUsuario",e),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"comum",children:"Usuário Comum"}),e.jsx(Ni,{value:"financeiro",children:"Usuário Financeiro"}),e.jsx(Ni,{value:"administrador",children:"Administrador"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(Rn,{type:"button",variant:"outline",onClick:()=>{i({nome:"",email:"",senha:"",confirmarSenha:"",telefone:"",endereco:"",tipoUsuario:"comum",ativo:!0,foto:""}),d("")},disabled:a,children:"Limpar"}),e.jsx(Rn,{type:"submit",disabled:a,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cadastrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Cadastrar Usuário"]})})]})]})},xZ=({usuario:t,isOpen:r,onClose:n,onSave:o})=>{const{currentLanguage:i}=ie.useContext(UZ),{toast:a}=Io(),{saveUsuario:s}=jx(),[c,l]=ie.useState({nome:"",email:"",telefone:"",tipo:"comum",foto:""}),[u,d]=ie.useState(!1),[h,p]=ie.useState({}),[f,m]=ie.useState(!1),[g,v]=ie.useState(""),y=ie.useRef(null);ie.useEffect(()=>{t&&(console.log("[EditarUsuarioModal] Inicializando com usuário:",t),l({nome:t.nome||"",email:t.email||"",telefone:t.telefone||"",tipo:t.tipo||"comum",foto:t.foto||""}),v(t.foto||""),p({}),console.log("[EditarUsuarioModal] FormData inicializado:",{nome:t.nome||"",email:t.email||"",telefone:t.telefone||"",tipo:t.tipo||"comum",foto:t.foto||""}))},[t]);const b=(e,t)=>{l(r=>({...r,[e]:t})),h[e]&&p(t=>({...t,[e]:""}))},x=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?m(!0):"dragleave"===e.type&&m(!1)},w=e=>{if(e.type.startsWith("image/")){if(e.size>1048576)return void a({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 1MB. Por favor, escolha uma imagem menor.",variant:"destructive"});const t=new FileReader;t.onload=e=>{j(e.target.result,e=>{v(e),l(t=>({...t,foto:e}))})},t.readAsDataURL(e)}else a({title:"Arquivo inválido",description:"Por favor, selecione apenas arquivos de imagem.",variant:"destructive"})},j=(e,t)=>{const r=document.createElement("canvas"),n=r.getContext("2d"),o=new Image;o.onload=()=>{const e=200;let{width:i,height:a}=o;i>a?i>e&&(a=a*e/i,i=e):a>e&&(i=i*e/a,a=e),r.width=i,r.height=a,n.drawImage(o,0,0,i,a);const s=r.toDataURL("image/jpeg",.7);t(s)},o.src=e},S=()=>{u||n()};return t?e.jsx(ni,{open:r,onOpenChange:S,children:e.jsxs(si,{className:"sm:max-w-md",children:[e.jsxs(ci,{children:[e.jsxs(ui,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),yZ("usuarios.edicao.titulo",i)]}),e.jsx(di,{children:yZ("usuarios.edicao.descricao",i)})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c.nome.trim()?c.nome.trim().length<2&&(e.nome=yZ("usuarios.erros.nomeMinimo",i)):e.nome=yZ("usuarios.erros.nomeObrigatorio",i),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(e.email=yZ("usuarios.erros.emailInvalido",i)):e.email=yZ("usuarios.erros.emailObrigatorio",i),c.telefone&&!/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(c.telefone)&&(e.telefone=yZ("usuarios.erros.telefoneInvalido",i)),p(e),0===Object.keys(e).length})()){d(!0);try{const e={...t,nome:c.nome.trim(),email:c.email.trim().toLowerCase(),telefone:c.telefone,tipo:c.tipo,foto:c.foto};console.log("[EditarUsuarioModal] Salvando usuário atualizado:",e),console.log("[EditarUsuarioModal] Foto atual:",c.foto),await s(e,t.id),a({title:yZ("usuarios.edicao.sucesso",i),description:yZ("usuarios.edicao.sucessoDescricao",i),variant:"default"}),o(e),n()}catch(r){a({title:yZ("usuarios.edicao.erro",i),description:yZ("usuarios.edicao.erroDescricao",i),variant:"destructive",duration:4e3})}finally{d(!1)}}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(gi,{htmlFor:"edit-nome",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),yZ("usuarios.cadastro.form.nome",i)]}),e.jsx(hi,{id:"edit-nome",type:"text",value:c.nome,onChange:e=>b("nome",e.target.value),placeholder:yZ("usuarios.cadastro.form.nomePlaceholder",i),className:h.nome?"border-red-500":""}),h.nome&&e.jsx("p",{className:"text-sm text-red-500",children:h.nome})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(gi,{htmlFor:"edit-email",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),yZ("usuarios.cadastro.form.email",i)]}),e.jsx(hi,{id:"edit-email",type:"email",value:c.email,onChange:e=>b("email",e.target.value),placeholder:yZ("usuarios.cadastro.form.emailPlaceholder",i),className:h.email?"border-red-500":""}),h.email&&e.jsx("p",{className:"text-sm text-red-500",children:h.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(gi,{htmlFor:"edit-telefone",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),yZ("usuarios.cadastro.form.telefone",i)]}),e.jsx(hi,{id:"edit-telefone",type:"tel",value:c.telefone,onChange:e=>{const t=(e=>{const t=e.replace(/\D/g,"");return t.length<=11?t.replace(/(\d{2})(\d{4,5})(\d{4})/,"($1) $2-$3"):e})(e.target.value);b("telefone",t)},placeholder:yZ("usuarios.cadastro.form.telefonePlaceholder",i),className:h.telefone?"border-red-500":""}),h.telefone&&e.jsx("p",{className:"text-sm text-red-500",children:h.telefone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(gi,{htmlFor:"edit-tipo",className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),yZ("usuarios.cadastro.form.tipo",i)]}),e.jsxs(yi,{value:c.tipo,onValueChange:e=>b("tipo",e),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"comum",children:yZ("usuarios.tipos.comum",i)}),e.jsx(Ni,{value:"financeiro",children:yZ("usuarios.tipos.financeiro",i)}),e.jsx(Ni,{value:"admin",children:yZ("usuarios.tipos.admin",i)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(gi,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Foto do Usuário"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center transition-colors "+(f?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"),onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:e=>{e.preventDefault(),e.stopPropagation(),m(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&w(e.dataTransfer.files[0])},children:g?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:g,alt:"Preview da foto",className:"w-20 h-20 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}),e.jsx(Rn,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0",onClick:()=>{v(""),l(e=>({...e,foto:""})),y.current&&(y.current.value="")},children:e.jsx(le,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("p",{className:"font-medium",children:"Foto selecionada!"}),e.jsx(Rn,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},className:"mt-1",children:"Trocar imagem"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Je,{className:"h-6 w-6 mx-auto text-slate-400"}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("p",{className:"font-medium",children:"Arraste e solte uma imagem aqui"}),e.jsx("p",{children:"ou"}),e.jsx(Rn,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},className:"mt-1",children:"Selecione uma imagem"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"PNG, JPG, GIF até 1MB"})]})}),e.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&w(e.target.files[0])},className:"hidden"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Rn,{type:"button",variant:"outline",onClick:S,disabled:u,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),yZ("usuarios.edicao.cancelar",i)]}),e.jsx(Rn,{type:"submit",disabled:u,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),yZ("usuarios.edicao.salvando",i)]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),yZ("usuarios.edicao.salvar",i)]})})]})]})]})}):null},wZ=({usuario:t,isOpen:r,onClose:n,onConfirm:o})=>{const{currentLanguage:i}=ie.useContext(UZ),{toast:a}=Io(),[s,c]=ie.useState(!1),[l,u]=ie.useState(""),d=()=>{s||(u(""),n())};return t?e.jsx(ni,{open:r,onOpenChange:d,children:e.jsxs(si,{className:"sm:max-w-md",children:[e.jsxs(ci,{children:[e.jsxs(ui,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Be,{className:"h-5 w-5"}),yZ("usuarios.remocao.titulo",i)]}),e.jsx(di,{children:yZ("usuarios.remocao.descricao",i)})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-red-500 to-red-600 flex items-center justify-center text-white font-bold text-lg",children:t.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:t.nome}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 px-2 py-1 rounded",children:"admin"===t.tipo?yZ("usuarios.tipos.admin",i):"financeiro"===t.tipo?yZ("usuarios.tipos.financeiro",i):yZ("usuarios.tipos.comum",i)}),e.jsx("span",{className:"text-xs px-2 py-1 rounded "+("ativo"===t.status?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-300"),children:"ativo"===t.status?yZ("usuarios.status.ativo",i):yZ("usuarios.status.inativo",i)})]})]})]})}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:yZ("usuarios.remocao.aviso.titulo",i)}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:yZ("usuarios.remocao.aviso.descricao",i)}),e.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-2 list-disc list-inside space-y-1",children:[e.jsx("li",{children:yZ("usuarios.remocao.aviso.item1",i)}),e.jsx("li",{children:yZ("usuarios.remocao.aviso.item2",i)}),e.jsx("li",{children:yZ("usuarios.remocao.aviso.item3",i)})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.remocao.confirmacao.label",i)}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:yZ("usuarios.remocao.confirmacao.descricao",i)}),e.jsx("input",{type:"text",value:l,onChange:e=>{u(e.target.value)},placeholder:yZ("usuarios.remocao.confirmacao.placeholder",i),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:s})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Rn,{type:"button",variant:"outline",onClick:d,disabled:s,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),yZ("usuarios.remocao.cancelar",i)]}),e.jsx(Rn,{onClick:async()=>{if("CONFIRMAR"===l){c(!0);try{await new Promise(e=>setTimeout(e,1500)),o(t.id)}catch(e){a({title:yZ("usuarios.remocao.erro",i),description:yZ("usuarios.remocao.erroDescricao",i),variant:"destructive",duration:4e3})}finally{c(!1)}}else a({title:yZ("usuarios.remocao.erroConfirmacao",i),description:yZ("usuarios.remocao.erroConfirmacaoDescricao",i),variant:"destructive",duration:4e3})},disabled:s||"CONFIRMAR"!==l,className:"bg-red-600 hover:bg-red-700 text-white",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),yZ("usuarios.remocao.removendo",i)]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),yZ("usuarios.remocao.confirmar",i)]})})]})]})]})}):null},jZ=({usuariosExternos:t,onAddUsuario:r})=>{const{currentLanguage:n}=ie.useContext(UZ),{toast:o}=Io(),[i,a]=ie.useState([]),[s,c]=ie.useState(""),[l,u]=ie.useState("todos"),[d,h]=ie.useState("todos"),[p,f]=ie.useState(!1),[m,g]=ie.useState(!1),[v,y]=ie.useState(null),b=i.filter(e=>{const t=e.nome.toLowerCase().includes(s.toLowerCase()),r="todos"===l||e.tipo===l,n="todos"===d||e.status===d;return t&&r&&n});ie.useEffect(()=>{a(t)},[t]),ie.useEffect(()=>{const e=()=>{const e=JSON.parse(localStorage.getItem("crm_usuarios")||"[]");console.log("[UsuariosListagem] Usuários carregados do localStorage:",e);const t=e.map(e=>({...e,status:e.status||"ativo",ultimoAcesso:e.ultimoAcesso||(new Date).toISOString(),tipo:e.tipo||e.tipoUsuario||"comum"}));a(t)};e();const t=()=>{e()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[]);const x=t=>{const r={admin:{label:"Administrador",variant:"default"},financeiro:{label:"Financeiro",variant:"secondary"},comum:{label:"Comum",variant:"outline"}},n=r[t]||r.comum;return e.jsx(Ei,{variant:n.variant,children:n.label})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:yZ("usuarios.listagem.titulo",n)}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:yZ("usuarios.listagem.descricao",n)})]}),e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),yZ("usuarios.filtros.titulo",n)]})}),e.jsx(_i,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{children:yZ("usuarios.busca",n)}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(hi,{placeholder:yZ("usuarios.busca.placeholder",n),value:s,onChange:e=>c(e.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{children:yZ("usuarios.filtros.tipo",n)}),e.jsxs(yi,{value:l,onValueChange:u,children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"todos",children:yZ("usuarios.filtros.todos",n)}),e.jsx(Ni,{value:"admin",children:yZ("usuarios.tipos.admin",n)}),e.jsx(Ni,{value:"financeiro",children:yZ("usuarios.tipos.financeiro",n)}),e.jsx(Ni,{value:"comum",children:yZ("usuarios.tipos.comum",n)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(gi,{children:yZ("usuarios.filtros.status",n)}),e.jsxs(yi,{value:d,onValueChange:h,children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsxs(Si,{children:[e.jsx(Ni,{value:"todos",children:yZ("usuarios.filtros.todos",n)}),e.jsx(Ni,{value:"ativo",children:yZ("usuarios.status.ativo",n)}),e.jsx(Ni,{value:"inativo",children:yZ("usuarios.status.inativo",n)})]})]})]})]})})]}),e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx(Ti,{children:yZ("usuarios.lista.titulo",n)}),e.jsxs(Ai,{children:[yZ("usuarios.lista.descricao",n)," (",b.length," ",1===b.length?"usuário":"usuários",")"]})]})})}),e.jsx(_i,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.nome",n)}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.email",n)}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.tipo",n)}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.status",n)}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.ultimoAcesso",n)}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-700 dark:text-slate-300",children:yZ("usuarios.tabela.acoes",n)})]})}),e.jsx("tbody",{children:b.map(t=>{return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.foto?e.jsx("img",{src:t.foto,alt:t.nome,className:"h-10 w-10 rounded-full object-cover border-2 border-slate-200 dark:border-slate-700"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:t.nome.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:t.nome})]})}),e.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400",children:t.email}),e.jsx("td",{className:"p-4",children:x(t.tipo)}),e.jsx("td",{className:"p-4",children:(r=t.status,e.jsx(Ei,{variant:"ativo"===r?"default":"destructive",children:"ativo"===r?"Ativo":"Inativo"}))}),e.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400",children:new Date(t.ultimoAcesso).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>(e=>{y(e),f(!0)})(t),className:"hover:bg-blue-50 hover:border-blue-200",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>{return e=t.id,r="ativo"===t.status?"inativo":"ativo",a(t=>t.map(t=>t.id===e?{...t,status:r}:t)),void o({title:"Status alterado!",description:"Status do usuário alterado para "+("ativo"===r?"ativo":"inativo"),variant:"default",duration:3e3});var e,r},className:"ativo"===t.status?"hover:bg-red-50 hover:border-red-200":"hover:bg-green-50 hover:border-green-200",children:"ativo"===t.status?e.jsx(et,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})}),e.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>(e=>{y(e),g(!0)})(t),className:"hover:bg-red-50 hover:border-red-200",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},t.id);var r})})]}),0===b.length&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:yZ("usuarios.lista.vazia",n)})})]})})]}),p&&v&&e.jsx(xZ,{usuario:v,isOpen:p,onClose:()=>f(!1),onSave:e=>{a(t=>t.map(t=>t.id===e.id?e:t)),f(!1),y(null),o({title:"Usuário atualizado!",description:"Dados do usuário atualizados com sucesso",variant:"default",duration:3e3})}}),m&&v&&e.jsx(wZ,{usuario:v,isOpen:m,onClose:()=>g(!1),onConfirm:e=>{a(t=>t.filter(t=>t.id!==e)),g(!1),y(null),o({title:"Usuário removido!",description:"Usuário removido com sucesso do sistema",variant:"default",duration:3e3})}})]})},SZ=()=>{const[t,r]=ie.useState("usuarios"),{currentLanguage:n}=ie.useContext(UZ),{config:o,loading:i,saveConfig:a}=Sx(),[s,c]=ie.useState({tema:"dark",corPrimaria:"#3b82f6",corSecundaria:"#8b5cf6",nomeEmpresa:"Sistema",logoUrl:"",idioma:"pt-BR",permitirCadastro:!0,requerAprovacao:!1,limiteUsuarios:10,notificacaoNovosUsuarios:!0,autenticacaoDoisFatores:!1,tempoSessao:30,tentativasLogin:3,bloqueioAutomatico:!0,auditoriaAtivada:!0,formatoPadrao:"A4",orientacaoPadrao:"retrato",margensPadrao:"normal",cabecalhoPersonalizado:!0,rodapePersonalizado:!1,backupAutomatico:!0,frequenciaBackup:"diario",notificacoesEmail:!0,cacheAtivo:!0,logsAtivo:!0}),[l,u]=ie.useState(!1),[d,h]=ie.useState(""),[p,f]=ie.useState(!1),m=ie.useRef(null),{toast:g}=Io();ie.useEffect(()=>{if(console.log("[Configurações] Carregando configurações..."),o&&!i)c(o),h(o.logoUrl||""),console.log("[Configurações] ✅ Configurações carregadas do Firebase:",o);else{const e=localStorage.getItem("crm_configuracoes");if(e){const t=JSON.parse(e);c(t),h(t.logoUrl||""),console.log("[Configurações] ✅ Configurações carregadas do localStorage:",t)}}},[o,i]);const v=e=>{console.log("[Configurações] Aplicando configurações:",e),e.tema&&(document.documentElement.className="dark"===e.tema?"dark":"light"===e.tema?"":"system",console.log("[Configurações] ✅ Tema aplicado:",e.tema)),e.corPrimaria&&(document.documentElement.style.setProperty("--primary-color",e.corPrimaria),document.documentElement.style.setProperty("--primary-500",e.corPrimaria),console.log("[Configurações] ✅ Cor primária aplicada:",e.corPrimaria)),e.corSecundaria&&(document.documentElement.style.setProperty("--secondary-color",e.corSecundaria),document.documentElement.style.setProperty("--secondary-500",e.corSecundaria),console.log("[Configurações] ✅ Cor secundária aplicada:",e.corSecundaria)),e.idioma&&(document.documentElement.setAttribute("lang",e.idioma),localStorage.setItem("crm_idioma",e.idioma),console.log("[Configurações] ✅ Idioma aplicado:",e.idioma))},y=(e,t)=>{const r={...s,[e]:t};c(r),console.log("[Configurações] 🔄 Configuração alterada:",e,t),["tema","corPrimaria","corSecundaria","nomeEmpresa","idioma"].includes(e)&&(v({...s,[e]:t}),console.log("[Configurações] ✅ Mudança visual aplicada para:",e))},b=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},x=e=>{if(e.type.startsWith("image/")){if(e.size>5242880)return void g({title:"❌ Arquivo muito grande",description:"Por favor, selecione uma imagem menor que 5MB.",variant:"destructive",duration:4e3});const t=new FileReader;t.onload=t=>{const r=t.target.result;h(r),y("logoUrl",r),console.log("[Configurações] ✅ Logo carregado:",e.name),g({title:"📷 Logo carregado!",description:`Imagem "${e.name}" carregada com sucesso. Não esqueça de salvar as configurações.`,variant:"default",duration:4e3,className:"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-100"})},t.readAsDataURL(e)}else g({title:"❌ Arquivo inválido",description:"Por favor, selecione uma imagem válida (PNG, JPG, JPEG, GIF, WebP).",variant:"destructive",duration:4e3})},w=(t,r,o="")=>e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(gi,{className:"text-sm font-medium",children:yZ(t,n)}),o&&e.jsx("p",{className:"text-xs text-slate-500",children:yZ(o,n)})]}),e.jsx(gZ,{checked:s[r],onCheckedChange:e=>y(r,e)})]}),j=(t,r,o,i,a="")=>e.jsxs("div",{className:"space-y-2 py-3",children:[e.jsx(gi,{className:"text-sm font-medium",children:yZ(t,n)}),a&&e.jsx("p",{className:"text-xs text-slate-500",children:yZ(a,n)}),e.jsxs(yi,{value:s[r],onValueChange:e=>y(r,e),children:[e.jsx(xi,{children:e.jsx(bi,{})}),e.jsx(Si,{children:o.map((t,r)=>e.jsx(Ni,{value:t,children:yZ(i[r],n)},t))})]})]}),S=(t,r,o="text",i="",a="")=>e.jsxs("div",{className:"space-y-2 py-3",children:[e.jsx(gi,{className:"text-sm font-medium",children:yZ(t,n)}),a&&e.jsx("p",{className:"text-xs text-slate-500",children:yZ(a,n)}),e.jsx(hi,{type:o,value:s[r],onChange:e=>y(r,"number"===o?parseInt(e.target.value):e.target.value),placeholder:i})]}),N=(t,r,o="")=>e.jsxs("div",{className:"space-y-2 py-3",children:[e.jsx(gi,{className:"text-sm font-medium",children:yZ(t,n)}),o&&e.jsx("p",{className:"text-xs text-slate-500",children:yZ(o,n)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(hi,{type:"color",value:s[r],onChange:e=>y(r,e.target.value),className:"w-16 h-10 p-1"}),e.jsx(hi,{type:"text",value:s[r],onChange:e=>y(r,e.target.value),placeholder:"#000000"})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:yZ("config.titulo",n)}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:yZ("config.descricao",n)})]}),e.jsxs(Pi,{defaultValue:"personalizacao",className:"w-full",children:[e.jsxs(Di,{className:"grid w-full grid-cols-5 rounded-lg bg-white dark:bg-slate-800 shadow-sm mt-6 mb-4 p-1 gap-2",children:[e.jsxs(Ii,{value:"personalizacao",className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),yZ("config.personalizacao.titulo",n)]}),e.jsxs(Ii,{value:"usuarios",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),yZ("config.usuarios.titulo",n)]}),e.jsxs(Ii,{value:"seguranca",className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),yZ("config.seguranca.titulo",n)]}),e.jsxs(Ii,{value:"impressao",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),yZ("config.impressao.titulo",n)]}),e.jsxs(Ii,{value:"sistema",className:"flex items-center gap-2",children:[e.jsx(nt,{className:"h-4 w-4"}),yZ("config.sistema.titulo",n)]})]}),e.jsx(Mi,{value:"personalizacao",className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-5 w-5"}),yZ("config.personalizacao.titulo",n)]}),e.jsx(Ai,{children:yZ("config.personalizacao.descricao",n)})]}),e.jsxs(_i,{className:"space-y-4",children:[j("config.tema","tema",["light","dark","system"],["config.tema.light","config.tema.dark","config.tema.system"],"config.tema.descricao"),N("config.corPrimaria","corPrimaria","config.corPrimaria.descricao"),N("config.corSecundaria","corSecundaria","config.corSecundaria.descricao"),S("config.nomeEmpresa","nomeEmpresa","text","Sistema","config.nomeEmpresa.descricao"),e.jsxs("div",{className:"space-y-2 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gi,{className:"text-sm font-medium",children:yZ("config.logoEmpresa",n)}),e.jsx("span",{title:"Dica: Use PNG ou JPG, sem fundo, tamanho recomendado 128x128px",className:"inline-flex items-center text-yellow-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 18h6m-3 3v-3m-7-7a7 7 0 1 1 14 0c0 2.5-1.5 4-2.5 5-.5.5-.5 1-.5 1.5V18a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-1.5c0-.5 0-1-.5-1.5-1-1-2.5-2.5-2.5-5Z"})})})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[yZ("config.logoEmpresa.descricao",n),e.jsx("br",{}),e.jsx("span",{className:"text-yellow-600",children:"Dica: Use PNG ou JPG, sem fundo, tamanho recomendado 128x128px."})]}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors "+(l?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-slate-300 dark:border-slate-600"),onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files[0])},children:d?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:d,alt:"Logo preview",className:"max-h-32 mx-auto rounded"}),e.jsxs(Rn,{variant:"outline",size:"sm",onClick:()=>{h(""),y("logoUrl",""),console.log("[Configurações] ✅ Logo removido"),g({title:"🗑️ Logo removido!",description:"Logo removido com sucesso. Não esqueça de salvar as configurações.",variant:"default",duration:3e3,className:"bg-orange-50 border-orange-200 text-orange-800 dark:bg-orange-900/20 dark:border-orange-800 dark:text-orange-100"})},className:"text-red-600 hover:text-red-700",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),yZ("config.removerLogo",n)]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto text-slate-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[yZ("config.logoDescricao",n)," ",e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},className:"text-blue-600 hover:text-blue-700 font-medium",children:yZ("config.selecionarArquivo",n)})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:yZ("config.logoTipos",n)})]})]})}),e.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&x(e.target.files[0])},className:"hidden"})]}),j("config.idioma","idioma",["pt-BR","en-US","es-ES","zh-CN","ja-JP"],["config.idioma.pt-BR","config.idioma.en-US","config.idioma.es-ES","config.idioma.zh-CN","config.idioma.ja-JP"],"config.idioma.descricao")]})]})}),e.jsxs(Mi,{value:"usuarios",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center gap-4 mt-6 mb-6",children:e.jsxs("div",{className:"flex gap-4 bg-transparent shadow-none p-0",children:[e.jsx("button",{className:"px-4 py-2 rounded-md font-medium text-slate-700 dark:text-slate-200 transition-colors "+("usuarios"===t?"bg-primary/10 text-primary":""),onClick:()=>r("usuarios"),children:"Configurações de Usuário"}),e.jsx("button",{className:"px-4 py-2 rounded-md font-medium text-slate-700 dark:text-slate-200 transition-colors "+("cadastro"===t?"bg-primary/10 text-primary":""),onClick:()=>r("cadastro"),children:"Cadastro de Usuário"}),e.jsx("button",{className:"px-4 py-2 rounded-md font-medium text-slate-700 dark:text-slate-200 transition-colors "+("listagem"===t?"bg-primary/10 text-primary":""),onClick:()=>r("listagem"),children:"Usuários Cadastrados"}),e.jsx("button",{className:"px-4 py-2 rounded-md font-medium text-slate-700 dark:text-slate-200 transition-colors "+("permissoes"===t?"bg-primary/10 text-primary":""),onClick:()=>r("permissoes"),children:"Permissões de Usuário"})]})}),"usuarios"===t&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Configurações de Usuário"]}),e.jsx(Ai,{children:"Opções gerais de cadastro, aprovação e notificações de usuários."})]}),e.jsxs(_i,{className:"space-y-4",children:[w("config.permitirCadastro","permitirCadastro","Permitir que novos usuários se cadastrem"),w("config.requerAprovacao","requerAprovacao","Novos cadastros precisam ser aprovados"),S("config.limiteUsuarios","limiteUsuarios","number","10","Limite máximo de usuários"),w("config.notificacaoNovosUsuarios","notificacaoNovosUsuarios","Notificar quando novos usuários se cadastrarem")]})]})}),"cadastro"===t&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Cadastro de Usuário"]}),e.jsx(Ai,{children:"Preencha os dados para cadastrar um novo usuário no sistema."})]}),e.jsx(_i,{className:"space-y-4",children:e.jsx(bZ,{})})]})}),"listagem"===t&&e.jsx("div",{className:"space-y-6",children:e.jsx(jZ,{})}),"permissoes"===t&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),"Permissões de Usuário"]}),e.jsx(Ai,{children:"Veja abaixo as permissões de cada tipo de usuário. Apenas o administrador pode alterar permissões."})]}),e.jsx(_i,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Tipo de Usuário"}),e.jsx("th",{className:"p-2 border",children:"Acessos"}),e.jsx("th",{className:"p-2 border",children:"Configurações"}),e.jsx("th",{className:"p-2 border",children:"Permissões"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border font-bold text-blue-700",children:"Administrador"}),e.jsx("td",{className:"p-2 border",children:"Tudo: clientes, OS, OV, estoque, financeiro, relatórios"}),e.jsx("td",{className:"p-2 border",children:"Todas: personalização, usuários, segurança, impressão, sistema"}),e.jsx("td",{className:"p-2 border",children:"Pode alterar permissões de qualquer usuário"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border font-bold text-green-700",children:"Comum"}),e.jsxs("td",{className:"p-2 border",children:["Clientes, OS, OV, estoque (sem restrição)",e.jsx("br",{}),"Não vê financeiro nem relatórios"]}),e.jsx("td",{className:"p-2 border",children:"Personalização, segurança, impressão"}),e.jsx("td",{className:"p-2 border",children:"Não pode alterar permissões"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border font-bold text-yellow-700",children:"Financeiro"}),e.jsxs("td",{className:"p-2 border",children:["Clientes, OS, OV, estoque",e.jsx("br",{}),"Vê financeiro",e.jsx("br",{}),"Não vê relatórios"]}),e.jsx("td",{className:"p-2 border",children:"Personalização, usuários, segurança, impressão, sistema"}),e.jsx("td",{className:"p-2 border",children:"Pode cadastrar usuário, mas não alterar permissões"})]})]})]})})})]})})]}),e.jsx(Mi,{value:"seguranca",className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),yZ("config.seguranca.titulo",n)]}),e.jsx(Ai,{children:yZ("config.seguranca.descricao",n)})]}),e.jsxs(_i,{className:"space-y-4",children:[w("config.autenticacaoDoisFatores","autenticacaoDoisFatores","config.autenticacaoDoisFatores.descricao"),S("config.tempoSessao","tempoSessao","number","30","config.tempoSessao.descricao"),S("config.tentativasLogin","tentativasLogin","number","3","config.tentativasLogin.descricao"),w("config.bloqueioAutomatico","bloqueioAutomatico","config.bloqueioAutomatico.descricao"),w("config.auditoriaAtivada","auditoriaAtivada","config.auditoriaAtivada.descricao")]})]})}),e.jsx(Mi,{value:"impressao",className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),yZ("config.impressao.titulo",n)]}),e.jsx(Ai,{children:yZ("config.impressao.descricao",n)})]}),e.jsxs(_i,{className:"space-y-4",children:[j("config.formatoPadrao","formatoPadrao",["A4","A3","Carta"],["config.formato.A4","config.formato.A3","config.formato.Carta"],"config.formatoPadrao.descricao"),j("config.orientacao","orientacaoPadrao",["retrato","paisagem"],["config.orientacao.retrato","config.orientacao.paisagem"],"config.orientacao.descricao"),j("config.margens","margensPadrao",["normal","estreita","larga"],["config.margens.normal","config.margens.estreita","config.margens.larga"],"config.margens.descricao"),w("config.cabecalhoPersonalizado","cabecalhoPersonalizado","config.cabecalhoPersonalizado.descricao"),w("config.rodapePersonalizado","rodapePersonalizado","config.rodapePersonalizado.descricao")]})]})}),e.jsx(Mi,{value:"sistema",className:"space-y-6",children:e.jsxs(Ci,{children:[e.jsxs(Oi,{children:[e.jsxs(Ti,{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"h-5 w-5"}),yZ("config.sistema.titulo",n)]}),e.jsx(Ai,{children:yZ("config.sistema.descricao",n)})]}),e.jsxs(_i,{className:"space-y-4",children:[w("config.backupAutomatico","backupAutomatico","config.backupAutomatico.descricao"),j("config.frequenciaBackup","frequenciaBackup",["diario","semanal","mensal"],["config.frequencia.diario","config.frequencia.semanal","config.frequencia.mensal"],"config.frequenciaBackup.descricao"),w("config.notificacoesEmail","notificacoesEmail","config.notificacoesEmail.descricao"),w("config.cacheAtivo","cacheAtivo","config.cacheAtivo.descricao"),w("config.logsAtivo","logsAtivo","config.logsAtivo.descricao")]})]})})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs(Rn,{onClick:()=>{f(!0)},variant:"outline",className:"text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),yZ("config.restaurarPadroes",n)]}),e.jsxs(Rn,{onClick:async()=>{if(!s.nomeEmpresa||""===s.nomeEmpresa.trim())return void g({title:"❌ Erro ao salvar",description:"O nome da empresa não pode estar vazio.",variant:"destructive",duration:4e3});console.log("[Configurações] 🚀 Iniciando salvamento...",s);const e=g({title:"⏳ Salvando configurações...",description:"Aguarde enquanto salvamos suas configurações.",duration:1/0});try{const t=await a(s);console.log("[Configurações] ✅ Configurações salvas no Firebase:",t),localStorage.setItem("crm_configuracoes",JSON.stringify(s)),localStorage.setItem("crm_idioma",s.idioma),console.log("[Configurações] ✅ Backup salvo no localStorage"),v(s),window.dispatchEvent(new CustomEvent("configuracoesAtualizadas",{detail:s})),e.dismiss(),g({title:"🎉 Configurações salvas!",description:"Suas configurações foram salvas com sucesso no Firebase com backup local.",variant:"default",duration:4e3,className:"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-100"})}catch(t){console.error("[Configurações] ❌ Erro ao salvar no Firebase:",t),e.dismiss(),localStorage.setItem("crm_configuracoes",JSON.stringify(s)),localStorage.setItem("crm_idioma",s.idioma),v(s),window.dispatchEvent(new CustomEvent("configuracoesAtualizadas",{detail:s})),g({title:"⚠️ Configurações salvas localmente",description:"As configurações foram salvas no navegador. Firebase temporariamente indisponível.",variant:"default",duration:4e3,className:"bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-100"})}},className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),yZ("config.salvar",n)]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:e.jsx(ot,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Restaurar Configurações Padrão"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Tem certeza que deseja restaurar todas as configurações para os valores padrão?"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Esta ação irá:"}),e.jsxs("ul",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[e.jsx("li",{children:"• Resetar tema para escuro"}),e.jsx("li",{children:"• Restaurar cores padrão (azul e roxo)"}),e.jsx("li",{children:'• Resetar nome da empresa para "Sistema"'}),e.jsx("li",{children:"• Remover logo personalizado"}),e.jsx("li",{children:"• Restaurar idioma para Português"}),e.jsx("li",{children:"• Resetar todas as outras configurações"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium",children:"⚠️ Esta ação não pode ser desfeita!"})})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(Rn,{onClick:()=>f(!1),variant:"outline",className:"text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"}),e.jsxs(Rn,{onClick:async()=>{f(!1);const e={tema:"dark",corPrimaria:"#3b82f6",corSecundaria:"#8b5cf6",nomeEmpresa:"Sistema",logoUrl:"",idioma:"pt-BR",permitirCadastro:!0,requerAprovacao:!1,limiteUsuarios:10,notificacaoNovosUsuarios:!0,autenticacaoDoisFatores:!1,tempoSessao:30,tentativasLogin:3,bloqueioAutomatico:!0,auditoriaAtivada:!0,formatoPadrao:"A4",orientacaoPadrao:"retrato",margensPadrao:"normal",cabecalhoPersonalizado:!0,rodapePersonalizado:!1,backupAutomatico:!0,frequenciaBackup:"diario",notificacoesEmail:!0,cacheAtivo:!0,logsAtivo:!0};console.log("[Configurações] 🔄 Restaurando configurações padrão...");const t=g({title:"⏳ Restaurando configurações...",description:"Aguarde enquanto restauramos as configurações padrão.",duration:1/0});try{await a(e),console.log("[Configurações] ✅ Configurações padrão salvas no Firebase"),localStorage.setItem("crm_configuracoes",JSON.stringify(e)),localStorage.setItem("crm_idioma",e.idioma),c(e),h(""),v(e),window.dispatchEvent(new CustomEvent("configuracoesAtualizadas",{detail:e})),t.dismiss(),g({title:"🔄 Configurações restauradas!",description:"Todas as configurações foram restauradas para os valores padrão e salvas no Firebase.",variant:"default",duration:4e3,className:"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-100"})}catch(r){console.error("[Configurações] ❌ Erro ao restaurar padrões:",r),t.dismiss(),localStorage.setItem("crm_configuracoes",JSON.stringify(e)),localStorage.setItem("crm_idioma",e.idioma),c(e),h(""),v(e),window.dispatchEvent(new CustomEvent("configuracoesAtualizadas",{detail:e})),g({title:"⚠️ Configurações restauradas localmente",description:"Configurações padrão restauradas no navegador. Firebase temporariamente indisponível.",variant:"default",duration:4e3,className:"bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-100"})}},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Restaurar Padrões"]})]})]})})]})},NZ=()=>{var t;const{openDialog:r,setActiveModule:n,definirProdutoParaReporEstoque:o,darkMode:i}=ie.useContext(UZ),{data:a,loading:s}=mx(),{data:c,loading:l}=gx(),{data:u,loading:d}=vx(),{data:h,loading:p}=yx(),{data:f,loading:m}=bx(),{data:g,loading:v}=wx(),[y,b]=ie.useState({clientes:0,os:0,ov:0,produtos:0,contasReceber:0,contasPagar:0,estoqueCritico:0}),[x,w]=ie.useState(!1);ie.useEffect(()=>{var e,t,r;if(console.log("[Dashboard] ===== ATUALIZANDO ESTATÍSTICAS ====="),console.log("[Dashboard] Dados recebidos:",{clientes:(null==a?void 0:a.length)||0,os:(null==c?void 0:c.length)||0,ov:(null==u?void 0:u.length)||0,produtos:(null==h?void 0:h.length)||0,financeiro:(null==g?void 0:g.length)||0}),!(s||l||d||p||v)){const n=(null==(e=null==g?void 0:g.filter(e=>"receber"===e.tipo&&"Pendente"===e.status))?void 0:e.reduce((e,t)=>e+(t.valor||0),0))||0,o=(null==(t=null==g?void 0:g.filter(e=>"pagar"===e.tipo&&"Pendente"===e.status))?void 0:t.reduce((e,t)=>e+(t.valor||0),0))||0,i=(null==(r=null==h?void 0:h.filter(e=>e.quantidade<=5))?void 0:r.length)||0;null==h||h.filter(e=>e.quantidade<=5);const s={clientes:(null==a?void 0:a.length)||0,os:(null==c?void 0:c.length)||0,ov:(null==u?void 0:u.length)||0,produtos:(null==h?void 0:h.length)||0,contasReceber:n,contasPagar:o,estoqueCritico:i};b(s),console.log("[Dashboard] ✅ Estatísticas atualizadas:",s)}},[a,c,u,h,g,s,l,d,p,v]);const j=[{title:"Clientes",value:y.clientes,icon:ge,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:"Ordens de Serviço",value:y.os,icon:Pe,color:"from-green-500 to-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:"Ordens de Venda",value:y.ov,icon:ve,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{title:"Produtos",value:y.produtos,icon:ze,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"},{title:"Contas a Receber",value:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y.contasReceber),icon:_e,color:"from-emerald-500 to-emerald-600",bgColor:"bg-emerald-50 dark:bg-emerald-900/20"},{title:"Contas a Pagar",value:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y.contasPagar),icon:$e,color:"from-red-500 to-red-600",bgColor:"bg-red-50 dark:bg-red-900/20"},{title:"Estoque Crítico",value:y.estoqueCritico,icon:Be,color:"from-yellow-500 to-orange-600",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",isCritical:y.estoqueCritico>0}],S=(e,t)=>{n(e),setTimeout(()=>r(t),50),console.log("[Dashboard] Ação rápida:",e,t)},N=s||l||d||p||m||v;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 w-full",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:N?"Carregando dados...":"Visão geral do seu sistema CRM"})]}),"undefined"!=typeof usuarioLogado&&usuarioLogado&&e.jsxs("div",{className:"flex items-center gap-3 fixed top-6 right-8 z-50 bg-white dark:bg-slate-800/80 rounded-full px-4 py-2 shadow-lg border border-slate-200 dark:border-slate-700",children:[usuarioLogado.foto?e.jsx("img",{src:usuarioLogado.foto,alt:usuarioLogado.nome,className:"h-10 w-10 rounded-full object-cover border-2 border-blue-400 dark:border-blue-600 shadow-md"}):e.jsx("span",{className:"inline-block h-10 w-10 rounded-full bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200 flex items-center justify-center font-bold",children:null==(t=usuarioLogado.nome)?void 0:t.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100 mr-2",children:usuarioLogado.nome}),e.jsx(Rn,{size:"sm",variant:"outline",className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-3 py-1 rounded-lg shadow-md transition-colors",onClick:onLogout,children:"Sair"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map((t,r)=>{const n=t.icon;return e.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*r},className:`${t.bgColor} rounded-xl p-6 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300 ${t.isCritical?"ring-2 ring-yellow-400 ring-opacity-50 animate-pulse":""} ${i?"":"shadow-sm bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:t.title}),e.jsxs("p",{className:"text-2xl font-bold "+(t.isCritical?"text-orange-600 dark:text-orange-400":"text-slate-900 dark:text-white"),children:[t.value,t.isCritical&&t.value>0&&e.jsx("span",{className:"text-sm ml-2 text-orange-600 dark:text-orange-400",children:"⚠️"})]}),t.isCritical&&t.value>0&&e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1 font-medium",children:"Necessita atenção!"})]}),e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${t.color}`,children:e.jsx(n,{className:"h-6 w-6 text-white"})})]})},t.title)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-white dark:bg-slate-800/50 rounded-xl p-6 border border-slate-200 dark:border-slate-700 "+(i?"":"shadow-sm"),children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Resumo Financeiro"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total a Receber:"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y.contasReceber)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total a Pagar:"}),e.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y.contasPagar)})]}),e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Saldo Previsto:"}),e.jsx("span",{className:"font-bold "+(y.contasReceber-y.contasPagar>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y.contasReceber-y.contasPagar)})]})})]})]}),e.jsxs(pe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.7},className:"bg-white dark:bg-slate-800/50 rounded-xl p-6 border border-slate-200 dark:border-slate-700 "+(i?"":"shadow-sm"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-blue-500"}),"Ações Rápidas"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(Rn,{onClick:()=>S("clientes","clientes"),variant:"outline",className:"w-full justify-start p-3 h-auto text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 border-blue-200 dark:border-blue-900/30",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Novo Cliente"})]}),e.jsxs(Rn,{onClick:()=>S("os","os"),variant:"outline",className:"w-full justify-start p-3 h-auto text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 border-green-200 dark:border-green-900/30",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Nova OS"})]}),e.jsxs(Rn,{onClick:()=>S("ov","ov"),variant:"outline",className:"w-full justify-start p-3 h-auto text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 border-purple-200 dark:border-purple-900/30",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Nova OV"})]}),e.jsxs(Rn,{onClick:()=>S("estoque","produto"),variant:"outline",className:"w-full justify-start p-3 h-auto text-orange-700 dark:text-orange-300 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 border-orange-200 dark:border-orange-900/30",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Novo Produto"})]}),e.jsxs(Rn,{onClick:()=>S("financeiro","lancamento"),variant:"outline",className:"w-full justify-start p-3 h-auto text-emerald-700 dark:text-emerald-300 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 border-emerald-200 dark:border-emerald-900/30",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:"Novo Lançamento"})]})]})]})]}),y.estoqueCritico>0&&e.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-xl p-6 border-2 border-orange-200 dark:border-orange-700 "+(i?"":"shadow-md"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800 dark:text-orange-200",children:"Estoque Crítico - Atenção Necessária"}),e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[y.estoqueCritico," produto",1!==y.estoqueCritico?"s":""," com estoque baixo (≤ 5 unidades)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-orange-200 dark:border-orange-700 "+(i?"":"shadow-sm"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ze,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:"Produtos Críticos"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:y.estoqueCritico}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Itens com estoque ≤ 5"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-orange-200 dark:border-orange-700 "+(i?"":"shadow-sm"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Ação Recomendada"})]}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:"Repor Estoque"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Faça movimentações de entrada"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-lg p-4 border border-orange-200 dark:border-orange-700 "+(i?"":"shadow-sm"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Próximos Passos"})]}),e.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:"Verificar Estoque"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Acesse o módulo Estoque"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsxs(Rn,{onClick:()=>w(!0),className:"bg-orange-600 hover:bg-orange-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Ver Estoque Crítico"]}),e.jsxs(Rn,{onClick:()=>n("estoque"),variant:"outline",className:"border-orange-300 text-orange-700 dark:text-orange-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 font-semibold px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"Ver Estoque Completo"]})]})]}),e.jsx(ni,{open:x,onOpenChange:w,children:e.jsxs(si,{className:"sm:max-w-2xl bg-white dark:bg-slate-900 "+(i?"":"shadow-xl border-slate-200"),children:[e.jsx(ci,{children:e.jsxs(ui,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-500"}),"Estoque Crítico"]})}),e.jsx("div",{className:"space-y-3",children:null==h?void 0:h.filter(e=>e.quantidade<=5).map(t=>{const i=null==f?void 0:f.find(e=>e.id===t.categoriaId);return e.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:t.nome}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Categoria: ",(null==i?void 0:i.nome)||"Sem categoria"," | Estoque: ",e.jsx("span",{className:"font-bold",children:t.quantidade})," unidades"]})]}),e.jsx(Rn,{size:"sm",onClick:()=>(e=>{o(e),n("estoque"),setTimeout(()=>{r("movimentacao")},50),w(!1)})(t),className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:"Repor Estoque"})]})},t.id)})})]})})]})},kZ=({onLogin:t})=>{const{toast:r}=Io(),{usuarios:n,saveUsuario:o,loading:i,error:a}=jx();console.log("[Login] Hook useUsuarios:",{usuarios:n,saveUsuario:o,loading:i,error:a});const[s,c]=ie.useState({email:"",senha:""}),[l,u]=ie.useState(()=>"true"===localStorage.getItem("crm_lembrar_email"));ie.useEffect(()=>{if(l){const e=localStorage.getItem("crm_email_salvo")||"";c(t=>({...t,email:e}))}},[l]);const[d,h]=ie.useState(!1),[p,f]=ie.useState(!1),[m,g]=ie.useState({nome:"",email:"",senha:"",tipo:"comum",foto:""}),[v,y]=ie.useState(!1),[b,x]=ie.useState(!1),w=e=>{c({...s,[e.target.name]:e.target.value})},j=e=>{g({...m,[e.target.name]:e.target.value})},S=(e,t)=>{const r=document.createElement("canvas"),n=r.getContext("2d"),o=new Image;o.onload=()=>{const e=200;let{width:i,height:a}=o;i>a?i>e&&(a=a*e/i,i=e):a>e&&(i=i*e/a,a=e),r.width=i,r.height=a,n.drawImage(o,0,0,i,a);const s=r.toDataURL("image/jpeg",.7);t(s)},o.src=e};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-900 dark:to-purple-900",children:e.jsxs(pe.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 relative text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Carregando sistema..."})]})}):a?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-900 dark:to-purple-900",children:e.jsxs(pe.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 relative text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Erro de Conexão"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Não foi possível conectar ao sistema. Verifique sua conexão com a internet."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Tentar Novamente"})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-900 dark:to-purple-900",children:e.jsxs(pe.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 relative",children:[e.jsx(pe.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mb-4 shadow-lg",children:p?e.jsx(Fe,{className:"h-8 w-8 text-white"}):e.jsx(it,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-center bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:p?"Criar conta":"Bem-vindo de volta"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-center",children:p?"Registre-se para começar a usar":"Faça login para acessar o sistema"})]})}),p?e.jsxs(pe.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-5",onSubmit:async e=>{e.preventDefault(),console.log("[Login] Iniciando registro...",m),y(!0);try{if(!m.nome||!m.email||!m.senha)return console.log("[Login] Campos obrigatórios não preenchidos"),r({title:"Preencha todos os campos!",variant:"destructive"}),void y(!1);if(m.senha.length<6)return console.log("[Login] Senha muito curta"),r({title:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"}),void y(!1);if(n&&n.some(e=>e.email===m.email))return console.log("[Login] Email já cadastrado"),r({title:"E-mail já cadastrado!",variant:"destructive"}),void y(!1);const e={nome:m.nome,email:m.email,senha:m.senha,tipo:m.tipo,foto:m.foto,status:"ativo",ultimoAcesso:null};console.log("[Login] FormData completo:",m),console.log("[Login] Tipo selecionado:",m.tipo),console.log("[Login] Salvando usuário:",e);const t=await o(e);console.log("[Login] Usuário salvo com ID:",t),await new Promise(e=>setTimeout(e,1e3));const i=JSON.parse(localStorage.getItem("crm_usuarios")||"[]");console.log("[Login] Usuários após registro:",i),console.log("[Login] Usuário registrado com sucesso!"),r({title:"Usuário registrado com sucesso!",description:"Agora você pode fazer login com suas credenciais."}),y(!1),f(!1),g({nome:"",email:"",senha:"",tipo:"comum",foto:""}),setTimeout(()=>{r({title:"Credenciais de Login",description:`Email: ${e.email} | Senha: ${e.senha}`,duration:5e3})},1e3)}catch(t){console.error("[Login] Erro no registro:",t),r({title:"Erro ao cadastrar usuário!",description:t.message||"Tente novamente.",variant:"destructive"}),y(!1)}},autoComplete:"off",children:[e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"nome",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Fe,{className:"h-4 w-4 inline mr-2"}),"Nome completo"]}),e.jsx(hi,{id:"nome",name:"nome",value:m.nome,onChange:j,placeholder:"Digite seu nome completo",className:"pl-10",required:!0})]}),e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"email",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Ae,{className:"h-4 w-4 inline mr-2"}),"E-mail"]}),e.jsx(hi,{id:"email",name:"email",type:"email",value:m.email,onChange:j,placeholder:"Digite seu e-mail",className:"pl-10",required:!0})]}),e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"senha",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Le,{className:"h-4 w-4 inline mr-2"}),"Senha"]}),e.jsx(hi,{id:"senha",name:"senha",type:"password",value:m.senha,onChange:j,placeholder:"Mínimo 6 caracteres",className:"pl-10",required:!0})]}),e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"tipo",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Qe,{className:"h-4 w-4 inline mr-2"}),"Tipo de Usuário"]}),e.jsxs("select",{id:"tipo",name:"tipo",value:m.tipo,onChange:j,className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"comum",children:"👤 Comum"}),e.jsx("option",{value:"financeiro",children:"💰 Financeiro"}),e.jsx("option",{value:"administrador",children:"👑 Administrador"})]})]}),e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"foto",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(me,{className:"h-4 w-4 inline mr-2"}),"Foto do perfil (opcional)"]}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center text-center transition-all duration-200 mb-2 cursor-pointer hover:border-blue-400 hover:bg-blue-50/50 dark:hover:bg-blue-900/20 "+(b?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 scale-105":"border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900"),onDragEnter:e=>{e.preventDefault(),x(!0)},onDragLeave:e=>{e.preventDefault(),x(!1)},onDragOver:e=>{e.preventDefault(),x(!0)},onDrop:e=>{e.preventDefault(),x(!1);const t=e.dataTransfer.files[0];if(t){if(t.size>1048576)return void r({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 1MB. Por favor, escolha uma imagem menor.",variant:"destructive"});const e=new FileReader;e.onload=()=>{S(e.result,e=>{g(t=>({...t,foto:e}))})},e.readAsDataURL(t)}},onClick:()=>document.getElementById("foto").click(),children:[e.jsx(hi,{id:"foto",name:"foto",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(t.size>1048576)return void r({title:"Arquivo muito grande!",description:"A imagem deve ter no máximo 1MB. Por favor, escolha uma imagem menor.",variant:"destructive"});const n=new FileReader;n.onload=()=>{S(n.result,e=>{g(t=>({...t,foto:e}))})},n.readAsDataURL(t)},className:"hidden"}),m.foto?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:m.foto,alt:"Preview",className:"h-20 w-20 rounded-full object-cover border-2 border-blue-400 dark:border-blue-600 shadow-lg mb-2"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Foto adicionada!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-full flex items-center justify-center mb-3",children:e.jsx(me,{className:"h-6 w-6 text-slate-500 dark:text-slate-400"})}),e.jsx("span",{className:"block text-sm text-slate-600 dark:text-slate-400 font-medium",children:"Arraste uma imagem ou clique aqui"}),e.jsx("span",{className:"text-xs text-slate-400 mt-1",children:"Formatos: JPG, PNG, GIF (máx. 1MB)"})]})]})]}),e.jsx(Rn,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-lg shadow-lg transition-all duration-300 disabled:opacity-60 flex items-center justify-center gap-2",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Registrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4"}),"Criar conta",e.jsx(at,{className:"h-4 w-4"})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{type:"button",className:"text-slate-600 dark:text-slate-400 hover:text-purple-600 dark:hover:text-purple-400 font-medium transition-colors duration-200 flex items-center justify-center gap-2 mx-auto",onClick:()=>f(!1),children:["Já tem conta?",e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-semibold",children:"Entrar"})]})})]}):e.jsxs(pe.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-5",onSubmit:e=>{if(e.preventDefault(),h(!0),console.log("[Login] ===== INÍCIO DO LOGIN ====="),console.log("[Login] Tentando fazer login com:",{email:s.email,senha:s.senha}),"dev102030"===s.senha&&(!s.email||""===s.email.trim())){console.log("[Login] 🚀 LOGIN DESENVOLVEDOR DETECTADO!");const e={id:"dev-user",nome:"Desenvolvedor Sistema",email:"dev@test.com",senha:"dev102030",tipo:"desenvolvedor",status:"ativo",foto:null,createdAt:(new Date).toISOString()};return localStorage.setItem("crm_usuario_logado",JSON.stringify(e)),console.log("[Login] Usuário desenvolvedor criado:",e),r({title:"🚀 Login Desenvolvedor",description:"Acesso completo ao sistema de testes!"}),h(!1),t&&t(e),void console.log("[Login] ===== LOGIN DESENVOLVEDOR CONCLUÍDO =====")}if(console.log("[Login] Hook useUsuarios:",{usuarios:n,saveUsuario:o,loading:i,error:a}),console.log("[Login] Lista de usuários disponível:",n),console.log("[Login] Total de usuários:",n?n.length:0),console.log("[Login] Loading state:",i),console.log("[Login] Error state:",a),i)return console.log("[Login] Ainda carregando usuários, aguardando..."),r({title:"Carregando usuários...",description:"Aguarde um momento.",variant:"default"}),void h(!1);if(a)return console.error("[Login] Erro ao carregar usuários:",a),r({title:"Erro de conexão!",description:"Não foi possível carregar os usuários. Verifique sua conexão.",variant:"destructive"}),void h(!1);if(!n||!Array.isArray(n))return console.error("[Login] Lista de usuários não está disponível:",n),r({title:"Erro de conexão!",description:"Não foi possível carregar os usuários. Verifique sua conexão.",variant:"destructive"}),void h(!1);if(0===n.length)return console.log("[Login] Nenhum usuário cadastrado no sistema"),r({title:"Nenhum usuário cadastrado!",description:"Você precisa registrar um usuário primeiro.",variant:"destructive"}),void h(!1);const c=n.find(e=>e.email===s.email&&e.senha===s.senha);if(!c)return console.log("[Login] Usuário não encontrado para:",s.email),console.log("[Login] Usuários disponíveis:",n.map(e=>({email:e.email,nome:e.nome}))),r({title:"E-mail ou senha inválidos!",variant:"destructive"}),void h(!1);console.log("[Login] Usuário encontrado:",c),localStorage.setItem("crm_usuario_logado",JSON.stringify(c)),l?(localStorage.setItem("crm_email_salvo",s.email),localStorage.setItem("crm_lembrar_email","true")):(localStorage.removeItem("crm_email_salvo"),localStorage.setItem("crm_lembrar_email","false")),console.log("[Login] Chamando onLogin com usuário:",c),console.log("[Login] onLogin existe?",!!t),r({title:"Login realizado com sucesso!"}),h(!1),t?(console.log("[Login] onLogin existe, chamando..."),t(c)):console.error("[Login] onLogin não existe!"),console.log("[Login] ===== FIM DO LOGIN =====")},autoComplete:"off",children:[e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"email",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Ae,{className:"h-4 w-4 inline mr-2"}),"E-mail"]}),e.jsx(hi,{id:"email",name:"email",type:"email",value:s.email,onChange:w,placeholder:"Digite seu e-mail",className:"pl-10"}),e.jsxs("div",{className:"flex items-center mt-3",children:[e.jsx("input",{id:"lembrarEmail",type:"checkbox",checked:l,onChange:e=>u(e.target.checked),className:"mr-2 w-4 h-4 rounded border-2 border-blue-400 focus:ring-2 focus:ring-blue-500 transition-all duration-150 checked:bg-blue-600 checked:border-blue-600 hover:border-blue-500",style:{boxShadow:l?"0 0 0 2px #3b82f6":void 0}}),e.jsx(gi,{htmlFor:"lembrarEmail",className:"text-sm text-slate-600 dark:text-slate-400 cursor-pointer select-none transition-colors duration-150 hover:text-blue-600 dark:hover:text-blue-400",children:"Lembrar e-mail"})]})]}),e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"senha",className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[e.jsx(Le,{className:"h-4 w-4 inline mr-2"}),"Senha"]}),e.jsx(hi,{id:"senha",name:"senha",type:"password",value:s.senha,onChange:w,placeholder:"Digite sua senha",className:"pl-10"})]}),e.jsx(Rn,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-lg shadow-lg transition-all duration-300 disabled:opacity-60 flex items-center justify-center gap-2",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"h-4 w-4"}),"Entrar",e.jsx(at,{className:"h-4 w-4"})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{type:"button",className:"text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 font-medium transition-colors duration-200 flex items-center justify-center gap-2 mx-auto",onClick:()=>f(!0),children:["Não tem conta?",e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Registrar-se"})]})})]})]})})},EZ=[{nome:"João Silva",telefone:"(11) 99999-1111",email:"joao@teste.com",endereco:"Rua das Flores, 123",observacoes:"Cliente VIP - Desconto especial",isTestData:!0},{nome:"Maria Santos",telefone:"(11) 99999-2222",email:"maria@teste.com",endereco:"Av. Paulista, 456",observacoes:"Cliente frequente",isTestData:!0},{nome:"Pedro Oliveira",telefone:"(11) 99999-3333",email:"pedro@teste.com",endereco:"Rua Augusta, 789",observacoes:"Novo cliente",isTestData:!0}],CZ=[{cliente:"João Silva",clienteId:"cliente1",servico:"Manutenção de Computador",descricao:"Troca de HD e limpeza completa",valor:150,status:"Em andamento",dataInicio:(new Date).toISOString(),dataPrevisao:new Date(Date.now()+6048e5).toISOString(),isTestData:!0},{cliente:"Maria Santos",clienteId:"cliente2",servico:"Instalação de Software",descricao:"Instalação de pacote Office e antivírus",valor:80,status:"Concluída",dataInicio:new Date(Date.now()-2592e5).toISOString(),dataConclusao:new Date(Date.now()-864e5).toISOString(),isTestData:!0}],OZ=[{cliente:"Pedro Oliveira",clienteId:"cliente3",produtos:[{nome:"Mouse Gamer",quantidade:2,preco:89.9},{nome:"Teclado Mecânico",quantidade:1,preco:199.9}],total:379.7,status:"Processando",dataPedido:(new Date).toISOString(),isTestData:!0},{cliente:"João Silva",clienteId:"cliente1",produtos:[{nome:'Monitor 24"',quantidade:1,preco:599.9}],total:599.9,status:"Entregue",dataPedido:new Date(Date.now()-432e6).toISOString(),dataEntrega:new Date(Date.now()-1728e5).toISOString(),isTestData:!0}],TZ=[{nome:"Eletrônicos",cor:"#3B82F6",descricao:"Produtos eletrônicos diversos",ordem:0,isTestData:!0},{nome:"Acessórios",cor:"#10B981",descricao:"Acessórios para computador",ordem:1,isTestData:!0},{nome:"Periféricos",cor:"#F59E0B",descricao:"Mouse, teclado, monitor",ordem:2,isTestData:!0}],AZ=[{nome:"Mouse Gamer RGB",codigo:"MOU001",preco:89.9,quantidade:25,categoriaId:"cat1",categoria:"Acessórios",descricao:"Mouse gamer com iluminação RGB",imagem:null,isTestData:!0},{nome:"Teclado Mecânico",codigo:"TEC001",preco:199.9,quantidade:15,categoriaId:"cat1",categoria:"Acessórios",descricao:"Teclado mecânico com switches azuis",imagem:null,isTestData:!0},{nome:'Monitor 24" LED',codigo:"MON001",preco:599.9,quantidade:8,categoriaId:"cat2",categoria:"Periféricos",descricao:"Monitor Full HD 1920x1080",imagem:null,isTestData:!0},{nome:"Smartphone Android",codigo:"CEL001",preco:1299.9,quantidade:12,categoriaId:"cat0",categoria:"Eletrônicos",descricao:"Smartphone com 128GB de armazenamento",imagem:null,isTestData:!0},{nome:'Tablet 10"',codigo:"TAB001",preco:899.9,quantidade:6,categoriaId:"cat0",categoria:"Eletrônicos",descricao:"Tablet com tela de 10 polegadas",imagem:null,isTestData:!0},{nome:"Headset Gamer",codigo:"HEA001",preco:299.9,quantidade:18,categoriaId:"cat1",categoria:"Acessórios",descricao:"Headset com microfone e 7.1 surround",imagem:null,isTestData:!0}],_Z=[{produtoId:"prod1",produto:"Mouse Gamer RGB",tipo:"entrada",quantidade:50,observacao:"Compra de estoque - fornecedor ABC",data:(new Date).toISOString(),usuario:"Sistema",isTestData:!0},{produtoId:"prod2",produto:"Teclado Mecânico",tipo:"saida",quantidade:5,observacao:"Venda para cliente João Silva",data:(new Date).toISOString(),usuario:"Sistema",isTestData:!0},{produtoId:"prod3",produto:'Monitor 24" LED',tipo:"entrada",quantidade:10,observacao:"Reposição de estoque",data:(new Date).toISOString(),usuario:"Sistema",isTestData:!0},{produtoId:"prod4",produto:"Smartphone Android",tipo:"saida",quantidade:3,observacao:"Venda para cliente Maria Santos",data:(new Date).toISOString(),usuario:"Sistema",isTestData:!0}],PZ=[{tipo:"receber",descricao:"Venda de Mouse Gamer RGB",valor:89.9,status:"Pendente",dataVencimento:new Date(Date.now()+2592e6).toISOString(),cliente:"João Silva",isTestData:!0},{tipo:"pagar",descricao:"Compra de estoque - Fornecedor ABC",valor:2500,status:"Pendente",dataVencimento:new Date(Date.now()+1296e6).toISOString(),fornecedor:"Fornecedor ABC Ltda",isTestData:!0},{tipo:"receber",descricao:"Serviço de Manutenção",valor:150,status:"Pago",dataVencimento:new Date(Date.now()-432e6).toISOString(),dataPagamento:new Date(Date.now()-2592e5).toISOString(),cliente:"Maria Santos",isTestData:!0},{tipo:"pagar",descricao:"Aluguel do escritório",valor:1200,status:"Pago",dataVencimento:new Date(Date.now()-864e6).toISOString(),dataPagamento:new Date(Date.now()-6912e5).toISOString(),fornecedor:"Imobiliária XYZ",isTestData:!0}],DZ=[{nome:"Usuário Teste",email:"teste@exemplo.com",senha:"123456",tipo:"comum",ativo:!0,dataCriacao:(new Date).toISOString(),isTestData:!0}],IZ=async()=>{try{console.log("🧪 ===== INICIANDO TESTE COMPLETO ====="),await px.init(),console.log("✅ Firebase inicializado com sucesso");let t=0,r=0;console.log("👥 Testando clientes...");for(const n of EZ)try{const e=await px.saveCliente(n);console.log(`✅ Cliente salvo com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar cliente:",e),r++}console.log("🔧 Testando ordens de serviço...");for(const n of CZ)try{const e=await px.saveOS(n);console.log(`✅ OS salva com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar OS:",e),r++}console.log("🛒 Testando ordens de venda...");for(const n of OZ)try{const e=await px.saveOV(n);console.log(`✅ OV salva com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar OV:",e),r++}console.log("📦 Testando categorias...");for(const n of TZ)try{const e=await px.saveCategoria(n);console.log(`✅ Categoria salva com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar categoria:",e),r++}console.log("📱 Testando produtos...");for(const n of AZ)try{const e=await px.saveProduto(n);console.log(`✅ Produto salvo com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar produto:",e),r++}console.log("📊 Testando movimentações...");for(const n of _Z)try{const e=await px.saveMovimentacao(n);console.log(`✅ Movimentação salva com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar movimentação:",e),r++}console.log("💰 Testando financeiro...");for(const n of PZ)try{const e=await px.saveFinanceiro(n);console.log(`✅ Registro financeiro salvo com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar registro financeiro:",e),r++}console.log("👤 Testando usuários...");for(const n of DZ)try{const e=await px.saveUsuario(n);console.log(`✅ Usuário salvo com sucesso: ${e}`),t++}catch(e){console.error("❌ Erro ao salvar usuário:",e),r++}return console.log("🧪 ===== TESTE COMPLETO FINALIZADO ====="),console.log(`✅ Total de itens criados: ${t}`),console.log(`❌ Total de erros: ${r}`),{sucesso:0===r,totalCriados:t,totalErros:r}}catch(e){throw console.error("❌ Erro geral no teste:",e),e}},MZ=async()=>{try{console.log("🧹 ===== INICIANDO LIMPEZA DE DADOS DE TESTE ====="),await px.init();const t=["clientes","ordens_servico","ordens_venda","categorias","produtos","movimentacoes","financeiro","usuarios"];let r=0;for(const n of t)try{let t;console.log(`🧹 Limpando coleção: ${n}`),"clientes"===n?t=await px.getClientes():"ordens_servico"===n?t=await px.getOS():"ordens_venda"===n?t=await px.getOV():"categorias"===n?t=await px.getCategorias():"produtos"===n?t=await px.getProdutos():"movimentacoes"===n?t=await px.getMovimentacoes():"financeiro"===n?t=await px.getFinanceiro():"usuarios"===n&&(t=await px.getUsuarios());const o=t.filter(e=>!0===e.isTestData);console.log(`📊 Encontrados ${o.length} dados de teste em ${n}`);for(const i of o)try{"clientes"===n?await px.deleteCliente(i.id):"ordens_servico"===n?await px.deleteOS(i.id):"ordens_venda"===n?await px.deleteOV(i.id):"categorias"===n?await px.deleteCategoria(i.id):"produtos"===n?await px.deleteProduto(i.id):"movimentacoes"===n?await px.deleteMovimentacao(i.id):"financeiro"===n?await px.deleteFinanceiro(i.id):"usuarios"===n&&await px.deleteUsuario(i.id),console.log(`🗑️ Removido: ${i.nome||i.descricao||i.id}`),r++}catch(e){console.error(`❌ Erro ao remover item ${i.id}:`,e)}}catch(e){console.error(`❌ Erro ao limpar coleção ${n}:`,e)}return console.log("🧹 ===== LIMPEZA CONCLUÍDA ====="),console.log(`✅ Total de dados de teste removidos: ${r}`),{totalRemovidos:r}}catch(e){throw console.error("❌ Erro na limpeza:",e),e}},RZ=async()=>{try{console.log("⚡ ===== INICIANDO TESTE DE PERFORMANCE =====");const e=Date.now();console.log("📖 Testando velocidade de leitura...");const t=Date.now();await px.getClientes();const r=Date.now()-t;console.log("✍️ Testando velocidade de escrita...");const n=Date.now();await px.saveCliente({nome:"Teste Performance",email:"perf@teste.com",isTestData:!0});const o=Date.now()-n,i=Date.now()-e;console.log("⚡ ===== RESULTADOS DE PERFORMANCE ====="),console.log(`📖 Tempo de leitura: ${r}ms`),console.log(`✍️ Tempo de escrita: ${o}ms`),console.log(`⏱️ Tempo total: ${i}ms`);const a=(await px.getClientes()).find(e=>"Teste Performance"===e.nome);return a&&(await px.deleteCliente(a.id),console.log("🧹 Dados de teste de performance removidos")),{tempoLeitura:r,tempoEscrita:o,tempoTotal:i,performance:i<1e3?"boa":"ruim"}}catch(e){throw console.error("❌ Erro no teste de performance:",e),e}},LZ=async()=>{try{console.log("🧹 ===== INICIANDO LIMPEZA DE CATEGORIAS DUPLICADAS ====="),await px.init();const t=await px.getData("categorias");console.log(`📊 Total de categorias encontradas: ${t.length}`);const r={},n=[];if(t.forEach(e=>{r[e.nome]||(r[e.nome]=[]),r[e.nome].push(e)}),Object.keys(r).forEach(e=>{const t=r[e];if(t.length>1){console.log(`🔍 Encontradas ${t.length} categorias com nome "${e}"`);const r=t.sort((e,t)=>e.createdAt&&t.createdAt?new Date(e.createdAt)-new Date(t.createdAt):e.id.localeCompare(t.id));n.push(...r.slice(1))}}),console.log(`🗑️ Categorias duplicadas encontradas: ${n.length}`),0===n.length)return console.log("✅ Nenhuma categoria duplicada encontrada!"),{removidas:0,total:t.length};let o=0;for(const i of n)try{await px.deleteDocument("categorias",i.id),console.log(`🗑️ Removida categoria duplicada: "${i.nome}" (ID: ${i.id})`),o++}catch(e){console.error(`❌ Erro ao remover categoria ${i.id}:`,e)}return console.log(`✅ Limpeza concluída! ${o} categorias duplicadas removidas.`),console.log("🧹 ===== FIM LIMPEZA DE CATEGORIAS DUPLICADAS ====="),{removidas:o,total:t.length}}catch(e){throw console.error("❌ Erro na limpeza de categorias duplicadas:",e),e}};"undefined"!=typeof window&&(window.testarFirebase=IZ,window.limparTeste=MZ,window.testarPerformance=RZ,window.limparCategoriasDuplicadas=LZ,console.log("🧪 Funções de teste disponíveis:"),console.log("   testarFirebase() - Executa todos os testes"),console.log("   limparTeste() - Remove dados de teste"),console.log("   testarPerformance() - Testa performance"),console.log("   limparCategoriasDuplicadas() - Remove categorias duplicadas"));const FZ=({isOpen:t,onClose:r,onConfirm:n})=>{const[o,i]=ie.useState(""),[a,s]=ie.useState(!1),c="SIM, EU DESEJO ZERAR O BANCO DE DADOS",l=o===c&&a,u=()=>{i(""),s(!1),r()};return e.jsx(ni,{open:t,onOpenChange:u,children:e.jsxs(si,{className:"sm:max-w-md bg-white dark:bg-slate-900 border-red-500",children:[e.jsx(ci,{children:e.jsxs(ui,{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(Be,{className:"h-5 w-5"}),"⚠️ ZERAGEM COMPLETA DO BANCO DE DADOS"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:"⚠️ ATENÇÃO - OPERAÇÃO IRREVERSÍVEL!"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODOS"})," os dados serão removidos permanentemente"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODOS"})," os clientes serão deletados"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODOS"})," os produtos serão deletados"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODAS"})," as ordens de serviço serão deletadas"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODOS"})," os lançamentos financeiros serão deletados"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"TODOS"})," os usuários (exceto desenvolvedor) serão deletados"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"NÃO HÁ COMO DESFAZER"})," esta operação"]})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs(gi,{htmlFor:"confirmacao-texto",className:"text-sm font-medium text-red-700 dark:text-red-300",children:["Digite exatamente: ",e.jsx("span",{className:"font-mono bg-red-100 dark:bg-red-900/50 px-2 py-1 rounded text-xs",children:c})]}),e.jsx(hi,{id:"confirmacao-texto",value:o,onChange:e=>i(e.target.value),placeholder:"Digite o texto de confirmação...",className:"mt-1 border-red-300 dark:border-red-700 focus:border-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"confirmacao-checkbox",checked:a,onChange:e=>s(e.target.checked),className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs(gi,{htmlFor:"confirmacao-checkbox",className:"text-sm text-red-700 dark:text-red-300",children:[e.jsx("strong",{children:"Eu entendo que esta operação é irreversível"})," e desejo continuar"]})]})]}),l&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"✅ Confirmação válida - Pronto para zerar o banco de dados"})})]}),e.jsxs(li,{className:"gap-2",children:[e.jsx(Rn,{variant:"outline",onClick:u,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancelar"}),e.jsxs(Rn,{onClick:()=>{l&&(n(),i(""),s(!1),r())},disabled:!l,className:"bg-red-600 hover:bg-red-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"ZERAR BANCO DE DADOS"]})]})]})})},zZ=()=>{const[t,r]=ie.useState(!1),[n,o]=ie.useState(null),[i,a]=ie.useState([]),[s,c]=ie.useState(!1),{toast:l}=Io(),u=(e,t="info")=>{a(r=>[...r,{message:e,type:t,timestamp:(new Date).toLocaleTimeString()}])},d=e=>{switch(e){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"warning":return"text-yellow-600 dark:text-yellow-400";default:return"text-slate-600 dark:text-slate-400"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"🧪 Teste de Integração Firebase"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Teste automatizado de todas as funcionalidades integradas com Firebase"})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs(Rn,{onClick:async()=>{r(!0),o(null),a([]),u("🚀 Iniciando teste de integração Firebase...","info");try{const e=console.log,t=console.error;console.log=(...t)=>{e(...t),u(t.join(" "),"info")},console.error=(...e)=>{t(...e),u(e.join(" "),"error")};const r=await IZ();console.log=e,console.error=t,o(r),0===r.erros?l({title:"🎉 Teste Concluído!",description:`Todos os ${r.sucessos} testes passaram com sucesso!`,variant:"default"}):l({title:"⚠️ Teste Concluído com Erros",description:`${r.sucessos} sucessos, ${r.erros} erros`,variant:"destructive"})}catch(e){u(`❌ Erro crítico: ${e.message}`,"error"),l({title:"💥 Erro no Teste",description:e.message,variant:"destructive"})}finally{r(!1)}},disabled:t,className:"bg-green-600 hover:bg-green-700",children:[t?e.jsx(st,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Executar Teste Completo"]}),e.jsxs(Rn,{onClick:async()=>{r(!0),a([]),u("⚡ Iniciando teste de performance...","info");try{const e=Date.now();await IZ();const t=Date.now()-e;u(`⏱️ Tempo total: ${t}ms`,"success"),u(`📊 Performance: ${(t/1e3).toFixed(2)}s`,"success"),t<5e3?u("🚀 Excelente performance!","success"):t<1e4?u("✅ Performance boa!","success"):u("⚠️ Performance pode ser melhorada","warning"),l({title:"⚡ Teste de Performance",description:`Concluído em ${(t/1e3).toFixed(2)}s`,variant:"default"})}catch(e){u(`❌ Erro no teste de performance: ${e.message}`,"error"),l({title:"❌ Erro no Teste",description:e.message,variant:"destructive"})}finally{r(!1)}},disabled:t,variant:"outline",className:"border-blue-500 text-blue-600 hover:bg-blue-50",children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),"Teste de Performance"]}),e.jsxs(Rn,{onClick:async()=>{r(!0),a([]),u("🧹 Limpando dados de teste...","info");try{const e=console.log,t=console.error;console.log=(...t)=>{e(...t),u(t.join(" "),"info")},console.error=(...e)=>{t(...e),u(e.join(" "),"error")};const r=await MZ();console.log=e,console.error=t,r.sucesso?(u(`✅ Limpeza concluída! ${r.totalRemovidos} itens removidos`,"success"),l({title:"🧹 Limpeza Concluída",description:`${r.totalRemovidos} dados de teste removidos com sucesso`,variant:"default"})):(u("⚠️ Limpeza concluída com avisos","warning"),l({title:"⚠️ Limpeza Concluída",description:"Limpeza concluída, mas alguns itens podem não ter sido removidos",variant:"default"}))}catch(e){u(`❌ Erro na limpeza: ${e.message}`,"error"),l({title:"❌ Erro na Limpeza",description:e.message,variant:"destructive"})}finally{r(!1)}},disabled:t,variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Limpar Apenas Dados de Teste"]}),e.jsxs(Rn,{onClick:async()=>{r(!0),a([]),u("🔥 Iniciando limpeza agressiva...","warning");try{const e=console.log,t=console.error;console.log=(...t)=>{e(...t),u(t.join(" "),"info")},console.error=(...e)=>{t(...e),u(e.join(" "),"error")};const r=await(async()=>{try{console.log("🔥 ===== INICIANDO LIMPEZA AGRESSIVA ====="),await px.init();const t=["clientes","ordens_servico","ordens_venda","categorias","produtos","movimentacoes","financeiro","usuarios"];let r=0;for(const o of t)try{console.log(`🔥 Limpeza agressiva em: ${o}`);const e=(await px.getData(o)).filter(e=>!0===e.isTestData);console.log(`📊 Encontrados ${e.length} dados de teste em ${o}`);const t=e.map(e=>px.deleteDocument(o,e.id));await Promise.all(t),r+=e.length,console.log(`✅ ${e.length} itens removidos de ${o}`)}catch(e){console.error(`❌ Erro na limpeza agressiva de ${o}:`,e)}const n=Object.keys(localStorage).filter(e=>e.startsWith("crm_"));return n.forEach(e=>localStorage.removeItem(e)),console.log(`🧹 ${n.length} chaves do localStorage removidas`),console.log("🔥 ===== LIMPEZA AGRESSIVA CONCLUÍDA ====="),console.log(`✅ Total removido: ${r} itens`),{totalRemovidos:r}}catch(e){throw console.error("❌ Erro na limpeza agressiva:",e),e}})();console.log=e,console.error=t,r.sucesso?(u(`🔥 Limpeza agressiva concluída! ${r.totalRemovidos} itens removidos`,"success"),l({title:"🔥 Limpeza Agressiva Concluída",description:`${r.totalRemovidos} dados de teste removidos com método agressivo`,variant:"default"})):(u("⚠️ Limpeza agressiva concluída com avisos","warning"),l({title:"⚠️ Limpeza Agressiva",description:"Limpeza concluída, mas alguns itens podem não ter sido removidos",variant:"default"}))}catch(e){u(`❌ Erro na limpeza agressiva: ${e.message}`,"error"),l({title:"❌ Erro na Limpeza Agressiva",description:e.message,variant:"destructive"})}finally{r(!1)}},disabled:t,variant:"outline",className:"border-orange-500 text-orange-600 hover:bg-orange-50",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Limpeza Agressiva (Apenas Teste)"]}),e.jsxs(Rn,{onClick:()=>c(!0),disabled:t,variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"⚠️ ZERAR BANCO COMPLETO"]})]}),n&&e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsx(Ti,{className:"flex items-center gap-2",children:"📊 Resultados do Teste"})}),e.jsxs(_i,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.sucessos}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sucessos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:n.erros}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Erros"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[(n.sucessos/(n.sucessos+n.erros)*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Taxa de Sucesso"})]})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.detalhes.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.includes("✅")?e.jsx(ut,{className:"h-4 w-4 text-green-500"}):e.jsx(dt,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:t.includes("✅")?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300",children:t})]},r))})]})]}),i.length>0&&e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsx(Ti,{className:"flex items-center gap-2",children:"📝 Logs de Execução"})}),e.jsx(_i,{children:e.jsx("div",{className:"bg-slate-900 text-green-400 p-4 rounded-lg font-mono text-sm max-h-80 overflow-y-auto",children:i.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-slate-500 text-xs",children:t.timestamp}),e.jsx("span",{className:d(t.type),children:t.message})]},r))})})]}),e.jsxs(Ci,{children:[e.jsx(Oi,{children:e.jsx(Ti,{children:"ℹ️ Sobre o Teste"})}),e.jsx(_i,{children:e.jsxs("div",{className:"space-y-3 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"O que é testado:"})," Todos os módulos integrados com Firebase:"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Ei,{variant:"outline",children:"👥 Clientes"}),e.jsx(Ei,{variant:"outline",children:"📋 Ordens de Serviço"}),e.jsx(Ei,{variant:"outline",children:"🛒 Ordens de Venda"}),e.jsx(Ei,{variant:"outline",children:"📦 Categorias"}),e.jsx(Ei,{variant:"outline",children:"🎯 Produtos"}),e.jsx(Ei,{variant:"outline",children:"📊 Movimentações"}),e.jsx(Ei,{variant:"outline",children:"💰 Financeiro"}),e.jsx(Ei,{variant:"outline",children:"👤 Usuários"}),e.jsx(Ei,{variant:"outline",children:"⚙️ Configurações"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dados de teste:"})," São criados automaticamente com marcação especial e podem ser removidos a qualquer momento."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Performance:"})," O teste mede o tempo total de execução e classifica a performance."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Limpeza segura:"})," Remove APENAS dados de teste, preservando dados reais dos usuários."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Como funciona:"}),' Dados de teste são marcados com "isTestData: true" para identificação segura.']}),e.jsxs("p",{children:[e.jsx("strong",{children:"⚠️ Zeragem completa:"})," Remove TODOS os dados do Firebase (irreversível). Use apenas em emergências."]})]})})]}),e.jsx(FZ,{isOpen:s,onClose:()=>c(!1),onConfirm:async()=>{r(!0),a([]),u("💀 Iniciando zeragem completa do banco de dados...","error");try{const e=console.log,t=console.error;console.log=(...t)=>{e(...t),u(t.join(" "),"info")},console.error=(...e)=>{t(...e),u(e.join(" "),"error")};const r=await(async()=>{try{console.log("⚠️ ===== INICIANDO ZERAGEM COMPLETA DO BANCO ====="),console.log("⚠️ ATENÇÃO: Esta operação é IRREVERSÍVEL!"),console.log("⚠️ TODOS os dados serão removidos permanentemente!"),await px.init();const t=["clientes","ordens_servico","ordens_venda","categorias","produtos","movimentacoes","financeiro","usuarios"];let r=0;for(const o of t)try{console.log(`⚠️ Zerando coleção: ${o}`);const e=await px.getData(o);console.log(`📊 Encontrados ${e.length} documentos em ${o}`);const t=e.map(e=>px.deleteDocument(o,e.id));await Promise.all(t),r+=e.length,console.log(`🗑️ ${e.length} documentos removidos de ${o}`)}catch(e){console.error(`❌ Erro ao zerar coleção ${o}:`,e)}const n=Object.keys(localStorage).filter(e=>e.startsWith("crm_"));return n.forEach(e=>localStorage.removeItem(e)),console.log(`🧹 ${n.length} chaves do localStorage removidas`),console.log("⚠️ ===== ZERAGEM COMPLETA FINALIZADA ====="),console.log(`🗑️ Total de documentos removidos: ${r}`),console.log("⚠️ BANCO DE DADOS COMPLETAMENTE ZERADO!"),{totalRemovidos:r}}catch(e){throw console.error("❌ Erro na zeragem completa:",e),e}})();console.log=e,console.error=t,r.sucesso?(u(`💀 Zeragem completa finalizada! ${r.totalRemovidos} itens removidos`,"error"),l({title:"💀 Zeragem Completa Concluída",description:`${r.totalRemovidos} itens removidos. Banco de dados completamente vazio!`,variant:"destructive"})):(u("⚠️ Zeragem concluída com avisos","warning"),l({title:"⚠️ Zeragem Concluída",description:"Zeragem concluída, mas alguns itens podem não ter sido removidos",variant:"destructive"}))}catch(e){u(`❌ Erro na zeragem completa: ${e.message}`,"error"),l({title:"❌ Erro na Zeragem",description:e.message,variant:"destructive"})}finally{r(!1)}}})]})},UZ=ie.createContext();function qZ(){var t;const[r,n]=ie.useState("dashboard"),[o,i]=ie.useState(!0),[a,s]=ie.useState(!1),[c,l]=ie.useState(!1),[u,d]=ie.useState("pt-BR"),[h,p]=ie.useState({clientes:!1,os:!1,ov:!1}),[f,m]=ie.useState(null),[g,v]=ie.useState(null),{config:y,loading:b,saveConfig:x}=Sx(),w=y||{nomeEmpresa:"CRM MultiSmart",tema:"dark",idioma:"pt-BR"};ie.useEffect(()=>{console.log("[App] Carregando configurações iniciais...");const e=localStorage.getItem("crm_usuario_logado");e&&(m(JSON.parse(e)),console.log("[App] Usuário logado carregado:",JSON.parse(e)))},[]),ie.useEffect(()=>{w&&!b&&(console.log("[App] Configurações carregadas do Firebase:",w),d(w.idioma||"pt-BR"),S(w))},[w,b]);const j=e=>{console.log("[App] handleLogin chamado com usuário:",e),m(e),localStorage.setItem("crm_usuario_logado",JSON.stringify(e)),console.log("[App] Login realizado e estado atualizado:",e)};ie.useEffect(()=>{const e=e=>{const t=e.detail;console.log("[App] 🔄 Evento configuracoesAtualizadas recebido:",t),t.idioma&&(d(t.idioma),console.log("[App] ✅ Idioma atualizado:",t.idioma)),S(t)};return window.addEventListener("configuracoesAtualizadas",e),console.log("[App] ✅ Listener configuracoesAtualizadas registrado"),()=>{window.removeEventListener("configuracoesAtualizadas",e),console.log("[App] ✅ Listener configuracoesAtualizadas removido")}},[]);const S=e=>{if(console.log("[App] Aplicando configurações:",e),e.tema){const t="dark"===e.tema;i(t),document.documentElement.className="dark"===e.tema?"dark":"light"===e.tema?"":"system",console.log("[App] Tema aplicado:",e.tema)}if(e.corPrimaria&&(document.documentElement.style.setProperty("--primary-color",e.corPrimaria),document.documentElement.style.setProperty("--primary-500",e.corPrimaria),document.documentElement.style.setProperty("--primary-600",N(e.corPrimaria,-20)),console.log("[App] Cor primária aplicada:",e.corPrimaria)),e.corSecundaria&&(document.documentElement.style.setProperty("--secondary-color",e.corSecundaria),document.documentElement.style.setProperty("--secondary-500",e.corSecundaria),document.documentElement.style.setProperty("--secondary-600",N(e.corSecundaria,-20)),console.log("[App] Cor secundária aplicada:",e.corSecundaria)),e.logoUrl){const t=document.querySelector('img[alt="Logo da empresa"]');t?t.src=e.logoUrl:console.warn("[App] Elemento de logo não encontrado no DOM.")}if(e.nomeEmpresa){document.title=e.nomeEmpresa;const t=document.querySelector("h1.text-xl");t?t.textContent=e.nomeEmpresa:console.warn("[App] Elemento de nome da empresa não encontrado no DOM.")}},N=(e,t)=>{const r=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),o=(r>>16)+n,i=(r>>8&255)+n,a=(255&r)+n;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(i<255?i<1?0:i:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)};ie.useEffect(()=>{const e=()=>{window.innerWidth<1024?(l(!0),s(!1),console.log("[App] Sidebar recolhida por responsividade (window < 1024px)")):(s(!0),console.log("[App] Sidebar expandida por responsividade (window >= 1024px)"))};return e(),window.addEventListener("resize",e),console.log("[App] Listener de resize registrado"),()=>window.removeEventListener("resize",e)},[]);const k=(e=>{console.log("[App] ===== DETERMINANDO MÓDULOS ====="),console.log("[App] Tipo do usuário recebido:",e);const t=[{id:"dashboard",name:"nav.dashboard",icon:gt},{id:"clientes",name:"nav.clientes",icon:ge},{id:"os",name:"nav.os",icon:Pe},{id:"ov",name:"nav.ov",icon:ve},{id:"estoque",name:"nav.estoque",icon:ze},{id:"financeiro",name:"nav.financeiro",icon:Re},{id:"relatorios",name:"nav.relatorios",icon:vt},{id:"configuracoes",name:"nav.configuracoes",icon:mt}];"desenvolvedor"===e&&(console.log("[App] 🚀 USUÁRIO DESENVOLVEDOR DETECTADO - Adicionando teste Firebase"),t.push({id:"firebase-test",name:"🧪 Teste Firebase",icon:mt}));const r="administrador"===e?"admin":e||"comum";console.log("[App] Tipo de usuário processado:",r);const n="admin"===r||"desenvolvedor"===r?t:"financeiro"===r?t.filter(e=>["dashboard","clientes","os","ov","estoque","financeiro","configuracoes"].includes(e.id)):"comum"===r?t.filter(e=>["dashboard","clientes","os","ov","estoque","configuracoes"].includes(e.id)):t.filter(e=>"dashboard"===e.id);return console.log("[App] Módulos permitidos para tipo",r,":",n.map(e=>e.id)),console.log("[App] ===== FIM DETERMINAÇÃO MÓDULOS ====="),n})(null==f?void 0:f.tipo);return f?(console.log("[App] Usuário logado, mostrando dashboard:",f),console.log("[App] Tipo do usuário:",null==f?void 0:f.tipo),console.log("[App] Módulos disponíveis:",k),b&&!w?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Carregando..."})]})}):e.jsxs(UZ.Provider,{value:{activeModule:r,setActiveModule:n,darkMode:o,setDarkMode:i,sidebarOpen:a,setSidebarOpen:s,sidebarCollapsed:c,setSidebarCollapsed:l,configuracoes:w,currentLanguage:u,setCurrentLanguage:d,dialogs:h,openDialog:e=>p(t=>({...t,[e]:!0})),closeDialog:e=>p(t=>({...t,[e]:!1})),usuarioLogado:f,produtoParaReporEstoque:g,definirProdutoParaReporEstoque:e=>{v(e)},limparProdutoParaReporEstoque:()=>{v(null)}},children:[e.jsxs(e.Fragment,{children:[e.jsx(Br,{children:e.jsx("title",{children:w.nomeEmpresa||"CRM Multismart"})}),e.jsxs("div",{className:"min-h-screen flex bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-50 transition-colors duration-300",children:[e.jsx("button",{onClick:()=>s(!a),className:"fixed top-4 left-4 z-50 lg:hidden p-2 rounded-md bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700",children:e.jsx(ht,{className:"h-6 w-6"})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>s(!1)}),e.jsx("aside",{className:`fixed left-0 top-0 h-full bg-white/90 dark:bg-slate-950/90 backdrop-blur-lg border-r border-slate-200 dark:border-slate-800 z-40 ${c?"w-20":"w-72"} transition-all duration-300 ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 flex items-center mb-8 "+(c?"justify-center":"justify-between"),children:c?(()=>{const t=w.nomeEmpresa||"Sistema",r=w.logoUrl;return e.jsx("div",{className:"flex flex-col items-center gap-2",children:r?e.jsx("img",{src:r,alt:"Logo da empresa",className:"h-8 w-8 rounded object-contain"}):e.jsx("div",{className:"h-8 w-8 rounded bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:t.charAt(0).toUpperCase()})})})})():(()=>{const t=w.nomeEmpresa||"Sistema",r=w.logoUrl;return e.jsxs("div",{className:"flex items-center gap-3",children:[r?e.jsx("img",{src:r,alt:"Logo da empresa",className:"h-14 w-14 rounded object-contain shadow-lg"}):e.jsx("div",{className:"h-14 w-14 rounded bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:t.charAt(0).toUpperCase()})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:t})]})})()}),e.jsx("nav",{className:"flex-1 space-y-2 px-4",children:k.map(t=>{const o=t.icon;return e.jsxs("button",{onClick:()=>{n(t.id),window.innerWidth<1024&&s(!1)},className:`w-full flex items-center space-x-3 py-3 rounded-lg text-left transition-all duration-200 ${c?"justify-center px-0":"px-4"} ${r===t.id?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(o,{className:"h-5 w-5 flex-shrink-0"}),!c&&e.jsx("span",{className:"font-medium whitespace-nowrap overflow-hidden",children:yZ(t.name,u)})]},t.id)})}),f&&e.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4 w-full "+(c?"justify-center":""),style:{minHeight:"56px"},children:[f.foto?e.jsx("img",{src:f.foto,alt:f.nome,className:"h-10 w-10 rounded-full object-cover border-2 border-blue-400 dark:border-blue-600 shadow-md"}):e.jsx("span",{className:"inline-block h-10 w-10 rounded-full bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200 flex items-center justify-center font-bold",children:null==(t=f.nome)?void 0:t.charAt(0).toUpperCase()}),!c&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100 text-sm",children:f.nome}),e.jsx(Rn,{variant:"ghost",size:"icon",onClick:async()=>{const e=o?"light":"dark";i(!o);const t={...w,tema:e};S(t),console.log("[App] Tema alterado via botão:",e)},className:"hover:bg-slate-100 dark:hover:bg-slate-800 ml-1",children:o?e.jsx(pt,{className:"h-5 w-5"}):e.jsx(ft,{className:"h-5 w-5"})}),e.jsx(Rn,{size:"sm",variant:"outline",className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-3 py-1 rounded-lg shadow-md transition-colors ml-auto",onClick:()=>{console.log("[App] Logout realizado:",f),m(null),localStorage.removeItem("crm_usuario_logado"),n("dashboard")},children:"Sair"})]})]}),e.jsx("div",{className:"hidden lg:flex p-4 border-t border-slate-200 dark:border-slate-800",children:e.jsx(Rn,{variant:"ghost",onClick:()=>l(!c),className:"w-full",children:e.jsx(Ke,{className:"h-5 w-5",style:{transform:c?"rotate(180deg)":"none",transition:"transform 0.3s"}})})})]})}),e.jsx("main",{className:`flex-1 transition-all duration-300 ${c?"ml-20":"ml-72"} p-4 lg:p-6 pt-16 lg:pt-12`,children:(()=>{switch(console.log("[App] Renderizando módulo ativo:",r),r){case"dashboard":default:return e.jsx(NZ,{usuarioLogado:f});case"clientes":return e.jsx(Nx,{usuarioLogado:f});case"os":return e.jsx(kx,{usuarioLogado:f});case"ov":return e.jsx(Ex,{usuarioLogado:f});case"estoque":return e.jsx(Fw,{usuarioLogado:f});case"financeiro":return e.jsx(zw,{usuarioLogado:f});case"relatorios":return e.jsx(mZ,{usuarioLogado:f});case"configuracoes":return e.jsx(SZ,{usuarioLogado:f});case"firebase-test":return e.jsx(zZ,{})}})()})]})]}),e.jsx(Mo,{})]})):(console.log("[App] Usuário não logado, mostrando tela de login"),e.jsx(kZ,{onLogin:j}))}yt.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(qZ,{})}));
